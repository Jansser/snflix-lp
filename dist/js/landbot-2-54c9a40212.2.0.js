!function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=125)}([function(e,t,n){"use strict";function u(){}function r(e,t){var n,r,i,o,a=m;for(o=arguments.length;2<o--;)d.push(arguments[o]);for(t&&null!=t.children&&(d.length||d.push(t.children),delete t.children);d.length;)if((r=d.pop())&&void 0!==r.pop)for(o=r.length;o--;)d.push(r[o]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(i=!1)),i&&n?a[a.length-1]+=r:a===m?a=[r]:a.push(r),n=i;var s=new u;return s.nodeName=e,s.children=a,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==F.vnode&&F.vnode(s),s}function S(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t){return r(e.nodeName,S(S({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}function o(e){!e._dirty&&(e._dirty=!0)&&1==g.push(e)&&(F.debounceRendering||v)(a)}function a(){var e,t=g;for(g=[];e=t.pop();)e._dirty&&j(e)}function E(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function O(e){var t=S({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function T(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===y.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,l,a):e.removeEventListener(t,l,a),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)(function(e,t,n){try{e[t]=n}catch(e){}})(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var s=i&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function l(e){return this._listeners[e.type](F.event&&F.event(e)||e)}function N(){for(var e;e=L.pop();)F.afterMount&&F.afterMount(e),e.componentDidMount&&e.componentDidMount()}function P(e,t,n,r,i,o){U++||(b=null!=i&&void 0!==i.ownerSVGElement,_=null!=e&&!("__preactattr_"in e));var a=I(e,t,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--U||(_=!1,o||N()),a}function I(e,t,n,r,i){var o=e,a=b;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),A(e,!0))),o.__preactattr_=!0,o;var s=t.nodeName;if("function"==typeof s)return function(e,t,n,r){for(var i=e&&e._component,o=i,a=e,s=i&&e._componentConstructor===t.nodeName,u=s,l=O(t);i&&!u&&(i=i._parentComponent);)u=i.constructor===t.nodeName;return i&&u&&(!r||i._component)?(M(i,l,3,n,r),e=i.base):(o&&!s&&(R(o),e=a=null),i=D(t.nodeName,l,n),e&&!i.nextBase&&(i.nextBase=e,a=null),M(i,l,1,n,r),e=i.base,a&&e!==a&&(a._component=null,A(a,!1))),e}(e,t,n,r);if(b="svg"===s||"foreignObject"!==s&&b,s=String(s),(!e||!E(e,s))&&(o=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(s,b),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),A(e,!0)}var u=o.firstChild,l=o.__preactattr_,c=t.children;if(null==l){l=o.__preactattr_={};for(var h=o.attributes,f=h.length;f--;)l[h[f].name]=h[f].value}return!_&&c&&1===c.length&&"string"==typeof c[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=c[0]&&(u.nodeValue=c[0]):(c&&c.length||null!=u)&&function(e,t,n,r,i){var o,a,s,u,l,c=e.childNodes,h=[],f={},p=0,d=0,m=c.length,v=0,y=t?t.length:0;if(0!==m)for(var g=0;g<m;g++){var b=c[g],_=b.__preactattr_,w=y&&_?b._component?b._component.__key:_.key:null;null!=w?(p++,f[w]=b):(_||(void 0!==b.splitText?!i||b.nodeValue.trim():i))&&(h[v++]=b)}if(0!==y)for(var g=0;g<y;g++){u=t[g],l=null;var w=u.key;if(null!=w)p&&void 0!==f[w]&&(l=f[w],f[w]=void 0,p--);else if(!l&&d<v)for(o=d;o<v;o++)if(void 0!==h[o]&&(k=a=h[o],C=i,"string"==typeof(x=u)||"number"==typeof x?void 0!==k.splitText:"string"==typeof x.nodeName?!k._componentConstructor&&E(k,x.nodeName):C||k._componentConstructor===x.nodeName)){l=a,h[o]=void 0,o===v-1&&v--,o===d&&d++;break}l=I(l,u,n,r),s=c[g],l&&l!==e&&l!==s&&(null==s?e.appendChild(l):l===s.nextSibling?T(s):e.insertBefore(l,s))}var k,x,C;if(p)for(var g in f)void 0!==f[g]&&A(f[g],!1);for(;d<=v;)void 0!==(l=h[v--])&&A(l,!1)}(o,c,n,r,_||null!=l.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||p(e,r,n[r],n[r]=void 0,b);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||p(e,r,n[r],n[r]=t[r],b)}(o,t.attributes,l),b=a,o}function A(e,t){var n=e._component;n?R(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||T(e),s(e))}function s(e){for(e=e.lastChild;e;){var t=e.previousSibling;A(e,!0),e=t}}function D(e,t,n){var r,i=w[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),h.call(r,t,n)):((r=new h(t,n)).constructor=e,r.render=c),i)for(var o=i.length;o--;)if(i[o].constructor===e){r.nextBase=i[o].nextBase,i.splice(o,1);break}return r}function c(e,t,n){return this.constructor(e,n)}function M(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===F.syncComponentUpdates&&e.base?o(e):j(e,1,i)),e.__ref&&e.__ref(e))}function j(e,t,n,r){if(!e._disable){var i,o,a,s=e.props,u=e.state,l=e.context,c=e.prevProps||s,h=e.prevState||u,f=e.prevContext||l,p=e.base,d=e.nextBase,m=p||d,v=e._component,y=!1;if(p&&(e.props=c,e.state=h,e.context=f,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,u,l)?y=!0:e.componentWillUpdate&&e.componentWillUpdate(s,u,l),e.props=s,e.state=u,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!y){i=e.render(s,u,l),e.getChildContext&&(l=S(S({},l),e.getChildContext()));var g,b,_=i&&i.nodeName;if("function"==typeof _){var w=O(i);(o=v)&&o.constructor===_&&w.key==o.__key?M(o,w,1,l,!1):(g=o,e._component=o=D(_,w,l),o.nextBase=o.nextBase||d,o._parentComponent=e,M(o,w,0,l,!1),j(o,1,n,!0)),b=o.base}else a=m,(g=v)&&(a=e._component=null),(m||1===t)&&(a&&(a._component=null),b=P(a,i,l,n||!p,m&&m.parentNode,!0));if(m&&b!==m&&o!==v){var k=m.parentNode;k&&b!==k&&(k.replaceChild(b,m),g||(m._component=null,A(m,!1)))}if(g&&R(g),(e.base=b)&&!r){for(var x=e,C=e;C=C._parentComponent;)(x=C).base=b;b._component=x,b._componentConstructor=x.constructor}}if(!p||n?L.unshift(e):y||(e.componentDidUpdate&&e.componentDidUpdate(c,h,f),F.afterUpdate&&F.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);U||r||N()}}function R(e){F.beforeUnmount&&F.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?R(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),T(e.nextBase=t),function(e){var t=e.constructor.name;(w[t]||(w[t]=[])).push(e)}(e),s(t)),e.__ref&&e.__ref(null)}function h(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function f(e,t,n){return P(n,e,{},!1,t,!1)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"h",function(){return r}),n.d(t,"createElement",function(){return r}),n.d(t,"cloneElement",function(){return i}),n.d(t,"Component",function(){return h}),n.d(t,"render",function(){return f}),n.d(t,"rerender",function(){return a}),n.d(t,"options",function(){return F});var F={},d=[],m=[],v="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,y=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,g=[],L=[],U=0,b=!1,_=!1,w={};S(h.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=S({},n)),S(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),j(this,2)},render:function(){}});var k={h:r,createElement:r,cloneElement:i,Component:h,render:f,rerender:a,options:F};t.default=k},function(e,t,n){"use strict";var o=n(13),a=n(190),r=n(60),i=n(192),s=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,i=a.toSubscriber(e,t,n);if(r?r.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},n.prototype.forEach=function(r,e){var i=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,t){var n;n=i.subscribe(function(e){if(n)try{r(e)}catch(e){t(e),n.unsubscribe()}else r(e)},t,e)})},n.prototype._subscribe=function(e){return this.source.subscribe(e)},n.prototype[r.observable]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:i.pipeFromArray(e)(this)},n.prototype.toPromise=function(e){var r=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();t.Observable=s},function(e,be,_e){"use strict";Object.defineProperty(be,"__esModule",{value:!0}),function(e){function t(){}function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function w(){}function a(a){var e,t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,s=void 0===o?"connectAdvanced":o,u=n.renderCountProp,l=void 0===u?void 0:u,c=n.shouldHandleStateChanges,h=void 0===c||c,f=n.storeKey,p=void 0===f?"store":f,d=n.withRef,m=void 0!==d&&d,v=I(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),y=p+"Subscription",g=K++,b=((e={})[p]=O,e[y]=E,e),_=((t={})[y]=E,t);return function(t){q("function"==typeof t,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(t));var e=t.displayName||t.name||"Component",o=i(e),n=N({},v,{getDisplayName:i,methodName:s,renderCountProp:l,shouldHandleStateChanges:h,storeKey:p,withRef:m,displayName:o,wrappedComponentName:e,WrappedComponent:t}),r=function(r){function i(e,t){T(this,i);var n=A(this,r.call(this,e,t));return n.version=g,n.state={},n.renderCount=0,n.store=e[p]||t[p],n.propsMode=Boolean(e[p]),n.setWrappedInstance=n.setWrappedInstance.bind(n),q(n.store,'Could not find "'+p+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+p+'" as a prop to "'+o+'".'),n.initSelector(),n.initSubscription(),n}return P(i,r),i.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[y]=t||this.context[y],e},i.prototype.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},i.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},i.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},i.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=w,this.store=null,this.selector.run=w,this.selector.shouldComponentUpdate=!1},i.prototype.getWrappedInstance=function(){return q(m,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+s+"() call."),this.wrappedInstance},i.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},i.prototype.initSelector=function(){var e=a(this.store.dispatch,n);this.selector=function(n,r){var i={run:function(e){try{var t=n(r.getState(),e);(t!==i.props||i.error)&&(i.shouldComponentUpdate=!0,i.props=t,i.error=null)}catch(e){i.shouldComponentUpdate=!0,i.error=e}}};return i}(e,this.store),this.selector.run(this.props)},i.prototype.initSubscription=function(){if(h){var e=(this.propsMode?this.props:this.context)[y];this.subscription=new G(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},i.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(Y)):this.notifyNestedSubs()},i.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},i.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},i.prototype.addExtraProps=function(e){if(!(m||l||this.propsMode&&this.subscription))return e;var t=N({},e);return m&&(t.ref=this.setWrappedInstance),l&&(t[l]=this.renderCount++),this.propsMode&&this.subscription&&(t[y]=this.subscription),t},i.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(k.h)(t,this.addExtraProps(e.props))},i}(k.Component);return r.WrappedComponent=t,r.displayName=o,r.childContextTypes=_,r.contextTypes=b,r.prototype.componentWillUpdate=function(){var t=this;if(this.version!==g){this.version=g,this.initSelector();var e=[];this.subscription&&(e=this.subscription.listeners.get(),this.subscription.tryUnsubscribe()),this.initSubscription(),h&&(this.subscription.trySubscribe(),e.forEach(function(e){return t.subscription.listeners.subscribe(e)}))}},B(r,t)}}function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function x(e,t){if(o(e,t))return!0;if("object"!==(void 0===e?"undefined":_(e))||null===e||"object"!==(void 0===t?"undefined":_(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Q.call(t,n[i])||!o(e[n[i]],t[n[i]]))return!1;return!0}function i(e){return null==e?void 0===e?oe:ie:ae&&ae in Object(e)?function(e){var t=ee.call(e,ne),n=e[ne];try{var r=!(e[ne]=void 0)}catch(e){}var i=te.call(e);return r&&(t?e[ne]=n:delete e[ne]),i}(e):function(e){return re.call(e)}(e)}function s(e){if(!function(e){return null!=e&&"object"==(void 0===e?"undefined":_(e))}(e)||i(e)!=ue)return!1;var t=se(e);if(null===t)return!0;var n=fe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&he.call(n)==pe}function c(e,t,n){s(e)||r(n+"() in "+t+" must return a plain object. Instead received "+e+".")}function n(i){return function(e,t){function n(){return r}var r=i(e,t);return n.dependsOnOwnProps=!1,n}}function u(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function l(o,a){return function(e,t){var r=t.displayName,i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)};return i.dependsOnOwnProps=!0,i.mapToProps=function(e,t){i.mapToProps=o,i.dependsOnOwnProps=u(o);var n=i(e,t);return"function"==typeof n&&(i.mapToProps=n,i.dependsOnOwnProps=u(n),n=i(e,t)),c(n,r,a),n},i}}function h(e,t,n){return N({},n,e,t)}function f(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||r("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}function p(i,o,a,s,e){function n(e,t){var n=!l(t,f),r=!u(e,h);return h=e,f=t,n&&r?(p=i(h,f),o.dependsOnOwnProps&&(d=o(s,f)),m=a(p,d,f)):n?(i.dependsOnOwnProps&&(p=i(h,f)),o.dependsOnOwnProps&&(d=o(s,f)),m=a(p,d,f)):r?function(){var e=i(h,f),t=!c(e,p);return p=e,t&&(m=a(p,d,f)),m}():m}var u=e.areStatesEqual,l=e.areOwnPropsEqual,c=e.areStatePropsEqual,r=!1,h=void 0,f=void 0,p=void 0,d=void 0,m=void 0;return function(e,t){return r?n(e,t):function(e,t){return p=i(h=e,f=t),d=o(s,f),m=a(p,d,f),r=!0,m}(e,t)}}function d(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=I(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return function(e,t,n,r){f(e,"mapStateToProps",r),f(t,"mapDispatchToProps",r),f(n,"mergeProps",r)}(a,s,u,o.displayName),(o.pure?p:function(n,r,i,o){return function(e,t){return i(n(e,t),r(o,t),t)}})(a,s,u,e,o)}function C(n,e,r){for(var t=e.length-1;0<=t;t--){var i=e[t](n);if(i)return i}return function(e,t){throw new Error("Invalid value of type "+(void 0===n?"undefined":_(n))+" for "+r+" argument when connecting component "+t.wrappedComponentName+".")}}function S(e,t){return e===t}_e.d(be,"Provider",function(){return M}),_e.d(be,"connect",function(){return ye}),_e.d(be,"connectAdvanced",function(){return a});var m,v,k=_e(0),y=_e(86),g=function(e){return e&&e[0]||null},b={element:t.isRequired=t,func:t,shape:function(){return t},instanceOf:function(){return t}},E=b.shape({trySubscribe:b.func.isRequired,tryUnsubscribe:b.func.isRequired,notifyNestedSubs:b.func.isRequired,isSubscribed:b.func.isRequired}),O=b.shape({subscribe:b.func.isRequired,dispatch:b.func.isRequired,getState:b.func.isRequired}),_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},I=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},A=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},D=!1,M=function(){var e,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"store",t=arguments[1]||o+"Subscription",n=function(r){function i(e,t){T(this,i);var n=A(this,r.call(this,e,t));return n[o]=e.store,n}return P(i,r),i.prototype.getChildContext=function(){var e;return(e={})[o]=this[o],e[t]=null,e},i.prototype.render=function(){return g(this.props.children)},i}(k.Component);return n.prototype.componentWillReceiveProps=function(e){this[o]!==e.store&&(D||(D=!0,r("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/reactjs/react-redux/releases/tag/v2.0.0 for the migration instructions.")))},n.childContextTypes=((e={})[o]=O.isRequired,e[t]=E,e),n}(),j={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},R={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},F=Object.defineProperty,L=Object.getOwnPropertyNames,U=Object.getOwnPropertySymbols,V=Object.getOwnPropertyDescriptor,H=Object.getPrototypeOf,W=H&&H(Object),B=function e(t,n,r){if("string"==typeof n)return t;if(W){var i=H(n);i&&i!==W&&e(t,i,r)}var o=L(n);U&&(o=o.concat(U(n)));for(var a=0;a<o.length;++a){var s=o[a];if(!(j[s]||R[s]||r&&r[s])){var u=V(n,s);try{F(t,s,u)}catch(e){}}}return t},q=function(){},z={notify:function(){}},G=function(){function r(e,t,n){T(this,r),this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=z}return r.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},r.prototype.notifyNestedSubs=function(){this.listeners.notify()},r.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},r.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var n=[],r=[];return{clear:function(){n=r=null},notify:function(){for(var e=n=r,t=0;t<e.length;t++)e[t]()},get:function(){return r},subscribe:function(e){var t=!0;return r===n&&(r=n.slice()),r.push(e),function(){t&&null!==n&&(t=!1,r===n&&(r=n.slice()),r.splice(r.indexOf(e),1))}}}}())},r.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=z)},r}(),K=0,Y={},Q=Object.prototype.hasOwnProperty,$="object"==(void 0===e?"undefined":_(e))&&e&&e.Object===Object&&e,X="object"==("undefined"==typeof self?"undefined":_(self))&&self&&self.Object===Object&&self,J=($||X||Function("return this")()).Symbol,Z=Object.prototype,ee=Z.hasOwnProperty,te=Z.toString,ne=J?J.toStringTag:void 0,re=Object.prototype.toString,ie="[object Null]",oe="[object Undefined]",ae=J?J.toStringTag:void 0,se=(m=Object.getPrototypeOf,v=Object,function(e){return m(v(e))}),ue="[object Object]",le=Function.prototype,ce=Object.prototype,he=le.toString,fe=ce.hasOwnProperty,pe=he.call(Object),de=[function(e){return"function"==typeof e?l(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:n(function(e){return{dispatch:e}})},function(t){return t&&"object"===(void 0===t?"undefined":_(t))?n(function(e){return Object(y.bindActionCreators)(t,e)}):void 0}],me=[function(e){return"function"==typeof e?l(e,"mapStateToProps"):void 0},function(e){return e?void 0:n(function(){return{}})}],ve=[function(e){return"function"==typeof e?function(l){return function(e,t){var i=t.displayName,o=t.pure,a=t.areMergedPropsEqual,s=!1,u=void 0;return function(e,t,n){var r=l(e,t,n);return s?o&&a(r,u)||(u=r):(s=!0,c(u=r,i,"mergeProps")),u}}}(e):void 0},function(e){return e?void 0:function(){return h}}],ye=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,g=void 0===t?a:t,n=e.mapStateToPropsFactories,b=void 0===n?me:n,r=e.mapDispatchToPropsFactories,_=void 0===r?de:r,i=e.mergePropsFactories,w=void 0===i?ve:i,o=e.selectorFactory,k=void 0===o?d:o;return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=r.pure,o=void 0===i||i,a=r.areStatesEqual,s=void 0===a?S:a,u=r.areOwnPropsEqual,l=void 0===u?x:u,c=r.areStatePropsEqual,h=void 0===c?x:c,f=r.areMergedPropsEqual,p=void 0===f?x:f,d=I(r,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),m=C(e,b,"mapStateToProps"),v=C(t,_,"mapDispatchToProps"),y=C(n,w,"mergeProps");return g(k,N({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:m,initMapDispatchToProps:v,initMergeProps:y,pure:o,areStatesEqual:s,areOwnPropsEqual:l,areStatePropsEqual:h,areMergedPropsEqual:p},d))}}(),ge={Provider:M,connect:ye,connectAdvanced:a};be.default=ge}.call(be,_e(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(166),o=new((r=i)&&r.__esModule?r:{default:r}).default;o.setMaxListeners(0),window.ee=o,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=n(251),a=(r=o)&&r.__esModule?r:{default:r},s={DOMVirtualizer:function(e){if(e instanceof Node==0)return null;switch(e.nodeName){case"#text":return e.textContent;case"SPAN":return(0,i.h)("span",{className:e.className},e.textContent);case"A":return(0,i.h)("a",{className:e.className,href:e.href,target:"_blank"},e.textContent);case"DIV":return(0,i.h)("div",{className:e.className,dangerouslySetInnerHTML:{__html:e.innerHTML}});case"BR":return(0,i.h)("br",null)}},getVirtualDOM:function(e){var t=document.createElement("p"),n=a.default.transform(t,e||"");return n?n.map(s.DOMVirtualizer):""},getComputedStyle:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return getComputedStyle(e)||{width:"auto",height:"auto"}}),getElementsByTagName:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"script",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("div");return a.default.transform(n,t),n.getElementsByTagName(e)},getScriptsFromText:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"script",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("div");return n.innerHTML=t,n.getElementsByTagName(e)}};t.default=s},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(57),r=n(18),u=n(98),a=n(59),i=function(r){function i(e,t,n){switch(r.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!e){this.destination=u.empty;break}if("object"==typeof e){e instanceof i?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}return o(i,r),i.prototype[a.rxSubscriber]=function(){return this},i.create=function(e,t,n){var r=new i(e,t,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},i}(r.Subscription),l=function(a){function e(e,t,n,r){a.call(this),this._parentSubscriber=e;var i,o=this;s.isFunction(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==u.empty&&(o=Object.create(t),s.isFunction(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=r}return o(e,a),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},e.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(t.Subscriber=i)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(Nl,Ol){var Pl;Pl=function(){return this}();try{Pl=Pl||Function("return this")()||eval("this")}catch(Nl){"object"==typeof window&&(Pl=window)}Nl.exports=Pl},function(K,e,t){(function(e){function t(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function n(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(e,t){for(var n=e.length;n--;)if((r=e[n][0])===(i=t)||r!=r&&i!=i)return n;var r,i;return-1}function o(e,t){for(var n=0,r=(t=function(e,t){if(G(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!f(e))||k.test(e)||!w.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return G(e)?e:z(e)}(t)).length;null!=e&&n<r;)e=e[l(t[n++])];return n&&n==r?e:void 0}function a(e){return!(!h(e)||function(e){return!!M&&M in e}(e))&&(function(e){var t=h(e)?F.call(e):"";return t==g||t==b}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?L:E).test(function(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function s(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function u(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return a(n)?n:void 0}function l(e){if("string"==typeof e||f(e))return e;var t=e+"";return"0"==t&&1/e==-y?"-0":t}function c(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new TypeError(m);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return a.cache=n.set(t,r),r};return a.cache=new(c.Cache||r),a}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&F.call(e)==_}function p(e){return null==e?"":function(e){if("string"==typeof e)return e;if(f(e))return q?q.call(e):"";var t=e+"";return"0"==t&&1/e==-y?"-0":t}(e)}var d,m="Expected a function",v="__lodash_hash_undefined__",y=1/0,g="[object Function]",b="[object GeneratorFunction]",_="[object Symbol]",w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/,x=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,O="object"==typeof e&&e&&e.Object===Object&&e,T="object"==typeof self&&self&&self.Object===Object&&self,N=O||T||Function("return this")(),P=Array.prototype,I=Function.prototype,A=Object.prototype,D=N["__core-js_shared__"],M=(d=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",j=I.toString,R=A.hasOwnProperty,F=A.toString,L=RegExp("^"+j.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=N.Symbol,V=P.splice,H=u(N,"Map"),W=u(Object,"create"),B=U?U.prototype:void 0,q=B?B.toString:void 0;t.prototype.clear=function(){this.__data__=W?W(null):{}},t.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},t.prototype.get=function(e){var t=this.__data__;if(W){var n=t[e];return n===v?void 0:n}return R.call(t,e)?t[e]:void 0},t.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:R.call(t,e)},t.prototype.set=function(e,t){return this.__data__[e]=W&&void 0===t?v:t,this},n.prototype.clear=function(){this.__data__=[]},n.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():V.call(t,n,1),0))},n.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},n.prototype.has=function(e){return-1<i(this.__data__,e)},n.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},r.prototype.clear=function(){this.__data__={hash:new t,map:new(H||n),string:new t}},r.prototype.delete=function(e){return s(this,e).delete(e)},r.prototype.get=function(e){return s(this,e).get(e)},r.prototype.has=function(e){return s(this,e).has(e)},r.prototype.set=function(e,t){return s(this,e).set(e,t),this};var z=c(function(e){e=p(e);var i=[];return x.test(e)&&i.push(""),e.replace(C,function(e,t,n,r){i.push(n?r.replace(S,"$1"):t||e)}),i});c.Cache=r;var G=Array.isArray;K.exports=function(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}}).call(e,t(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={getArrayFrom:function(t){return t instanceof Array?t:Object.keys(t).map(function(e){return t[e]})},getHref:function(e){return e?/:\/\//.test(e)?e:"https://".concat(e):null},cloneObject:function(e){if("object"===(void 0===e?"undefined":r(e))&&null!==e)return JSON.parse(JSON.stringify(e))}};t.default=i},function(e,t,n){var r=n(78)("wks"),i=n(49),o=n(6).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n(3)),a=(r(n(22)),n(8)),s={sendMessage:function(e){var t=e.type,n=e.message,r=e.payload,i=e.extra,o=e.files,a=e.render,s=void 0===a||a;u.default.emit("hu-lb-sending-message"),u.default.emit("hu-query-send-message",{type:t,message:n,payload:r||n,extra:i,files:o,render:s})},enableInput:function(){u.default.emit("hu-lb-enable-input")},disableInput:function(){u.default.emit("hu-lb-disable-input")},randomKey:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="+",r=0;r<e;r++)n=n.concat(t.charAt(Math.floor(Math.random()*t.length)));return n},hasRoleType:function(e,t){return-1<a(e,"role",[]).indexOf(t)},addRoleType:function(e,t){var n=a(e,"role",[]);return-1<n.indexOf(t)?n:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t])},getTypingDelay:function(e,t,n){var r=0,i=a(t,"extra.typing","auto");if(!1===i)r=0;else if("custom"===i&&!1!==n.block_custom)r=1e3*a(t,"extra.typing_delay",0);else if(a(n,"delay.is_constant",!1))r=1e3*a(n,"delay.constant",0);else if(null===e||void 0===e.samurai||s.hasRoleType(e,"end-flow"))r=100;else{var o=("dialog"===e.type?e.title?e.title:" ":e.message?e.message:" ").replace(/\s+/g," ").split(" ").length;r=Math.min(6e4/a(n,"delay.average_human_reading_speed",300)*o,1e3*a(n,"delay.max_delay",1.5))}return{typing:r,currDelay:e&&e.typingDelay?e.typingDelay:0}},showBackButton:function(){var n=UmiCoreConfig.keywords||{};return Object.keys(n).reduce(function(e,t){return e||"back"===n[t]},!1)},getMessageType:function(e){var t=a(e.extra,"message",{});return a(e.extra,"buttons",{}),t.upper_image?"upper_image":e.type}};t.default=s},function(e,t,n){e.exports=n(274)()},function(e,i,t){"use strict";(function(e){var t="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r=t||void 0!==e&&e||n;i.root=r,function(){if(!r)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(i,t(7))},function(e,G,K){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),function(e){function n(){return null}function a(e,t,n){var r=t&&t._preactCompatRendered&&t._preactCompatRendered.base;r&&r.parentNode!==t&&(r=null),!r&&t&&(r=t.firstElementChild);for(var i=t.childNodes.length;i--;)t.childNodes[i]!==r&&t.removeChild(t.childNodes[i]);var o=Object(E.render)(e,t,r);return t&&(t._preactCompatRendered=o&&(o._component||{base:o})),"function"==typeof n&&n(),o&&o._component||o}function t(e,t,n,r){var i=a(Object(E.h)(L,{context:e.context},t),n),o=i._component||i.base;return r&&r.call(o,i),o}function r(e){var t=e._preactCompatRendered&&e._preactCompatRendered.base;return!(!t||t.parentNode!==e||(Object(E.render)(Object(E.h)(n),e,t),0))}function i(e){return s.bind(null,e)}function o(e){var t=e[P];return t?!0===t?e:t:(t=function(e){return m({displayName:e.displayName||e.name,render:function(){return e(this.props,this.context)}})}(e),Object.defineProperty(t,P,{configurable:!0,value:!0}),t.displayName=e.displayName,t.propTypes=e.propTypes,t.defaultProps=e.defaultProps,Object.defineProperty(e,P,{configurable:!0,value:t}),t)}function s(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function e(t,n){for(var r=n||0;r<t.length;r++){var i=t[r];Array.isArray(i)?e(i):i&&"object"==typeof i&&!c(i)&&(i.props&&i.type||i.attributes&&i.nodeName||i.children)&&(t[r]=s(i.type||i.nodeName,i.props||i.attributes,i.children))}}(e,2),u(E.h.apply(void 0,e))}function u(e){e.preactCompatNormalized=!0,function(e){var t=e.attributes||(e.attributes={});q.enumerable="className"in t,t.className&&(t.class=t.className),Object.defineProperty(t,"className",q)}(e),function(e){return"function"==typeof e&&!(e.prototype&&e.prototype.render)}(e.nodeName)&&(e.nodeName=o(e.nodeName));var t=e.attributes.ref,n=t&&typeof t;return!U||"string"!==n&&"number"!==n||(e.attributes.ref=function(t,n){return n._refProxies[t]||(n._refProxies[t]=function(e){n&&n.refs&&(null===(n.refs[t]=e)&&(delete n._refProxies[t],n=null))})}(t,U)),function(e){var t=e.nodeName,n=e.attributes;if(n&&"string"==typeof t){var r={};for(var i in n)r[i.toLowerCase()]=i;if(r.ondoubleclick&&(n.ondblclick=n[r.ondoubleclick],delete n[r.ondoubleclick]),r.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|rad/i.test(n.type))){var o=r.oninput||"oninput";n[o]||(n[o]=y([n[o],n[r.onchange]]),delete n[r.onchange])}}}(e),e}function l(e,t){for(var n=[],r=arguments.length-2;0<r--;)n[r]=arguments[r+2];if(!c(e))return e;var i=e.attributes||e.props,o=[Object(E.h)(e.nodeName||e.type,h({},i),e.children||i&&i.children),t];return n&&n.length?o.push(n):t&&t.children&&o.push(t.children),u(E.cloneElement.apply(void 0,o))}function c(e){return e&&(e instanceof j||e.$$typeof===N)}function h(e,t){for(var n=arguments,r=1,i=void 0;r<arguments.length;r++)if(i=n[r])for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}function f(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function p(e){return e&&e.base||e}function d(){}function m(e){function t(e,t){(function(e){for(var t in e){var n=e[t];"function"!=typeof n||n.__bound||I.hasOwnProperty(t)||((e[t]=n.bind(e)).__bound=!0)}})(this),k.call(this,e,t,D),g.call(this,e,t)}return(e=h({constructor:t},e)).mixins&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=y(t[n].concat(e[n]||V),"getDefaultProps"===n||"getInitialState"===n||"getChildContext"===n))}(e,function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&"function"==typeof r[i]&&(t[i]||(t[i]=[])).push(r[i])}return t}(e.mixins)),e.statics&&h(t,e.statics),e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps.call(t)),d.prototype=k.prototype,t.prototype=h(new d,e),t.displayName=e.displayName||"Component",t}function v(e,t,n){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,n)}function y(o,a){return function(){for(var e,t=arguments,n=0;n<o.length;n++){var r=v(this,o[n],t);if(a&&null!=r)for(var i in e||(e={}),r)r.hasOwnProperty(i)&&(e[i]=r[i]);else void 0!==r&&(e=r)}return e}}function g(e,t){b.call(this,e,t),this.componentWillReceiveProps=y([b,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=y([b,_,this.render||"render",w])}function b(e,t){if(e){var n=e.children;if(n&&Array.isArray(n)&&1===n.length&&("string"==typeof n[0]||"function"==typeof n[0]||n[0]instanceof j)&&(e.children=n[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),M){var r="function"==typeof this?this:this.constructor,i=this.propTypes||r.propTypes,o=this.displayName||r.name;i&&S.a.checkPropTypes(i,e,"prop",o)}}}function _(e){U=this}function w(){U===this&&(U=null)}function k(e,t,n){E.Component.call(this,e,t),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},n!==D&&g.call(this,e,t)}function x(e,t){k.call(this,e,t)}K.d(G,"version",function(){return O}),K.d(G,"DOM",function(){return W}),K.d(G,"Children",function(){return H}),K.d(G,"render",function(){return a}),K.d(G,"createClass",function(){return m}),K.d(G,"createFactory",function(){return i}),K.d(G,"createElement",function(){return s}),K.d(G,"cloneElement",function(){return l}),K.d(G,"isValidElement",function(){return c}),K.d(G,"findDOMNode",function(){return p}),K.d(G,"unmountComponentAtNode",function(){return r}),K.d(G,"Component",function(){return k}),K.d(G,"PureComponent",function(){return x}),K.d(G,"unstable_renderSubtreeIntoContainer",function(){return t}),K.d(G,"__spread",function(){return h});var C=K(12),S=K.n(C),E=K(0);K.d(G,"PropTypes",function(){return S.a});var O="15.1.0",T="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),N="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,P="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",I={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},A=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,D={},M=void 0===e||!Object({NODE_ENV:"production"})||!1,j=Object(E.h)("a",null).constructor;j.prototype.$$typeof=N,j.prototype.preactCompatUpgraded=!1,j.prototype.preactCompatNormalized=!1,Object.defineProperty(j.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty(j.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var R=E.options.event;E.options.event=function(e){return R&&(e=R(e)),e.persist=Object,e.nativeEvent=e};var F=E.options.vnode;E.options.vnode=function(e){if(!e.preactCompatUpgraded){e.preactCompatUpgraded=!0;var t=e.nodeName,n=e.attributes=h({},e.attributes);"function"==typeof t?(!0===t[P]||t.prototype&&"isReactComponent"in t.prototype)&&(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),e.preactCompatNormalized||u(e),function(e){var t=e.nodeName,n=e.attributes;e.attributes={},t.defaultProps&&h(e.attributes,t.defaultProps),n&&h(e.attributes,n)}(e)):(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),n.defaultValue&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),function(e,t){var n,r,i;if(t){for(i in t)if(n=A.test(i))break;if(n)for(i in r=e.attributes={},t)t.hasOwnProperty(i)&&(r[A.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=t[i])}}(e,n))}F&&F(e)};var L=function(){};L.prototype.getChildContext=function(){return this.props.context},L.prototype.render=function(e){return e.children[0]};for(var U,V=[],H={map:function(e,t,n){return null==e?null:(e=H.toArray(e),n&&n!==e&&(t=t.bind(n)),e.map(t))},forEach:function(e,t,n){if(null==e)return null;e=H.toArray(e),n&&n!==e&&(t=t.bind(n)),e.forEach(t)},count:function(e){return e&&e.length||0},only:function(e){if(1!==(e=H.toArray(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return null==e?[]:V.concat(e)}},W={},B=T.length;B--;)W[T[B]]=i(T[B]);var q={configurable:!0,get:function(){return this.class},set:function(e){this.class=e}};h(k.prototype=new E.Component,{constructor:k,isReactComponent:{},replaceState:function(e,t){for(var n in this.setState(e,t),this.state)n in e||delete this.state[n]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),d.prototype=k.prototype,(x.prototype=new d).isPureReactComponent=!0,x.prototype.shouldComponentUpdate=function(e,t){return f(this.props,e)||f(this.state,t)};var z={version:O,DOM:W,PropTypes:S.a,Children:H,render:a,createClass:m,createFactory:i,createElement:s,cloneElement:l,isValidElement:c,findDOMNode:p,unmountComponentAtNode:r,Component:k,PureComponent:x,unstable_renderSubtreeIntoContainer:t,__spread:h};G.default=z}.call(G,K(52))},function(e,t,n){function c(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var h=n(117),f=36e5,p=6e4,d=/[T ]/,m=/:/,v=/^(\d{2})$/,y=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],g=/^(\d{4})/,b=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],_=/^-(\d{2})$/,w=/^-?(\d{3})$/,k=/^-?(\d{2})-?(\d{2})$/,x=/^-?W(\d{2})$/,C=/^-?W(\d{2})-?(\d{1})$/,S=/^(\d{2}([.,]\d*)?)$/,E=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,O=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,T=/([Z+-].*)$/,N=/^(Z)$/,P=/^([+-])(\d{2})$/,I=/^([+-])(\d{2}):?(\d{2})$/;e.exports=function(e,t){if(h(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var r=function(e){var t,n={},r=e.split(d);if(t=m.test(r[0])?(n.date=null,r[0]):(n.date=r[0],r[1])){var i=T.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e),i=function(e,t){var n,r=y[t],i=b[t];if(n=g.exec(e)||i.exec(e)){var o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=v.exec(e)||r.exec(e)){var a=n[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}(r.date,n),o=i.year,a=function(e,t){if(null===t)return null;var n,r,i,o;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=_.exec(e))return r=new Date(0),i=parseInt(n[1],10)-1,r.setUTCFullYear(t,i),r;if(n=w.exec(e)){r=new Date(0);var a=parseInt(n[1],10);return r.setUTCFullYear(t,0,a),r}if(n=k.exec(e)){r=new Date(0),i=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return r.setUTCFullYear(t,i,s),r}return(n=x.exec(e))?(o=parseInt(n[1],10)-1,c(t,o)):(n=C.exec(e))?(o=parseInt(n[1],10)-1,c(t,o,parseInt(n[2],10)-1)):null}(i.restDateString,o);if(a){var s,u=a.getTime(),l=0;return r.time&&(l=function(e){var t,n,r;if(t=S.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*f;if(t=E.exec(e))return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),n%24*f+r*p;if(t=O.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return n%24*f+r*p+1e3*i}return null}(r.time)),s=r.timezone?function(e){var t,n;return(t=N.exec(e))?0:(t=P.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=I.exec(e))?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0}(r.timezone):(s=new Date(u+l).getTimezoneOffset(),new Date(u+l+s*p).getTimezoneOffset()),new Date(u+l+s*p)}return new Date(e)}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(56),a=(i=o)&&i.__esModule?i:{default:i},s=r(n(189)),u=r(n(106)),l=r(n(243));t.default=Object.assign({renderFlags:a.default},s,u,l)},function(e,t,n){"use strict";function c(e){return e.reduce(function(e,t){return e.concat(t instanceof v.UnsubscriptionError?t.errors:t)},[])}var h=n(58),f=n(97),p=n(57),d=n(37),m=n(26),v=n(191),r=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(p.isFunction(i))d.tryCatch(i).call(this)===m.errorObject&&(t=!0,e=e||(m.errorObject.e instanceof v.UnsubscriptionError?c(m.errorObject.e.errors):[m.errorObject.e]));if(h.isArray(o))for(a=-1,s=o.length;++a<s;){var u=o[a];if(f.isObject(u))if(d.tryCatch(u.unsubscribe).call(u)===m.errorObject){t=!0,e=e||[];var l=m.errorObject.e;l instanceof v.UnsubscriptionError?e=e.concat(c(l.errors)):e.push(l)}}if(t)throw new v.UnsubscriptionError(e)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if("function"!=typeof t._addParent){var n=t;(t=new r)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},r.EMPTY=((e=new r).closed=!0,e),r;var e}();t.Subscription=r},function(e,t,n){"use strict";function i(e){return new Date(e.getTime())}function r(e){return e instanceof Date&&!isNaN(e.valueOf())}function o(e,t){var n=i(e);return n.setMonth(e.getMonth()+t),n}function a(e,t){return!(!e||!t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function s(e,t){return!(!e||!t)&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function u(e,t){return i(e).setHours(0,0,0,0)<i(t).setHours(0,0,0,0)}function l(e,t){return i(e).setHours(0,0,0,0)>i(t).setHours(0,0,0,0)}function c(e){var t=new Date;return t.setHours(0,0,0,0),u(e,t)}function h(e){var t=new Date((new Date).getTime()+864e5);return t.setHours(0,0,0,0),t<=e}function f(e,t,n){var r=i(e);return r.setHours(0,0,0,0),l(r,t)&&u(r,n)||l(r,n)&&u(r,t)}function p(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{from:null,to:null},n=t.from,r=t.to;return n?n&&r&&a(n,r)&&a(e,n)?r=n=null:r&&u(e,n)?n=e:r&&a(e,r)?r=n=e:u(r=e,n)&&(r=n,n=e):n=e,{from:n,to:r}}function d(e,t){var n=t.from,r=t.to;return n&&a(e,n)||r&&a(e,r)||n&&r&&f(e,n,r)}function m(e){var t=i(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=i,t.isDate=r,t.addMonths=o,t.isSameDay=a,t.isSameMonth=s,t.isDayBefore=u,t.isDayAfter=l,t.isPastDay=c,t.isFutureDay=h,t.isDayBetween=f,t.addDayToRange=p,t.isDayInRange=d,t.getWeekNumber=m,t.default={addDayToRange:p,addMonths:o,clone:i,getWeekNumber:m,isDate:r,isDayAfter:l,isDayBefore:u,isDayBetween:f,isDayInRange:d,isFutureDay:h,isPastDay:c,isSameDay:a,isSameMonth:s}},function(e,t,n){var r=n(21);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(86),i=n(23),o=n(94),a=n(120),s=n(122);t.default=(0,r.createStore)((0,r.combineReducers)({config:i.config,messagesList:o.messagesList,input:o.input,agents:o.agents,chat:o.chat,loader:a.loader,gdpr:s.gdpr}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.referralGoodbyeURL=t.referralFooterURL=t.referralHeaderURL=t.config=void 0;var i=n(87),o=r(i),a=r(n(187));t.config=a.default,t.referralHeaderURL=i.referralHeaderURL,t.referralFooterURL=i.referralFooterURL,t.referralGoodbyeURL=i.referralGoodbyeURL,t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(165),o=new((r=i)&&r.__esModule?r:{default:r}).default;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(182),o=new((r=i)&&r.__esModule?r:{default:r}).default("Landbot");window.landbotLogger=o,t.default=o},function(e,t,n){"use strict";t.errorObject={e:{}}},function(e,t,n){"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},function(e,t,n){"use strict";var r=n(219),i=n(221);t.async=new i.AsyncScheduler(r.AsyncAction)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Animate=void 0;var r,i=n(40),o=(r=i)&&r.__esModule?r:{default:r};n(264);var a=o.default.only(["chrome","firefox","safari","opera","msedge"]),s=function(e){"function"==typeof e&&e()};t.Animate=function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(a&&e&&!0!==i)try{Velocity(e,t,n)}catch(e){s(r)}else s(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(22),o=(r=i)&&r.__esModule?r:{default:r},a=n(8),s=["name","phone","email","postal code","address","country","birthdate"],u=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],l={getInputType:function(e){switch(e.type){case"stripe":return"none";case"menu":case"dialog":return"yes_no"===a(e,"extra.buttons.type",!1)?"yes_no":"autocomplete"===a(e,"extra.buttons.type",!1)?"autocomplete":"scale"===a(e,"extra.buttons.type",!1)?"scale":"rating"===a(e,"extra.buttons.type",!1)?"rating":a(e,"extra.buttons.multi",!1)?"multi":"menu";case"cards":return"carousel";case"referral":if(void 0!==e.buttons)return"menu";if(!1!==a(e,"extra.referral"))return"referral";default:return"file"===a(e,"extra.textarea.type")?"file":"number"===a(e,"extra.textarea.type")?"number":"location"===a(e,"extra.textarea.type")?"location":"date"===a(e,"extra.textarea.type")?"date":a(e,"extra.textarea.field",!1)?"field":a(e,"extra.hide_textbox",!1)?"none":"text"}},getInputPlaceholder:function(e,t){if(t)return o.default.getState().config.text.text_input_placeholder;switch(e.type){case"url":return"https://";case"date":var n=a(e,"dateOptions.format","YYYY/MM/DD");return a(e,"dateOptions.isRange",!1)?n+" - "+n:n;default:var r=e.field,i=s.indexOf(r);return-1<i?o.default.getState().config.text.inline_input_placeholder.replace("@field",o.default.getState().config.text.fields[i]):o.default.getState().config.text.text_input_placeholder}},getInputAspect:function(e){var t=e.field;return-1<s.indexOf(t)||"short"===e.size?"hu-textarea-light":"hu-textarea-heavy"},getInputNativeBehavior:function(e){switch(e.type){case"text":case"image":return null;default:return-1<u.indexOf(e.type)?e.type:null}}};t.default=l},function(e,t,n){var m=n(6),v=n(16),y=n(45),g=n(73),b=n(33),_=function(e,t,n){var r,i,o,a,s=e&_.F,u=e&_.G,l=e&_.S,c=e&_.P,h=e&_.B,f=u?m:l?m[t]||(m[t]={}):(m[t]||{}).prototype,p=u?v:v[t]||(v[t]={}),d=p.prototype||(p.prototype={});for(r in u&&(n=t),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=h&&i?b(o,m):c&&"function"==typeof o?b(Function.call,o):o,f&&g(f,r,o,e&_.U),p[r]!=o&&y(p,r,a),c&&d[r]!=o&&(d[r]=o)};m.core=v,_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128,e.exports=_},function(e,t,n){e.exports=!n(47)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(34);e.exports=function(r,i,e){if(o(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_INPUT="SET_INPUT"},function(e,t,n){"use strict";function r(){try{return i.apply(this,arguments)}catch(e){return o.errorObject.e=e,o.errorObject}}var i,o=n(26);t.tryCatch=function(e){return i=e,r}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(1),a=n(62),s=n(63),u=n(27),o=function(n){function o(e,t){n.call(this),this.array=e,(this.scheduler=t)||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(o,n),o.create=function(e,t){return new o(e,t)},o.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1<r?new o(e,n):1===r?new a.ScalarObservable(e[0],n):new s.EmptyObservable(n)},o.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;r<=n?i.complete():(i.next(t[n]),i.closed||(e.index=n+1,this.schedule(e)))},o.prototype._subscribe=function(e){var t=this.array,n=t.length,r=this.scheduler;if(r)return r.schedule(o.dispatch,0,{array:t,index:0,count:n,subscriber:e});for(var i=0;i<n&&!e.closed;i++)e.next(t[i]);e.complete()},o}(i.Observable);t.ArrayObservable=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={format:function(e,t){var n=null;switch(t){case"HH:mm":return("0"+(n=new Date(e)).getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2);case"HH:mm:ss.ff":return("0"+(n=new Date(e)).getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("0000"+n.getMilliseconds()).slice(-4);default:return"0"}}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(262),o=(r=i)&&r.__esModule?r:{default:r},a={only:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e||void 0!==o.default[t]},!1)},isMobile:function(){return o.default.mobile},isTablet:function(){return o.default.tablet},isDesktop:function(){return!o.default.mobile&&!o.default.tablet}};t.default=a},function(e,t,n){"use strict";function r(e){return e.toDateString()}function i(e){return h[e.getMonth()]+" "+e.getFullYear()}function o(e){return c[e]}function a(e){return l[e]}function s(){return 0}function u(){return h}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDay=r,t.formatMonthTitle=i,t.formatWeekdayShort=o,t.formatWeekdayLong=a,t.getFirstDayOfWeek=s,t.getMonths=u;var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["Su","Mo","Tu","We","Th","Fr","Sa"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];t.default={formatDay:r,formatMonthTitle:i,formatWeekdayShort:o,formatWeekdayLong:a,getFirstDayOfWeek:s,getMonths:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.ENTER=13,t.SPACE=32,t.ESC=27,t.TAB=9},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={container:"DayPicker",wrapper:"DayPicker-wrapper",interactionDisabled:"DayPicker--interactionDisabled",months:"DayPicker-Months",month:"DayPicker-Month",navBar:"DayPicker-NavBar",navButtonPrev:"DayPicker-NavButton DayPicker-NavButton--prev",navButtonNext:"DayPicker-NavButton DayPicker-NavButton--next",navButtonInteractionDisabled:"DayPicker-NavButton--interactionDisabled",caption:"DayPicker-Caption",weekdays:"DayPicker-Weekdays",weekdaysRow:"DayPicker-WeekdaysRow",weekday:"DayPicker-Weekday",body:"DayPicker-Body",week:"DayPicker-Week",weekNumber:"DayPicker-WeekNumber",day:"DayPicker-Day",footer:"DayPicker-Footer",todayButton:"DayPicker-TodayButton",today:"today",selected:"selected",disabled:"disabled",outside:"outside"}},function(e,t,n){"use strict";function r(e){return new Date(e.getFullYear(),e.getMonth(),1,12)}function _(e){var t=r(e);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.getDate()}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.cancelEvent=function(e){e.preventDefault(),e.stopPropagation()},t.getFirstDayOfMonth=r,t.getDaysInMonth=_,t.getModifiersFromProps=function(e){var t=i({},e.modifiers);return e.selectedDays&&(t[e.classNames.selected]=e.selectedDays),e.disabledDays&&(t[e.classNames.disabled]=e.disabledDays),t},t.getFirstDayOfWeekFromProps=function(e){var t=e.firstDayOfWeek,n=e.locale,r=void 0===n?"en":n,i=e.localeUtils,o=void 0===i?{}:i;return isNaN(t)?o.getFirstDayOfWeek?o.getFirstDayOfWeek(r):0:t},t.isRangeOfDates=function(e){return!!(e&&e.from&&e.to)},t.getMonthsDiff=function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},t.getWeekArray=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(0,k.getFirstDayOfWeek)(),n=arguments[2],r=_(e),i=[],o=[],a=[],s=1;s<=r;s+=1)i.push(new Date(e.getFullYear(),e.getMonth(),s,12));i.forEach(function(e){0<o.length&&e.getDay()===t&&(a.push(o),o=[]),o.push(e),i.indexOf(e)===i.length-1&&a.push(o)});for(var u=a[0],l=7-u.length;0<l;l-=1){var c=(0,w.clone)(u[0]);c.setDate(u[0].getDate()-1),u.unshift(c)}for(var h=a[a.length-1],f=h.length;f<7;f+=1){var p=(0,w.clone)(h[h.length-1]);p.setDate(h[h.length-1].getDate()+1),h.push(p)}if(n&&a.length<6)for(var d=void 0,m=a.length;m<6;m+=1){for(var v=(d=a[a.length-1])[d.length-1],y=[],g=0;g<7;g+=1){var b=(0,w.clone)(v);b.setDate(v.getDate()+g+1),y.push(b)}a.push(y)}return a},t.startOfMonth=function(e){var t=(0,w.clone)(e);return t.setDate(1),t.setHours(12,0,0,0),t},t.getDayNodes=function(e,t){var n=void 0;n=t===s.default?t.day+"--"+t.outside:""+t.outside;var r="."+t.day.replace(/ /g,".")+":not(."+n.replace(/ /g,".")+")";return e.querySelectorAll(r)},t.nodeListToArray=function(e){return Array.prototype.slice.call(e,0)},t.hasOwnProp=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var o,w=n(19),k=n(41),a=n(43),s=(o=a)&&o.__esModule?o:{default:o}},function(e,t,n){var r=n(46),i=n(130);e.exports=n(32)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(20),i=n(128),o=n(129),a=Object.defineProperty;t.f=n(32)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(77),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(80),i=n(75);e.exports=function(e){return r(i(e))}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){d&&f&&(d=!1,f.length?p=f.concat(p):m=-1,p.length&&a())}function a(){if(!d){var e=i(o);d=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,c,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var f,p=[],d=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||d||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function f(e,t){throw i.create(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(88),d=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},m="[DEFAULT]",r=[],v=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=p.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){r.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(t){r=r.filter(function(e){return e!==t})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var r=this;return new Promise(function(e){r.checkDestroyed_(),e()}).then(function(){r.firebase_.INTERNAL.removeApp(r.name_);var n=[];return Object.keys(r.services_).forEach(function(t){Object.keys(r.services_[t]).forEach(function(e){n.push(r.services_[t][e])})}),Promise.all(n.map(function(e){return e.INTERNAL.delete()}))}).then(function(){r.isDeleted_=!0,r.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=m),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==m?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;p.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(r.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),r=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&f("app-deleted",{name:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var i=new p.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),o=function e(){function a(e){return d(u,e=e||m)||f("no-app",{name:e}),u[e]}function s(){return Object.keys(u).map(function(e){return u[e]})}function o(n,r){Object.keys(l).forEach(function(e){var t=i(n,e);null!==t&&c[t]&&c[t](r,n)})}function i(e,t){if("serverAuth"===t)return null;var n=t;return e.options,n}var u={},l={},c={},h={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={}),("object"!=typeof t||null===t)&&(t={name:t});var n=t;void 0===n.name&&(n.name=m);var r=n.name;"string"==typeof r&&r||f("bad-app-name",{name:r+""}),d(u,r)&&f("duplicate-app",{name:r});var i=new v(e,n,h);return o(u[r]=i,"create"),i},app:a,apps:null,Promise:Promise,SDK_VERSION:"5.0.4",INTERNAL:{registerService:function(n,e,t,r,i){l[n]&&f("duplicate-service",{name:n}),l[n]=e,r&&(c[n]=r,s().forEach(function(e){r("create",e)}));var o=function(e){return void 0===e&&(e=a()),"function"!=typeof e[n]&&f("invalid-app-argument",{name:n}),e[n]()};return void 0!==t&&p.deepExtend(o,t),h[n]=o,v.prototype[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,n).apply(this,i?e:[])},o},createFirebaseNamespace:e,extendNamespace:function(e){p.deepExtend(h,e)},createSubscribe:p.createSubscribe,ErrorFactory:p.ErrorFactory,removeApp:function(e){o(u[e],"delete"),delete u[e]},factories:l,useAsService:i,Promise:Promise,deepExtend:p.deepExtend}};return p.patchProperty(h,"default",h),Object.defineProperty(h,"apps",{get:s}),p.patchProperty(a,"App",v),h}();t.firebase=o,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={randomKey:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="+",r=0;r<e;r++)n=n.concat(t.charAt(Math.floor(Math.random()*t.length)));return n},getOrigin:function(){return window.location!==window.parent.location?document.referrer:document.location.href},getQueryValue:function(e){switch(e){case"0":case"false":return!1;case"1":case"true":return!0;case"null":return null;default:return decodeURIComponent(e)}},getSafeUrl:function(e){return e?"/"===e.slice(-1)?e:e+"/":null}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENABLE_ENGAGE="ENABLE_ENGAGE",t.DISABLE_ENGAGE="DISABLE_ENGAGE",t.SET_LAST_AVATAR="SET_LAST_AVATAR",t.SET_ASSIGNED_AGENT="SET_ASSIGNED_AGENT",t.SET_FIXED_AVATAR="SET_FIXED_AVATAR"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={bufferTimeSpan:800,animationsDelay:500,engageIndex:0,initEngageFlag:!1,endEngageFlag:!1,endFlowFlag:!1,restarting:!1,initialChatFlag:!0,up:function(e){return r[e]=!0},down:function(e){return r[e]=!1},set:function(e,t){return r[e]=t}};t.default=r},function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";var r=n(13).root.Symbol;t.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(13);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(1),i=n(194);r.Observable.fromEvent=i.fromEvent},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(n){function r(e,t){n.call(this),this.value=e,this.scheduler=t,this._isScalar=!0,t&&(this._isScalar=!1)}return i(r,n),r.create=function(e,t){return new r(e,t)},r.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;t?r.complete():(r.next(n),r.closed||(e.done=!0,this.schedule(e)))},r.prototype._subscribe=function(e){var t=this.value,n=this.scheduler;if(n)return n.schedule(r.dispatch,0,{done:!1,value:t,subscriber:e});e.next(t),e.closed||e.complete()},r}(n(1).Observable);t.ScalarObservable=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function n(e){t.call(this),this.scheduler=e}return r(n,t),n.create=function(e){return new n(e)},n.dispatch=function(e){e.subscriber.complete()},n.prototype._subscribe=function(e){var t=this.scheduler;if(t)return t.schedule(n.dispatch,0,{subscriber:e});e.complete()},n}(n(1).Observable);t.EmptyObservable=i},function(e,t,n){"use strict";var h=n(13),f=n(102),p=n(103),d=n(97),m=n(1),v=n(65),y=n(197),g=n(60);t.subscribeToResult=function(e,t,n,r){var i=new y.InnerSubscriber(e,n,r);if(i.closed)return null;if(t instanceof m.Observable)return t._isScalar?(i.next(t.value),i.complete(),null):(i.syncErrorThrowable=!0,t.subscribe(i));if(f.isArrayLike(t)){for(var o=0,a=t.length;o<a&&!i.closed;o++)i.next(t[o]);i.closed||i.complete()}else{if(p.isPromise(t))return t.then(function(e){i.closed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,function(e){h.root.setTimeout(function(){throw e})}),i;if(t&&"function"==typeof t[v.iterator])for(var s=t[v.iterator]();;){var u=s.next();if(u.done){i.complete();break}if(i.next(u.value),i.closed)break}else if(t&&"function"==typeof t[g.observable]){var l=t[g.observable]();if("function"==typeof l.subscribe)return l.subscribe(new y.InnerSubscriber(e,n,r));i.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var c="You provided "+(d.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";i.error(new TypeError(c))}}return null}},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(13);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(5).Subscriber);t.OuterSubscriber=i},function(e,t,n){"use strict";var r=n(1),i=n(201);r.Observable.prototype.pairwise=i.pairwise},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(1),o=n(5),a=n(18),s=n(107),u=n(206),l=n(59),c=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(o.Subscriber);t.SubjectSubscriber=c;var h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[l.rxSubscriber]=function(){return new c(this)},e.prototype.lift=function(e){var t=new f(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},e.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},e.create=function(e,t){return new f(e,t)},e}(i.Observable),f=function(n){function e(e,t){n.call(this),this.destination=e,this.source=t}return r(e,n),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},e}(t.Subject=h);t.AnonymousSubject=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(11)),o=r(n(3));window.jsReferral=function(e){},window.fakeMessage=function(e){i.default.sendMessage({type:"text",message:e})},window.ghostMessage=function(e){o.default.emit("hu-receive-ghost-message",Object.assign({key:i.default.randomKey()},e))};var a={getReferralUrl:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")||(window.location!=window.parent.location?document.referrer:document.location.href).split("?")[0];switch(e){case"facebook":return"https://facebook.com/sharer/sharer.php?u="+encodeURI(t);case"twitter":return"https://twitter.com/intent/tweet/?text=Try%20this%20conversational%20website%20made%20with%20Landbot.io%20%F0%9F%A4%96%20%F0%9F%92%AC%20%20&url="+encodeURI(t);case"linkedin":return"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURI(t)+"&title=Try%20this%20conversational%20website%20made%20with%20Landbot.io%20%F0%9F%A4%96%20%F0%9F%92%AC%20%20&summary=Landbot.io%20is%20a%20tool%20to%20create%20conversational%20interfaces%20in%20substitution%20of%20forms.%20No%20coding%20required!&source="+encodeURI(t);case"whatsapp":return"https://api.whatsapp.com/send?text=Try%20this%20conversational%20website%20made%20with%20Landbot.io%20%F0%9F%A4%96%20%F0%9F%92%AC%20%20%20"+encodeURI(t)}}};t.default=a},function(e,t,n){"use strict";function o(t,e){return!!e&&(Array.isArray(e)?e:[e]).some(function(e){return!!e&&(e instanceof Date?(0,i.isSameDay)(t,e):(0,a.isRangeOfDates)(e)?(0,i.isDayInRange)(t,e):e.after&&e.before&&(0,i.isDayAfter)(e.before,e.after)?(0,i.isDayAfter)(t,e.after)&&(0,i.isDayBefore)(t,e.before):e.after&&e.before&&((0,i.isDayAfter)(e.after,e.before)||(0,i.isSameDay)(e.after,e.before))?(0,i.isDayAfter)(t,e.after)||(0,i.isDayBefore)(t,e.before):e.after?(0,i.isDayAfter)(t,e.after):e.before?(0,i.isDayBefore)(t,e.before):e.daysOfWeek?e.daysOfWeek.some(function(e){return t.getDay()===e}):"function"==typeof e&&e(t))})}function r(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(i).reduce(function(e,t){var n=i[t];return o(r,n)&&e.push(t),e},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.dayMatchesModifier=o,t.getModifiersForDay=r;var i=n(19),a=n(44);t.default={dayMatchesModifier:o,getModifiersForDay:r}},function(e,t,n){var r=n(314);e.exports=function(e){return r(e,{weekStartsOn:1})}},function(e,t,n){var r=n(21),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var o=n(6),a=n(45),s=n(48),u=n(49)("src"),r=Function.toString,l=(""+r).split("toString");n(16).inspectSource=function(e){return r.call(e)},(e.exports=function(e,t,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",t)),e[t]!==n&&(i&&(s(n,u)||a(n,u,e[t]?""+e[t]:l.join(String(t)))),e===o?e[t]=n:r?e[t]?e[t]=n:a(e,t,n):(delete e[t],a(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[u]||r.call(this)})},function(e,t,n){var r=n(75);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(77),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){var r=n(6),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(136),i=n(139);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(35),o=n(10)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t){e.exports={}},function(e,t,n){var r,i,o,a=n(33),s=n(148),u=n(149),l=n(72),c=n(6),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,v=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete y[e]},"process"==n(35)(h)?r=function(e){h.nextTick(a(g,e,1))}:m&&m.now?r=function(e){m.now(a(g,e,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,n){"use strict";function r(e){var n,r;this.promise=new e(function(e,t){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=i(n),this.reject=i(r)}var i=n(34);e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";function p(e,t,n){function r(){h===c&&(h=c.slice())}function i(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function o(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var n=!0;return r(),h.push(t),function(){if(n){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");n=!1,r();var e=h.indexOf(t);h.splice(e,1)}}}function a(e){if(!function(e){if("object"!==(void 0===e?"undefined":m(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,e)}finally{f=!1}for(var t=c=h,n=0;n<t.length;n++)(0,t[n])();return e}var s;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(p)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],h=c,f=!1;return a({type:v.INIT}),(s={dispatch:a,subscribe:o,getState:i,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,a({type:v.REPLACE})}})[d.a]=function(){var e,n=o;return(e={subscribe:function(e){function t(){e.next&&e.next(i())}if("object"!==(void 0===e?"undefined":m(e))||null===e)throw new TypeError("Expected the observer to be an object.");return t(),{unsubscribe:n(t)}}})[d.a]=function(){return this},e},s}function r(e){for(var t=Object.keys(e),p={},n=0;n<t.length;n++){var r=t[n];"function"==typeof e[r]&&(p[r]=e[r])}var d=Object.keys(p),m=void 0;try{!function(n){Object.keys(n).forEach(function(e){var t=n[e];if(void 0===t(void 0,{type:v.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+v.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(p)}catch(e){m=e}return function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];if(m)throw m;for(var o=!1,a={},s=0;s<d.length;s++){var u=d[s],l=p[u],c=r[u],h=l(c,i);if(void 0===h){var f=(e=u,void 0,"Given "+((n=(t=i)&&t.type)&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(f)}a[u]=h,o=o||h!==c}return o?a:r}}function s(e,t){return function(){return t(e.apply(this,arguments))}}function i(e,t){if("function"==typeof e)return s(e,t);if("object"!==(void 0===e?"undefined":m(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":m(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=s(a,t))}return r}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function o(){for(var e=arguments.length,u=Array(e),t=0;t<e;t++)u[t]=arguments[t];return function(s){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.apply(void 0,t),i=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=u.map(function(e){return e(o)});return i=l.apply(void 0,a)(r.dispatch),c({},r,{dispatch:i})}}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"createStore",function(){return p}),n.d(t,"combineReducers",function(){return r}),n.d(t,"bindActionCreators",function(){return i}),n.d(t,"applyMiddleware",function(){return o}),n.d(t,"compose",function(){return l}),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return v});var d=n(162),v={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.referralGoodbyeURL=t.referralFooterURL=t.referralHeaderURL=void 0;var r,i=n(24),o=((r=i)&&r.__esModule?r:{default:r}).default.settings,a=function(e){return!e||0===Object.keys(e).length};o.colors=a(o.colors)?{}:o.colors,o.text=a(o.text)?{}:o.text,o.typing_options=a(o.typing_options)?{}:o.typing_options;var s={staticUrl:o.staticUrl||null,messagesLimit:o.messagesLimit||20,has_bot:"boolean"!=typeof o.has_bot||o.has_bot,colors:{header_text:o.colors.header_text,bot_message_background:o.colors.bot_message_background,bot_message_text:o.colors.bot_message_text,user_message_background:o.colors.user_message_background,user_message_text:o.colors.user_message_text,button_background:o.colors.button_background,button_text:o.colors.button_text,textarea_background:o.colors.textarea_background,textarea_text:o.colors.textarea_text,textarea_border:o.colors.textarea_border},text:{inline_input_placeholder:o.text.inline_input_placeholder||"Type your @field here...",text_input_placeholder:o.text.text_input_placeholder||"Type here...",fields:o.text.fields||["name","phone","email","postal code","address","country","birthdate"],autocomplete_input_placeholder:o.text.autocomplete_input_placeholder||"Type to search options...",input_menu_help:o.text.input_menu_help||"Choose an option",input_multi_help:o.text.input_multi_help||"Choose at least one",input_instant_search_help:o.text.input_instant_search_help||"Filter the options",input_text_help:o.text.input_text_help||"Press enter to send",input_autocomplete_help:o.text.input_autocomplete_help||"Press enter to select",input_rating_help:o.text.input_rating_help||"Click on the icons",input_file_help:o.text.input_file_help||"Drop a file here",input_number_help_min:o.text.input_number_help_min||"Minimum value is @field",input_number_help_max:o.text.input_number_help_max||"Maximum value is @field",send:o.text.send||"Send",back:o.text.back||"Back",search:o.text.search||"Search",select_file:o.text.select_file||"Select a file",error:o.text.error||"  It seems there is a technical problem. Please reload this page"},accent:o.accent||"#F11952",dark:o.dark||"#34495E",light:o.light||"#FFFFFF",contrast:o.contrast||"#FFFFFF",header_background:o.header_background||"transparent",avatar_shape:o.avatar_shape||"none",avatar_scale:o.avatar_scale||1,avatar_url:o.avatar_url||null,font:o.font||"Montserrat",font_size:o.font_size||"15",logo:o.logo||null,brand_name:"string"==typeof o.brand_name?o.brand_name:"landbot",tagline:"string"==typeof o.tagline?o.tagline:"Get more leads using chatbots ",background_type:o.background_type||"gradient",background_image_url:o.background_image_url||"https://storage.googleapis.com/media.yexir.com/channels_back/31.png",background_color:o.background_color||"#FFFFFF",gradient_from:o.gradient_from||"#FF575B",gradient_to:o.gradient_to||"#F11952",videoname:o.videoname||"video_1",video_url:o.video_url||null,filter_type:o.filter_type||"none",filter_color:o.filter_color||"#000000",filter_gradient_from:o.filter_gradient_from||"#FFAD59",filter_gradient_to:o.filter_gradient_to||"#FFE199",filter_image_url:o.filter_image_url||"https://storage.googleapis.com/media.yexir.com/channels_back/31.png",stylesheets:a(o.stylesheets)?[]:o.stylesheets,style:o.style||!1,keywords:a(o.keywords)?{}:o.keywords,persistent_menu:a(o.persistent_menu)?{}:o.persistent_menu,progress:"number"==typeof o.progress&&o.progress,test:o.test||!1,branding:"boolean"!=typeof o.branding||o.branding,typing_options:Object.assign({state:"boolean"!=typeof o.typing||o.typing,delay:{is_constant:!1,constant:.5,average_human_reading_speed:300,max_delay:1.5},skip:!1},o.typing_options),widget_hide_background:o.widget_hide_background||!1,widget_hide_header:o.widget_hide_header||!1,engage_protocol:"boolean"!=typeof o.engage_protocol||o.engage_protocol,gdpr:"boolean"==typeof o.gdpr&&o.gdpr,fixed_avatar:"boolean"==typeof o.fixed_avatar&&o.fixed_avatar,viral_goodbye_type:"string"==typeof o.viral_goodbye_type?o.viral_goodbye_type:null,human_takeover_design_0:"boolean"!=typeof o.human_takeover_design_0||o.human_takeover_design_0},u=Object.assign({},o,s);t.default=u,t.referralHeaderURL="https://landbot.io/powered-by?utm_source="+encodeURIComponent(u.brand_name)+"&utm_medium=landbot&utm_campaign=header",t.referralFooterURL="https://landbot.io/powered-by?utm_source="+encodeURIComponent(u.brand_name)+"&utm_medium=landbot&utm_campaign=footer",t.referralGoodbyeURL="https://landbot.io/powered-by?utm_source="+encodeURIComponent(u.brand_name)+"&utm_medium=landbot&utm_campaign=goodbye"},function(e,t,n){"use strict";function r(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=r(e[n],t[n]));return e}function a(e){return JSON.parse(e)}function s(){}function i(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+(r+" argument ")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(173),u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},l=function(e,t){if(!e)throw c(t)},c=function(e){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},h=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,p=63&l;u||(p=64,a||(f=64)),r.push(n[c],n[h],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!=s){var c=a<<4&240|s>>2;if(r.push(c),64!=u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},p=function(e){try{return f.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},d=function(){function e(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return e.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},e}(),m=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},v="FirebaseError",y=Error.captureStackTrace,g=function(e,t){if(this.code=e,this.message=t,y)y(this,b.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=v,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}};g.prototype=Object.create(Error.prototype),(g.prototype.constructor=g).prototype.name=v;var b=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,r){void 0===r&&(r={});var t,n=this.errors[e],i=this.service+"/"+e;t=void 0===n?"Error":n.replace(this.pattern,function(e,t){var n=r[t];return void 0!==n?n.toString():"<"+t+"?>"}),t=this.serviceName+": "+t+" ("+i+").";var o=new g(i,t);for(var a in r)r.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=r[a]);return o},e}(),_=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=a(p(o[0])||""),n=a(p(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},w=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},k=function(n,e){return w(e,function(e,t){n[e]=t}),n},x=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},C=function(n){function e(){var e=n.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var t=1;t<e.blockSize;++t)e.pad_[t]=0;return e.reset(),e}return o.__extends(e,n),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){a=r<40?r<20?(o=c^u&(l^c),1518500249):(o=u^l^c,1859775393):r<60?(o=u&l|c&(u|l),2400959708):(o=u^l^c,3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(function(){this.blockSize=-1}),S=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=s),void 0===r.error&&(r.error=s),void 0===r.complete&&(r.complete=s);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();t.assert=l,t.assertionError=c,t.base64=f,t.base64Decode=p,t.base64Encode=function(e){var t=h(e);return f.encodeByteArray(t,!0)},t.CONSTANTS=u,t.deepCopy=function(e){return r(void 0,e)},t.deepExtend=r,t.patchProperty=function(e,t,n){e[t]=n},t.Deferred=d,t.getUA=m,t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())},t.isNodeSdk=function(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.ErrorFactory=b,t.FirebaseError=g,t.patchCapture=function(e){var t=y;return y=e,t},t.jsonEval=a,t.stringify=function(e){return JSON.stringify(e)},t.decode=_,t.isAdmin=function(e){var t=_(e).claims;return"object"==typeof t&&!0===t.admin},t.issuedAtTime=function(e){var t=_(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.isValidFormat=function(e){var t=_(e),n=t.claims;return!!t.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t,n,r=_(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),i&&t&&n&&t<=i&&i<=n},t.clone=function(e){return k({},e)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},t.extend=k,t.findKey=x,t.findValue=function(e,t,n){var r=x(e,t,n);return r&&e[r]},t.forEach=w,t.getAnyKey=function(e){for(var t in e)return t},t.getCount=function(e){var t=0;for(var n in e)t++;return t},t.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isNonNullObject=function(e){return"object"==typeof e&&null!==e},t.map=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.querystring=function(e){var n=[];return w(e,function(t,e){Array.isArray(e)?e.forEach(function(e){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),n.length?"&"+n.join("&"):""},t.querystringDecode=function(e){var n={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var t=e.split("=");n[t[0]]=t[1]}}),n},t.Sha1=C,t.async=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Promise.resolve(!0).then(function(){n.apply(void 0,e)}).catch(function(e){r&&r(e)})}},t.createSubscribe=function(e,t){var n=new S(e,t);return n.subscribe.bind(n)},t.errorPrefix=i,t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(i(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(i(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(i(e,t,r)+"must be a valid firebase namespace.")},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;l(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fetch:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){var t=e.url,n=e.method,r=void 0===n?"POST":n,i=e.headers,o=void 0===i?{Accept:"application/json"}:i,a=e.body;return fetch(t,{method:r,headers:o,body:a}).then(function(e){if(300<=e.status)throw{code:e.status};return e}).then(function(e){return e.json()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AGENT:function(e){return e.serverUrl+"webchat/get_agent/"},FILE:function(e){return e.serverUrl+"webchat/api/file/"},FIREBASE:function(e){return e.serverUrl+"webchat/api/firebase/"},MESSAGE:function(e){return e.serverUrl+"webchat/api/send/"},VISITOR:function(e){return e.welcomeUrl+"visitors/"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(92),a=(r=o)&&r.__esModule?r:{default:r},s={en:{revisit:[{type:"dialog",title:"Hey! This is not the first time you are here. What would you like to do?",buttons:["START AGAIN","CONTINUE"],payloads:["#init","#_continue"],samurai:"-1"}],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays_long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_short:["Su","Mo","Tu","We","Th","Fr","Sa"],first_weekday:0},"en-GB":{first_weekday:1},es:{revisit:[{type:"dialog",title:"Hola! No es la primera vez que ests aqu. Qu deseas hacer?",buttons:["EMPEZAR","CONTINUAR"],payloads:["#init","#_continue"],samurai:"-1"}],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekdays_long:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],weekdays_short:["Do","Lu","Ma","Mi","Ju","Vi","S"],first_weekday:1},fr:{revisit:[{type:"dialog",title:"Salut! Ce n'est pas la premire fois que tu es l. Qu'est-ce que tu aimerais faire?",buttons:["COMMENCER","CONTINUER"],payloads:["#init","#_continue"],samurai:"-1"}],months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],weekdays_long:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdays_short:["Di","Lu","Ma","Me","Je","Ve","Sa"],first_weekday:1},it:{revisit:[{type:"dialog",title:"Hey! Questa non  la prima volta che sei qui. Che ti piacerebbe fare?",buttons:["RICOMINCIARE","CONTINUARE"],payloads:["#init","#_continue"],samurai:"-1"}],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],weekdays_long:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],weekdays_short:["Do","Lu","Ma","Me","Gi","Ve","Sa"],first_weekday:1},de:{revisit:[{type:"dialog",title:"Hallo! Dies ist nicht das erste Mal, dass Sie hier sind. Was wrdest du gern tun?",buttons:["START","WEITER"],payloads:["#init","#_continue"],samurai:"-1"}],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekdays_long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],weekdays_short:["So","Mo","Di","Mi","Do","Fr","Sa"],first_weekday:1},pt:{revisit:[{type:"dialog",title:"Ei! Esta no  a primeira vez que voc est aqui. O que voc gostaria de fazer?",buttons:["INICIAR","CONTINUAR"],payloads:["#init","#_continue"],samurai:"-1"}],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays_long:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],weekdays_short:["Do","2","3","4","5","6","S"],first_weekday:1},nl:{revisit:[{type:"dialog",title:"Hallo! Dit is niet de eerste keer dat je hier bent. Wat zou je willen doen?",buttons:["START","DOORGAAN"],payloads:["#init","#_continue"],samurai:"-1"}],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],weekdays_long:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],weekdays_short:["Zo","Ma","Di","Wo","Do","Vr","Za"],first_weekday:1},zh:{revisit:[{type:"dialog",title:"!  ",buttons:["",""],payloads:["#init","#_continue"],samurai:"-1"}],months:["","","","","","","","","","","",""],weekdays_long:["","","","","","",""],weekdays_short:["","","","","","",""],first_weekday:1},"zh-HK":{first_weekday:0},"zh-TW":{first_weekday:0}},u=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.lang=this.getLang(),this.locale=this.getLocale()}return i(e,[{key:"getLang",value:function(){return this.getLocale().substring(0,2)}},{key:"getLocale",value:function(){return navigator.language||navigator.userLanguage}},{key:"getObject",value:function(e){return(0,a.default)(s,"["+this.locale+"]["+e+"]",!1)?s[this.locale][e]:(0,a.default)(s,"["+this.lang+"]["+e+"]",!1)?s[this.lang][e]:(0,a.default)(s,"en["+e+"]",null)}}]),e}();t.default=u},function(K,e,t){(function(e){function t(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function n(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(e,t){for(var n=e.length;n--;)if((r=e[n][0])===(i=t)||r!=r&&i!=i)return n;var r,i;return-1}function o(e,t){for(var n=0,r=(t=function(e,t){if(G(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!f(e))||k.test(e)||!w.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return G(e)?e:z(e)}(t)).length;null!=e&&n<r;)e=e[l(t[n++])];return n&&n==r?e:void 0}function a(e){return!(!h(e)||function(e){return!!M&&M in e}(e))&&(function(e){var t=h(e)?F.call(e):"";return t==g||t==b}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?L:E).test(function(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function s(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function u(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return a(n)?n:void 0}function l(e){if("string"==typeof e||f(e))return e;var t=e+"";return"0"==t&&1/e==-y?"-0":t}function c(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new TypeError(m);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return a.cache=n.set(t,r),r};return a.cache=new(c.Cache||r),a}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&F.call(e)==_}function p(e){return null==e?"":function(e){if("string"==typeof e)return e;if(f(e))return q?q.call(e):"";var t=e+"";return"0"==t&&1/e==-y?"-0":t}(e)}var d,m="Expected a function",v="__lodash_hash_undefined__",y=1/0,g="[object Function]",b="[object GeneratorFunction]",_="[object Symbol]",w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/,x=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,O="object"==typeof e&&e&&e.Object===Object&&e,T="object"==typeof self&&self&&self.Object===Object&&self,N=O||T||Function("return this")(),P=Array.prototype,I=Function.prototype,A=Object.prototype,D=N["__core-js_shared__"],M=(d=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",j=I.toString,R=A.hasOwnProperty,F=A.toString,L=RegExp("^"+j.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=N.Symbol,V=P.splice,H=u(N,"Map"),W=u(Object,"create"),B=U?U.prototype:void 0,q=B?B.toString:void 0;t.prototype.clear=function(){this.__data__=W?W(null):{}},t.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},t.prototype.get=function(e){var t=this.__data__;if(W){var n=t[e];return n===v?void 0:n}return R.call(t,e)?t[e]:void 0},t.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:R.call(t,e)},t.prototype.set=function(e,t){return this.__data__[e]=W&&void 0===t?v:t,this},n.prototype.clear=function(){this.__data__=[]},n.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():V.call(t,n,1),0))},n.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},n.prototype.has=function(e){return-1<i(this.__data__,e)},n.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},r.prototype.clear=function(){this.__data__={hash:new t,map:new(H||n),string:new t}},r.prototype.delete=function(e){return s(this,e).delete(e)},r.prototype.get=function(e){return s(this,e).get(e)},r.prototype.has=function(e){return s(this,e).has(e)},r.prototype.set=function(e,t){return s(this,e).set(e,t),this};var z=c(function(e){e=p(e);var i=[];return x.test(e)&&i.push(""),e.replace(C,function(e,t,n,r){i.push(n?r.replace(S,"$1"):t||e)}),i});c.Cache=r;var G=Array.isArray;K.exports=function(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}}).call(e,t(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_CONFIG="SET_CONFIG"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.chat=t.agents=t.input=t.messagesList=void 0;var i=r(n(188)),o=r(n(322)),a=n(323),s=n(325),u=n(327);t.default=i.default,t.messagesList=o.default,t.input=a.input,t.agents=s.agents,t.chat=u.chat},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_MESSAGE="ADD_MESSAGE",t.ADD_MESSAGES_CHUNK="ADD_MESSAGES_CHUNK",t.ADD_OLD_MESSAGES_CHUNK="ADD_OLD_MESSAGES_CHUNK",t.EDIT_MESSAGE="EDIT_MESSAGE",t.DELETE_MESSAGE="DELETE_MESSAGE",t.RESET_CHAT="RESET_CHAT"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_AGENT="ADD_AGENT"},function(e,t,n){"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(1),i=n(196);r.Observable.merge=i.merge},function(e,t,n){"use strict";var r=n(101),i=n(198);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),r.mergeMap(i.identity,null,e)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(64),i=n(66);t.mergeMap=function(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(e){return"number"==typeof n&&(r=n,n=null),e.lift(new a(t,n,r))}};var a=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=a;var s=function(i){function e(e,t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY),i.call(this,e),this.project=t,this.resultSelector=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,i),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){this.add(o.subscribeToResult(this,e,t,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(e,t,n,r,i){this.resultSelector?this._notifyResultSelector(e,t,n,r):this.destination.next(t)},e.prototype._notifyResultSelector=function(e,t,n,r){var i;try{i=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(i)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber);t.MergeMapSubscriber=s},function(e,t,n){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},function(e,t,n){"use strict";var r=n(1),i=n(199);r.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},function(e,t,n){"use strict";var r=n(1),i=n(203);r.Observable.prototype.first=i.first},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.inputAnimation$=t.newMessageReceive$=t.initialChatReceive$=t.newMessage$=t.initialChat$=t.receiverReady$=t.queueMessagesRenderSubject$=t.queueMessagesRender$=t.typingState$=t.messageReception$=t.sending$=t.reception$=t.renderFlags=void 0;var i=n(1),o=n(68),a=n(207);n(61),n(208),n(214),n(215),n(223),n(67),n(228),n(231),n(234),n(237),n(240);var s=r(n(3)),u=r(n(25)),l=r(n(22)),c=r(n(11)),h=r(n(39)),f=r(n(56)),p=new a.BehaviorSubject(!1),d=i.Observable.fromEvent(s.default,"hu-receive-message"),m=i.Observable.fromEvent(s.default,"hu-sending-message"),v=d.bufferWhen(function(){return i.Observable.fromEvent(s.default,"hu-receive-message").debounceTime(f.default.bufferTimeSpan)}),y=new o.Subject,g=y.startWith(null).pairwise(y).concatMap(function(e){var t=e[0],n=e[1],r=l.default.getState().config.typing_options;return f.default.down("initEngageFlag"),null===n||f.default.restarting?(f.default.up("endFlowFlag"),i.Observable.of(null).delay(0)):(n.typing=!1,c.default.hasRoleType(t,"error")?(f.default.down("endFlowFlag"),i.Observable.of(null).delay(0)):c.default.hasRoleType(t,"engage")?(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+': Previous message is "engage"',"landbot.messages["+n.key+"]"),n.key=t.key,n.typingDelay=0,f.default.down("endFlowFlag"),i.Observable.of(n).delay(0)):c.default.hasRoleType(n,"engage")?(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+': Current message is "engage"',"landbot.messages["+n.key+"]"),n.typing=!0,n.typingDelay=6e5,f.default.down("endFlowFlag"),i.Observable.of(n).delay(0)):n.samurai<0&&!0===r.state?(n.typing=!0,n.typingDelay=c.default.getTypingDelay(t,n,l.default.getState().config.typing_options).typing,null===t?(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+": First group message","landbot.messages["+n.key+"]"),f.default.down("endFlowFlag"),i.Observable.of(n).delay(0)):c.default.hasRoleType(t,"end-flow")?(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+': Previous message has role type "end-flow", so current launches',"landbot.messages["+n.key+"]"),f.default.down("endFlowFlag"),i.Observable.of(n).delay(0)):f.default.endFlowFlag?(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+': "end-flow" flag was enabled, so it launches',"landbot.messages["+n.key+"]"),f.default.down("endFlowFlag"),i.Observable.of(n).delay(0)):(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+': Message awaits for "end-flow" event and launches',"landbot.messages["+n.key+"]"),i.Observable.of(n).delayWhen(function(){return i.Observable.fromEvent(s.default,"hu-lb-message-flow-end")}))):(u.default.append(h.default.format(new Date,"HH:mm:ss.ff")+": Message awaits for animations timing and launches","landbot.messages["+n.key+"]"),i.Observable.of(n).delay(f.default.animationsDelay)))}),b=i.Observable.fromEvent(s.default,"hu-lb-receiver-ready"),_=i.Observable.fromEvent(s.default,"hu-initial-chat"),w=i.Observable.fromEvent(s.default,"hu-receive-message"),k=new o.Subject;t.renderFlags=f.default,t.reception$=d,t.sending$=m,t.messageReception$=v,t.typingState$=p,t.queueMessagesRender$=g,t.queueMessagesRenderSubject$=y,t.receiverReady$=b,t.initialChat$=_,t.newMessage$=w,t.initialChatReceive$=function(){return i.Observable.merge(b,_).distinctUntilChanged().pairwise().first()},t.newMessageReceive$=function(){return i.Observable.merge(b,w).distinctUntilChanged().pairwise().first()},t.inputAnimation$=k},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);t.ObjectUnsubscribedError=i},function(e,t,n){"use strict";var r=n(209);t.from=r.FromObservable.create},function(e,t,n){"use strict";var r=n(1),i=function(){function t(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();t.Notification=i},function(e,t,n){"use strict";var r=n(38);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";t.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_TYPES=t.mapMessagesContent=void 0;var i=r(n(250)),o=r(n(252)),a=r(n(253)),s=r(n(254)),u=r(n(255)),l=r(n(256)),c=r(n(257)),h=r(n(258)),f=r(n(259)),p=r(n(260)),d=r(n(261));t.mapMessagesContent={audio:c.default,button:i.default,cards:a.default,dialog:a.default,document:c.default,iframe:l.default,image:s.default,location:p.default,menu:a.default,multiple_images:u.default,redirect:h.default,referral:o.default,stripe:d.default,text:i.default,upper_image:f.default,video:c.default},t.MESSAGE_TYPES=["text","button","referral","dialog","menu","image","multiple_images","iframe","document","video","audio","hidden","redirect","stripe","cards","location"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GOOGLE_API_KEY="AIzaSyCjznqz7l3S1OQcQNJDPkG2e8-LWgVFukc"},function(e,t,n){var r=n(273),i=n(19),o=n(41),a=n(70),s=n(116),u=n(115),l=n(282);e.exports=r,e.exports.DateUtils=i,e.exports.LocaleUtils=o,e.exports.ModifiersUtils=a,e.exports.WeekdayPropTypes=s.propTypes,e.exports.NavbarPropTypes=u.propTypes,e.exports.PropTypes=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(14),y=r(o),a=r((r(n(12)),n(43))),u=n(42),l=function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=s(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i))),n.handleNextClick=function(){n.props.onNextClick&&n.props.onNextClick()},n.handlePreviousClick=function(){n.props.onPreviousClick&&n.props.onPreviousClick()},n.handleNextKeyDown=function(e){e.keyCode!==u.ENTER&&e.keyCode!==u.SPACE||(e.preventDefault(),n.handleNextClick())},n.handlePreviousKeyDown=function(e){e.keyCode!==u.ENTER&&e.keyCode!==u.SPACE||(e.preventDefault(),n.handlePreviousClick())},s(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.Component),i(a,[{key:"shouldComponentUpdate",value:function(e){return e.labels!==this.props.labels||e.dir!==this.props.dir||this.props.showPreviousButton!==e.showPreviousButton||this.props.showNextButton!==e.showNextButton}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.className,r=e.showPreviousButton,i=e.showNextButton,o=e.labels,a=e.dir,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,p=(h="rtl"===a?(s=this.handleNextClick,u=this.handlePreviousClick,l=this.handleNextKeyDown,c=this.handlePreviousKeyDown,f=r,i):(s=this.handlePreviousClick,u=this.handleNextClick,l=this.handlePreviousKeyDown,c=this.handleNextKeyDown,f=i,r))?t.navButtonPrev:t.navButtonPrev+" "+t.navButtonInteractionDisabled,d=f?t.navButtonNext:t.navButtonNext+" "+t.navButtonInteractionDisabled,m=y.default.createElement("span",{tabIndex:"0",role:"button","aria-label":o.previousMonth,key:"previous",className:p,onKeyDown:h?l:void 0,onClick:h?s:void 0}),v=y.default.createElement("span",{tabIndex:"0",role:"button","aria-label":o.nextMonth,key:"right",className:d,onKeyDown:f?c:void 0,onClick:f?u:void 0});return y.default.createElement("div",{className:n||t.navBar},"rtl"===a?[v,m]:[m,v])}}]),a}();l.defaultProps={classNames:a.default,dir:"ltr",labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},showPreviousButton:!0,showNextButton:!0},(t.default=l).propTypes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(14),l=r(o),a=(r(n(12)),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"render",value:function(){var e,t=this.props,n=t.weekday,r=t.className,i=t.weekdaysLong,o=t.weekdaysShort,a=t.localeUtils,s=t.locale;e=i?i[n]:a.formatWeekdayLong(n,s);var u;return u=o?o[n]:a.formatWeekdayShort(n,s),l.default.createElement("div",{className:r,role:"columnheader"},l.default.createElement("abbr",{title:e},u))}}]),t}());(t.default=a).propTypes={}},function(e,t){e.exports=function(e){return e instanceof Date}},function(e,t,n){var s=n(15),u=n(71);e.exports=function(e){var t=s(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var i=u(r),o=new Date(0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);var a=u(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=n(23),a=n(321),s=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.mobile,n=void 0!==t&&t;return(0,i.h)("div",{className:"hu-powered-by hu-a-center"+(n?" hu-mobile-powered-by hu-width-full hu-opacity-0":"")},(0,i.h)("p",{className:"powered-by-text hu-a-center hu-color_button-text hu-s-12"},(0,i.h)("a",{href:o.referralFooterURL,target:"_blank",tabIndex:"-1",className:"hu-background-color_button-background hu-background-color_button-background-light_hover hu-border-color_button-background-dark hu-d-none hu-border-1 hu-border-solid hu-border-radius-3"},(0,i.h)("span",null,"Start using"),(0,i.h)("b",{className:"hu-display-inline-block"},(0,s.default)({height:13})),(0,i.h)("span",null,"for your business"))))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loader=void 0;var i=r(n(329)),o=r(n(330));t.loader=o.default,t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_LOADER="SET_LOADER"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.gdpr=void 0;var i=r(n(331)),o=r(n(332));t.default=i.default,t.gdpr=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHOW_GDPR="SHOW_GDPR",t.HIDE_GDPR="HIDE_GDPR"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(23),o=((r=i)&&r.__esModule?r:{default:r}).default,a={header_text:{value:o.colors.header_text||o.contrast||"#FFFFFF",rules:[{index:"color_header-text",type:"color",selectors:[".hu-color_header-text"]}],relatives:["header-text-fade-01"]},bot_message_background:{value:o.colors.bot_message_background||o.light||"#FFFFFF",rules:[{index:"background-color_bot-message-background",type:"background-color",selectors:[".hu-background-color_bot-message-background",".hu-message.brand .hu-message-info.visible + .hu-message-content::before"]}]},bot_message_text:{value:o.colors.bot_message_text||o.dark||"#34495E",rules:[{index:"color_bot-message-text",type:"color",selectors:[".hu-color_bot-message-text"]}]},user_message_background:{value:o.colors.user_message_background||o.accent||"#F11952",rules:[{index:"background-color_user-message-background",type:"background-color",selectors:[".hu-background-color_user-message-background"]}]},user_message_text:{value:o.colors.user_message_text||o.light||"#FFFFFF",rules:[{index:"color_user-message-text",type:"color",selectors:[".hu-color_user-message-text"]}]},button_background:{value:o.colors.button_background||o.accent||"#F11952",rules:[{index:"background-color_button-background",type:"background-color",selectors:[".hu-background-color_button-background","#hu-message-input .left-arrow",".open .keyword-switch","#hu-footer-input-mobile .back-button","#hu-footer-input-mobile .powered-by-text a","#hu-footer-input-mobile .keyword-button","#hu-footer-input-mobile .skip-pause-button",".Card-catalogue_content_attribute::before",".DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside)",".DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside):hover"]},{index:"color_button-background",type:"color",selectors:[".hu-color_button-background",".hu-input-multi_button:hover:not(.active) .button-text"]},{index:"border-color_button-background",type:"border-color",selectors:[".hu-input-multi_button:not(.active) .check-block",".hu-input-multi_button:not(.active) .check-label:after"]}],relatives:["button-background-dark","button-background-darky","button-background-light"]},button_text:{value:o.colors.button_text||o.light||"#FFFFFF",rules:[{index:"color_button-text",type:"color",selectors:[".hu-color_button-text",".hu-input-multi_button.active .button-text","#hu-footer-input-mobile .keyword-button",".DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside)"]},{index:"border-color_button-text",type:"border-color",selectors:[".hu-border-color_button-text",".hu-input-multi_button.active .check-block",".hu-input-multi_button.active .check-label:after"]},{index:"fill_button-text",type:"fill",selectors:[".hu-fill_button-text"]}]},textarea_background:{value:o.colors.textarea_background||"#FFFFFF",rules:[{index:"background-color_textarea-background",type:"background-color",selectors:[".hu-background-color_textarea-background"]}],relatives:["textarea-background-fade-02"]},textarea_text:{value:o.colors.textarea_text||"#000000",rules:[{index:"color_textarea-text",type:"color",selectors:[".hu-color_textarea-text",".hu-textarea-heavy .hu-textarea:empty:before, .hu-textarea-light .hu-textarea:empty:before","#hu-footer-input-mobile .hu-textarea:empty:before"]},{index:"color_textarea-text_webkit-placeholder",type:"color",selectors:[".hu-textarea::-webkit-input-placeholder",".hu-placeholder-color_textarea-text::-webkit-input-placeholder"]},{index:"color_textarea-text_webkit-placeholder",type:"color",selectors:[".hu-textarea::-moz-placeholder",".hu-placeholder-color_textarea-text::-moz-placeholder"]},{index:"color_textarea-text_webkit-placeholder",type:"color",selectors:[".hu-textarea::-ms-input-placeholder",".hu-placeholder-color_textarea-text::-ms-input-placeholder"]},{index:"color_textarea-text_webkit-placeholder",type:"color",selectors:[".hu-textarea:-moz-placeholder",".hu-placeholder-color_textarea-text:-moz-placeholder"]}]},textarea_border:{value:o.colors.textarea_border||o.accent||"#F11952",rules:[{index:"color_textarea-border",type:"color",selectors:[".hu-color_textarea-border"]},{index:"border-color_textarea-border",type:"border-color",selectors:[".hu-border-color_textarea-border"]},{index:"fill_textarea-border",type:"fill",selectors:[".hu-fill_textarea-border",".hu-textarea-heavy .send svg, .hu-textarea-light .send svg","#hu-footer-input-mobile .attach svg"]}]},accent:{value:o.accent,rules:[{index:"background-color_accent",type:"background-color",selectors:[".hu-background-color_accent","#hu-bot-progress-bar::after","#w-cards a .hu-st-italic"]},{index:"color-accent",type:"color",selectors:[".hu-color_accent","#hu-footer-input-mobile .hu-input-multi-info","#hu-footer-input-mobile .hu-input-menu-info"]},{index:"border-color_accent",type:"border-color",selectors:[]},{index:"fill_accent",type:"fill",selectors:[".hu-fill_accent"]},{index:"stroke_accent",type:"stroke",selectors:[".hu-stroke_accent"]},{index:"border-bottom_accent",type:"border-bottom",selectors:[]}],relatives:["accent-light","accent-dark","accent-fade-0.1"]},dark:{value:o.dark,rules:[{index:"background-color_dark",type:"background-color",selectors:[]},{index:"color_dark",type:"color",selectors:[".hu-color_dark",".hu-input-multi_button:not(.active) .button-text","#w-cards a"]},{index:"border-color_dark",type:"border-color",selectors:[]}]},light:{value:o.light,rules:[{index:"background-color_light",type:"background-color",selectors:[".hu-background-color_light",".sk-folding-cube .sk-cube::before",".hu-input-multi_button:not(.active)","#w-cards a"]},{index:"color_light",type:"color",selectors:[".hu-color_light"]},{index:"border-color_light",type:"border-color",selectors:[".hu-border-color_light","#hu-message-input .dual .menu-button:not(.image):last-child:not(:hover)"]},{index:"fill_light",type:"fill",selectors:[".hu-fill_light"]}]},contrast:{value:o.contrast,rules:[{index:"background-color_contrast",type:"background-color",selectors:[".hu-background-color_contrast"]},{index:"color_contrast",type:"color",selectors:[".hu-color_contrast"]},{index:"border-color_contrast",type:"border-color",selectors:[".hu-border-color_contrast"]},{index:"fill_contrast",type:"fill",selectors:[".hu-fill_contrast"]},{index:"stroke_contrast",type:"stroke",selectors:[".hu-stroke_contrast"]}],relatives:["contrast-fade","contrast-fade-0.7"]},header_background:{value:o.header_background,rules:[{index:"background-color_header-background",type:"background-color",selectors:[".hu-background-color_header-background"]}]},avatar_scale:{value:"scale("+o.avatar_scale+")",rules:[{index:"transform_avatar-scale",type:"transform",selectors:[".hu-message-avatar_img"]}]},font:{value:o.font?o.font+",sans-serif":"Montserrat,sans-serif",rules:[{index:"font-family_font",type:"font-family",selectors:["#app-landbot, button, input, textarea"]}]},font_size:{value:o.font_size?o.font_size+"px":"15px",rules:[{index:"font-size_font-size",type:"font-size",selectors:["#app-landbot, button, input, textarea"]}]},background_color:{value:o.background_color,rules:[{index:"background-color_background-color",type:"background-color",selectors:["#hu-background .hu-background-color"]}]},background_gradient:{value:o.gradient_from&&o.gradient_to?"linear-gradient(to bottom, "+o.gradient_from+" 0%, "+o.gradient_to+" 100%)":"linear-gradient(to bottom, #FFAD59 0%, #FFE199 100%)",rules:[{index:"background_background-gradient",type:"background",selectors:["#hu-background .hu-background-gradient"]}]},background_image_url:{value:o.background_image_url?'url("'+o.background_image_url+'")':'url("https://storage.googleapis.com/media.yexir.com/channels_back/31.png")',rules:[{index:"background-image_background-image-url",type:"background-image",selectors:["#hu-background .hu-background-image"]}]},filter_color:{value:o.filter_color,rules:[{index:"background_filter-color",type:"background-color",selectors:["#hu-filter .hu-filter-color"]}]},filter_gradient:{value:o.filter_gradient_from&&o.filter_gradient_to?"linear-gradient(to bottom, "+o.filter_gradient_from+" 0%, "+o.filter_gradient_to+" 100%)":"linear-gradient(to bottom, #FFAD59 0%, #FFE199 100%)",rules:[{index:"background_filter-gradient",type:"background",selectors:["#hu-filter .hu-filter-gradient"]}]},filter_image_url:{value:o.filter_image_url?'url("'+o.filter_image_url+'")':'url("https://storage.googleapis.com/media.yexir.com/channels_back/31.png")',rules:[{index:"background-image_filter-image-url",type:"background-image",selectors:["#hu-filter .hu-filter-image"]}]},"button-background-dark":{tasks:[{filter:"lightenDarkenColor",factor:-.5}],rules:[{index:"border-color_button-background-dark",type:"border-color",selectors:[".hu-border-color_button-background-dark","#hu-message-input .dual .menu-button:last-child:hover"]}]},"button-background-darky":{tasks:[{filter:"lightenDarkenColor",factor:-.2}],rules:[{index:"border-right-color_button-background-darky",type:"border-right-color",selectors:[".hu-border-right-color_button-background-darky",".Scale_item:not(:last-child)"]}]},"button-background-light":{tasks:[{filter:"lightenDarkenColor",factor:.3}],rules:[{index:"background-color_button-background-light",type:"background-color",selectors:[".hu-background-color_button-background-light",".hu-background-color_button-background-light_hover:hover","#hu-message-input .hu-input-box .hu-input-menu .hu-input-menu-buttons .menu-button:hover","#hu-message-input .left-arrow:hover",".hu-input-multi_button.active:hover",".p-menu-button:hover"]}]},"accent-light":{tasks:[{filter:"lightenDarkenColor",factor:.3}],rules:[{index:"background-color_accent-light",type:"background-color",selectors:[".hu-background-color_accent-light",".hu-background-color_accent-light_hover:hover","#w-cards a:hover .hu-st-italic"]}]},"accent-dark":{tasks:[{filter:"lightenDarkenColor",factor:-.5}],rules:[{index:"border-color_accent-dark",type:"border-color",selectors:[".hu-border-color_accent-dark","#w-cards a .hu-st-italic"]}]},"contrast-fade":{tasks:[{filter:"fadeColor",factor:.4}],rules:[{index:"border-color_contrast-fade",type:"border-color",selectors:[".hu-border-color_contrast-fade"]},{index:"background-color_contrast-fade",type:"background-color",selectors:[".hu-background-color_contrast-fade"]}]},"contrast-fade-0.7":{tasks:[{filter:"fadeColor",factor:.7}],rules:[{index:"border-color_contrast-fade-07",type:"border-color",selectors:[".hu-border-color_contrast-fade-07"]}]},"header-text-fade-01":{tasks:[{filter:"fadeColor",factor:.1}],rules:[{index:"background-color_header-text-fade-01",type:"background-color",selectors:[".hu-background-color_header-text-fade-01",".hu-background-color_header-text-fade-01_hover:hover"]}]},"textarea-background-fade-02":{tasks:[{filter:"fadeColor",factor:.4}],rules:[{index:"background-color_textarea-background-fade-02",type:"background-color",selectors:[".hu-background-color_textarea-background-fade-02"]}]}};t.default=a},function(e,t,n){n(126),n(133),n(140),n(157),n(160),e.exports=n(161)},function(e,t,n){n(127),e.exports=n(16).Array.fill},function(e,t,n){var r=n(31);r(r.P,"Array",{fill:n(131)}),n(132)("fill")},function(e,t,n){e.exports=!n(32)&&!n(47)(function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(21);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var s=n(74),u=n(76),l=n(50);e.exports=function(e){for(var t=s(this),n=l(t.length),r=arguments.length,i=u(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:u(o,n);i<a;)t[i++]=e;return t}},function(e,t,n){var r=n(10)("unscopables"),i=Array.prototype;null==i[r]&&n(45)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){n(134),e.exports=n(16).Object.values},function(e,t,n){var r=n(31),i=n(135)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var u=n(79),l=n(51),c=n(81).f;e.exports=function(s){return function(e){for(var t,n=l(e),r=u(n),i=r.length,o=0,a=[];o<i;)c.call(n,t=r[o++])&&a.push(s?[t,n[t]]:n[t]);return a}}},function(e,t,n){var a=n(48),s=n(51),u=n(137)(!1),l=n(138)("IE_PROTO");e.exports=function(e,t){var n,r=s(e),i=0,o=[];for(n in r)n!=l&&a(r,n)&&o.push(n);for(;t.length>i;)a(r,n=t[i++])&&(~u(o,n)||o.push(n));return o}},function(e,t,n){var u=n(51),l=n(50),c=n(76);e.exports=function(s){return function(e,t,n){var r,i=u(e),o=l(i.length),a=c(n,o);if(s&&t!=t){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===t)return s||a||0;return!s&&-1}}},function(e,t,n){var r=n(78)("keys"),i=n(49);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r,i,o,a,s=n(141),u=n(6),l=n(33),c=n(82),h=n(31),f=n(21),p=n(34),d=n(142),m=n(143),v=n(147),y=n(84).set,g=n(150)(),b=n(85),_=n(151),w=n(152),k=u.TypeError,x=u.process,C=u.Promise,S="process"==c(x),E=function(){},O=i=b.f,T=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n(10)("species")]=function(e){e(E,E)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),N=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(l,t){if(!l._n){l._n=!0;var n=l._c;g(function(){for(var s=l._v,u=1==l._s,e=0;n.length>e;)!function(e){var t,n,r=u?e.ok:e.fail,i=e.resolve,o=e.reject,a=e.domain;try{r?(u||(2==l._h&&D(l),l._h=1),!0===r?t=s:(a&&a.enter(),t=r(s),a&&a.exit()),t===e.promise?o(k("Promise-chain cycle")):(n=N(t))?n.call(t,i,o):i(t)):o(s)}catch(e){o(e)}}(n[e++]);l._c=[],l._n=!1,t&&!l._h&&I(l)})}},I=function(o){y.call(u,function(){var e,t,n,r=o._v,i=A(o);if(i&&(e=_(function(){S?x.emit("unhandledRejection",r,o):(t=u.onunhandledrejection)?t({promise:o,reason:r}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=S||A(o)?2:1),o._a=void 0,i&&e.e)throw e.v})},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(t){y.call(u,function(){var e;S?x.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},M=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},j=function(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(n=N(e))?g(function(){var t={_w:r,_d:!1};try{n.call(e,l(j,t,1),l(M,t,1))}catch(e){M.call(t,e)}}):(r._v=e,r._s=1,P(r,!1))}catch(e){M.call({_w:r,_d:!1},e)}}};T||(C=function(e){d(this,C,"Promise","_h"),p(e),r.call(this);try{e(l(j,this,1),l(M,this,1))}catch(e){M.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(153)(C.prototype,{then:function(e,t){var n=O(v(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(j,e,1),this.reject=l(M,e,1)},b.f=O=function(e){return e===C||e===a?new o(e):i(e)}),h(h.G+h.W+h.F*!T,{Promise:C}),n(154)(C,"Promise"),n(155)("Promise"),a=n(16).Promise,h(h.S+h.F*!T,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!T),"Promise",{resolve:function(e){return w(s&&this===a?C:this,e)}}),h(h.S+h.F*!(T&&n(156)(function(e){C.all(e).catch(E)})),"Promise",{all:function(e){var a=this,t=O(a),s=t.resolve,u=t.reject,n=_(function(){var r=[],i=0,o=1;m(e,!1,function(e){var t=i++,n=!1;r.push(void 0),o++,a.resolve(e).then(function(e){n||(n=!0,r[t]=e,--o||s(r))},u)}),--o||s(r)});return n.e&&u(n.v),t.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=!1},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var f=n(33),p=n(144),d=n(145),m=n(20),v=n(50),y=n(146),g={},b={};(t=e.exports=function(e,t,n,r,i){var o,a,s,u,l=i?function(){return e}:y(e),c=f(n,r,t?2:1),h=0;if("function"!=typeof l)throw TypeError(e+" is not iterable!");if(d(l)){for(o=v(e.length);h<o;h++)if((u=t?c(m(a=e[h])[0],a[1]):c(e[h]))===g||u===b)return u}else for(s=l.call(e);!(a=s.next()).done;)if((u=p(s,c,a.value,t))===g||u===b)return u}).BREAK=g,t.RETURN=b},function(e,t,n){var o=n(20);e.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},function(e,t,n){var r=n(83),i=n(10)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(82),i=n(10)("iterator"),o=n(83);e.exports=n(16).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var i=n(20),o=n(34),a=n(10)("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||null==(n=i(r)[a])?t:o(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var s=n(6),u=n(84).set,l=s.MutationObserver||s.WebKitMutationObserver,c=s.process,h=s.Promise,f="process"==n(35)(c);e.exports=function(){var n,r,i,e=function(){var e,t;for(f&&(e=c.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?i():r=void 0,e}}r=void 0,e&&e.enter()};if(f)i=function(){c.nextTick(e)};else if(!l||s.navigator&&s.navigator.standalone)if(h&&h.resolve){var t=h.resolve();i=function(){t.then(e)}}else i=function(){u.call(s,e)};else{var o=!0,a=document.createTextNode("");new l(e).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};r&&(r.next=t),n||(n=t,i()),r=t}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(20),i=n(21),o=n(85);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(73);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){var r=n(46).f,i=n(48),o=n(10)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(6),i=n(46),o=n(32),a=n(10)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var o=n(10)("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},e(r)}catch(e){}return n}},function(e,t,n){var r=n(31);r(r.S+r.F,"Object",{assign:n(158)})},function(e,t,n){"use strict";var f=n(79),p=n(159),d=n(81),m=n(74),v=n(80),i=Object.assign;e.exports=!i||n(47)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=i({},e)[n]||Object.keys(i({},t)).join("")!=r})?function(e,t){for(var n=m(e),r=arguments.length,i=1,o=p.f,a=d.f;i<r;)for(var s,u=v(arguments[i++]),l=o?f(u).concat(o(u)):f(u),c=l.length,h=0;h<c;)a.call(u,s=l[h++])&&(n[s]=u[s]);return n}:i},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){!function(e){"use strict";function r(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return Qaa.iterable&&(e[Symbol.iterator]=function(){return e}),e}function a(t){this.map={},t instanceof a?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function t(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function n(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(Qaa.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(Qaa.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(Qaa.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(Qaa.arrayBuffer&&Qaa.blob&&v(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!Qaa.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!y(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Qaa.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Qaa.blob&&(this.blob=function(){var e=t(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?t(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(n)}),this.text=function(){var e=t(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Qaa.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e,t){var n=(t=t||{}).body;if(e instanceof c){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=function(e){var t=e.toUpperCase();return-1<g.indexOf(t)?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var i=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function f(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var p="Symbol"in e&&"iterator"in Symbol,d="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}();if("ArrayBuffer"in e)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},y=ArrayBuffer.isView||function(e){return e&&-1<m.indexOf(Object.prototype.toString.call(e))};a.prototype.append=function(e,t){e=r(e),t=i(t);var n=this.map[e];this.map[e]=n?n+","+t:t},a.prototype.delete=function(e){delete this.map[r(e)]},a.prototype.get=function(e){return e=r(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},a.prototype.set=function(e,t){this.map[r(e)]=i(t)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),o(n)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},a.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),o(n)},p&&(a.prototype[Symbol.iterator]=a.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];f.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=c,e.Response=f,e.fetch=function(i,o){return new Promise(function(n,e){var t=new c(i,o),r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:function(e){var i=new a;return e.split(/\r?\n/).forEach(function(e){var t=e.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();i.append(n,r)}}),i}(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;n(new f(t,e))},r.onerror=function(){e(new TypeError("Network request failed"))},r.ontimeout=function(){e(new TypeError("Network request failed"))},r.open(t.method,t.url,!0),"include"===t.credentials&&(r.withCredentials=!0),"responseType"in r&&d&&(r.responseType="blob"),t.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=n(2),a=r(n(22)),s=r(n(333));window.store=a.default;var u=document.getElementById("app-landbot");u||((u=document.createElement("div")).id="app-landbot",document.body.appendChild(u)),(0,i.render)((0,i.h)(o.Provider,{store:a.default},(0,i.h)(s.default,null)),u)},function(e,o,a){"use strict";(function(e,t){var n,r=a(164);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t;var i=Object(r.a)(n);o.a=i}).call(o,a(7),a(163)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";t.a=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(n(3)),a=r(n(167)),s=r(n(180)),u=r(n(91)),l=r(n(181)),c=r(n(25)),f=r(n(54)),h=r(n(89)),p=r(n(185)),d=r(n(186)),m=r(n(90)),v=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.settings=this.getSettings(e),this.interAppCom=new l.default(name),window.Landbot=this.interAppCom,this.interAppCom.send("landbot-init"),this.fi=new a.default(this.settings),this.umiStorage=new s.default(this.settings.storage_off),this.multiLang=new u.default,c.default.append("Multilanguage support ["+this.multiLang.locale+"]","umicore.multilang"),this.settings.customerToken=this._getCustomerToken(),this.settings.serverUrl=f.default.getSafeUrl(this.settings.serverUrl)||"https://app.landbot.io/",this.settings.welcomeUrl=f.default.getSafeUrl(this.settings.welcomeUrl),this.settings.messageLimit=this.settings.messageLimit||20,this.metadataInfo=this.getMetadataInfo(),this.provisionalWelcome=null,this.welcomeLaunched=!1,this.agentsInfo={},this.agentsInfo.brand||(this.agentsInfo.brand={name:this.settings.brand_name||"landbot",avatar:this.settings.logo||"https://storage.googleapis.com/media.helloumi.com/brands/helloumi.png"}),this.setupListeners(),this.settings.parentScript&&this.interAppCom.send("landbot-exec-script",this.settings.parentScript),this.ready()}return i(t,[{key:"getSettings",value:function(e){for(var t=e||window.UmiCoreConfig||{},n=["branding"],r={},i=window.location.search.substring(1).split("&"),o=null,a=0;a<i.length;a++)o=i[a].split("="),-1===n.indexOf(o[0])&&(r[o[0]]=f.default.getQueryValue(o[1]));for(var s={},u=window.location!==window.parent.location?(document.referrer.split("?")[1]||"").split("&"):[],l=0;l<u.length;l++)o=u[l].split("="),-1===n.indexOf(o[0])&&(s[o[0]]=f.default.getQueryValue(o[1]));if(t.customData=t.customData||{},t.hidden_fields)for(var c in t.hidden_fields)if(t.hidden_fields.hasOwnProperty(c)){var h=r[c]||s[c]||t.hidden_fields[c].default||null;h&&(t.customData[t.hidden_fields[c].field||c]=h)}return Object.assign(t,s,r)}},{key:"_getCustomerToken",value:function(){return this.settings.customerToken||this.umiStorage.getItem("umicore-customer-"+this.settings.channelToken)||null}},{key:"extendSettings",value:function(e){var t=JSON.parse(JSON.stringify(this.settings));this.settings=Object.assign(t,e)}},{key:"setupListeners",value:function(){var t=this;o.default.on("hu-receive-message",function(e){return t.interAppCom.send("landbot-msg-receive",e)}),this.interAppCom.on("landbot-config",function(e){t.extendSettings(e),o.default.emit("hu-load-config",e)}),this.interAppCom.on("landbot-msg-send",function(e){t.querySendMessage(e)}),this.interAppCom.on("landbot-custom-data",function(e){t.settings.customData=Object.assign(t.settings.customData||{},e)}),this.interAppCom.on("landbot-meta-data",function(e){t.metadataInfo=Object.assign(t.metadataInfo||{},e)}),this.interAppCom.on("landbot-remove-chat",function(){return o.default.emit("hu-remove-chat")}),o.default.on("hu-query-send-message",function(e){return t.querySendMessage(e)}),o.default.on("hu-query-old-messages",function(){return t.getOldMessages()}),o.default.on("hu-query-stored-agents",function(){return t.sendStoredAgents()}),o.default.on("hu-query-get-agent",function(e){return t.fetchAgentData(e)}),o.default.on("hu-receive-last-group-message",function(e){return t.interAppCom.send("landbot-proactive-msg-receive",e)}),o.default.on("hu-receive-last-brand-message",function(e){return t.interAppCom.send("landbot-last-brand-msg-receive",e)})}},{key:"fetchAgentData",value:function(t){var n=this;-1===t||this.agentsInfo[t]||(this.agentsInfo[t]={},h.default.fetch({url:m.default.AGENT({serverUrl:this.settings.serverUrl}),method:"POST",body:JSON.stringify({agent_id:t,channel_token:this.settings.channelToken})}).then(function(e){c.default.append(p.default.format(new Date,"HH:mm:ss.ff")+": Agent info received","umicore.agents["+t+"]").append(e,"umicore.agents["+t+"]"),o.default.emit("hu-get-agent",{name:e.name,avatar:e.avatar,samurai:t}),n.agentsInfo[t]={name:e.name,avatar:e.avatar},n.interAppCom.send("landbot-proactive-agents-info",n.agentsInfo)}).catch(function(){delete n.agentsInfo[t]}))}},{key:"sendStoredAgents",value:function(){o.default.emit("hu-get-stored-agents",this.agentsInfo),this.interAppCom.send("landbot-proactive-agents-info",this.agentsInfo),c.default.append(p.default.format(new Date,"HH:mm:ss.ff")+": Got stored agents","umicore.agents.info").append(this.agentsInfo,"umicore.agents.info")}},{key:"getOldMessages",value:function(){var t=this;this.fi.getOldMessages().then(function(e){e=t.parseTimestamp(e),o.default.emit("hu-old-chat",e)})}},{key:"ready",value:function(){o.default.emit("hu-umicore-ready","hu-umicore-ready")}},{key:"randomId",value:function(){return"H-"+this.settings.brandID+f.default.randomKey(10)}},{key:"getRandomWelcome",value:function(){var e=[{type:"dialog",title:"Hello there!",buttons:["Hi!"],payloads:["Hi!"],samurai:"-1"},{type:"dialog",title:"Howdy!",buttons:["Hello!"],payloads:["Hello!"],samurai:"-1"},{type:"dialog",title:"Welcome!",buttons:["Howdy!"],payloads:["Howdy!"],samurai:"-1"}];return[e[Math.floor(Math.random()*e.length)]]}},{key:"getWelcomeMessages",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.umiStorage.hasOwnProperty("welcomeMessage-"+this.settings.channelToken)&&!e&&!this.settings.test)return c.default.append("Welcome messages obtained from local Storage","umicore.welcome"),JSON.parse(this.umiStorage.getItem("welcomeMessage-"+this.settings.channelToken));var t=this.settings.welcome||[];t=0<t.length?t:this.getRandomWelcome(),c.default.append("Welcome message","umicore.welcome"),c.default.append(t,"umicore.welcome");var r=t;r.hasOwnProperty("messages")&&(r=Object.values(r.messages));var i=Date.now();return 0===r.length?[]:(r.forEach(function(e,t){e.timestamp=t+i,e.key=f.default.randomKey(),e.role=e.role?e.role.concat("welcome"):["welcome"],e.message=d.default.transformVariables(e.message,n.settings.hidden_fields,n.settings.customData),e.title=d.default.transformVariables(e.title,n.settings.hidden_fields,n.settings.customData),e.rich_text=d.default.transformVariables(e.rich_text,n.settings.hidden_fields,n.settings.customData)}),r)}},{key:"welcomeMessages",value:function(){var r=this;return new Promise(function(e,t){var n=r.getWelcomeMessages();n.forEach(function(e){o.default.emit("hu-receive-message",e)}),r.provisionalWelcome=n,e(r.welcomeLaunched=!0)})}},{key:"storeWelcomeMessage",value:function(){this.umiStorage.removeItem("welcomeMessage-"+this.settings.channelToken),this.umiStorage.setItem("welcomeMessage-"+this.settings.channelToken,JSON.stringify(this.provisionalWelcome)),this.provisionalWelcome=null}},{key:"getRandomRevisit",value:function(){return this.multiLang.getObject("revisit")}},{key:"getRevisitMessages",value:function(){var e=this.settings.revisit||[];e=0<e.length?e:this.getRandomRevisit(),c.default.append(e,"umicore.revisit");var t=e,n=Date.now();return 0===t.length?[]:(t.forEach(function(e,t){e.timestamp=t+n,e.key=f.default.randomKey(),e.role=e.role?e.role.concat("revisit"):["revisit"]}),t)}},{key:"revisitMessages",value:function(){var n=this;return new Promise(function(e,t){n.getRevisitMessages().forEach(function(e){o.default.emit("hu-receive-message",e)}),e(!0)})}},{key:"parseTimestamp",value:function(e){return e.forEach(function(e){e.timestamp*=1e3}),e}},{key:"getAllMessages",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];o.default.emit("hu-fetching-data"),(e=this.parseTimestamp(e)).length<this.settings.messageLimit&&!this.welcomeLaunched&&(c.default.append("Messages loaded are less than the limit. Concatenating welcome messages...","umicore.welcome"),e=this.getWelcomeMessages().concat(e)),t?o.default.emit("hu-initial-chat",e):e.forEach(function(e){void 0!==e.samurai&&o.default.emit("hu-receive-message",e)}),c.default.append(e,"umicore.messages")}},{key:"onMessageReceive",value:function(e){e=this.parseTimestamp([e]),o.default.emit("hu-receive-message",e[0]),e[0].samurai&&!this.agentsInfo[e[0].samurai]&&this.fetchAgentData(e[0].samurai),null!==this.provisionalWelcome&&this.storeWelcomeMessage()}},{key:"startConnection",value:function(){var t=this;return this.interAppCom.send("landbot-load"),"1"!==this.umiStorage.getItem("umicore-sessionStarted-"+this.settings.channelToken)||this.settings.revisit_off?this.settings.customerToken?this._setupClient().then(function(){return o.default.emit("hu-fetching-data"),t.fi.getLastMessages(t.settings.messageLimit)}).then(function(e){return t.getAllMessages(e,!0)}).catch(function(e){return console.error(e),t.settings.customerToken=null,t._onNewSession()}):this._onNewSession():this._setupClient().then(function(){t.revisitMessages()}).catch(function(e){return console.error(e),t.settings.customerToken=null,t._onNewSession()})}},{key:"_setupClient",value:function(){var t=this;return this.fi.authRequest({customerToken:this.settings.customerToken,channelToken:this.settings.channelToken,serverUrl:this.settings.welcomeUrl||this.settings.serverUrl}).then(function(e){return t.fi.auth(e)}).then(this._setupDatabaseListeners.bind(this))}},{key:"_setupDatabaseListeners",value:function(e){var t=this,n=e.customer_id,r=this.settings.brandID,i="/"+r+"/messages/"+n+"/messages",o="/"+r+"/messages/"+n+"/presence";this.fi.setChatReference(i),this.fi.setStatusReference(o),this.fi.setNewMessageListener(function(e){t.onMessageReceive(e)})}},{key:"_onNewSession",value:function(){var t=this;this.settings.welcomeUrl&&h.default.fetch({url:m.default.VISITOR({welcomeUrl:this.settings.welcomeUrl}),method:"POST",body:JSON.stringify({channel_token:this.settings.channelToken})}).then(function(e){return t.settings.customerToken=e.customer_token,t.umiStorage.setItem("umicore-customer-"+t.settings.channelToken,t.settings.customerToken),t.fi.auth(e)}).then(this._setupDatabaseListeners.bind(this)).catch(function(e){return console.log("Error when auth or other in onNewSession")}),this.welcomeMessages()}},{key:"getMetadataInfo",value:function(){return{string:navigator.userAgent}}},{key:"checkCustomerToken",value:function(e){this.settings.customerToken||o.default.emit("hu-first-auth");var t=e.customer_token;t!==this.settings.customerToken&&(this.settings.customerToken=t,this.umiStorage.setItem("umicore-customer-"+this.settings.channelToken,this.settings.customerToken),this._setupClient())}},{key:"querySendMessage",value:function(e){var t=this;if("#_continue"===e.payload)return o.default.emit("hu-reset-chat"),void this.fi.getLastMessages(this.settings.messageLimit).then(function(e){return t.getAllMessages(e,!0)});"#init"===e.payload&&(o.default.emit("hu-reset-chat"),e.render=!1),this.getSendingData(e).then(function(e){return t.sendMessage({type:e.type,payload:e.payload,message:e.message,extra:e.extra,url:e.url,action:e.action,channel_token:t.settings.channelToken,customer_token:t.settings.customerToken,custom_data:t.settings.customData,key:t.randomId(),origin:f.default.getOrigin(),customer_name:t.settings.customerName,metadata_info:t.metadataInfo})}).catch(function(e){console.log(e,"error sending message"),o.default.emit("hu-error-sending-message",e)}),o.default.emit("hu-sending-message",this.generateMessage(e))}},{key:"getSendingData",value:function(e){var n=this,t=e.type,r=void 0===t?"text":t,i=e.message,o=void 0===i?"":i,a=e.payload,s=void 0===a?"":a,u=e.files,l=e.action,c=e.extra;return new Promise(function(t,e){switch(r){case"text":if(!o)return e();t({type:r,message:o,payload:s,extra:c});break;case"button":if(!o||!s)return e();t({type:r,message:o,payload:s,extra:c});break;case"hidden":if(!s)return e();t({type:r,payload:s});break;case"file":if(!u)return e();n.fetchFileURL(u).then(function(e){t({type:r,url:e,extra:c})});break;case"stripe":t({type:r,payload:s,action:l});break;default:return e()}})}},{key:"sendMessage",value:function(t){var n=this,e={};for(var r in t)void 0!==t[r]&&(e[r]=t[r]);fetch(this.settings.serverUrl+"webchat/api/send/",{headers:{Accept:"application/json"},method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){void 0===e.errors?(c.default.append(t,"umicore.send"),n.umiStorage.removeItem("umicore-customer-"+n.settings.channelToken),n.umiStorage.setItem("umicore-customer-"+n.settings.channelToken,e.customer_token),n.umiStorage.setItem("umicore-sessionStarted-"+n.settings.channelToken,"1"),n.checkCustomerToken(e),n.settings.customData={}):(c.default.append(t,"umicore.send","error"),o.default.emit("hu-error-sending-message",e))}).catch(function(e){return o.default.emit("hu-error-sending-message",e)})}},{key:"fetchFileURL",value:function(e){var n=this,r=new FormData;return r.append("channel_token",this.settings.channelToken),this.settings.customerToken&&r.append("customer_token",this.settings.customerToken),r.append("file",e[0]),new Promise(function(t,e){fetch(n.settings.serverUrl+"webchat/api/file/",{headers:{Accept:"application/json"},method:"POST",body:r}).then(function(e){return e.json()}).then(function(e){!0===e.success&&t(e.url)}).catch(function(e){return console.log(e)})})}},{key:"generateMessage",value:function(e){var t=e.type,n=void 0===t?"text":t,r=e.message,i=void 0===r?"":r,o=e.files,a=e.render,s="file"===n?-1<o[0].type.indexOf("image")?"image":"document":"text",u=o?o[0]:void 0;return{type:s,message:i,key:this.randomId(),url:u,render:a}}},{key:"toString",value:function(){return"umicore"}}]),t}();t.default=v},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(c(n=this._events[e]))return!1;if(u(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(l(n))for(i=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,o=0;o<r;o++)a[o].apply(this,i);return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!u(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,u(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!u(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!u(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||u(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(n)){for(o=i;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(u(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?u(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(u(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(168));n(174),n(176);var a=r(n(54)),s=r(n(89)),u=r(n(90)),l=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.config=e,this.firebaseApp=o.initializeApp({apiKey:this.config.apiKey,authDomain:this.config.authDomain,databaseURL:this.config.databaseURL,storageBucket:this.config.storageBucket},"landbot-"+this.config.channelToken+"-"+(e.test?"test":a.default.randomKey(4))),this.chatRef=null,this.statusRef=null,this.lastTimestamp=Date.now(),this.firstTimestamp=Date.now(),this.callbacks={}}return i(t,[{key:"authRequest",value:function(e){var t=e.customerToken,n=e.channelToken,r=e.serverUrl,i={channel_token:n,customer_token:t};return s.default.fetch({url:u.default.FIREBASE({serverUrl:r}),method:"POST",body:JSON.stringify(i)})}},{key:"auth",value:function(e){var t=this;return this.firebaseApp.auth().signInWithCustomToken(e.firebase_token).then(function(){return t.lastTimestamp=1e3*e.lastTimestamp,e})}},{key:"setEventListener",value:function(e,t){this.callbacks[e]=t}},{key:"updateFirstTimestamp",value:function(e){this.firstTimestamp>e&&(this.firstTimestamp=e-.001)}},{key:"onChildAdded",value:function(e){var t=e.toJSON();t.key=e.key,this.callbacks.addMessage(t)}},{key:"getLastMessages",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return this.chatRef.orderByChild("timestamp").limitToLast(e).once("value").then(function(e){var n=[];return e.forEach(function(e){var t=e.toJSON();t.key=e.key,n.push(t)}),0<n.length&&t.updateFirstTimestamp(n[0].timestamp),n})}},{key:"getOldMessages",value:function(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return new Promise(function(t,n){r.chatRef.orderByChild("timestamp").endAt(r.firstTimestamp).limitToLast(e).once("value").then(function(e){var n=[];e.forEach(function(e){var t=e.toJSON();t.key=e.key,n.push(t)}),0<n.length&&r.updateFirstTimestamp(n[0].timestamp),t(n)}).catch(function(e){return n(e)})})}},{key:"setChatReference",value:function(e){this.chatRef=this.firebaseApp.database().ref(e)}},{key:"setStatusReference",value:function(e){this.statusRef=this.firebaseApp.database().ref(e),this.statusRef.set(!0),this.statusRef.onDisconnect().set(!1)}},{key:"setNewMessageListener",value:function(n){return this.chatRef.orderByChild("timestamp").startAt(this.lastTimestamp/1e3).on("child_added",function(e){var t=e.val();n(Object.assign({},t,{key:e.key,timestamp:1e3*t.timestamp}))})}}]),t}();t.default=l},function(e,t,n){"use strict";n(169);var r,i=(r=n(53))&&"object"==typeof r&&"default"in r?r.default:r;e.exports=i},function(e,t,Xt){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(t,e){function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function i(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e=1===n._state?r.onFulfilled:r.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void s(r.promise,e)}a(r.promise,t)}else(1===n._state?a:s)(r.promise,n._value)})):n._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void c(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var h=Xt(172),f=(Xt.n(h),setTimeout);o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return i(this,new l(e,t,n)),n},o.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},o.all=function(t){return new o(function(r,i){function o(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){o(t,e)},i)}a[t]=e,0==--s&&r(a)}catch(t){i(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(t);if(0===a.length)return r([]);for(var s=a.length,e=0;e<a.length;e++)o(e,a[e])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(i){return new o(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){f(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();p.Promise||(p.Promise=o);var m=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),v=n(function(e){var t=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=t)}),d=(v.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),y=function(e){if(!d(e))throw TypeError(e+" is not an object!");return e},g=function(e){try{return!!e()}catch(e){return!0}},b=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_=m.document,w=d(_)&&d(_.createElement),k=function(e){return w?_.createElement(e):{}},x=!b&&!g(function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a}),C=function(e,t){if(!d(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!d(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!d(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!d(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},S=Object.defineProperty,E={f:b?Object.defineProperty:function(e,t,n){if(y(e),t=C(t,!0),y(n),x)try{return S(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},O=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},T=b?function(e,t,n){return E.f(e,t,O(1,n))}:function(e,t,n){return e[t]=n,e},N={}.hasOwnProperty,P=function(e,t){return N.call(e,t)},I=0,A=Math.random(),D=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++I+A).toString(36))},M=n(function(e){var o=D("src"),t=Function.toString,a=(""+t).split("toString");v.inspectSource=function(e){return t.call(e)},(e.exports=function(e,t,n,r){var i="function"==typeof n;i&&(P(n,"name")||T(n,"name",t)),e[t]!==n&&(i&&(P(n,o)||T(n,o,e[t]?""+e[t]:a.join(String(t)))),e===m?e[t]=n:r?e[t]?e[t]=n:T(e,t,n):(delete e[t],T(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||t.call(this)})}),j=function(r,i,e){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}},R=function(e,t,n){var r,i,o,a,s=e&R.F,u=e&R.G,l=e&R.S,c=e&R.P,h=e&R.B,f=u?m:l?m[t]||(m[t]={}):(m[t]||{}).prototype,p=u?v:v[t]||(v[t]={}),d=p.prototype||(p.prototype={});for(r in u&&(n=t),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=h&&i?j(o,m):c&&"function"==typeof o?j(Function.call,o):o,f&&M(f,r,o,e&R.U),p[r]!=o&&T(p,r,a),c&&d[r]!=o&&(d[r]=o)};m.core=v,R.F=1,R.G=2,R.S=4,R.P=8,R.B=16,R.W=32,R.U=64,R.R=128;var F=R,L={}.toString,U=function(e){return L.call(e).slice(8,-1)},V=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==U(e)?e.split(""):Object(e)},H=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},W=function(e){return Object(H(e))},B=Math.ceil,q=Math.floor,z=function(e){return isNaN(e=+e)?0:(0<e?q:B)(e)},G=Math.min,K=function(e){return 0<e?G(z(e),9007199254740991):0},Y=Array.isArray||function(e){return"Array"==U(e)},Q=m["__core-js_shared__"]||(m["__core-js_shared__"]={}),$=function(e){return Q[e]||(Q[e]={})},X=n(function(e){var t=$("wks"),n=m.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:D)("Symbol."+e))}).store=t}),J=X("species"),Z=function(e,t){return new(function(e){var t;return Y(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Y(t.prototype)||(t=void 0),d(t)&&null===(t=t[J])&&(t=void 0)),void 0===t?Array:t}(e))(t)},ee=function(h,e){var f=1==h,p=2==h,d=3==h,m=4==h,v=6==h,y=5==h||v,g=e||Z;return function(e,t,n){for(var r,i,o=W(e),a=V(o),s=j(t,n,3),u=K(a.length),l=0,c=f?g(e,u):p?g(e,0):void 0;l<u;l++)if((y||l in a)&&(i=s(r=a[l],l,o),h))if(f)c[l]=i;else if(i)switch(h){case 3:return!0;case 5:return r;case 6:return l;case 2:c.push(r)}else if(m)return!1;return v?-1:d||m?m:c}},te=X("unscopables"),ne=Array.prototype;null==ne[te]&&T(ne,te,{});var re=function(e){ne[te][e]=!0},ie=ee(5),oe=!0;"find"in[]&&Array(1).find(function(){oe=!1}),F(F.P+F.F*oe,"Array",{find:function(e){return ie(this,e,1<arguments.length?arguments[1]:void 0)}}),re("find");var ae=(v.Array.find,ee(6)),se=!0;"findIndex"in[]&&Array(1).findIndex(function(){se=!1}),F(F.P+F.F*se,"Array",{findIndex:function(e){return ae(this,e,1<arguments.length?arguments[1]:void 0)}}),re("findIndex");var ue=(v.Array.findIndex,function(e){return V(H(e))}),le=Math.max,ce=Math.min,he=$("keys"),fe=function(e){return he[e]||(he[e]=D(e))},pe=function(e,t,n){var r=ue(e),i=K(r.length),o=function(e,t){return(e=z(e))<0?le(e+t,0):ce(e,t)}(n,i);for(;o<i;o++)if(o in r&&r[o]===t)return o||0;return-1},de=fe("IE_PROTO"),me=function(e,t){var n,r=ue(e),i=0,o=[];for(n in r)n!=de&&P(r,n)&&o.push(n);for(;t.length>i;)P(r,n=t[i++])&&(~pe(o,n)||o.push(n));return o},ve="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ye=Object.keys||function(e){return me(e,ve)},ge={f:Object.getOwnPropertySymbols},be={f:{}.propertyIsEnumerable},_e=Object.assign,we=!_e||g(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=_e({},e)[n]||Object.keys(_e({},t)).join("")!=r})?function(e,t){for(var n=W(e),r=arguments.length,i=1,o=ge.f,a=be.f;i<r;)for(var s,u=V(arguments[i++]),l=o?ye(u).concat(o(u)):ye(u),c=l.length,h=0;h<c;)a.call(u,s=l[h++])&&(n[s]=u[s]);return n}:_e;F(F.S+F.F,"Object",{assign:we});var ke=(v.Object.assign,X("match")),xe=function(e,t,n){if(function(e){var t;return d(e)&&(void 0!==(t=e[ke])?!!t:"RegExp"==U(e))}(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(H(e))},Ce=X("match"),Se="".startsWith;F(F.P+F.F*function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[Ce]=!1,!"/./"[t](n)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(e){var t=xe(this,e,"startsWith"),n=K(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return Se?Se.call(t,r,n):t.slice(n,n+r.length)===r}});var Ee=(v.String.startsWith,function(e){var t=String(H(this)),n="",r=z(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n});F(F.P,"String",{repeat:Ee});var Oe=(v.String.repeat,n(function(e){var n=D("meta"),t=E.f,r=0,i=Object.isExtensible||function(){return!0},o=!g(function(){return i(Object.preventExtensions({}))}),a=function(e){t(e,n,{value:{i:"O"+ ++r,w:{}}})},s=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!d(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!P(e,n)){if(!i(e))return"F";if(!t)return"E";a(e)}return e[n].i},getWeak:function(e,t){if(!P(e,n)){if(!i(e))return!0;if(!t)return!1;a(e)}return e[n].w},onFreeze:function(e){return o&&s.NEED&&i(e)&&!P(e,n)&&a(e),e}}})),Te=(Oe.KEY,Oe.NEED,Oe.fastKey,Oe.getWeak,Oe.onFreeze,E.f),Ne=X("toStringTag"),Pe=function(e,t,n){e&&!P(e=n?e:e.prototype,Ne)&&Te(e,Ne,{configurable:!0,value:t})},Ie={f:X},Ae=E.f,De=function(e){var t=v.Symbol||(v.Symbol=m.Symbol||{});"_"==e.charAt(0)||e in t||Ae(t,e,{value:Ie.f(e)})},Me=b?Object.defineProperties:function(e,t){y(e);for(var n,r=ye(t),i=r.length,o=0;o<i;)E.f(e,n=r[o++],t[n]);return e},je=m.document,Re=je&&je.documentElement,Fe=fe("IE_PROTO"),Le=function(){},Ue=function(){var e,t=k("iframe"),n=ve.length;for(t.style.display="none",Re.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ue=e.F;n--;)delete Ue.prototype[ve[n]];return Ue()},Ve=Object.create||function(e,t){var n;return null!==e?(Le.prototype=y(e),n=new Le,Le.prototype=null,n[Fe]=e):n=Ue(),void 0===t?n:Me(n,t)},He=ve.concat("length","prototype"),We={f:Object.getOwnPropertyNames||function(e){return me(e,He)}},Be=We.f,qe={}.toString,ze="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ge={f:function(e){return ze&&"[object Window]"==qe.call(e)?function(e){try{return Be(e)}catch(e){return ze.slice()}}(e):Be(ue(e))}},Ke=Object.getOwnPropertyDescriptor,Ye={f:b?Ke:function(e,t){if(e=ue(e),t=C(t,!0),x)try{return Ke(e,t)}catch(e){}if(P(e,t))return O(!be.f.call(e,t),e[t])}},Qe=Oe.KEY,$e=Ye.f,Xe=E.f,Je=Ge.f,Ze=m.Symbol,et=m.JSON,tt=et&&et.stringify,nt=X("_hidden"),rt=X("toPrimitive"),it={}.propertyIsEnumerable,ot=$("symbol-registry"),at=$("symbols"),st=$("op-symbols"),ut=Object.prototype,lt="function"==typeof Ze,ct=m.QObject,ht=!ct||!ct.prototype||!ct.prototype.findChild,ft=b&&g(function(){return 7!=Ve(Xe({},"a",{get:function(){return Xe(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=$e(ut,t);r&&delete ut[t],Xe(e,t,n),r&&e!==ut&&Xe(ut,t,r)}:Xe,pt=function(e){var t=at[e]=Ve(Ze.prototype);return t._k=e,t},dt=lt&&"symbol"==typeof Ze.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Ze},mt=function(e,t,n){return e===ut&&mt(st,t,n),y(e),t=C(t,!0),y(n),P(at,t)?(n.enumerable?(P(e,nt)&&e[nt][t]&&(e[nt][t]=!1),n=Ve(n,{enumerable:O(0,!1)})):(P(e,nt)||Xe(e,nt,O(1,{})),e[nt][t]=!0),ft(e,t,n)):Xe(e,t,n)},vt=function(e,t){y(e);for(var n,r=function(e){var t=ye(e),n=ge.f;if(n)for(var r,i=n(e),o=be.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}(t=ue(t)),i=0,o=r.length;i<o;)mt(e,n=r[i++],t[n]);return e},yt=function(e){var t=it.call(this,e=C(e,!0));return!(this===ut&&P(at,e)&&!P(st,e))&&(!(t||!P(this,e)||!P(at,e)||P(this,nt)&&this[nt][e])||t)},gt=function(e,t){if(e=ue(e),t=C(t,!0),e!==ut||!P(at,t)||P(st,t)){var n=$e(e,t);return!n||!P(at,t)||P(e,nt)&&e[nt][t]||(n.enumerable=!0),n}},bt=function(e){for(var t,n=Je(ue(e)),r=[],i=0;n.length>i;)P(at,t=n[i++])||t==nt||t==Qe||r.push(t);return r},_t=function(e){for(var t,n=e===ut,r=Je(n?st:ue(e)),i=[],o=0;r.length>o;)!P(at,t=r[o++])||n&&!P(ut,t)||i.push(at[t]);return i};lt||(M((Ze=function(){if(this instanceof Ze)throw TypeError("Symbol is not a constructor!");var t=D(0<arguments.length?arguments[0]:void 0),n=function(e){this===ut&&n.call(st,e),P(this,nt)&&P(this[nt],t)&&(this[nt][t]=!1),ft(this,t,O(1,e))};return b&&ht&&ft(ut,t,{configurable:!0,set:n}),pt(t)}).prototype,"toString",function(){return this._k}),Ye.f=gt,E.f=mt,We.f=Ge.f=bt,be.f=yt,ge.f=_t,b&&M(ut,"propertyIsEnumerable",yt,!0),Ie.f=function(e){return pt(X(e))}),F(F.G+F.W+F.F*!lt,{Symbol:Ze});for(var wt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),kt=0;wt.length>kt;)X(wt[kt++]);for(var xt=ye(X.store),Ct=0;xt.length>Ct;)De(xt[Ct++]);F(F.S+F.F*!lt,"Symbol",{for:function(e){return P(ot,e+="")?ot[e]:ot[e]=Ze(e)},keyFor:function(e){if(!dt(e))throw TypeError(e+" is not a symbol!");for(var t in ot)if(ot[t]===e)return t},useSetter:function(){ht=!0},useSimple:function(){ht=!1}}),F(F.S+F.F*!lt,"Object",{create:function(e,t){return void 0===t?Ve(e):vt(Ve(e),t)},defineProperty:mt,defineProperties:vt,getOwnPropertyDescriptor:gt,getOwnPropertyNames:bt,getOwnPropertySymbols:_t}),et&&F(F.S+F.F*(!lt||g(function(){var e=Ze();return"[null]"!=tt([e])||"{}"!=tt({a:e})||"{}"!=tt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(d(t)||void 0!==e)&&!dt(e))return Y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!dt(t))return t}),r[1]=t,tt.apply(et,r)}}),Ze.prototype[rt]||T(Ze.prototype,rt,Ze.prototype.valueOf),Pe(Ze,"Symbol"),Pe(Math,"Math",!0),Pe(m.JSON,"JSON",!0);var St=X("toStringTag"),Et="Arguments"==U(function(){return arguments}()),Ot={};Ot[X("toStringTag")]="z",Ot+""!="[object z]"&&M(Object.prototype,"toString",function(){return"[object "+function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),St))?n:Et?U(t):"Object"==(r=U(t))&&"function"==typeof t.callee?"Arguments":r}(this)+"]"},!0),De("asyncIterator"),De("observable");var Tt=(v.Symbol,{}),Nt={};T(Nt,X("iterator"),function(){return this});var Pt=fe("IE_PROTO"),It=Object.prototype,At=Object.getPrototypeOf||function(e){return e=W(e),P(e,Pt)?e[Pt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?It:null},Dt=X("iterator"),Mt=!([].keys&&"next"in[].keys()),jt=function(){return this},Rt=function(e,t,n,r,i,o,a){!function(e,t,n){e.prototype=Ve(Nt,{next:O(1,n)}),Pe(e,t+" Iterator")}(n,t,r);var s,u,l,c=function(e){if(!Mt&&e in d)return d[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",f="values"==i,p=!1,d=e.prototype,m=d[Dt]||d["@@iterator"]||i&&d[i],v=m||c(i),y=i?f?c("entries"):v:void 0,g="Array"==t&&d.entries||m;if(g&&(l=At(g.call(new e)))!==Object.prototype&&l.next&&(Pe(l,h,!0),"function"!=typeof l[Dt]&&T(l,Dt,jt)),f&&m&&"values"!==m.name&&(p=!0,v=function(){return m.call(this)}),(Mt||p||!d[Dt])&&T(d,Dt,v),Tt[t]=v,Tt[h]=jt,i)if(s={values:f?v:c("values"),keys:o?v:c("keys"),entries:y},a)for(u in s)u in d||M(d,u,s[u]);else F(F.P+F.F*(Mt||p),t,s);return s},Ft=function(e,t){var n,r,i=String(H(e)),o=z(t),a=i.length;return o<0||a<=o?"":(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?i.charAt(o):i.slice(o,o+2)};Rt(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Ft(t,n),this._i+=e.length,{value:e,done:!1})});var Lt=function(e,t){return{value:t,done:!!e}},Ut=Rt(Array,"Array",function(e,t){this._t=ue(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Lt(1)):Lt(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");Tt.Arguments=Tt.Array,re("keys"),re("values"),re("entries");for(var Vt=X("iterator"),Ht=X("toStringTag"),Wt=Tt.Array,Bt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},qt=ye(Bt),zt=0;zt<qt.length;zt++){var Gt,Kt=qt[zt],Yt=Bt[Kt],Qt=m[Kt],$t=Qt&&Qt.prototype;if($t&&($t[Vt]||T($t,Vt,Wt),$t[Ht]||T($t,Ht,Kt),Tt[Kt]=Wt,Yt))for(Gt in Ut)$t[Gt]||M($t,Gt,Ut[Gt],!0)}Ie.f("iterator")}.call(t,Xt(170).setImmediate,Xt(7))},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(171),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,d){!function(n,r){"use strict";function i(e){delete u[e]}function o(e){if(l)setTimeout(o,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{i(e),l=!1}}}}if(!n.setImmediate){var a,s=1,u={},l=!1,c=n.document,e=Object.getPrototypeOf&&Object.getPrototypeOf(n);e=e&&e.setTimeout?e:n,"[object process]"==={}.toString.call(n.process)?a=function(e){d.nextTick(function(){o(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(f="setImmediate$"+Math.random()+"$",p=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(f)&&o(+e.data.slice(f.length))},n.addEventListener?n.addEventListener("message",p,!1):n.attachEvent("onmessage",p),a=function(e){n.postMessage(f+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){o(e.data)},a=function(e){t.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(h=c.documentElement,a=function(e){var t=c.createElement("script");t.onreadystatechange=function(){o(e),t.onreadystatechange=null,h.removeChild(t),t=null},h.appendChild(t)}):a=function(e){setTimeout(o,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[s]=r,a(s),s++},e.clearImmediate=i}var h,t,f,p}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(7),n(52))},function(e,t){!function(e){"use strict";function r(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return ota.iterable&&(e[Symbol.iterator]=function(){return e}),e}function a(t){this.map={},t instanceof a?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function t(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function n(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(ota.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(ota.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(ota.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(ota.arrayBuffer&&ota.blob&&v(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!ota.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!y(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ota.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ota.blob&&(this.blob=function(){var e=t(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?t(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(n)}),this.text=function(){var e=t(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ota.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e,t){var n=(t=t||{}).body;if(e instanceof c){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=function(e){var t=e.toUpperCase();return-1<g.indexOf(t)?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var i=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function f(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var p="Symbol"in e&&"iterator"in Symbol,d="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}();if("ArrayBuffer"in e)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},y=ArrayBuffer.isView||function(e){return e&&-1<m.indexOf(Object.prototype.toString.call(e))};a.prototype.append=function(e,t){e=r(e),t=i(t);var n=this.map[e];this.map[e]=n?n+","+t:t},a.prototype.delete=function(e){delete this.map[r(e)]},a.prototype.get=function(e){return e=r(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},a.prototype.set=function(e,t){this.map[r(e)]=i(t)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),o(n)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},a.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),o(n)},p&&(a.prototype[Symbol.iterator]=a.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];f.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=c,e.Response=f,e.fetch=function(i,o){return new Promise(function(n,e){var t=new c(i,o),r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:function(e){var i=new a;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();i.append(n,r)}}),i}(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;n(new f(t,e))},r.onerror=function(){e(new TypeError("Network request failed"))},r.ontimeout=function(){e(new TypeError("Network request failed"))},r.open(t.method,t.url,!0),"include"===t.credentials?r.withCredentials=!0:"omit"===t.credentials&&(r.withCredentials=!1),"responseType"in r&&d&&(r.responseType="blob"),t.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(e){return this instanceof h?(this.v=e,this):new h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n.d(t,"__assign",function(){return a}),t.__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},t.__decorate=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a},t.__param=function(n,r){return function(e,t){r(e,t,n)}},t.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.__awaiter=function(o,a,s,u){return new(s||(s=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})},t.__generator=function(n,r){function e(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t},t.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},t.__values=r,t.__read=i,t.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},t.__await=h,t.__asyncGenerator=function(e,t,n){function r(r){l[r]&&(u[r]=function(n){return new Promise(function(e,t){1<c.push([r,n,e,t])||i(r,n)})})}function i(e,t){try{!function(e){e.value instanceof h?Promise.resolve(e.value.v).then(o,a):s(c[0][2],e)}(l[e](t))}catch(e){s(c[0][3],e)}}function o(e){i("next",e)}function a(e){i("throw",e)}function s(e,t){e(t),c.shift(),c.length&&i(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,l=n.apply(e,t||[]),c=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u},t.__asyncDelegator=function(r){function e(t,n){r[t]&&(i[t]=function(e){return(o=!o)?{value:h(r[t](e)),done:"return"===t}:n?n(e):e})}var i,o;return i={},e("next"),e("throw",function(e){throw e}),e("return"),i[Symbol.iterator]=function(){return this},i},t.__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):r(e)},t.__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},t.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__importDefault=function(e){return e&&e.__esModule?e:{default:e}};var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(175)},function(e,t,n){"use strict";(function(e){var t=n(53),wc=n.n(t);(function(){function u(e){return"string"==typeof e}function n(e){return"boolean"==typeof e}function o(){}function s(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function r(e){return null===e}function l(e){return"array"==s(e)}function c(e){var t=s(e);return"array"==t||"object"==t&&"number"==typeof e.length}function a(e){return"function"==s(e)}function h(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function i(e,t,n){return e.call.apply(e.bind,arguments)}function f(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function p(e,t,n){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:f).apply(null,arguments)}function d(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function e(e,o){function t(){}t.prototype=o.prototype,e.lb=o.prototype,e.prototype=new t,(e.prototype.constructor=e).cd=function(e,t,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[t].apply(e,r)}}function t(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0}function m(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function v(e){if(Error.captureStackTrace)Error.captureStackTrace(this,v);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function y(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");v.call(this,n+e[r])}function g(e,t){throw new y("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function b(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function _(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function w(){this.b=this.a=null}function k(){this.next=this.b=this.a=null}function x(e,t){return 0<=Ga(e,t)}function C(e,t){var n;return(n=0<=(t=Ga(e,t)))&&Array.prototype.splice.call(e,t,1),n}function S(n,r){!function(e,t){var n=e.length,r=u(e)?e.split(""):e;for(--n;0<=n;--n)n in r&&t.call(void 0,r[n],n,e)}(n,function(e,t){r.call(void 0,e,t,n)&&1==Array.prototype.splice.call(n,t,1).length&&0})}function E(e){return Array.prototype.concat.apply([],arguments)}function O(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function T(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function N(e){return rs.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(Xa,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Ja,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(Za,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(es,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ts,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ns,"&#0;"))),e}function P(e,t){return-1!=e.indexOf(t)}function I(e,t){return e<t?-1:t<e?1:0}function A(e){return P(za,e)}function D(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function M(e){for(var t in e)return!1;return!0}function j(e){var t,n={};for(t in e)n[t]=e[t];return n}function R(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<us.length;o++)n=us[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){Va.setTimeout(function(){throw e},0)}function L(e,t){ss||function(){if(Va.Promise&&Va.Promise.resolve){var e=Va.Promise.resolve(void 0);ss=function(){e.then(U)}}else ss=function(){var e=U;!a(Va.setImmediate)||Va.Window&&Va.Window.prototype&&!A("Edge")&&Va.Window.prototype.setImmediate==Va.setImmediate?(as||(as=function(){var e=Va.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!A("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=p(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0===e||A("Trident")||A("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){Va.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).tb;n.tb=null,e()}},function(e){r.next={tb:e},r=r.next,t.port2.postMessage(0)}}()),as(e)):Va.setImmediate(e)}}(),ls||(ss(),ls=!0),cs.add(e,t)}function U(){for(var e;n=t=void 0,n=null,(t=cs).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){F(e)}_(qa,e)}var t,n;ls=!1}function V(e,t){if(this.a=hs,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=o)try{var n=this;e.call(t,function(e){Y(n,fs,e)},function(e){if(!(e instanceof ee))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Y(n,ps,e)})}catch(e){Y(this,ps,e)}}function H(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function W(e,t,n){var r=ds.get();return r.g=e,r.b=t,r.f=n,r}function B(e){if(e instanceof V)return e;var t=new V(o);return Y(t,fs,e),t}function q(n){return new V(function(e,t){t(n)})}function z(e,t,n){Q(e,t,n,null)||L(d(t,e))}function G(e,t){e.b||e.a!=fs&&e.a!=ps||$(e),e.f?e.f.next=t:e.b=t,e.f=t}function K(e,i,o,a){var t=W(null,null,null);return t.a=new V(function(n,r){t.g=i?function(e){try{var t=i.call(a,e);n(t)}catch(e){r(e)}}:n,t.b=o?function(e){try{var t=o.call(a,e);void 0===t&&e instanceof ee?r(e):n(t)}catch(e){r(e)}}:r}),G(t.a.c=e,t),t.a}function Y(e,t,n){e.a==hs&&(e===n&&(t=ps,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Q(n,e.Lc,e.Mc,e)||(e.i=n,e.a=t,e.c=null,$(e),t!=ps||n instanceof ee||function(e,t){e.g=!0,L(function(){e.g&&ms.call(null,t)})}(e,n)))}function Q(e,t,n,r){if(e instanceof V)return G(e,W(t||o,n||null,r)),!0;if(m(e))return e.then(t,n,r),!0;if(h(e))try{var i=e.then;if(a(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(i,e))},o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function $(e){e.h||(e.h=!0,L(e.Ub,e))}function X(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function J(e,t,n,r){if(n==ps&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Z(t,n,r);else try{t.c?t.g.call(t.f):Z(t,n,r)}catch(e){ms.call(null,e)}_(ds,t)}function Z(e,t,n){t==fs?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function ee(e){v.call(this,e)}function te(){0!=vs&&(ys[this[Ha]||(this[Ha]=++Wa)]=this),this.pa=this.pa,this.ja=this.ja}function ne(e){if(!e.pa&&(e.pa=!0,e.ua(),0!=vs)){var t=e[Ha]||(e[Ha]=++Wa);if(0!=vs&&e.ja&&0<e.ja.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ys[t]}}function re(e){return re[" "](e),e}function ie(){var e=Va.document;return e?e.documentMode:void 0}function oe(s){return function(e,t){var n=Ps;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(s,function(){for(var e=0,t=$a(String(gs)).split("."),n=$a(String(s)).split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=I(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||I(0==o[2].length,0==a[2].length)||I(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}function ae(e,t){this.type=e,this.b=this.target=t,this.Gb=!0}function se(e,t){if(ae.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Cs){e:{try{re(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===r?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=u(e.pointerType)?e.pointerType:Rs[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++Ls,this.na=this.Ia=!1}function le(e){e.na=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function ce(e){this.src=e,this.a={},this.b=0}function he(e,t){var n=t.type;n in e.a&&C(e.a[n],t)&&(le(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.na&&o.listener==t&&o.capture==!!n&&o.La==r)return i}return-1}function pe(e,t,n,r,i){if(r&&r.once)me(e,t,n,r,i);else if(l(t))for(var o=0;o<t.length;o++)pe(e,t[o],n,r,i);else n=xe(n),e&&e[Fs]?Se(e,t,n,h(r)?!!r.capture:!!r,i):de(e,t,n,!1,r,i)}function de(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i,s=ke(e);if(s||(e[Us]=s=new ce(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var t=we,n=Ds?function(e){return t.call(n.src,n.listener,e)}:function(e){if(!(e=t.call(n.src,n.listener,e)))return e};return n}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)js||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ge(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function me(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);else n=xe(n),e&&e[Fs]?Ee(e,t,n,h(r)?!!r.capture:!!r,i):de(e,t,n,!0,r,i)}function ve(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)ve(e,t[o],n,r,i);else r=h(r)?!!r.capture:!!r,n=xe(n),e&&e[Fs]?(e=e.m,(t=String(t).toString())in e.a&&(-1<(n=fe(o=e.a[t],n,r,i))&&(le(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=ke(e))&&(t=e.a[t.toString()],e=-1,t&&(e=fe(t,n,r,i)),(n=-1<e?t[e]:null)&&ye(n))}function ye(e){if("number"!=typeof e&&e&&!e.na){var t=e.src;if(t&&t[Fs])he(t.m,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ge(n),r):t.addListener&&t.removeListener&&t.removeListener(r),0,(n=ke(t))?(he(n,e),0==n.b&&(n.src=null,t[Us]=null)):le(e)}}}function ge(e){return e in Vs?Vs[e]:Vs[e]="on"+e}function be(e,t,n,r){var i=!0;if((e=ke(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.na&&(o=_e(o,r),i=i&&!1!==o)}return i}function _e(e,t){var n=e.listener,r=e.La||e.src;return e.Ia&&ye(e),n.call(r,t)}function we(e,t){if(e.na)return!0;if(Ds)return _e(e,new se(t,this));if(!t)e:{t=["window","event"];for(var n=Va,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new se(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=be(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=be(r[i],e,!1,t),n=n&&o}return n}function ke(e){return(e=e[Us])instanceof ce?e:null}function xe(t){return a(t)?t:(t[Hs]||(t[Hs]=function(e){return t.handleEvent(e)}),t[Hs])}function Ce(){te.call(this),this.m=new ce(this),(this.Nb=this).Ua=null}function Se(e,t,n,r,i){e.m.add(String(t),n,!1,r,i)}function Ee(e,t,n,r,i){e.m.add(String(t),n,!0,r,i)}function Oe(e,t,n,r){if(!(t=e.m.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.na&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&he(e.m,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Gb}function Te(e,t,n){if(a(e))n&&(e=p(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=p(e.handleEvent,e)}return 2147483647<Number(t)?-1:Va.setTimeout(e,t||0)}function Ne(n){var r=null;return new V(function(e,t){-1==(r=Te(function(){e(void 0)},n))&&t(Error("Failed to schedule timer."))}).s(function(e){throw Va.clearTimeout(r),e})}function Pe(e){if(e.S&&"function"==typeof e.S)return e.S();if(u(e))return e.split("");if(c(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Ie(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(c(e)||u(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Ae(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ae)for(n=e.U(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function De(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Me(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Me(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e,t){if(this.b=this.m=this.c="",this.i=null,this.h=this.g="",this.f=!1,e instanceof je){this.f=void 0!==t?t:e.f,Re(this,e.c),this.m=e.m,this.b=e.b,Fe(this,e.i),this.g=e.g,t=e.a;var n=new Ge;n.c=t.c,t.a&&(n.a=new Ae(t.a),n.b=t.b),Le(this,n),this.h=e.h}else e&&(n=String(e).match(Ws))?(this.f=!!t,Re(this,n[1]||"",!0),this.m=Be(n[2]||""),this.b=Be(n[3]||"",!0),Fe(this,n[4]),this.g=Be(n[5]||"",!0),Le(this,n[6]||"",!0),this.h=Be(n[7]||"")):(this.f=!!t,this.a=new Ge(null,this.f))}function Re(e,t,n){e.c=n?Be(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Fe(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Le(e,t,n){t instanceof Ge?(e.a=t,function(e,t){t&&!e.f&&(Ke(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Qe(this,t),Xe(this,n,e))},e)),e.f=t}(e.a,e.f)):(n||(t=qe(t,Gs)),e.a=new Ge(t,e.f))}function Ue(e,t,n){e.a.set(t,n)}function Ve(e,t){return e.a.get(t)}function He(e){return e instanceof je?new je(e):new je(e,void 0)}function We(e,t){var n=new je(null,void 0);return Re(n,"https"),e&&(n.b=e),t&&(n.g=t),n}function Be(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qe(e,t,n){return u(e)?(e=encodeURI(e).replace(t,ze),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ze(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}function Ge(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Ke(n){n.a||(n.a=new Ae,n.b=0,n.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ye(e){var t=Ie(e);if(void 0===t)throw Error("Keys are undefined");var n=new Ge(null,void 0);e=Pe(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];l(o)?Xe(n,i,o):n.add(i,o)}return n}function Qe(e,t){Ke(e),t=Je(e,t),Me(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Me((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&De(e)))}function $e(e,t){return Ke(e),t=Je(e,t),Me(e.a.b,t)}function Xe(e,t,n){Qe(e,t),0<n.length&&(e.c=null,e.a.set(Je(e,t),O(n)),e.b+=n.length)}function Je(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Ze(){this.a="",this.b=Qs}function et(e){return e instanceof Ze&&e.constructor===Ze&&e.b===Qs?e.a:(g("expected object of type Const, got '"+e+"'"),"type_error:Const")}function tt(e){var t=new Ze;return t.a=e,t}function nt(){this.a="",this.b=Js}function rt(e){return e instanceof nt&&e.constructor===nt&&e.b===Js?e.a:(g("expected object of type TrustedResourceUrl, got '"+e+"' of type "+s(e)),"type_error:TrustedResourceUrl")}function it(e,n){var r=et(e);if(!Xs.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return function(e){var t=new nt;return t.a=e,t}(e=r.replace($s,function(e,t){if(!Object.prototype.hasOwnProperty.call(n,t))throw Error('Found marker, "'+t+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(e=n[t])instanceof Ze?et(e):encodeURIComponent(String(e))}))}function ot(){this.a="",this.b=eu}function at(e){return e instanceof ot&&e.constructor===ot&&e.b===eu?e.a:(g("expected object of type SafeUrl, got '"+e+"' of type "+s(e)),"type_error:SafeUrl")}function st(e){return e instanceof ot?e:(e=e.ma?e.la():String(e),Zs.test(e)||(e="about:invalid#zClosurez"),ut(e))}function ut(e){var t=new ot;return t.a=e,t}function lt(){this.a="",this.b=tu}function ct(e){var t=new lt;return t.a=e,t}function ht(e){var t=document;return u(e)?t.getElementById(e):e}function ft(n,e){D(e,function(e,t){e&&e.ma&&(e=e.la()),"style"==t?n.style.cssText=e:"class"==t?n.className=e:"for"==t?n.htmlFor=e:nu.hasOwnProperty(t)?n.setAttribute(nu[t],e):0==t.lastIndexOf("aria-",0)||0==t.lastIndexOf("data-",0)?n.setAttribute(t,e):n[t]=e})}function pt(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Ys&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',N(a.name),'"'),a.type){o.push(' type="',N(a.type),'"');var s={};R(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:l(a)?o.className=a.join(" "):ft(o,a)),2<r.length&&function(t,n,e){function r(e){e&&n.appendChild(u(e)?t.createTextNode(e):e)}for(var i=2;i<e.length;i++){var o=e[i];!c(o)||h(o)&&0<o.nodeType?r(o):Ka(dt(o)?O(o):o,r)}}(i,o,r),o}function dt(e){if(e&&"number"==typeof e.length){if(h(e))return"function"==typeof e.item||"string"==typeof e.item;if(a(e))return"function"==typeof e.item}return!1}function mt(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),yt(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":yt(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new vt,e,t),t.join("")}function vt(){}function yt(e,t){t.push('"',e.replace(iu,function(e){var t=ru[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ru[e]=t),t}),'"')}function gt(){var e=At();return ws&&!!Ns&&11==Ns||/Edge\/\d+/.test(e)}function bt(){return Va.window&&Va.window.location.href||self&&self.location&&self.location.href||""}function _t(e,t){t=t||Va.window;var n="about:blank";e&&(n=at(st(e))),t.location.href=n}function wt(e){return!!((e=(e||At()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function kt(e){e=e||Va.window;try{e.close()}catch(e){}}function xt(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=At().toLowerCase(),r&&(t.target=r,P(n,"crios/")&&(t.target="_blank")),Pt(At())==au&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof ot?n:st(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((A("iPhone")&&!A("iPod")&&!A("iPad")||A("iPad")||A("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),t instanceof ot||t instanceof ot||(t=t.ma?t.la():String(t),Zs.test(t)||(t="about:invalid#zClosurez"),t=ut(t)),a.href=at(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=at(t),a&&(xs&&P(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,tt("b/12014412, meta tag with sanitized URL"),e=ct(e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+N(e)+'">'),a.document.write(function(e){return e instanceof lt&&e.constructor===lt&&e.b===tu?e.a:(g("expected object of type SafeHtml, got '"+e+"' of type "+s(e)),"type_error:SafeHtml")}(e)),a.document.close())):(a=r.open(at(t),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}function Ct(){var t=null;return new V(function(e){"complete"==Va.document.readyState?e():(t=function(){e()},me(window,"load",t))}).s(function(e){throw ve(window,"load",t),e})}function St(e){return e=e||At(),!("file:"!==Ft()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Et(){var e=Va.window;try{return!(!e||e==e.top)}catch(e){return!1}}function Ot(){return"object"!=typeof Va.window&&"function"==typeof Va.importScripts}function Tt(){return wc.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":wc.a.INTERNAL.hasOwnProperty("node")?"Node":Ot()?"Worker":"Browser"}function Nt(){var e=Tt();return"ReactNative"===e||"Node"===e}function Pt(e){var t=e.toLowerCase();return P(t,"opera/")||P(t,"opr/")||P(t,"opios/")?"Opera":P(t,"iemobile")?"IEMobile":P(t,"msie")||P(t,"trident/")?"IE":P(t,"edge/")?"Edge":P(t,"firefox/")?au:P(t,"silk/")?"Silk":P(t,"blackberry")?"Blackberry":P(t,"webos")?"Webos":!P(t,"safari/")||P(t,"chrome/")||P(t,"crios/")||P(t,"android")?!P(t,"chrome/")&&!P(t,"crios/")||P(t,"edge/")?P(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":su:"Safari"}function It(e,t){t=t||[];var n,r=[],i={};for(n in uu)i[uu[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Tt())?r=Pt(i=At()):"Worker"===r&&(r=Pt(i=At())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function At(){return Va.navigator&&Va.navigator.userAgent||""}function Dt(e,t){e=e.split("."),t=t||Va;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Mt(){try{var e=Va.localStorage,t=Wt();if(e)return e.setItem(t,"1"),e.removeItem(t),!gt()||!!Va.indexedDB}catch(e){return Ot()&&!!Va.indexedDB}return!1}function jt(){return(Rt()||"chrome-extension:"===Ft()||St())&&!Nt()&&Mt()&&!Ot()}function Rt(){return"http:"===Ft()||"https:"===Ft()}function Ft(){return Va.location&&Va.location.protocol||null}function Lt(e){return!wt(e=e||At())&&Pt(e)!=au}function Ut(e){return void 0===e?null:mt(e)}function Vt(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ht(e){if(null!==e)return JSON.parse(e)}function Wt(e){return e||Math.floor(1e9*Math.random()).toString()}function Bt(e){return"Safari"!=Pt(e=e||At())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function qt(){var e=Va.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function zt(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=At(),t=Tt(),this.b=wt(e)||"ReactNative"===t}function Gt(){var e=Va.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Kt(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Yt(){return!(!Dt("fireauth.oauthhelper",Va)&&!Dt("fireauth.iframe",Va))}function Qt(e){cu[e]||(cu[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}function $t(e,t,n){lu?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Xt(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&$t(e,n,t[n])}function Jt(e){var t={};return Xt(t,e),t}function Zt(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)$t(t,n,Zt(e[n]));return t}function en(e){var t={},n=e[pu],r=e[du];if(!(e=e[mu])||e!=fu&&!n)throw Error("Invalid provider user info!");t[yu]=r||null,t[vu]=n||null,$t(this,bu,e),$t(this,gu,Zt(t))}function tn(e,t){this.code=_u+e,this.message=t||wu[e]||""}function nn(e){var t=e&&e.code;return t?new tn(t.substring(_u.length),e.message):null}function rn(e){var t=e[Su];if(void 0===t)throw new tn("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new tn("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ku];if(n&&"object"==typeof n){t=n[Tu];var r=n[Eu];if(n=n[Ou],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new tn("argument-error",Eu+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new tn("argument-error",Ou+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new tn("argument-error",Tu+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new tn("missing-android-pkg-name")}}else if(void 0!==n)throw new tn("argument-error",ku+" property must be a non null object when specified.");if(this.f=null,(t=e[Cu])&&"object"==typeof t){if("string"==typeof(t=t[Nu])&&t.length)this.f=t;else if(void 0!==t)throw new tn("argument-error",Nu+" property must be a non empty string when specified.")}else if(void 0!==t)throw new tn("argument-error",Cu+" property must be a non null object when specified.");if(void 0!==(e=e[xu])&&"boolean"!=typeof e)throw new tn("argument-error",xu+" property must be a boolean when specified.");this.c=!!e}function on(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t)null===t[n]&&delete t[n];return t}function an(e){var t="";return function(r,e){function t(e){for(;i<r.length;){var t=r.charAt(i++),n=Iu[t];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(t))throw Error("Unknown base64 encoding at char: "+t)}return e}!function(){if(!Pu){Pu={},Iu={};for(var e=0;e<65;e++)Pu[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(Iu[Pu[e]]=e)&&(Iu["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var i=0;;){var n=t(-1),o=t(0),a=t(64),s=t(64);if(64===s&&-1===n)break;e(n<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(e,function(e){t+=String.fromCharCode(e)}),t}function sn(e){this.c=e.sub,Ba(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function un(e){return(e=ln(e))&&e.sub&&e.iss&&e.aud&&e.exp?new sn(e):null}function ln(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(an(e))}catch(e){}return null}function cn(e){for(var t in Mu)if(Mu[t].Na==e)return Mu[t];return null}function hn(e){var t={};t["facebook.com"]=dn,t["google.com"]=vn,t["github.com"]=mn,t["twitter.com"]=yn;var n=e&&e[Ru];try{if(n)return t[n]?new t[n](e):new pn(e);if(void 0!==e[ju])return new fn(e)}catch(e){}return null}function fn(e){var t=e[Ru];if(!t&&e[ju]){var n=un(e[ju]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),$t(this,"providerId",t),$t(this,"isNewUser",n)}function pn(e){fn.call(this,e),$t(this,"profile",Zt((e=Ht(e.rawUserInfo||"{}"))||{}))}function dn(e){if(pn.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function mn(e){if(pn.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$t(this,"username",this.profile&&this.profile.login||null)}function vn(e){if(pn.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function yn(e){if(pn.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$t(this,"username",e.screenName||null)}function gn(e){this.a=He(e)}function bn(e){var t=He(e),n=Ve(t,"link"),r=Ve(He(n),"link");return Ve(He(t=Ve(t,"deep_link_id")),"link")||t||r||n||e}function _n(e,n){return e.then(function(e){if(e[tl]){var t=un(e[tl]);if(!t||n!=t.c)throw new tn("user-mismatch");return e}throw new tn("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==_u+"user-not-found"?new tn("user-mismatch"):e})}function wn(e,t,n){if(t.idToken||t.accessToken)t.idToken&&$t(this,"idToken",t.idToken),t.accessToken&&$t(this,"accessToken",t.accessToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new tn("internal-error","failed to construct a credential");$t(this,"accessToken",t.oauthToken),$t(this,"secret",t.oauthTokenSecret)}$t(this,"providerId",e),$t(this,"signInMethod",n)}function kn(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,{postBody:Ye(t).toString(),requestUri:"http://localhost"}}function xn(e,t){this.Ac=t||[],Xt(this,{providerId:e,isOAuthProvider:!0}),this.vb={},this.$a=(cn(e)||{}).Ma||null,this.Ya=null}function Cn(e){xn.call(this,e,Du),this.a=[]}function Sn(){Cn.call(this,"facebook.com")}function En(e){if(!e)throw new tn("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return h(e)&&(t=e.accessToken),(new Sn).credential(null,t)}function On(){Cn.call(this,"github.com")}function Tn(e){if(!e)throw new tn("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return h(e)&&(t=e.accessToken),(new On).credential(null,t)}function Nn(){Cn.call(this,"google.com"),this.ta("profile")}function Pn(e,t){var n=e;return h(e)&&(n=e.idToken,t=e.accessToken),(new Nn).credential(n,t)}function In(){xn.call(this,"twitter.com",Au)}function An(e,t){var n=e;if(h(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new tn("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new wn("twitter.com",n,"twitter.com")}function Dn(e,t,n){this.a=e,this.b=t,$t(this,"providerId","password"),$t(this,"signInMethod",n===Mn.EMAIL_LINK_SIGN_IN_METHOD?Mn.EMAIL_LINK_SIGN_IN_METHOD:Mn.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Mn(){Xt(this,{providerId:"password",isOAuthProvider:!1})}function jn(e,t){if(!(t=Rn(t)))throw new tn("argument-error","Invalid email link!");return new Dn(e,t,Mn.EMAIL_LINK_SIGN_IN_METHOD)}function Rn(e){var t=Ve((e=new gn(e=bn(e))).a,"oobCode")||null;return"signIn"===(Ve(e.a,"mode")||null)&&t?t:null}function Fn(e){if(!(e.Sa&&e.Ra||e.Fa&&e.$))throw new tn("internal-error");this.a=e,$t(this,"providerId","phone"),$t(this,"signInMethod","phone")}function Ln(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Sa,code:e.a.Ra}}function Un(e){try{this.a=e||wc.a.auth()}catch(e){throw new tn("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xt(this,{providerId:"phone",isOAuthProvider:!1})}function Vn(e,t){if(!e)throw new tn("missing-verification-id");if(!t)throw new tn("missing-verification-code");return new Fn({Sa:e,Ra:t})}function Hn(e){if(e.temporaryProof&&e.phoneNumber)return new Fn({Fa:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret;e=e&&e.oauthIdToken;try{switch(t){case"google.com":return Pn(e,n);case"facebook.com":return En(n);case"github.com":return Tn(n);case"twitter.com":return An(n,r);default:return new Cn(t).credential(e,n)}}catch(e){return null}}function Wn(e){if(!e.isOAuthProvider)throw new tn("invalid-oauth-provider")}function Bn(e,t,n,r,i){if(this.b=e,this.c=t||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new tn("invalid-auth-event");if(this.f&&this.a)throw new tn("invalid-auth-event");if(this.f&&!this.g)throw new tn("invalid-auth-event")}function qn(e){return(e=e||{}).type?new Bn(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&nn(e.error)):null}function zn(){this.b=null,this.a=[]}function Gn(e){var t="unauthorized-domain",n=void 0,r=He(e);e=r.b,"chrome-extension"==(r=r.c)?n=T("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=T("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",tn.call(this,t,n)}function Kn(e,t,n){tn.call(this,e,n),(e=t||{}).wb&&$t(this,"email",e.wb),e.$&&$t(this,"phoneNumber",e.$),e.credential&&$t(this,"credential",e.credential)}function Yn(e){if(e.code){var t=e.code||"";0==t.indexOf(_u)&&(t=t.substring(_u.length));var n={credential:Hn(e)};if(e.email)n.wb=e.email;else{if(!e.phoneNumber)return new tn(t,e.message||void 0);n.$=e.phoneNumber}return new Kn(t,n,e.message)}return null}function Qn(){}function $n(){}function Xn(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Jn(){}function Zn(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=p(this.bc,this),this.a.onerror=p(this.Bb,this),this.a.onprogress=p(this.cc,this),this.a.ontimeout=p(this.fc,this)}function er(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function tr(e,t,n){this.reset(e,t,n,void 0,void 0)}function nr(e){this.f=e,this.b=this.c=this.a=null}function rr(e,t){this.name=e,this.value=t}function ir(e){var t;if(Gu||(Gu=new nr(""),(zu[""]=Gu).c=Wu),!(t=zu[e])){t=new nr(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=ir(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,zu[e]=t}return t}function or(e,t){e&&e.log(Bu,t,void 0)}function ar(e){this.f=e}function sr(e){Ce.call(this),this.i=e,this.readyState=Ku,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=ir("goog.net.FetchXmlHttp")}function ur(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function lr(e){Ce.call(this),this.headers=new Ae,this.C=e||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Yu,this.v=this.O=!1}function cr(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.C?e.C.a():Lu.a(),e.w=function(e){return e.c||(e.c=e.b())}(e.C?e.C:Lu),e.a.onreadystatechange=p(e.Fb,e);try{or(e.b,br(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return or(e.b,br(e,"Error opening Xhr: "+t.message)),void fr(e,t)}t=r||"";var o=new Ae(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(c(e)||u(e))Ka(e,t,void 0);else for(var n=Ie(e),r=Pe(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){o.set(t,e)}),i=function(e){e:{for(var t=hr,n=e.length,r=u(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:u(e)?e.charAt(t):e[t]}(o.U()),r=Va.FormData&&t instanceof Va.FormData,!x($u,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{vr(e),0<e.g&&(e.v=function(e){return ws&&oe(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),or(e.b,br(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=p(e.Ga,e)):e.u=Te(e.Ga,e.g,e)),or(e.b,br(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){or(e.b,br(e,"Send error: "+t.message)),fr(e,t)}}function hr(e){return"content-type"==e.toLowerCase()}function fr(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,pr(e),mr(e)}function pr(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function dr(e){if(e.c&&void 0!==Ua)if(e.w[1]&&4==yr(e)&&2==gr(e))or(e.b,br(e,"Local request error detected and ignored"));else if(e.i&&4==yr(e))Te(e.Fb,0,e);else if(e.dispatchEvent("readystatechange"),4==yr(e)){or(e.b,br(e,"Request complete")),e.c=!1;try{var t,n=gr(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Ws)[1]||null;if(!o&&Va.self&&Va.self.location){var a=Va.self.location.protocol;o=a.substr(0,a.length-1)}i=!Qu.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<yr(e)?e.a.statusText:""}catch(n){or(e.b,"Can not get status: "+n.message),s=""}e.h=s+" ["+gr(e)+"]",pr(e)}}finally{mr(e)}}}function mr(e,t){if(e.a){vr(e);var n=e.a,r=e.w[0]?o:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Vu,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function vr(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(Va.clearTimeout(e.u),e.u=null)}function yr(e){return e.a?e.a.readyState:0}function gr(e){try{return 2<yr(e)?e.a.status:-1}catch(e){return-1}}function br(e,t){return t+" ["+e.N+" "+e.l+" "+gr(e)+"]"}function _r(e,t){this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.m=0}function wr(e,t,n){e.a=!0,e.c=n,e.f=!t,Sr(e)}function kr(e){if(e.a){if(!e.l)throw new Er(e);e.l=!1}}function xr(e,t,n,r){e.g.push([t,n,r]),e.a&&Sr(e)}function Cr(e){return Qa(e.g,function(e){return a(e[1])})}function Sr(e){if(e.h&&e.a&&Cr(e)){var t=e.h,n=Xu[t];n&&(Va.clearTimeout(n.a),delete Xu[t]),e.h=0}e.b&&(e.b.m--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.u,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(m(t)||"function"==typeof Va.Promise&&t instanceof Va.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Cr(e)||(n=!0)}}e.c=t,r&&(s=p(e.o,e,!0),r=p(e.o,e,!1),t instanceof _r?(xr(t,s,r),t.w=!0):t.then(s,r)),n&&(t=new Tr(t),Xu[t.a]=t,e.h=t.a)}function Er(){v.call(this)}function Or(){v.call(this)}function Tr(e){this.a=Va.setTimeout(p(this.c,this),0),this.b=e}function Nr(e){var t={},n=t.document||document,r=rt(e),i=document.createElement("SCRIPT"),o={Hb:i,Ga:void 0},a=new _r(Pr,o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Ir(i,!0);var e=new Ar(Zu,"Timeout reached for loading script "+r);kr(a),wr(a,!1,e)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ir(i,t.dd||!1,s),a.C())},i.onerror=function(){Ir(i,!0,s);var e=new Ar(Ju,"Error while loading script "+r);kr(a),wr(a,!1,e)},R(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ft(i,o),i.src=rt(e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Pr(){if(this&&this.Hb){var e=this.Hb;e&&"SCRIPT"==e.tagName&&Ir(e,!0,this.Ga)}}function Ir(e,t,n){null!=n&&Va.clearTimeout(n),e.onload=o,e.onerror=o,e.onreadystatechange=o,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}function Ar(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),v.call(this,n),this.code=e}function Dr(e){this.f=e}function Mr(e,t,n){if(this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||nl,this.f=j(e.secureTokenHeaders||rl),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||il,this.a=j(e.firebaseHeaders||ol),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Tt(),!(n=Va.XMLHttpRequest||n&&wc.a.INTERNAL.node&&wc.a.INTERNAL.node.XMLHttpRequest)&&!Ot())throw new tn("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Ot()?this.c=new ar(self):Nt()?this.c=new Dr(n):this.c=new Jn}function jr(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Rr(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function Fr(e,t,n,r,i,o,a){(e=function(){var e=At();return!((e=Pt(e)!=su?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&e<30||ws&&Ns&&!(9<Ns))}()||Ot()?p(e.o,e):(el||(el=new V(function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(Va[sl]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){xr(e,null,t,void 0)}(Nr(it(al,{onload:sl})),function(){t(Error("CORS_UNSUPPORTED"))}))}(e,t)})),p(e.l,e)))(t,n,r,i,o,a)}function Lr(e){if(!Uu.test(e.email))throw new tn("invalid-email")}function Ur(e){"email"in e&&Lr(e)}function Vr(e){if(!e[tl])throw new tn("internal-error")}function Hr(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new tn("internal-error")}else{if(!e.sessionInfo)throw new tn("missing-verification-id");if(!e.code)throw new tn("missing-verification-code")}}function Wr(e){if(!e.requestUri||!e.sessionId&&!e.postBody)throw new tn("internal-error")}function Br(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Yn(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Yn(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Yn(e)):e.errorMessage&&(t=Qr(e.errorMessage)),t)throw t;if(!e[tl])throw new tn("internal-error")}function qr(e,t){return t.returnIdpCredential=!0,Yr(e,Nl,t)}function zr(e,t){return t.returnIdpCredential=!0,Yr(e,Il,t)}function Gr(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Yr(e,Pl,t)}function Kr(e){if(!e.oobCode)throw new tn("invalid-action-code")}function Yr(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.T))return q(new tn("internal-error"));var r,i=t.Eb||"POST";return B(n).then(t.B).then(function(){return t.R&&(n.returnSecureToken=!0),function(e,t,r,i,o,n){var a=He(e.g+t);Ue(a,"key",e.b),n&&Ue(a,"cb",Ba().toString());var s="GET"==r;if(s)for(var u in i)i.hasOwnProperty(u)&&Ue(a,u,i[u]);return new V(function(t,n){Fr(e,a.toString(),function(e){e?e.error?n($r(e,o||{})):t(e):n(new tn("network-request-failed"))},r,s?void 0:mt(Vt(i)),e.a,e.h.get())})}(e,t.endpoint,i,n,t.Tb,t.rb||!1)}).then(function(e){return r=e}).then(t.J).then(function(){if(!t.da)return r;if(!(t.da in r))throw new tn("internal-error");return r[t.da]})}function Qr(e){return $r({error:{errors:[{message:e}],code:400,message:e}})}function $r(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new tn(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",R(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new tn(r[i],t);return!t&&e&&(t=Ut(e)),new tn("internal-error",t)}function Xr(e){for(var t in Fl)if(Fl[t].id===e)return{firebaseEndpoint:(e=Fl[t]).Za,secureTokenEndpoint:e.fb};return null}function Jr(e){this.b=e,this.a=null,this.bb=function(o){return(Wl||(Wl=new V(function(e,t){function n(){qt(),Dt("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){qt(),t(Error("Network Error"))},timeout:Vl.get()})}if(Dt("gapi.iframes.Iframe"))e();else if(Dt("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();Va[r]=function(){Dt("gapi.load")?n():t(Error("Network Error"))},B(Nr(r=it(Ul,{onload:r}))).s(function(){t(Error("Network Error"))})}}).s(function(e){throw Wl=null,e}))).then(function(){return new V(function(r,i){Dt("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:Dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(e){function t(){clearTimeout(n),r()}o.a=e,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Hl.get());e.ping(t).then(t,function(){i(Error("Network Error"))})})})})}(this)}function Zr(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=We(this.i,"/__/auth/iframe"),Ue(this.a,"apiKey",this.g),Ue(this.a,"appName",this.h),this.b=null,this.c=[]}function ei(e,t,n,r,i){this.o=e,this.l=t,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function ti(e){try{return wc.a.app(e).auth().xa()}catch(e){return[]}}function ni(e,t,n,r,i){this.l=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function ri(e){var s=bt();return function(e){return Yr(e,kl,{}).then(function(e){return e.authorizedDomains||[]})}(e).then(function(e){e:{var t=He(s),n=t.c;t=t.b;for(var r=0;r<e.length;r++){var i=e[r],o=t,a=n;if(o=0==i.indexOf("chrome-extension://")?He(i).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(ou.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){e=!0;break e}}e=!1}if(!e)throw new Gn(bt())})}function ii(i){return i.m||(i.m=Ct().then(function(){if(!i.u){var e=i.c,t=i.h,n=ti(i.b),r=new Zr(i.l,i.f,i.b);r.f=e,r.b=t,r.c=O(n||[]),i.u=r.toString()}i.i=new Jr(i.u),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.bb.then(function(){e.a.register("authEvent",t,Dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(e){var t={};if(e&&e.authEvent){var n=!1;for(e=qn(e.authEvent),t=0;t<r.g.length;t++)n=r.g[t](e)||n;return(t={}).status=n?"ACK":"ERROR",B(t)}return t.status="ERROR",B(t)})}(i)})),i.m}function oi(e){return e.o||(e.v=e.c?It(e.c,ti(e.b)):null,e.o=new Mr(e.f,Xr(e.h),e.v)),e.o}function ai(e,t,n,r,i,o,a,s,u,l){return(e=new ei(e,t,n,r,i)).i=o,e.g=a,e.h=s,e.b=j(u||null),e.f=l,e.toString()}function si(e){var t={type:"webStorageSupport"};return ii(e).then(function(){return function(t,n){return t.bb.then(function(){return new V(function(e){t.a.send(n.type,n,e,Dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(e.i,t)}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})}function ui(e){if(this.a=e||wc.a.INTERNAL.reactNative&&wc.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new tn("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function li(){if(!fi())throw new tn("web-storage-unsupported");this.f={},this.a=[],this.b=0,this.g=Va.indexedDB,this.type="indexedDB"}function ci(r){return new V(function(t,n){var e=r.g.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(e):function(r){return new V(function(e,t){var n=r.g.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})}(r).then(function(){return ci(r)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function hi(e){return e.h||(e.h=ci(e)),e.h}function fi(){try{return!!Va.indexedDB}catch(e){return!1}}function pi(e){return e.objectStore("firebaseLocalStorage")}function di(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function mi(e){return new V(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(Error(e.target.errorCode))}})}function vi(e){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=e,this.b=B().then(function(){if(fi()){var t=Wt(),n="__sak"+t;return Ll||(Ll=new li),(i=Ll).set(n,t).then(function(){return i.get(n)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return i.P(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(e){return r.type=e.type,e.Y(function(t){Ka(r.a,function(e){e(t)})}),e})}function yi(){this.a={},this.type="inMemory"}function gi(){if(!function(){var e="Node"==Tt();if(!(e=bi()||e&&wc.a.INTERNAL.node&&wc.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Tt())throw new tn("internal-error","The LocalStorage compatibility library was not found.");throw new tn("web-storage-unsupported")}this.a=bi()||wc.a.INTERNAL.node.localStorage,this.type="localStorage"}function bi(){try{var e=Va.localStorage,t=Wt();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function _i(){this.type="nullStorage"}function wi(){if(!function(){var e="Node"==Tt();if(!(e=ki()||e&&wc.a.INTERNAL.node&&wc.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Tt())throw new tn("internal-error","The SessionStorage compatibility library was not found.");throw new tn("web-storage-unsupported")}this.a=ki()||wc.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ki(){try{var e=Va.sessionStorage,t=Wt();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function xi(){var e={};e.Browser=zl,e.Node=Gl,e.ReactNative=Kl,e.Worker=Yl,this.a=e[Tt()]}function Ci(){var e=!(Bt(At())||!Et()),t=Lt(),n=Mt();this.o=e,this.h=t,this.m=n,this.a={},Bl||(Bl=new xi),e=Bl;try{this.g=!gt()&&Yt()||!Va.indexedDB?new e.a.A:new vi(Ot()?new yi:new e.a.A)}catch(e){this.g=new yi,this.h=!0}try{this.i=new e.a.Qa}catch(e){this.i=new yi}this.l=new yi,this.f=p(this.Lb,this),this.b={}}function Si(){return ql||(ql=new Ci),ql}function Ei(e,t){switch(t){case"session":return e.i;case"none":return e.l;default:return e.g}}function Oi(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Ti(e,t,n){return n=Oi(t,n),"local"==t.A&&(e.b[n]=null),Ei(e,t.A).P(n)}function Ni(e){e.c&&(clearInterval(e.c),e.c=null)}function Pi(e){this.a=e,this.b=Si()}function Ii(){this.a=Si()}function Ai(e,t){this.b=-1,this.b=Jl,this.f=Va.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.m=Va.Int32Array?new Int32Array(64):Array(64),void 0!==$l||($l=Va.Int32Array?new Int32Array(rc):rc),this.reset()}function Di(e){for(var t=e.f,n=e.m,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|$l[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Mi(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(u(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Di(e),i=0);else{if(!c(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Di(e),i=0)}}e.c=i,e.g+=n}function ji(){Ai.call(this,8,ic)}function Ri(e,t,n,r,i){this.l=e,this.i=t,this.m=n,this.o=r||null,this.u=i||null,this.h=t+":"+n,this.v=new Ii,this.g=new Pi(this.h),this.f=null,this.b=[],this.a=this.c=null}function Fi(e){return new tn("invalid-cordova-configuration",e)}function Li(e){var t=new ji;Mi(t,e),e=[];var n=8*t.g;t.c<56?Mi(t,nc,56-t.c):Mi(t,nc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Di(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return Ya(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(e)}function Ui(n,e,t,r){var i=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),o=new Bn(e,r,null,i,new tn("no-auth-event")),a=Dt("BuildInfo.packageName",Va);if("string"!=typeof a)throw new tn("invalid-cordova-configuration");var s=Dt("BuildInfo.displayName",Va),u={};if(At().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!At().toLowerCase().match(/android/))return q(new tn("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=Li(i),u.sessionId=i;var l=ai(n.l,n.i,n.m,e,t,null,r,n.o,u,n.u);return n.ga().then(function(){var e=n.h;return n.v.a.set(Xl,o.D(),e)}).then(function(){var e=Dt("cordova.plugins.browsertab.isAvailable",Va);if("function"!=typeof e)throw new tn("invalid-cordova-configuration");var t=null;e(function(e){if(e){if("function"!=typeof(t=Dt("cordova.plugins.browsertab.openUrl",Va)))throw new tn("invalid-cordova-configuration");t(l)}else{if("function"!=typeof(t=Dt("cordova.InAppBrowser.open",Va)))throw new tn("invalid-cordova-configuration");e=!(!(e=At()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),n.a=t(l,e?"_blank":"_system","location=yes")}})})}function Vi(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Hi(r){return r.f||(r.f=r.ga().then(function(){return new V(function(n){r.va(function e(t){return n(t),r.Ka(e),!1}),function(i){function t(r){e=!0,n&&n.cancel(),Wi(i).then(function(e){var t=o;if(e&&r&&r.url){var n=null;-1!=(t=bn(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=Ht(Ve(n=He(t),"firebaseError")||null))?nn(n):null)?new Bn(e.b,e.c,null,null,n):new Bn(e.b,e.c,t,e.g)),t=n||o}Vi(i,t)})}var o=new Bn("unknown",null,null,null,new tn("no-auth-event")),e=!1,n=Ne(500).then(function(){return Wi(i).then(function(){e||Vi(i,o)})}),r=Va.handleOpenURL;Va.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Dt("BuildInfo.packageName",Va).toLowerCase()+"://")&&t({url:e}),"function"==typeof r)try{r(e)}catch(e){console.error(e)}},Fu||(Fu=new zn),Fu.subscribe(t)}(r)})})),r.f}function Wi(t){var n=null;return function(e){return e.b.get(Xl,e.a).then(function(e){return qn(e)})}(t.g).then(function(e){return n=e,Ti((e=t.g).b,Xl,e.a)}).then(function(){return n})}function Bi(e){this.a=e,this.b=Si()}function qi(e){return Ti(e.b,oc,e.a)}function zi(e,t,n){this.v=e,this.m=t,this.l=n,this.h=[],this.f=!1,this.i=p(this.o,this),this.c=new Ji,this.u=new no,this.g=new Bi(this.m+":"+this.l),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.u,this.b.linkViaPopup=this.u,this.b.reauthViaPopup=this.u,this.a=Gi(this.v,this.m,this.l,ll)}function Gi(e,t,n,r){var i=wc.a.SDK_VERSION||null;return St()?new Ri(e,t,n,i,r):new ni(e,t,n,i,r)}function Ki(t){t.f||(t.f=!0,t.a.va(t.i));var n=t.a;return t.a.ga().s(function(e){throw t.a==n&&t.reset(),e})}function Yi(n){n.a.Ib()&&Ki(n).s(function(e){var t=new Bn("unknown",null,null,null,new tn("operation-not-supported-in-this-environment"));$i(e)&&n.o(t)}),n.a.Db()||Zi(n.c)}function Qi(e,t,n,r,i,o){return e.a.zb(t,n,r,function(){e.f||(e.f=!0,e.a.va(e.i))},function(){e.reset()},i,o)}function $i(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Xi(e,t,n){var r=t+":"+n;return uc[r]||(uc[r]=new zi(e,t,n)),uc[r]}function Ji(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function Zi(e){e.g||(e.g=!0,to(e,!1,null,null))}function eo(e,t){if(e.b=function(){return B(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function to(e,t,n,r){t?r?function(e,t){if(e.b=function(){return q(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):eo(e,n):eo(e,{user:null}),e.f=[],e.c=[]}function no(){}function ro(){this.pb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.pb},set:function(e){this.pb=e},enumerable:!1})}function io(e,t){this.a=t,$t(this,"verificationId",e)}function oo(e,t,n,r){return new Un(e).Ta(t,n).then(function(e){return new io(e,r)})}function ao(e){var t=ln(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new tn("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xt(this,{token:e,expirationTime:Kt(1e3*t.exp),authTime:Kt(1e3*t.auth_time),issuedAtTime:Kt(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function so(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function uo(t,e){t.stop(),t.b=Ne(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,e)).then(function(){return function(){var t=Va.document,n=null;return Gt()||!t?B():new V(function(e){n=function(){Gt()&&(t.removeEventListener("visibilitychange",n,!1),e())},t.addEventListener("visibilitychange",n,!1)}).s(function(e){throw t.removeEventListener("visibilitychange",n,!1),e})}()}).then(function(){return t.h()}).then(function(){uo(t,!0)}).s(function(e){t.i(e)&&uo(t,!1)})}function lo(e){this.f=e,this.b=this.a=null,this.c=0}function co(e,t){var n=t[tl],r=t.refreshToken;t=ho(t.expiresIn),e.b=n,e.c=t,e.a=r}function ho(e){return Ba()+1e3*parseInt(e,10)}function fo(t,e){return function(e,r){return new V(function(t,n){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?Fr(e,e.i+"?key="+encodeURIComponent(e.b),function(e){e?e.error?n($r(e)):e.access_token&&e.refresh_token?t(e):n(new tn("internal-error")):n(new tn("network-request-failed"))},"POST",Ye(r).toString(),e.f,e.m.get()):n(new tn("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=ho(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function po(e,t){this.a=e||null,this.b=t||null,Xt(this,{lastSignInTime:Kt(t||null),creationTime:Kt(e||null)})}function mo(e,t,n,r,i,o){Xt(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function vo(e,t){for(var n in ae.call(this,e),t)this[n]=t[n]}function yo(e,t,n){this.G=[],this.l=e.apiKey,this.o=e.appName,this.u=e.authDomain||null,e=wc.a.SDK_VERSION?It(wc.a.SDK_VERSION):null,this.b=new Mr(this.l,Xr(ll),e),this.h=new lo(this.b),Co(this,t[tl]),co(this.h,t),$t(this,"refreshToken",this.h.a),Oo(this,n||{}),Ce.call(this),this.I=!1,this.u&&jt()&&(this.a=Xi(this.u,this.l,this.o)),this.N=[],this.i=null,this.w=function(t){return new so(function(){return t.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var e=t.h.c-Ba()-3e5;return 0<e?e:0})}(this),this.V=p(this.Ha,this);var r=this;this.ka=null,this.sa=function(e){r.oa(e.g)},this.X=null,this.O=[],this.ra=function(e){bo(r,e.c)},this.W=null}function go(e,t){e.X&&ve(e.X,"languageCodeChanged",e.sa),(e.X=t)&&pe(t,"languageCodeChanged",e.sa)}function bo(e,t){e.O=t,Rr(e.b,wc.a.SDK_VERSION?It(wc.a.SDK_VERSION,e.O):null)}function _o(e,t){e.W&&ve(e.W,"frameworkChanged",e.ra),(e.W=t)&&pe(t,"frameworkChanged",e.ra)}function wo(t){try{return wc.a.app(t.o).auth()}catch(e){throw new tn("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function ko(e){e.C||e.w.b||(e.w.start(),ve(e,"tokenChanged",e.V),pe(e,"tokenChanged",e.V))}function xo(e){ve(e,"tokenChanged",e.V),e.w.stop()}function Co(e,t){e.qa=t,$t(e,"_lat",t)}function So(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return function(n){return new V(function(r){var i=n.length,o=[];if(i)for(var e=function(e,t,n){i--,o[e]=t?{Zb:!0,value:n}:{Zb:!1,reason:n},0==i&&r(o)},t=0;t<n.length;t++)z(n[t],d(e,t,!0),d(e,t,!1));else r(o)})}(t).then(function(){return e})}function Eo(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function Oo(e,t){Xt(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new po(t.createdAt,t.lastLoginAt),providerData:[]})}function To(){}function No(e){return B().then(function(){if(e.C)throw new tn("app-deleted")})}function Po(e){return Ya(e.providerData,function(e){return e.providerId})}function Io(e,t){t&&(Ao(e,t.providerId),e.providerData.push(t))}function Ao(e,t){S(e.providerData,function(e){return e.providerId==t})}function Do(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&$t(e,t,n)}function Mo(t,e){t!=e&&(Xt(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?$t(t,"metadata",function(e){return new po(e.a,e.b)}(e.metadata)):$t(t,"metadata",new po),Ka(e.providerData,function(e){Io(t,e)}),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(t.h,e.h),$t(t,"refreshToken",t.h.a))}function jo(n){return n.F().then(function(e){var t=n.isAnonymous;return function(e,t){return Yr(e.b,gl,{idToken:t}).then(p(e.uc,e))}(n,e).then(function(){return t||Do(n,"isAnonymous",!1),e})})}function Ro(e,t){t[tl]&&e.qa!=t[tl]&&(co(e.h,t),e.dispatchEvent(new vo("tokenChanged")),Co(e,t[tl]),Do(e,"refreshToken",e.h.a))}function Fo(e,t){return jo(e).then(function(){if(x(Po(e),t))return So(e).then(function(){throw new tn("provider-already-linked")})})}function Lo(e,t,n){return Jt({user:e,credential:Hn(t),additionalUserInfo:t=hn(t),operationType:n})}function Uo(e,t){return Ro(e,t),e.reload().then(function(){return e})}function Vo(n,r,e,t,i){if(!jt())return q(new tn("operation-not-supported-in-this-environment"));if(n.i&&!i)return q(n.i);var o=cn(e.providerId),a=Wt(n.uid+":::"),s=null;(!Lt()||Et())&&n.u&&e.isOAuthProvider&&(s=ai(n.u,n.l,n.o,r,e,null,a,wc.a.SDK_VERSION||null));var u=xt(s,o&&o.Ba,o&&o.Aa);return t=t().then(function(){if(Wo(n),!i)return n.F().then(function(){})}).then(function(){return Qi(n.a,u,r,e,a,!!s)}).then(function(){return new V(function(e,t){n.ha(r,null,new tn("cancelled-popup-request"),n.g||null),n.f=e,n.v=t,n.g=a,n.c=n.a.Ea(n,r,u,a)})}).then(function(e){return u&&kt(u),e?Jt(e):null}).s(function(e){throw u&&kt(u),e}),Bo(n,t,i)}function Ho(t,e,n,r,i){if(!jt())return q(new tn("operation-not-supported-in-this-environment"));if(t.i&&!i)return q(t.i);var o=null,a=Wt(t.uid+":::");return r=r().then(function(){if(Wo(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,So(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(lc,t.D(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return Go(t.ba);throw o}).then(function(){if(o)throw o}),Bo(t,r,i)}function Wo(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new tn("internal-error");throw new tn("auth-domain-config-required")}}function Bo(e,t,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),q(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new vo("userInvalidated")),t.i=e),e})}(e,t,n);return e.G.push(r),r.ia(function(){C(e.G,r)}),r}function qo(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[tl]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-Ba())/1e3;var r=new yo(t,n,e);return e.providerData&&Ka(e.providerData,function(e){e&&Io(r,Jt(e))}),e.redirectEventId&&(r.aa=e.redirectEventId),r}function zo(e){this.a=e,this.b=Si()}function Go(e){return Ti(e.b,lc,e.a)}function Ko(e){this.a=e,this.b=Si(),this.c=null,this.f=function(t){var n=Qo("local"),r=Qo("session"),i=Qo("none");return function(n,r,i){var o=Oi(r,i),a=Ei(n,r.A);return n.get(r,i).then(function(e){var t=null;try{t=Ht(Va.localStorage.getItem(o))}catch(e){}if(t&&!e)return Va.localStorage.removeItem(o),n.set(r,t,i);t&&e&&"localStorage"!=a.type&&Va.localStorage.removeItem(o)})}(t.b,n,t.a).then(function(){return t.b.get(r,t.a)}).then(function(e){return e?r:t.b.get(i,t.a).then(function(e){return e?i:t.b.get(n,t.a).then(function(e){return e?n:t.b.get(cc,t.a).then(function(e){return e?Qo(e):n})})})}).then(function(e){return t.c=e,Yo(t,e.A)}).s(function(){t.c||(t.c=n)})}(this),this.b.addListener(Qo("local"),this.a,p(this.g,this))}function Yo(e,t){var n,r=[];for(n in Ql)Ql[n]!==t&&r.push(Ti(e.b,Qo(Ql[n]),e.a));return r.push(Ti(e.b,cc,e.a)),function(s){return new V(function(n,t){var r=s.length,i=[];if(r)for(var e=function(e,t){r--,i[e]=t,0==r&&n(i)},o=function(e){t(e)},a=0;a<s.length;a++)z(s[a],d(e,a),o);else n(i)})}(r)}function Qo(e){return{name:"authUser",A:e}}function $o(e,t){return Zo(e,function(){return e.b.set(e.c,t.D(),e.a)})}function Xo(e){return Zo(e,function(){return Ti(e.b,e.c,e.a)})}function Jo(e,t){return Zo(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),qo(e||{})})})}function Zo(e,t){return e.f=e.f.then(t,t),e.f}function ea(e){if(this.l=!1,$t(this,"settings",new ro),$t(this,"app",e),!sa(this).options||!sa(this).options.apiKey)throw new tn("invalid-api-key");e=wc.a.SDK_VERSION?It(wc.a.SDK_VERSION):null,this.b=new Mr(sa(this).options&&sa(this).options.apiKey,Xr(ll),e),this.N=[],this.o=[],this.I=[],this.Pb=wc.a.INTERNAL.createSubscribe(p(this.ic,this)),this.O=void 0,this.Qb=wc.a.INTERNAL.createSubscribe(p(this.jc,this)),oa(this,null),this.h=new Ko(sa(this).options.apiKey+":"+sa(this).name),this.w=new zo(sa(this).options.apiKey+":"+sa(this).name),this.V=ha(this,function(n){var e=sa(n).options.authDomain,t=function(t){var e=function(e,t){return e.b.get(lc,e.a).then(function(e){return e&&t&&(e.authDomain=t),qo(e||{})})}(t.w,sa(t).options.authDomain).then(function(e){return(t.C=e)&&(e.ba=t.w),Go(t.w)});return ha(t,e)}(n).then(function(){return Jo(n.h,e)}).then(function(t){return t?(t.ba=n.w,n.C&&(n.C.aa||null)==(t.aa||null)?t:t.reload().then(function(){return $o(n.h,t).then(function(){return t})}).s(function(e){return"auth/network-request-failed"==e.code?t:Xo(n.h)})):null}).then(function(e){oa(n,e||null)});return ha(n,t)}(this)),this.i=ha(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Qo("local"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=p(this.Jc,this),this.Ha=p(this.Z,this),this.qa=p(this.Yb,this),this.ra=p(this.gc,this),this.sa=p(this.hc,this),function(t){var n=sa(t).options.authDomain,r=sa(t).options.apiKey;n&&jt()&&(t.Ob=t.V.then(function(){if(!t.l){if(t.a=Xi(n,r,sa(t).name),t.a.subscribe(t),ua(t)&&Eo(ua(t)),t.C){Eo(t.C);var e=t.C;e.oa(t.ea()),go(e,t),bo(e=t.C,t.G),_o(e,t),t.C=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=p(this.delete,this),this.INTERNAL.logFramework=p(this.qc,this),this.u=0,Ce.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ea()},set:function(e){this.oa(e)},enumerable:!1}),e.W=null}(this),this.G=[]}function ta(e){ae.call(this,"languageCodeChanged"),this.g=e}function na(e){ae.call(this,"frameworkChanged"),this.c=e}function ra(e){return e.Ob||q(new tn("auth-domain-config-required"))}function ia(t,e){var n={};return n.apiKey=sa(t).options.apiKey,n.authDomain=sa(t).options.authDomain,n.appName=sa(t).name,t.V.then(function(){return function(e,t,n,r){var i=new yo(e,t);return n&&(i.ba=n),r&&bo(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.xa())}).then(function(e){return ua(t)&&e.uid==ua(t).uid?Mo(ua(t),e):(oa(t,e),Eo(e)),t.Z(e)}).then(function(){ca(t)})}function oa(e,t){ua(e)&&(function(e,t){S(e.N,function(e){return e==t})}(ua(e),e.Ha),ve(ua(e),"tokenChanged",e.qa),ve(ua(e),"userDeleted",e.ra),ve(ua(e),"userInvalidated",e.sa),xo(ua(e))),t&&(t.N.push(e.Ha),pe(t,"tokenChanged",e.qa),pe(t,"userDeleted",e.ra),pe(t,"userInvalidated",e.sa),0<e.u&&ko(t)),$t(e,"currentUser",t),t&&(t.oa(e.ea()),go(t,e),bo(t,e.G),_o(t,e))}function aa(t,e){var n=null,r=null;return ha(t,e.then(function(e){return n=Hn(e),r=hn(e),ia(t,e)}).then(function(){return Jt({user:ua(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function sa(e){return e.app}function ua(e){return e.currentUser}function la(e){return ua(e)&&ua(e)._lat||null}function ca(e){if(e.X){for(var t=0;t<e.o.length;t++)e.o[t]&&e.o[t](la(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](la(e))}}function ha(e,t){return e.N.push(t),t.ia(function(){C(e.N,t)}),t}function fa(){}function pa(){this.a={},this.b=1e12}function da(e,t){return(t=ma(t))&&e.a[t]||null}function ma(e){return(e=void 0===e?1e12:e)?e.toString():null}function va(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ht(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():pe(this.f,"click",this.i)}function ya(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function ga(){}function ba(){this.b=Va.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function _a(e,t,n,r,i,o,a){if($t(this,"type","recaptcha"),this.c=this.f=null,this.C=!1,this.l=t,this.g=null,a=a?(fc||(fc=new ga),fc):(mc||(mc=new ba),mc),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[gc])throw new tn("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[bc],!Va.document)throw new tn("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ht(t)||!this.i&&ht(t).hasChildNodes())throw new tn("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Mr(e,o||null,i||null),this.v=r||function(){return null};var s=this;this.m=[];var u=this.a[vc];this.a[vc]=function(e){if(wa(s,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=Dt(u,Va);"function"==typeof t&&t(e)}};var l=this.a[yc];this.a[yc]=function(){if(wa(s,null),"function"==typeof l)l();else if("string"==typeof l){var e=Dt(l,Va);"function"==typeof e&&e()}}}function wa(e,t){for(var n=0;n<e.m.length;n++)try{e.m[n](t)}catch(e){}}function ka(e,t){return e.h.push(t),t.ia(function(){C(e.h,t)}),t}function xa(e){if(e.C)throw new tn("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ca(e,t,n){var r=!1;try{this.b=n||wc.a.app()}catch(e){throw new tn("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new tn("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().xa()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=wc.a.SDK_VERSION?It(wc.a.SDK_VERSION,o):null,_a.call(this,n,e,t,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,Xr(ll),r)}function Sa(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new tn("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],i<0||i>=_c.length)throw new tn("internal-error","Argument validator received an unsupported number of arguments.");n=_c[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new tn("argument-error",e+" failed: "+r)}function Ea(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:u}}function Oa(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:n}}function Ta(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:h}}function Na(e,t){return{name:e||"",K:"a function",optional:!!t,M:a}}function Pa(e,t){return{name:e||"",K:"null",optional:!!t,M:r}}function Ia(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var t=!n||e.providerId===n;return!(!e.ya||!t)}}}function Aa(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&u(e.type)&&a(e.verify))}}}function Da(t,n,e,r){return{name:e||"",K:t.K+" or "+n.K,optional:!!r,M:function(e){return t.M(e)||n.M(e)}}}function Ma(e,t){for(var n in t){var r=t[n].name;e[r]=Fa(r,e[n],t[n].j)}}function ja(e,t){for(var n in t){var r=t[n].name;if(r!==n){var i=t[n].qb;Object.defineProperty(e,r,{get:function(){return this[n]},set:function(e){Sa(r,[i],[e],!0),this[n]=e},enumerable:!0})}}}function Ra(e,t,n,r){e[t]=Fa(t,n,r)}function Fa(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Sa(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}var La,Ua=Ua||{},Va=this,Ha="closure_uid_"+(1e9*Math.random()>>>0),Wa=0,Ba=Date.now||function(){return+new Date};e(v,Error),v.prototype.name="CustomError",e(y,v),y.prototype.name="AssertionError",b.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var qa=new b(function(){return new k},function(e){e.reset()});w.prototype.add=function(e,t){var n=qa.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},k.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},k.prototype.reset=function(){this.next=this.b=this.a=null};var za,Ga=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(u(e))return u(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ka=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=u(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},Ya=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=u(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},Qa=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=u(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1},$a=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},Xa=/&/g,Ja=/</g,Za=/>/g,es=/"/g,ts=/'/g,ns=/\x00/g,rs=/[\x00&<>"']/;e:{var is=Va.navigator;if(is){var os=is.userAgent;if(os){za=os;break e}}za=""}var as,ss,us="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ls=!1,cs=new w,hs=0,fs=2,ps=3;H.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ds=new b(function(){return new H},function(e){e.reset()});V.prototype.then=function(e,t,n){return K(this,a(e)?e:null,a(t)?t:null,n)},t(V),(La=V.prototype).ia=function(e,t){return(e=W(e,e,t)).c=!0,G(this,e),this},La.s=function(e,t){return K(this,null,e,t)},La.cancel=function(e){this.a==hs&&L(function(){!function e(t,n){if(t.a==hs)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==hs&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):X(r),J(r,o,ps,n)))}t.c=null}else Y(t,ps,n)}(this,new ee(e))},this)},La.Lc=function(e){this.a=hs,Y(this,fs,e)},La.Mc=function(e){this.a=hs,Y(this,ps,e)},La.Ub=function(){for(var e;e=X(this);)J(this,e,this.a,this.i);this.h=!1};var ms=F;e(ee,v);var vs=0,ys={};te.prototype.pa=!(ee.prototype.name="cancel"),te.prototype.ua=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},re[" "]=o;var gs,bs,_s=A("Opera"),ws=A("Trident")||A("MSIE"),ks=A("Edge"),xs=ks||ws,Cs=A("Gecko")&&!(P(za.toLowerCase(),"webkit")&&!A("Edge"))&&!(A("Trident")||A("MSIE"))&&!A("Edge"),Ss=P(za.toLowerCase(),"webkit")&&!A("Edge");e:{var Es="",Os=(bs=za,Cs?/rv:([^\);]+)(\)|;)/.exec(bs):ks?/Edge\/([\d\.]+)/.exec(bs):ws?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(bs):Ss?/WebKit\/(\S+)/.exec(bs):_s?/(?:Version)[ \/]?(\S+)/.exec(bs):void 0);if(Os&&(Es=Os?Os[1]:""),ws){var Ts=ie();if(null!=Ts&&Ts>parseFloat(Es)){gs=String(Ts);break e}}gs=Es}var Ns,Ps={},Is=Va.document;Ns=Is&&ws?ie()||("CSS1Compat"==Is.compatMode?parseInt(gs,10):5):void 0;var As=Object.freeze||function(e){return e},Ds=!ws||9<=Number(Ns),Ms=ws&&!oe("9"),js=function(){if(!Va.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return Va.addEventListener("test",o,t),Va.removeEventListener("test",o,t),e}();ae.prototype.preventDefault=function(){this.Gb=!1},e(se,ae);var Rs=As({2:"touch",3:"pen",4:"mouse"});se.prototype.preventDefault=function(){se.lb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ms)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},se.prototype.f=function(){return this.a};var Fs="closure_listenable_"+(1e6*Math.random()|0),Ls=0;ce.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=fe(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new ue(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var Us="closure_lm_"+(1e6*Math.random()|0),Vs={},Hs="__closure_events_fn_"+(1e9*Math.random()>>>0);e(Ce,te),Ce.prototype[Fs]=!0,Ce.prototype.addEventListener=function(e,t,n,r){pe(this,e,t,n,r)},Ce.prototype.removeEventListener=function(e,t,n,r){ve(this,e,t,n,r)},Ce.prototype.dispatchEvent=function(e){var t,n=this.Ua;if(n)for(t=[];n;n=n.Ua)t.push(n);n=this.Nb;var r=e.type||e;if(u(e))e=new ae(e,n);else if(e instanceof ae)e.target=e.target||n;else{var i=e;R(e=new ae(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Oe(a,r,!0,e)&&i}if(i=Oe(a=e.b=n,r,!0,e)&&i,i=Oe(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Oe(a=e.b=t[o],r,!1,e)&&i;return i},Ce.prototype.ua=function(){if(Ce.lb.ua.call(this),this.m){var e,t=this.m;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)0,le(n[r]);delete t.a[e],t.b--}}this.Ua=null},(La=Ae.prototype).S=function(){De(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},La.U=function(){return De(this),this.a.concat()},La.clear=function(){this.b={},this.c=this.a.length=0},La.get=function(e,t){return Me(this.b,e)?this.b[e]:t},La.set=function(e,t){Me(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},La.forEach=function(e,t){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Ws=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;je.prototype.toString=function(){var e=[],t=this.c;t&&e.push(qe(t,Bs,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.m)&&e.push(qe(t,Bs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(qe(n,"/"==n.charAt(0)?zs:qs,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.h)&&e.push("#",qe(n,Ks)),e.join("")};var Bs=/[#\/\?@]/g,qs=/[#\?:]/g,zs=/[#\?]/g,Gs=/[#\?@]/g,Ks=/#/g;(La=Ge.prototype).add=function(e,t){Ke(this),this.c=null,e=Je(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},La.clear=function(){this.a=this.c=null,this.b=0},La.forEach=function(n,r){Ke(this),this.a.forEach(function(e,t){Ka(e,function(e){n.call(r,e,t,this)},this)},this)},La.U=function(){Ke(this);for(var e=this.a.S(),t=this.a.U(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},La.S=function(e){Ke(this);var t=[];if(u(e))$e(this,e)&&(t=E(t,this.a.get(Je(this,e))));else{e=this.a.S();for(var n=0;n<e.length;n++)t=E(t,e[n])}return t},La.set=function(e,t){return Ke(this),this.c=null,$e(this,e=Je(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},La.get=function(e,t){return 0<(e=e?this.S(e):[]).length?String(e[0]):t},La.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Ys=!ws||9<=Number(Ns);Ze.prototype.ma=!0,Ze.prototype.la=function(){return this.a},Ze.prototype.toString=function(){return"Const{"+this.a+"}"};var Qs={};tt(""),nt.prototype.ma=!0,nt.prototype.la=function(){return this.a},nt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var $s=/%{(\w+)}/g,Xs=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,Js={};ot.prototype.ma=!0,ot.prototype.la=function(){return this.a},ot.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Zs=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,eu={};ut("about:blank"),lt.prototype.ma=!0,lt.prototype.la=function(){return this.a},lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var tu={};ct("<!DOCTYPE html>"),ct(""),ct("<br>");var nu={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},ru={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},iu=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,ou=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,au="Firefox",su="Chrome",uu={Sc:"FirebaseCore-web",Uc:"FirebaseUI-web"};zt.prototype.get=function(){var e=Va.navigator;return!e||"boolean"!=typeof e.onLine||!Rt()&&"chrome-extension:"!==Ft()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var lu,cu={};try{var hu={};Object.defineProperty(hu,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(hu,"abcd",{configurable:!0,enumerable:!0,value:2}),lu=2==hu.abcd}catch(u){lu=!1}var fu="EMAIL_SIGNIN",pu="email",du="newEmail",mu="requestType",vu="email",yu="fromEmail",gu="data",bu="operation";e(tn,Error),tn.prototype.D=function(){return{code:this.code,message:this.message}},tn.prototype.toJSON=function(){return this.D()};var _u="auth/",wu={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ku="android",xu="handleCodeInApp",Cu="iOS",Su="url",Eu="installApp",Ou="minimumVersion",Tu="packageName",Nu="bundleId",Pu=null,Iu=null;sn.prototype.f=function(){return this.b};var Au="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Du=["client_id","response_type","scope","redirect_uri","state"],Mu={Tc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",eb:Du},Vc:{Ma:null,Ba:500,Aa:620,Na:"github.com",eb:Du},Wc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",eb:Du},bd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",eb:Au}},ju="idToken",Ru="providerId";e(pn,fn),e(dn,pn),e(mn,pn),e(vn,pn),e(yn,pn),wn.prototype.ya=function(e){return qr(e,kn(this))},wn.prototype.c=function(e,t){var n=kn(this);return n.idToken=t,zr(e,n)},wn.prototype.f=function(e,t){return _n(Gr(e,kn(this)),t)},wn.prototype.D=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),e},xn.prototype.Da=function(e){return this.vb=j(e),this},e(Cn,xn),Cn.prototype.ta=function(e){return x(this.a,e)||this.a.push(e),this},Cn.prototype.Ab=function(){return O(this.a)},Cn.prototype.credential=function(e,t){if(!e&&!t)throw new tn("argument-error","credential failed: must provide the ID token and/or the access token.");return new wn(this.providerId,{idToken:e||null,accessToken:t||null},this.providerId)},e(Sn,Cn),$t(Sn,"PROVIDER_ID","facebook.com"),$t(Sn,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(On,Cn),$t(On,"PROVIDER_ID","github.com"),$t(On,"GITHUB_SIGN_IN_METHOD","github.com"),e(Nn,Cn),$t(Nn,"PROVIDER_ID","google.com"),$t(Nn,"GOOGLE_SIGN_IN_METHOD","google.com"),e(In,xn),$t(In,"PROVIDER_ID","twitter.com"),$t(In,"TWITTER_SIGN_IN_METHOD","twitter.com"),Dn.prototype.ya=function(e){return this.signInMethod==Mn.EMAIL_LINK_SIGN_IN_METHOD?Yr(e,vl,{email:this.a,oobCode:this.b}):Yr(e,Dl,{email:this.a,password:this.b})},Dn.prototype.c=function(e,t){return this.signInMethod==Mn.EMAIL_LINK_SIGN_IN_METHOD?Yr(e,yl,{idToken:t,email:this.a,oobCode:this.b}):Yr(e,Ol,{idToken:t,email:this.a,password:this.b})},Dn.prototype.f=function(e,t){return _n(this.ya(e),t)},Dn.prototype.D=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Xt(Mn,{PROVIDER_ID:"password"}),Xt(Mn,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xt(Mn,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fn.prototype.ya=function(e){return e.Ta(Ln(this))},Fn.prototype.c=function(e,t){var n=Ln(this);return n.idToken=t,Yr(e,jl,n)},Fn.prototype.f=function(e,t){var n=Ln(this);return n.operation="REAUTH",_n(e=Yr(e,Rl,n),t)},Fn.prototype.D=function(){var e={providerId:"phone"};return this.a.Sa&&(e.verificationId=this.a.Sa),this.a.Ra&&(e.verificationCode=this.a.Ra),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},Un.prototype.Ta=function(t,n){var r=this.a.b;return B(n.verify()).then(function(e){if(!u(e))throw new tn("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return function(e,t){return Yr(e,Sl,t)}(r,{phoneNumber:t,recaptchaToken:e}).then(function(e){return"function"==typeof n.reset&&n.reset(),e},function(e){throw"function"==typeof n.reset&&n.reset(),e});default:throw new tn("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Xt(Un,{PROVIDER_ID:"phone"}),Xt(Un,{PHONE_SIGN_IN_METHOD:"phone"}),Bn.prototype.D=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.D()}};var Fu=null;zn.prototype.subscribe=function(e){var n=this;this.a.push(e),this.b||(this.b=function(e){for(var t=0;t<n.a.length;t++)n.a[t](e)},"function"==typeof(e=Dt("universalLinks.subscribe",Va))&&e(null,this.b))},zn.prototype.unsubscribe=function(t){S(this.a,function(e){return e==t})},e(Gn,tn),e(Kn,tn),Kn.prototype.D=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.D();return t&&R(e,t),e},Kn.prototype.toJSON=function(){return this.D()};var Lu,Uu=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;Qn.prototype.c=null,e($n,Qn),$n.prototype.a=function(){var e=Xn(this);return e?new ActiveXObject(e):new XMLHttpRequest},$n.prototype.b=function(){var e={};return Xn(this)&&(e[0]=!0,e[1]=!0),e},Lu=new $n,e(Jn,Qn),Jn.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Zn;throw Error("Unsupported browser")},Jn.prototype.b=function(){return{}},(La=Zn.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},La.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},La.abort=function(){this.a.abort()},La.setRequestHeader=function(){},La.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},La.bc=function(){this.status=200,this.responseText=this.a.responseText,er(this,4)},La.Bb=function(){this.status=500,this.responseText="",er(this,4)},La.fc=function(){this.Bb()},La.cc=function(){this.status=200,er(this,1)},La.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},tr.prototype.a=null;tr.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||Ba(),delete this.a},rr.prototype.toString=function(){return this.name};var Vu=new rr("SEVERE",1e3),Hu=new rr("WARNING",900),Wu=new rr("CONFIG",700),Bu=new rr("FINE",500);nr.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(g("Root logger has no level set."),null)}(this).value)for(a(t)&&(t=t()),e=new tr(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var qu,zu={},Gu=null;e(ar,Qn),ar.prototype.a=function(){return new sr(this.f)},ar.prototype.b=(qu={},function(){return qu}),e(sr,Ce);var Ku=0;(La=sr.prototype).open=function(e,t){if(this.readyState!=Ku)throw this.abort(),Error("Error reopening a connection");this.h=e,this.c=t,this.readyState=1,ur(this)},La.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.g,method:this.h,credentials:void 0,cache:void 0};e&&(t.body=e),this.i.fetch(new Request(this.c,t)).then(this.ec.bind(this),this.Cb.bind(this))},La.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,ur(this)),this.readyState=Ku},La.ec=function(e){this.a&&(this.b||(this.b=e.headers,this.readyState=2,ur(this)),this.a&&(this.readyState=3,ur(this),this.a&&e.text().then(this.dc.bind(this,e),this.Cb.bind(this))))},La.dc=function(e,t){this.a&&(this.status=e.status,this.statusText=e.statusText,this.responseText=t,this.readyState=4,ur(this))},La.Cb=function(e){var t=this.f;t&&t.log(Hu,"Failed to fetch url "+this.c,e instanceof Error?e:Error(e)),this.a&&(this.readyState=4,ur(this))},La.setRequestHeader=function(e,t){this.g.append(e,t)},La.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.f)&&e.log(Hu,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},La.getAllResponseHeaders=function(){if(!this.b){var e=this.f;return e&&e.log(Hu,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},e(lr,Ce);var Yu="";lr.prototype.b=ir("goog.net.XhrIo");var Qu=/^https?$/i,$u=["POST","PUT"];(La=lr.prototype).Ga=function(){void 0!==Ua&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",or(this.b,br(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},La.abort=function(){this.a&&this.c&&(or(this.b,br(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),mr(this))},La.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),mr(this,!0)),lr.lb.ua.call(this)},La.Fb=function(){this.pa||(this.I||this.i||this.f?dr(this):this.tc())},La.tc=function(){dr(this)},La.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Yu:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Vu,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return or(this.b,"Can not get response: "+e.message),null}},_r.prototype.cancel=function(e){if(this.a)this.c instanceof _r&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):--t.m<=0&&t.cancel()}this.v?this.v.call(this.u,this):this.l=!0,this.a||(e=new Or(this),kr(this),wr(this,!1,e))}},_r.prototype.o=function(e,t){this.i=!1,wr(this,e,t)},_r.prototype.C=function(){kr(this),wr(this,!0,null)},_r.prototype.then=function(e,t,n){var r,i,o=new V(function(e,t){r=e,i=t});return xr(this,r,function(e){e instanceof Or?o.cancel():i(e)}),o.then(e,t,n)},t(_r),e(Er,v),Er.prototype.message="Deferred has already fired",Er.prototype.name="AlreadyCalledError",e(Or,v),Or.prototype.message="Deferred was canceled",Or.prototype.name="CanceledError",Tr.prototype.c=function(){throw delete Xu[this.a],this.b};var Xu={},Ju=0,Zu=1;e(Ar,v),e(Dr,Qn),Dr.prototype.a=function(){return new this.f},Dr.prototype.b=function(){return{}};var el,tl="idToken",nl=new zt(3e4,6e4),rl={"Content-Type":"application/x-www-form-urlencoded"},il=new zt(3e4,6e4),ol={"Content-Type":"application/json"};Mr.prototype.o=function(e,n,t,r,i,o){if(Ot()&&(void 0===Va.fetch||void 0===Va.Headers||void 0===Va.Request))throw new tn("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new lr(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}Se(a,"complete",function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return or(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}n&&n(t)}),Ee(a,"ready",function(){s&&clearTimeout(s),ne(this)}),Ee(a,"timeout",function(){s&&clearTimeout(s),ne(this),n&&n(null)}),cr(a,e,t,r,i)};var al=tt("https://apis.google.com/js/client.js?onload=%{onload}"),sl="__fcb"+Math.floor(1e6*Math.random()).toString();Mr.prototype.l=function(e,n,r,i,o){var a=this;el.then(function(){window.gapi.client.setApiKey(a.b);var t=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:r,body:i,headers:o,authType:"none",callback:function(e){window.gapi.auth.setToken(t),n&&n(e)}})}).s(function(e){n&&n({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},Mr.prototype.Pa=function(){return Yr(this,Tl,{})},Mr.prototype.mb=function(e,t){return Yr(this,El,{idToken:e,email:t})},Mr.prototype.nb=function(e,t){return Yr(this,Ol,{idToken:e,password:t})};var ul={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};(La=Mr.prototype).ob=function(e,r){var i={idToken:e},o=[];return D(ul,function(e,t){var n=r[t];null===n?o.push(e):t in r&&(i[t]=n)}),o.length&&(i.deleteAttribute=o),Yr(this,El,i)},La.hb=function(e,t){return R(e={requestType:"PASSWORD_RESET",email:e},t),Yr(this,wl,e)},La.ib=function(e,t){return R(e={requestType:"EMAIL_SIGNIN",email:e},t),Yr(this,bl,e)},La.gb=function(e,t){return R(e={requestType:"VERIFY_EMAIL",idToken:e},t),Yr(this,_l,e)},La.Ta=function(e){return Yr(this,Ml,e)},La.Xa=function(e,t){return Yr(this,Cl,{oobCode:e,newPassword:t})},La.Ja=function(e){return Yr(this,hl,{oobCode:e})},La.Va=function(e){return Yr(this,cl,{oobCode:e})};var ll,cl={endpoint:"setAccountInfo",B:Kr,da:"email"},hl={endpoint:"resetPassword",B:Kr,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new tn("internal-error")}},fl={endpoint:"signupNewUser",B:function(e){if(Lr(e),!e.password)throw new tn("weak-password")},J:Vr,R:!0},pl={endpoint:"createAuthUri"},dl={endpoint:"deleteAccount",T:["idToken"]},ml={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(e){if(!l(e.deleteProvider))throw new tn("internal-error")}},vl={endpoint:"emailLinkSignin",T:["email","oobCode"],B:Lr,J:Vr,R:!0},yl={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:Lr,J:Vr,R:!0},gl={endpoint:"getAccountInfo"},bl={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new tn("internal-error");Lr(e)},da:"email"},_l={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new tn("internal-error")},da:"email"},wl={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(e){if("PASSWORD_RESET"!=e.requestType)throw new tn("internal-error");Lr(e)},da:"email"},kl={rb:!0,endpoint:"getProjectConfig",Eb:"GET"},xl={rb:!0,endpoint:"getRecaptchaParam",Eb:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new tn("internal-error")}},Cl={endpoint:"resetPassword",B:Kr,da:"email"},Sl={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},El={endpoint:"setAccountInfo",T:["idToken"],B:Ur,R:!0},Ol={endpoint:"setAccountInfo",T:["idToken"],B:function(e){if(Ur(e),!e.password)throw new tn("weak-password")},J:Vr,R:!0},Tl={endpoint:"signupNewUser",J:Vr,R:!0},Nl={endpoint:"verifyAssertion",B:Wr,J:Br,R:!0},Pl={endpoint:"verifyAssertion",B:Wr,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new tn("user-not-found");if(e.errorMessage)throw Qr(e.errorMessage);if(!e[tl])throw new tn("internal-error")},R:!0},Il={endpoint:"verifyAssertion",B:function(e){if(Wr(e),!e.idToken)throw new tn("internal-error")},J:Br,R:!0},Al={endpoint:"verifyCustomToken",B:function(e){if(!e.token)throw new tn("invalid-custom-token")},J:Vr,R:!0},Dl={endpoint:"verifyPassword",B:function(e){if(Lr(e),!e.password)throw new tn("wrong-password")},J:Vr,R:!0},Ml={endpoint:"verifyPhoneNumber",B:Hr,J:Vr},jl={endpoint:"verifyPhoneNumber",B:function(e){if(!e.idToken)throw new tn("internal-error");Hr(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Yn(e);Vr(e)}},Rl={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Hr,J:Vr},Fl={Yc:{Za:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://securetoken.googleapis.com/v1/token",id:"p"},$c:{Za:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ad:{Za:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",fb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};ll=Xr("__EID__")?"__EID__":void 0;var Ll,Ul=tt("https://apis.google.com/js/api.js?onload=%{onload}"),Vl=new zt(3e4,6e4),Hl=new zt(5e3,15e3),Wl=null;Zr.prototype.toString=function(){return this.f?Ue(this.a,"v",this.f):Qe(this.a.a,"v"),this.b?Ue(this.a,"eid",this.b):Qe(this.a.a,"eid"),this.c.length?Ue(this.a,"fw",this.c.join(",")):Qe(this.a.a,"fw"),this.a.toString()},ei.prototype.toString=function(){var e=We(this.o,"/__/auth/handler");if(Ue(e,"apiKey",this.l),Ue(e,"appName",this.c),Ue(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=wc.a.app(this.c).auth().ea()}catch(e){n=null}for(var r in t.Ya=n,Ue(e,"providerId",this.a.providerId),n=Vt((t=this.a).vb))n[r]=n[r].toString();r=t.Ac,n=j(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.$a&&t.Ya&&!n[t.$a]&&(n[t.$a]=t.Ya),M(n)||Ue(e,"customParameters",Ut(n))}if("function"==typeof this.a.Ab&&((t=this.a.Ab()).length&&Ue(e,"scopes",t.join(","))),this.i?Ue(e,"redirectUrl",this.i):Qe(e.a,"redirectUrl"),this.g?Ue(e,"eventId",this.g):Qe(e.a,"eventId"),this.h?Ue(e,"v",this.h):Qe(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ve(e,a)&&Ue(e,a,this.b[a]);return this.f?Ue(e,"eid",this.f):Qe(e.a,"eid"),(a=ti(this.c)).length&&Ue(e,"fw",a.join(",")),e.toString()},(La=ni.prototype).Ea=function(t,n,e){var r=new tn("popup-closed-by-user"),i=new tn("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){si(o).then(function(e){e||(t&&kt(t),n(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(n){return new V(function(t){return function e(){Ne(2e3).then(function(){if(n&&!n.closed)return e();t()})}()})}(t)}).then(function(){if(!a)return Ne(e).then(function(){n(r)})})},La.Ib=function(){var e=At();return!Lt(e)&&!Bt(e)},La.Db=function(){return!1},La.zb=function(t,e,n,r,i,o,a){if(!t)return q(new tn("popup-blocked"));if(a&&!Lt())return this.ga().s(function(e){kt(t),i(e)}),r(),B();this.a||(this.a=ri(oi(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw kt(t),i(e),e});return r(),e}).then(function(){Wn(n),a||_t(ai(s.l,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).s(function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e})},La.Ca=function(e,t,n){this.a||(this.a=ri(oi(this)));var r=this;return this.a.then(function(){Wn(t),_t(ai(r.l,r.f,r.b,e,t,bt(),n,r.c,void 0,r.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e})},La.ga=function(){var e=this;return ii(this).then(function(){return e.i.bb}).s(function(){throw e.a=null,new tn("network-request-failed")})},La.Mb=function(){return!0},La.va=function(e){this.g.push(e)},La.Ka=function(t){S(this.g,function(e){return e==t})},(La=ui.prototype).get=function(e){return B(this.a.getItem(e)).then(function(e){return e&&Ht(e)})},La.set=function(e,t){return B(this.a.setItem(e,Ut(t)))},La.P=function(e){return B(this.a.removeItem(e))},La.Y=function(){},La.ca=function(){},(La=li.prototype).set=function(n,r){var i,o=!1,a=this;return hi(this).then(function(e){return mi((e=pi(di(i=e,!0))).get(n))}).then(function(e){var t=pi(di(i,!0));return e?(e.value=r,mi(t.put(e))):(a.b++,o=!0,(e={}).fbase_key=n,e.value=r,mi(t.add(e)))}).then(function(){a.f[n]=r}).ia(function(){o&&a.b--})},La.get=function(t){return hi(this).then(function(e){return mi(pi(di(e,!1)).get(t))}).then(function(e){return e&&e.value})},La.P=function(t){var n=!1,r=this;return hi(this).then(function(e){return n=!0,r.b++,mi(pi(di(e,!0)).delete(t))}).then(function(){delete r.f[t]}).ia(function(){n&&r.b--})},La.Kc=function(){var r=this;return hi(this).then(function(e){var i=pi(di(e,!1));return i.getAll?mi(i.getAll()):new V(function(t,n){var r=[],e=i.openCursor();e.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},e.onerror=function(e){n(Error(e.target.errorCode))}})}).then(function(e){var t={},n=[];if(0==r.b){for(n=0;n<e.length;n++)t[e[n].fbase_key]=e[n].value;n=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(r.f,t),r.f=t}return n})},La.Y=function(e){0==this.a.length&&function(e){e.c&&e.c.cancel("STOP_EVENT"),function t(){return e.c=Ne(800).then(p(e.Kc,e)).then(function(t){0<t.length&&Ka(e.a,function(e){e(t)})}).then(t).s(function(e){"STOP_EVENT"!=e.message&&t()}),e.c}()}(this),this.a.push(e)},La.ca=function(t){S(this.a,function(e){return e==t}),0==this.a.length&&this.c&&this.c.cancel("STOP_EVENT")},(La=vi.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},La.set=function(t,n){return this.b.then(function(e){return e.set(t,n)})},La.P=function(t){return this.b.then(function(e){return e.P(t)})},La.Y=function(e){this.a.push(e)},La.ca=function(t){S(this.a,function(e){return e==t})},(La=yi.prototype).get=function(e){return B(this.a[e])},La.set=function(e,t){return this.a[e]=t,B()},La.P=function(e){return delete this.a[e],B()},La.Y=function(){},La.ca=function(){},(La=gi.prototype).get=function(e){var t=this;return B().then(function(){return Ht(t.a.getItem(e))})},La.set=function(t,n){var r=this;return B().then(function(){var e=Ut(n);null===e?r.P(t):r.a.setItem(t,e)})},La.P=function(e){var t=this;return B().then(function(){t.a.removeItem(e)})},La.Y=function(e){Va.window&&pe(Va.window,"storage",e)},La.ca=function(e){Va.window&&ve(Va.window,"storage",e)},(La=_i.prototype).get=function(){return B(null)},La.set=function(){return B()},La.P=function(){return B()},La.Y=function(){},La.ca=function(){},(La=wi.prototype).get=function(e){var t=this;return B().then(function(){return Ht(t.a.getItem(e))})},La.set=function(t,n){var r=this;return B().then(function(){var e=Ut(n);null===e?r.P(t):r.a.setItem(t,e)})},La.P=function(e){var t=this;return B().then(function(){t.a.removeItem(e)})},La.Y=function(){},La.ca=function(){};var Bl,ql,zl={A:gi,Qa:wi},Gl={A:gi,Qa:wi},Kl={A:ui,Qa:_i},Yl={A:gi,Qa:_i},Ql={Xc:"local",NONE:"none",Zc:"session"};(La=Ci.prototype).get=function(e,t){return Ei(this,e.A).get(Oi(e,t))},La.set=function(t,e,n){var r=Oi(t,n),i=this,o=Ei(this,t.A);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.A&&(i.b[r]=e)})},La.addListener=function(e,t,n){e=Oi(e,t),this.m&&(this.b[e]=Va.localStorage.getItem(e)),M(this.a)&&(Ei(this,"local").Y(this.f),this.h||(gt()||!Yt())&&Va.indexedDB||!this.m||function(r){Ni(r),r.c=setInterval(function(){for(var e in r.a){var t=Va.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new se({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Lb(t))}},1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},La.removeListener=function(e,t,n){e=Oi(e,t),this.a[e]&&(S(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),M(this.a)&&(Ei(this,"local").ca(this.f),Ni(this))},La.Lb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=Va.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Wa(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Ei(this,"local").ca(this.f):Ni(this),this.o)if(n=Va.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?Va.localStorage.setItem(t,r):Va.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===Va.localStorage.getItem(t)||(o.b[t]=Va.localStorage.getItem(t),o.Wa(t))},ws&&Ns&&10==Ns&&Va.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else Ka(e,p(this.Wa,this))},La.Wa=function(e){this.a[e]&&Ka(this.a[e],function(e){e()})};var $l,Xl={name:"authEvent",A:"local"};e(Ai,function(){this.b=-1});for(var Jl=64,Zl=Jl-1,ec=[],tc=0;tc<Zl;tc++)ec[tc]=0;var nc=E(128,ec);Ai.prototype.reset=function(){this.g=this.c=0,this.a=Va.Int32Array?new Int32Array(this.h):O(this.h)};var rc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];e(ji,Ai);var ic=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];(La=Ri.prototype).ga=function(){return this.za?this.za:this.za=(St(void 0)?Ct().then(function(){return new V(function(e,t){var n=Va.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):q(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Dt("universalLinks.subscribe",Va))throw Fi("cordova-universal-links-plugin is not installed");if(void 0===Dt("BuildInfo.packageName",Va))throw Fi("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dt("cordova.plugins.browsertab.openUrl",Va))throw Fi("cordova-plugin-browsertab is not installed");if("function"!=typeof Dt("cordova.InAppBrowser.open",Va))throw Fi("cordova-plugin-inappbrowser is not installed")},function(){throw new tn("cordova-not-ready")})},La.Ea=function(e,t){return t(new tn("operation-not-supported-in-this-environment")),B()},La.zb=function(){return q(new tn("operation-not-supported-in-this-environment"))},La.Mb=function(){return!1},La.Ib=function(){return!0},La.Db=function(){return!0},La.Ca=function(e,t,n){if(this.c)return q(new tn("redirect-operation-pending"));var r=this,i=Va.document,o=null,a=null,s=null,u=null;return this.c=B().then(function(){return Wn(t),Hi(r)}).then(function(){return Ui(r,e,t,n)}).then(function(){return new V(function(t,e){a=function(){var e=Dt("cordova.plugins.browsertab.close",Va);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(a),s=function(){o||(o=Ne(2e3).then(function(){e(new tn("redirect-cancelled-by-user"))}))},u=function(){Gt()&&s()},i.addEventListener("resume",s,!1),At().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(e){return Wi(r).then(function(){throw e})})}).ia(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ka(a),r.c=null})},La.va=function(t){this.b.push(t),Hi(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bn("unknown",null,null,null,new tn("no-auth-event")),t(e))})},La.Ka=function(t){S(this.b,function(e){return e==t})};var oc={name:"pendingRedirect",A:"session"};zi.prototype.reset=function(){this.f=!1,this.a.Ka(this.i),this.a=Gi(this.v,this.m,this.l)},zi.prototype.subscribe=function(e){if(x(this.h,e)||this.h.push(e),!this.f){var n=this;(function(e){return e.b.get(oc,e.a).then(function(e){return"pending"==e})})(this.g).then(function(e){e?qi(n.g).then(function(){Ki(n).s(function(e){var t=new Bn("unknown",null,null,null,new tn("operation-not-supported-in-this-environment"));$i(e)&&n.o(t)})}):Yi(n)}).s(function(){Yi(n)})}},zi.prototype.unsubscribe=function(t){S(this.h,function(e){return e==t})},zi.prototype.o=function(e){if(!e)throw new tn("invalid-auth-event");for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.sb(e.b,e.c)){(t=this.b[e.b])&&t.h(e,r),t=!0;break}}return Zi(this.c),t};var ac=new zt(2e3,1e4),sc=new zt(3e4,6e4);zi.prototype.fa=function(){return this.c.fa()},zi.prototype.Ca=function(e,t,n){var r,i=this;return function(e){return e.b.set(oc,"pending",e.a)}(this.g).then(function(){return i.a.Ca(e,t,n).s(function(e){if($i(e))throw new tn("operation-not-supported-in-this-environment");return r=e,qi(i.g).then(function(){throw r})}).then(function(){return i.a.Mb()?new V(function(){}):qi(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},zi.prototype.Ea=function(t,n,e,r){return this.a.Ea(e,function(e){t.ha(n,null,e,r)},ac.get())};var uc={};Ji.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ji.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.b,r=e.c,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;"unknown"!=n||i||o?e.a?(to(this,!0,null,e.a),B()):t.wa(n,r)?function(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){to(t,o,e,null)}).s(function(e){to(t,o,null,e)})}(this,e,t):q(new tn("invalid-auth-event")):(to(this,!1,null,null),B())}else q(new tn("invalid-auth-event"))},Ji.prototype.fa=function(){var n=this;return new V(function(e,t){n.b?n.b().then(e,t):(n.f.push(e),n.c.push(t),function(e){var t=new tn("timeout");e.a&&e.a.cancel(),e.a=Ne(sc.get()).then(function(){e.b||to(e,!0,null,t)})}(n))})},no.prototype.h=function(e,t){if(e){var n=e.b,r=e.c;e.a?(t.ha(e.b,null,e.a,e.c),B()):t.wa(n,r)?function(e,t){var n=e.c,r=e.b;t.wa(r,n)(e.f,e.g).then(function(e){t.ha(r,e,null,n)}).s(function(e){t.ha(r,null,e,n)})}(e,t):q(new tn("invalid-auth-event"))}else q(new tn("invalid-auth-event"))},io.prototype.confirm=function(e){return e=Vn(this.verificationId,e),this.a(e)},so.prototype.start=function(){this.a=this.c,uo(this,!0)},so.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},lo.prototype.D=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},lo.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?q(new tn("user-token-expired")):e||!this.b||Ba()>this.c-3e4?this.a?fo(this,{grant_type:"refresh_token",refresh_token:this.a}):B(null):B({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},po.prototype.D=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(vo,ae),e(yo,Ce),yo.prototype.oa=function(e){this.ka=e,jr(this.b,e)},yo.prototype.ea=function(){return this.ka},yo.prototype.xa=function(){return O(this.O)},yo.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},$t(yo.prototype,"providerId","firebase"),(La=yo.prototype).reload=function(){var e=this;return Bo(this,No(this).then(function(){return jo(e).then(function(){return So(e)}).then(To)}))},La.ac=function(e){return this.F(e).then(function(e){return new ao(e)})},La.F=function(e){var t=this;return Bo(this,No(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new tn("internal-error");return e.accessToken!=t.qa&&(Co(t,e.accessToken),t.dispatchEvent(new vo("tokenChanged"))),Do(t,"refreshToken",e.refreshToken),e.accessToken}))},La.uc=function(e){if(!(e=e.users)||!e.length)throw new tn("internal-error");Oo(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?Ya(e,function(e){return new mo(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}(e),n=0;n<t.length;n++)Io(this,t[n]);Do(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},La.cb=function(e){var t=this,n=null;return Bo(this,e.f(this.b,this.uid).then(function(e){return Ro(t,e),n=Lo(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},La.vc=function(e){return Qt("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.cb(e).then(function(){})},La.ab=function(t){var n=this,r=null;return Bo(this,Fo(this,t.providerId).then(function(){return n.F()}).then(function(e){return t.c(n.b,e)}).then(function(e){return r=Lo(n,e,"link"),Uo(n,e)}).then(function(){return r}))},La.mc=function(e){return Qt("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.ab(e).then(function(e){return e.user})},La.nc=function(e,t){var n=this;return Bo(this,Fo(this,"phone").then(function(){return oo(wo(n),e,t,p(n.ab,n))}))},La.wc=function(e,t){var n=this;return Bo(this,B().then(function(){return oo(wo(n),e,t,p(n.cb,n))}),!0)},La.mb=function(t){var n=this;return Bo(this,this.F().then(function(e){return n.b.mb(e,t)}).then(function(e){return Ro(n,e),n.reload()}))},La.Pc=function(t){var n=this;return Bo(this,this.F().then(function(e){return t.c(n.b,e)}).then(function(e){return Ro(n,e),n.reload()}))},La.nb=function(t){var n=this;return Bo(this,this.F().then(function(e){return n.b.nb(e,t)}).then(function(e){return Ro(n,e),n.reload()}))},La.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return No(this);var n=this;return Bo(this,this.F().then(function(e){return n.b.ob(e,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(e){return Ro(n,e),Do(n,"displayName",e.displayName||null),Do(n,"photoURL",e.photoUrl||null),Ka(n.providerData,function(e){"password"===e.providerId&&($t(e,"displayName",n.displayName),$t(e,"photoURL",n.photoURL))}),So(n)}).then(To))},La.Nc=function(t){var n=this;return Bo(this,jo(this).then(function(e){return x(Po(n),t)?function(e,t,n){return Yr(e,ml,{idToken:t,deleteProvider:n})}(n.b,e,[t]).then(function(e){var t={};return Ka(e.providerUserInfo||[],function(e){t[e.providerId]=!0}),Ka(Po(n),function(e){t[e]||Ao(n,e)}),t[Un.PROVIDER_ID]||$t(n,"phoneNumber",null),So(n)}):So(n).then(function(){throw new tn("no-such-provider")})}))},La.delete=function(){var t=this;return Bo(this,this.F().then(function(e){return Yr(t.b,dl,{idToken:e})}).then(function(){t.dispatchEvent(new vo("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");go(t,null),_o(t,null),t.G=[],t.C=!0,xo(t),$t(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},La.sb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},La.ha=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},La.wa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?p(this.xb,this):"reauthViaPopup"==e&&t==(this.g||null)?p(this.yb,this):"linkViaRedirect"==e&&(this.aa||null)==t?p(this.xb,this):"reauthViaRedirect"==e&&(this.aa||null)==t?p(this.yb,this):null},La.oc=function(e){var t=this;return Vo(this,"linkViaPopup",e,function(){return Fo(t,e.providerId).then(function(){return So(t)})},!1)},La.xc=function(e){return Vo(this,"reauthViaPopup",e,function(){return B()},!0)},La.pc=function(e){var t=this;return Ho(this,"linkViaRedirect",e,function(){return Fo(t,e.providerId)},!1)},La.yc=function(e){return Ho(this,"reauthViaRedirect",e,function(){return B()},!0)},La.xb=function(t,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Bo(this,this.F().then(function(e){return zr(r.b,{requestUri:t,sessionId:n,idToken:e})}).then(function(e){return i=Lo(r,e,"link"),Uo(r,e)}).then(function(){return i}))},La.yb=function(e,t){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Bo(this,B().then(function(){return _n(Gr(n.b,{requestUri:e,sessionId:t}),n.uid)}).then(function(e){return r=Lo(n,e,"reauthenticate"),Ro(n,e),n.i=null,n.reload()}).then(function(){return r}),!0)},La.gb=function(t){var n=this,r=null;return Bo(this,this.F().then(function(e){return r=e,void 0===t||M(t)?{}:on(new rn(t))}).then(function(e){return n.b.gb(r,e)}).then(function(e){if(n.email!=e)return n.reload()}).then(function(){}))},La.toJSON=function(){return this.D()},La.D=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.D(),redirectEventId:this.aa||null};return this.metadata&&R(t,this.metadata.D()),Ka(this.providerData,function(e){t.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(e))}),t};var lc={name:"redirectUser",A:"session"};Ko.prototype.g=function(){var t=this,n=Qo("local");Zo(this,function(){return B().then(function(){return t.c&&"local"!=t.c.A?t.b.get(n,t.a):null}).then(function(e){if(e)return Yo(t,"local").then(function(){t.c=n})})})};var cc={name:"persistence",A:"session"};Ko.prototype.jb=function(t){var n=null,r=this;return function(e){var t=new tn("invalid-persistence-type"),n=new tn("unsupported-persistence-type");e:{for(r in Ql)if(Ql[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(Tt()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!Mt()&&"none"!==e)throw n}}(t),Zo(this,function(){return t!=r.c.A?r.b.get(r.c,r.a).then(function(e){return n=e,Yo(r,t)}).then(function(){if(r.c=Qo(t),n)return r.b.set(r.c,n,r.a)}):B()})},e(ea,Ce),e(ta,ae),e(na,ae),(La=ea.prototype).jb=function(e){return e=this.h.jb(e),ha(this,e)},La.oa=function(e){this.W===e||this.l||(this.W=e,jr(this.b,this.W),this.dispatchEvent(new ta(this.ea())))},La.ea=function(){return this.W},La.Qc=function(){var e=Va.navigator;this.oa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},La.qc=function(e){this.G.push(e),Rr(this.b,wc.a.SDK_VERSION?It(wc.a.SDK_VERSION,this.G):null),this.dispatchEvent(new na(this.G))},La.xa=function(){return O(this.G)},La.toJSON=function(){return{apiKey:sa(this).options.apiKey,authDomain:sa(this).options.authDomain,appName:sa(this).name,currentUser:ua(this)&&ua(this).D()}},La.sb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},La.ha=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},La.wa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?p(this.Xb,this):null},La.Xb=function(e,t){var n=this;e={requestUri:e,sessionId:t},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=qr(n.b,e).then(function(e){return r=Hn(e),i=hn(e),e});return ha(this,e=n.V.then(function(){return o}).then(function(e){return ia(n,e)}).then(function(){return Jt({user:ua(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},La.Hc=function(t){if(!jt())return q(new tn("operation-not-supported-in-this-environment"));var n=this,e=cn(t.providerId),r=Wt(),i=null;(!Lt()||Et())&&sa(this).options.authDomain&&t.isOAuthProvider&&(i=ai(sa(this).options.authDomain,sa(this).options.apiKey,sa(this).name,"signInViaPopup",t,null,r,wc.a.SDK_VERSION||null));var o=xt(i,e&&e.Ba,e&&e.Aa);return ha(this,e=ra(this).then(function(e){return Qi(e,o,"signInViaPopup",t,r,!!i)}).then(function(){return new V(function(e,t){n.ha("signInViaPopup",null,new tn("cancelled-popup-request"),n.g),n.f=e,n.v=t,n.g=r,n.c=n.a.Ea(n,"signInViaPopup",o,r)})}).then(function(e){return o&&kt(o),e?Jt(e):null}).s(function(e){throw o&&kt(o),e}))},La.Ic=function(e){if(!jt())return q(new tn("operation-not-supported-in-this-environment"));var t=this;return ha(this,ra(this).then(function(){return function(e){return Zo(e,function(){return e.b.set(cc,e.c.A,e.a)})}(t.h)}).then(function(){return t.a.Ca("signInViaRedirect",e)}))},La.fa=function(){if(!jt())return q(new tn("operation-not-supported-in-this-environment"));var e=this;return ha(this,ra(this).then(function(){return e.a.fa()}).then(function(e){return e?Jt(e):null}))},La.Oc=function(e){if(!e)return q(new tn("null-user"));var t=this,n={};n.apiKey=sa(this).options.apiKey,n.authDomain=sa(this).options.authDomain,n.appName=sa(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.u,appName:e.o};var i=e.h,o={};return o[tl]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-Ba())/1e3,t=new yo(t,o),n&&(t.ba=n),r&&bo(t,r),Mo(t,e),t}(e,n,t.w,t.xa());return ha(this,this.i.then(function(){if(sa(t).options.apiKey!=e.l)return r.reload()}).then(function(){return ua(t)&&e.uid==ua(t).uid?(Mo(ua(t),e),t.Z(e)):(oa(t,r),Eo(r),t.Z(r))}).then(function(){ca(t)}))},La.kb=function(){var e=this;return ha(this,this.i.then(function(){return ua(e)?(oa(e,null),Xo(e.h).then(function(){ca(e)})):B()}))},La.Jc=function(){var r=this;return Jo(this.h,sa(this).options.authDomain).then(function(e){if(!r.l){var t;if(t=ua(r)&&e){t=ua(r).uid;var n=e.uid;t=null!=t&&""!==t&&null!=n&&""!==n&&t==n}if(t)return Mo(ua(r),e),ua(r).F();(ua(r)||e)&&(oa(r,e),e&&(Eo(e),e.ba=r.w),r.a&&r.a.subscribe(r),ca(r))}})},La.Z=function(e){return $o(this.h,e)},La.Yb=function(){ca(this),this.Z(ua(this))},La.gc=function(){this.kb()},La.hc=function(){this.kb()},La.ic=function(e){var t=this;this.addAuthTokenListener(function(){e.next(ua(t))})},La.jc=function(e){var t=this;!function(e,t){e.I.push(t),ha(e,e.i.then(function(){!e.l&&x(e.I,t)&&e.O!==e.getUid()&&(e.O=e.getUid(),t(la(e)))}))}(this,function(){e.next(ua(t))})},La.sc=function(e,t,n){var r=this;return this.X&&wc.a.Promise.resolve().then(function(){a(e)?e(ua(r)):a(e.next)&&e.next(ua(r))}),this.Pb(e,t,n)},La.rc=function(e,t,n){var r=this;return this.X&&wc.a.Promise.resolve().then(function(){r.O=r.getUid(),a(e)?e(ua(r)):a(e.next)&&e.next(ua(r))}),this.Qb(e,t,n)},La.$b=function(e){var t=this;return ha(this,this.i.then(function(){return ua(t)?ua(t).F(e).then(function(e){return{accessToken:e}}):null}))},La.Jb=function(e){var n=this;return this.i.then(function(){return aa(n,Yr(n.b,Al,{token:e}))}).then(function(e){var t=e.user;return Do(t,"isAnonymous",!1),n.Z(t),e})},La.Bc=function(e){return Qt("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Jb(e)},La.Cc=function(e,t){return Qt("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Kb(e,t)},La.Kb=function(e,t){var n=this;return this.i.then(function(){return aa(n,Yr(n.b,Dl,{email:e,password:t}))})},La.ub=function(e,t){var n=this;return this.i.then(function(){return aa(n,Yr(n.b,fl,{email:e,password:t}))})},La.Sb=function(e,t){return Qt("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.ub(e,t)},La.Ec=function(e){return Qt("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Oa(e).then(function(e){return e.user})},La.Oa=function(e){var t=this;return this.i.then(function(){return aa(t,e.ya(t.b))})},La.Pa=function(){var n=this;return this.i.then(function(){var e=ua(n);return e&&e.isAnonymous?Jt({user:e,credential:null,additionalUserInfo:Jt({providerId:null,isNewUser:!1}),operationType:"signIn"}):aa(n,n.b.Pa()).then(function(e){var t=e.user;return Do(t,"isAnonymous",!0),n.Z(t),e})})},La.Dc=function(){return Qt("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Pa()},La.getUid=function(){return ua(this)&&ua(this).uid||null},La.Rb=function(e){this.addAuthTokenListener(e),0<++this.u&&ua(this)&&ko(ua(this))},La.zc=function(t){var n=this;Ka(this.o,function(e){e==t&&n.u--}),this.u<0&&(this.u=0),0==this.u&&ua(this)&&xo(ua(this)),this.removeAuthTokenListener(t)},La.addAuthTokenListener=function(e){var t=this;this.o.push(e),ha(this,this.i.then(function(){t.l||x(t.o,e)&&e(la(t))}))},La.removeAuthTokenListener=function(t){S(this.o,function(e){return e==t})},La.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h).b.removeListener(Qo("local"),e.a,this.ka),this.a&&this.a.unsubscribe(this),wc.a.Promise.resolve()},La.Vb=function(e){return Qt("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),ha(this,function(e,t){return Yr(e,pl,{identifier:t,continueUri:Rt()?bt():"http://localhost"}).then(function(e){return e.allProviders||[]})}(this.b,e))},La.Wb=function(e){return ha(this,function(e,t){return Yr(e,pl,{identifier:t,continueUri:Rt()?bt():"http://localhost"}).then(function(e){return e.signinMethods||[]})}(this.b,e))},La.kc=function(e){return!!Rn(e)},La.ib=function(t,n){var r=this;return ha(this,B().then(function(){var e=new rn(n);if(!e.c)throw new tn("argument-error",xu+" must be true when sending sign in link to email");return on(e)}).then(function(e){return r.b.ib(t,e)}).then(function(){}))},La.Rc=function(e){return this.Ja(e).then(function(e){return e.data.email})},La.Xa=function(e,t){return ha(this,this.b.Xa(e,t).then(function(){}))},La.Ja=function(e){return ha(this,this.b.Ja(e).then(function(e){return new en(e)}))},La.Va=function(e){return ha(this,this.b.Va(e).then(function(){}))},La.hb=function(t,e){var n=this;return ha(this,B().then(function(){return void 0===e||M(e)?{}:on(new rn(e))}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},La.Gc=function(e,t){return ha(this,oo(this,e,t,p(this.Oa,this)))},La.Fc=function(t,n){var r=this;return ha(this,B().then(function(){var e=jn(t,n||bt());return r.Oa(e)}))},fa.prototype.render=function(){},fa.prototype.reset=function(){},fa.prototype.getResponse=function(){},fa.prototype.execute=function(){};var hc=null;pa.prototype.render=function(e,t){return this.a[this.b.toString()]=new va(e,t),this.b++},pa.prototype.reset=function(e){var t=da(this,e);e=ma(e),t&&e&&(t.delete(),delete this.a[e])},pa.prototype.getResponse=function(e){return(e=da(this,e))?e.getResponse():null},pa.prototype.execute=function(e){(e=da(this,e))&&e.execute()},va.prototype.getResponse=function(){return ya(this),this.b},va.prototype.execute=function(){ya(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var e=n.c.callback,t=n.c["expired-callback"];if(e)try{e(n.b)}catch(e){}n.a=setTimeout(function(){if(n.a=null,n.b=null,t)try{t()}catch(e){}n.h&&n.execute()},6e4)},500))},va.prototype.delete=function(){ya(this),this.g=!0,clearTimeout(this.a),this.a=null,ve(this.f,"click",this.i)},ga.prototype.g=function(){return hc||(hc=new pa),B(hc)},ga.prototype.c=function(){};var fc=null,pc=tt("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),dc=new zt(3e4,6e4);ba.prototype.g=function(i){var o=this;return new V(function(e,t){var r=setTimeout(function(){t(new tn("network-request-failed"))},dc.get());!Va.grecaptcha||i!==o.f&&!o.b?(Va[o.a]=function(){if(Va.grecaptcha){o.f=i;var n=Va.grecaptcha.render;Va.grecaptcha.render=function(e,t){return e=n(e,t),o.b++,e},clearTimeout(r),e(Va.grecaptcha)}else clearTimeout(r),t(new tn("internal-error"));delete Va[o.a]},B(Nr(it(pc,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),t(new tn("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),e(Va.grecaptcha))})},ba.prototype.c=function(){this.b--};var mc=null,vc="callback",yc="expired-callback",gc="sitekey",bc="size";(La=_a.prototype).za=function(){var t=this;return this.f?this.f:this.f=ka(this,B().then(function(){if(Rt()&&!Ot())return Ct();throw new tn("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,Yr(t.u,xl,{})}).then(function(e){t.a[gc]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},La.render=function(){xa(this);var n=this;return ka(this,this.za().then(function(){if(null===n.c){var e=n.l;if(!n.i){var t=ht(e);e=pt("DIV"),t.appendChild(e)}n.c=n.g.render(e,n.a)}return n.c}))},La.verify=function(){xa(this);var i=this;return ka(this,this.render().then(function(r){return new V(function(t){var e=i.g.getResponse(r);if(e)t(e);else{var n=function(e){e&&(function(e,t){S(e.m,function(e){return e==t})}(i,n),t(e))};i.m.push(n),i.i&&i.g.execute(i.c)}})}))},La.reset=function(){xa(this),null!==this.c&&this.g.reset(this.c)},La.clear=function(){xa(this),this.C=!0,this.o.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ht(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}},e(Ca,_a);var _c="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");Ma(ea.prototype,{Va:{name:"applyActionCode",j:[Ea("code")]},Ja:{name:"checkActionCode",j:[Ea("code")]},Xa:{name:"confirmPasswordReset",j:[Ea("code"),Ea("newPassword")]},ub:{name:"createUserWithEmailAndPassword",j:[Ea("email"),Ea("password")]},Sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Ea("email"),Ea("password")]},Vb:{name:"fetchProvidersForEmail",j:[Ea("email")]},Wb:{name:"fetchSignInMethodsForEmail",j:[Ea("email")]},fa:{name:"getRedirectResult",j:[]},kc:{name:"isSignInWithEmailLink",j:[Ea("emailLink")]},rc:{name:"onAuthStateChanged",j:[Da(Ta(),Na(),"nextOrObserver"),Na("opt_error",!0),Na("opt_completed",!0)]},sc:{name:"onIdTokenChanged",j:[Da(Ta(),Na(),"nextOrObserver"),Na("opt_error",!0),Na("opt_completed",!0)]},hb:{name:"sendPasswordResetEmail",j:[Ea("email"),Da(Ta("opt_actionCodeSettings",!0),Pa(null,!0),"opt_actionCodeSettings",!0)]},ib:{name:"sendSignInLinkToEmail",j:[Ea("email"),Ta("actionCodeSettings")]},jb:{name:"setPersistence",j:[Ea("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",j:[Ia()]},Pa:{name:"signInAnonymously",j:[]},Dc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Ec:{name:"signInWithCredential",j:[Ia()]},Jb:{name:"signInWithCustomToken",j:[Ea("token")]},Bc:{name:"signInAndRetrieveDataWithCustomToken",j:[Ea("token")]},Kb:{name:"signInWithEmailAndPassword",j:[Ea("email"),Ea("password")]},Fc:{name:"signInWithEmailLink",j:[Ea("email"),Ea("emailLink",!0)]},Cc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Ea("email"),Ea("password")]},Gc:{name:"signInWithPhoneNumber",j:[Ea("phoneNumber"),Aa()]},Hc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ic:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"updateCurrentUser",j:[Da({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof yo)}},Pa(),"user")]},kb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ea(null,!0)]},Qc:{name:"useDeviceLanguage",j:[]},Rc:{name:"verifyPasswordResetCode",j:[Ea("code")]}}),ja(ea.prototype,{lc:{name:"languageCode",qb:Da(Ea(),Pa(),"languageCode")}}),(ea.Persistence=Ql).LOCAL="local",ea.Persistence.SESSION="session",ea.Persistence.NONE="none",Ma(yo.prototype,{delete:{name:"delete",j:[]},ac:{name:"getIdTokenResult",j:[Oa("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Oa("opt_forceRefresh",!0)]},ab:{name:"linkAndRetrieveDataWithCredential",j:[Ia()]},mc:{name:"linkWithCredential",j:[Ia()]},nc:{name:"linkWithPhoneNumber",j:[Ea("phoneNumber"),Aa()]},oc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},cb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ia()]},vc:{name:"reauthenticateWithCredential",j:[Ia()]},wc:{name:"reauthenticateWithPhoneNumber",j:[Ea("phoneNumber"),Aa()]},xc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},gb:{name:"sendEmailVerification",j:[Da(Ta("opt_actionCodeSettings",!0),Pa(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ea(null,!0)]},Nc:{name:"unlink",j:[Ea("provider")]},mb:{name:"updateEmail",j:[Ea("email")]},nb:{name:"updatePassword",j:[Ea("password")]},Pc:{name:"updatePhoneNumber",j:[Ia("phone")]},ob:{name:"updateProfile",j:[Ta("profile")]}}),Ma(pa.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ma(fa.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ma(V.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),ja(ro.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",qb:Oa("appVerificationDisabledForTesting")}}),Ma(io.prototype,{confirm:{name:"confirm",j:[Ea("verificationCode")]}}),Ra(Mn,"credential",function(e,t){return new Dn(e,t)},[Ea("email"),Ea("password")]),Ma(Sn.prototype,{ta:{name:"addScope",j:[Ea("scope")]},Da:{name:"setCustomParameters",j:[Ta("customOAuthParameters")]}}),Ra(Sn,"credential",En,[Da(Ea(),Ta(),"token")]),Ra(Mn,"credentialWithLink",jn,[Ea("email"),Ea("emailLink")]),Ma(On.prototype,{ta:{name:"addScope",j:[Ea("scope")]},Da:{name:"setCustomParameters",j:[Ta("customOAuthParameters")]}}),Ra(On,"credential",Tn,[Da(Ea(),Ta(),"token")]),Ma(Nn.prototype,{ta:{name:"addScope",j:[Ea("scope")]},Da:{name:"setCustomParameters",j:[Ta("customOAuthParameters")]}}),Ra(Nn,"credential",Pn,[Da(Ea(),Da(Ta(),Pa()),"idToken"),Da(Ea(),Pa(),"accessToken",!0)]),Ma(In.prototype,{Da:{name:"setCustomParameters",j:[Ta("customOAuthParameters")]}}),Ra(In,"credential",An,[Da(Ea(),Ta(),"token"),Ea("secret",!0)]),Ma(Cn.prototype,{ta:{name:"addScope",j:[Ea("scope")]},credential:{name:"credential",j:[Da(Ea(),Pa(),"idToken",!0),Da(Ea(),Pa(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[Ta("customOAuthParameters")]}}),Ra(Un,"credential",Vn,[Ea("verificationId"),Ea("verificationCode")]),Ma(Un.prototype,{Ta:{name:"verifyPhoneNumber",j:[Ea("phoneNumber"),Aa()]}}),Ma(tn.prototype,{toJSON:{name:"toJSON",j:[Ea(null,!0)]}}),Ma(Kn.prototype,{toJSON:{name:"toJSON",j:[Ea(null,!0)]}}),Ma(Gn.prototype,{toJSON:{name:"toJSON",j:[Ea(null,!0)]}}),Ma(Ca.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===wc.a||!wc.a.INTERNAL||!wc.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:ea,Error:tn};Ra(e,"EmailAuthProvider",Mn,[]),Ra(e,"FacebookAuthProvider",Sn,[]),Ra(e,"GithubAuthProvider",On,[]),Ra(e,"GoogleAuthProvider",Nn,[]),Ra(e,"TwitterAuthProvider",In,[]),Ra(e,"OAuthProvider",Cn,[Ea("providerId")]),Ra(e,"PhoneAuthProvider",Un,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ea)}}]),Ra(e,"RecaptchaVerifier",Ca,[Da(Ea(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Ta("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof wc.a.app.App)}}]),wc.a.INTERNAL.registerService("auth",function(e,t){return t({INTERNAL:{getUid:p((e=new ea(e)).getUid,e),getToken:p(e.$b,e),addAuthTokenListener:p(e.Rb,e),removeAuthTokenListener:p(e.zc,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),wc.a.INTERNAL.extendNamespace({User:yo})}()}).call(void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(177);n.n(r)},function(pn,dn,mn){"use strict";(function(u){function l(e,t){return H(e.name,t.name)}function c(e,t){return H(e,t)}function _(e,t){if(void 0===t&&(t=null),null===e)return Le.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),w.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Oe(e,_(t));if(e instanceof Array||!Ve){var r=Le.EMPTY_NODE,i=e;return w.forEach(i,function(e,t){if(w.contains(i,e)&&"."!==e.substring(0,1)){var n=_(t);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(e,n))}}),r.updatePriority(_(t))}var o=[],a=!1,s=e;if(w.forEach(s,function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=_(s[e]);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new we(e,n)))}}),0==o.length)return Le.EMPTY_NODE;var n=je(o,l,function(e){return e.name},c);if(a){var u=je(o,Te.getCompare());return new Le(n,_(t),new Fe({".priority":u},{".priority":Te}))}return new Le(n,_(t),Fe.Default)}function e(e){var t=e.INTERNAL.registerService("database",function(e,t,n){return rn.getInstance().databaseFromApp(e,n)},{Reference:Xt,Query:Xe,Database:on,enableLogging:A,INTERNAL:sn,ServerValue:fn,TEST_ACCESS:hn},null,!0);w.isNodeSdk()&&(pn.exports=t)}Object.defineProperty(dn,"__esModule",{value:!0});var n,r,t,i,o,a,h,s,f,p,d,m,w=mn(88),v=mn(178),y=mn(179),g=(m=mn(53))&&"object"==typeof m&&"default"in m?m.default:m,b=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),w.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:w.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),k=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return w.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),x=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new b(t)}}catch(e){}return new k},C=x("localStorage"),S=x("sessionStorage"),E=new v.Logger("@firebase/database"),O=(d=1,function(){return d++}),T=function(e){var t=w.stringToByteArray(e),n=new w.Sha1;n.update(t);var r=n.digest();return w.base64.encodeByteArray(r)},N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?n+=N.apply(null,e[r]):"object"==typeof e[r]?n+=w.stringify(e[r]):n+=e[r],n+=" ";return n},P=null,I=!0,A=function(e,t){w.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(E.logLevel=v.LogLevel.VERBOSE,P=E.log.bind(E),t&&S.set("logging_enabled",!0)):"function"==typeof e?P=e:(P=null,S.remove("logging_enabled"))},D=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===I&&(I=!1,null===P&&!0===S.get("logging_enabled")&&A(!0)),P){var n=N.apply(null,e);P(n)}},M=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];D.apply(void 0,[n].concat(e))}},j=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+N.apply(void 0,e);E.error(n)},R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+N.apply(void 0,e);throw E.error(n),new Error(n)},F=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+N.apply(void 0,e);E.warn(n)},L=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},U="[MIN_NAME]",V="[MAX_NAME]",H=function(e,t){if(e===t)return 0;if(e===U||t===V)return-1;if(t===U||e===V)return 1;var n=Q(e),r=Q(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},W=function(e,t){return e===t?0:e<t?-1:1},B=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+w.stringify(t))},q=function(e){if("object"!=typeof e||null===e)return w.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=w.stringify(t[i]),r+=":",r+=q(e[t[i]]);return r+"}"},z=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)n<i+t?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r},G=function(e,n){if(Array.isArray(e))for(var t=0;t<e.length;++t)n(t,e[t]);else w.forEach(e,function(e,t){return n(t,e)})},K=function(e){var t,n,r,i,o,a,s;for(w.assert(!L(e),"Invalid JSON number"),0===e?t=1/e==-1/(r=n=0)?1:0:(t=e<0,r=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var l=parseInt(s.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},Y=new RegExp("^-?\\d{1,10}$"),Q=function(e){if(Y.test(e)){var t=Number(e);if(-2147483648<=t&&t<=2147483647)return t}return null},$=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw F("Exception was thrown by user callback.",e),t},Math.floor(0))}},X=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},J=function(){function i(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(i,"Empty",{get:function(){return new i("")},enumerable:!0,configurable:!0}),i.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},i.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},i.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new i(this.pieces_,e)},i.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},i.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},i.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},i.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},i.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],t=this.pieceNum_;t<this.pieces_.length-1;t++)e.push(this.pieces_[t]);return new i(e,0)},i.prototype.child=function(e){for(var t=[],n=this.pieceNum_;n<this.pieces_.length;n++)t.push(this.pieces_[n]);if(e instanceof i)for(n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{var r=e.split("/");for(n=0;n<r.length;n++)0<r[n].length&&t.push(r[n])}return new i(t,0)},i.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},i.relativePath=function(e,t){var n=e.getFront(),r=t.getFront();if(null===n)return t;if(n===r)return i.relativePath(e.popFront(),t.popFront());throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")},i.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=H(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},i.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},i.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},i}(),Z=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=w.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=w.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=w.stringLength(e),0<this.parts_.length&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),ee="long_polling",te=function(){function e(e,t,n,r,i){void 0===i&&(i=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=C.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&C.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(w.assert("string"==typeof e,"typeof type must == string"),w.assert("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==ee)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return w.forEach(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),ne=function(e){var t=re(e),n=t.subdomain;"firebase"===t.domain&&R(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||R("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&F("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new te(t.host,t.secure,n,r),path:new J(t.pathString)}},re=function(e){var t="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof e){var u=e.indexOf("//");0<=u&&(a=e.substring(0,u-1),e=e.substring(u+2));var l=e.indexOf("/");-1===l&&(l=e.length);var c=e.indexOf("?");-1===c&&(c=e.length),t=e.substring(0,Math.min(l,c)),l<c&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,c)));var h=function(e){var t={};e.startsWith("?")&&(e=e.substring(1));for(var n=0,r=e.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):F("Invalid query segment '"+i+"' in query '"+e+"'")}}return t}(e.substring(Math.min(e.length,c)));0<=(u=t.indexOf(":"))?(o="https"===a||"wss"===a,s=parseInt(t.substring(u+1),10)):u=e.length;var f=t.split(".");3===f.length?(n=f[1],r=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in h&&(r=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},ie=/[\[\].#$\/\u0000-\u001F\u007F]/,oe=/[\[\].#$\u0000-\u001F\u007F]/,ae=function(e){return"string"==typeof e&&0!==e.length&&!ie.test(e)},se=function(e){return"string"==typeof e&&0!==e.length&&!oe.test(e)},ue=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!L(e)||e&&"object"==typeof e&&w.contains(e,".sv")},le=function(e,t,n,r,i){i&&void 0===n||ce(w.errorPrefix(e,t,i),n,r)},ce=function(n,e,t){var r=t instanceof J?new Z(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(L(e))throw new Error(n+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&10485760<w.stringLength(e))throw new Error(n+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(w.forEach(e,function(e,t){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ae(e)))throw new Error(n+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ce(n,t,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},he=function(e,t,n,r,i){if(!i||void 0!==n){var o=w.errorPrefix(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];w.forEach(n,function(e,t){var n=new J(e);if(ce(o,t,r.child(n)),".priority"===n.getBack()&&!ue(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ae(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(J.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},fe=function(e,t,n,r){if(!r||void 0!==n){if(L(n))throw new Error(w.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ue(n))throw new Error(w.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pe=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(w.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},de=function(e,t,n,r){if(!(r&&void 0===n||ae(n)))throw new Error(w.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},me=function(e,t,n,r){if(!(r&&void 0===n||se(n)))throw new Error(w.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ve=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},ye=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ae(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),se(e)}(r))throw new Error(w.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ge=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){w.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),w.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new w.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){w.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ve("OnDisconnect.remove",this.path_),w.validateCallback("OnDisconnect.remove",1,e,!0);var t=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){w.validateArgCount("OnDisconnect.set",1,2,arguments.length),ve("OnDisconnect.set",this.path_),le("OnDisconnect.set",1,e,this.path_,!1),w.validateCallback("OnDisconnect.set",2,t,!0);var n=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){w.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ve("OnDisconnect.setWithPriority",this.path_),le("OnDisconnect.setWithPriority",1,e,this.path_,!1),fe("OnDisconnect.setWithPriority",2,t,!1),w.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new w.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(w.validateArgCount("OnDisconnect.update",1,2,arguments.length),ve("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,F("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}he("OnDisconnect.update",1,e,this.path_,!1),w.validateCallback("OnDisconnect.update",2,t,!0);var i=new w.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),be=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return w.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),_e=(s="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",f=0,p=[],function(e){var t=e===f;f=e;var n,r=new Array(8);for(n=7;0<=n;n--)r[n]=s.charAt(e%64),e=Math.floor(e/64);w.assert(0===e,"Cannot push at time == 0");var i=r.join("");if(t){for(n=11;0<=n&&63===p[n];n--)p[n]=0;p[n]++}else for(n=0;n<12;n++)p[n]=Math.floor(64*Math.random());for(n=0;n<12;n++)i+=s.charAt(p[n]);return w.assert(20===i.length,"nextPushId: Length should be 20."),i}),we=function(){function n(e,t){this.name=e,this.node=t}return n.Wrap=function(e,t){return new n(e,t)},n}(),ke=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new we(U,e),r=new we(U,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return we.MIN},e}(),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return n},set:function(e){n=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return H(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw w.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return we.MIN},t.prototype.maxPost=function(){return new we(V,n)},t.prototype.makePost=function(e,t){return w.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new we(e,n)},t.prototype.toString=function(){return".key"},t}(ke),Ce=new xe,Se=function(e){return"number"==typeof e?"number:"+K(e):"string:"+e},Ee=function(e){if(e.isLeafNode()){var t=e.val();w.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&w.contains(t,".sv"),"Priority must be a string or number.")}else w.assert(e===r||e.isEmpty(),"priority of unexpected type.");w.assert(e===r||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Oe=function(){function o(e,t){void 0===t&&(t=o.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,w.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ee(this.priorityNode_)}return Object.defineProperty(o,"__childrenNodeConstructor",{get:function(){return t},set:function(e){t=e},enumerable:!0,configurable:!0}),o.prototype.isLeafNode=function(){return!0},o.prototype.getPriority=function(){return this.priorityNode_},o.prototype.updatePriority=function(e){return new o(this.value_,e)},o.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.hasChild=function(){return!1},o.prototype.getPredecessorChildName=function(e,t){return null},o.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},o.prototype.updateChild=function(e,t){var n=e.getFront();return null===n?t:t.isEmpty()&&".priority"!==n?this:(w.assert(".priority"!==n||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),t)))},o.prototype.isEmpty=function(){return!1},o.prototype.numChildren=function(){return 0},o.prototype.forEachChild=function(e,t){return!1},o.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},o.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Se(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"==t?K(this.value_):this.value_,this.lazyHash_=T(e)}return this.lazyHash_},o.prototype.getValue=function(){return this.value_},o.prototype.compareTo=function(e){return e===o.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof o.__childrenNodeConstructor?-1:(w.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},o.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=o.VALUE_TYPE_ORDER.indexOf(t),i=o.VALUE_TYPE_ORDER.indexOf(n);return w.assert(0<=r,"Unknown leaf type: "+t),w.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r},o.prototype.withIndex=function(){return this},o.prototype.isIndexed=function(){return!0},o.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o}(),Te=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?H(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return we.MIN},t.prototype.maxPost=function(){return new we(V,new Oe("[PRIORITY-POST]",o))},t.prototype.makePost=function(e,t){var n=i(e);return new we(t,new Oe("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(ke)),Ne=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return 0<this.nodeStack_.length},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Pe=function(){function o(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:o.RED,this.left=null!=r?r:Ae.EMPTY_NODE,this.right=null!=i?i:Ae.EMPTY_NODE}return o.prototype.copy=function(e,t,n,r,i){return new o(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.count=function(){return this.left.count()+1+this.right.count()},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},o.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},o.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},o.prototype.minKey=function(){return this.min_().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},o.prototype.removeMin_=function(){if(this.left.isEmpty())return Ae.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},o.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ae.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},o.prototype.isRed_=function(){return this.color},o.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},o.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},o.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},o.prototype.rotateLeft_=function(){var e=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},o.prototype.rotateRight_=function(){var e=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},o.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},o.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},o.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},o.RED=!0,o.BLACK=!1,o}(),Ie=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Pe(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Ae=function(){function n(e,t){void 0===t&&(t=n.EMPTY_NODE),this.comparator_=e,this.root_=t}return n.prototype.insert=function(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pe.BLACK,null,null))},n.prototype.remove=function(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pe.BLACK,null,null))},n.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},n.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},n.prototype.isEmpty=function(){return this.root_.isEmpty()},n.prototype.count=function(){return this.root_.count()},n.prototype.minKey=function(){return this.root_.minKey()},n.prototype.maxKey=function(){return this.root_.maxKey()},n.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},n.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},n.prototype.getIterator=function(e){return new Ne(this.root_,null,this.comparator_,!1,e)},n.prototype.getIteratorFrom=function(e,t){return new Ne(this.root_,e,this.comparator_,!1,t)},n.prototype.getReverseIteratorFrom=function(e,t){return new Ne(this.root_,e,this.comparator_,!0,t)},n.prototype.getReverseIterator=function(e){return new Ne(this.root_,null,this.comparator_,!0,e)},n.EMPTY_NODE=new Ie,n}(),De=Math.log(2),Me=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/De,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),je=function(l,e,c,t){l.sort(e);var h=function(e,t){var n,r,i=t-e;if(0==i)return null;if(1==i)return n=l[e],r=c?c(n):n,new Pe(r,n.node,Pe.BLACK,null,null);var o=parseInt(i/2,10)+e,a=h(e,o),s=h(o+1,t);return n=l[o],r=c?c(n):n,new Pe(r,n.node,Pe.BLACK,a,s)},n=function(e){for(var t=null,n=null,s=l.length,r=function(e,t){var n=s-e,r=s;s-=e;var i=h(1+n,r),o=l[n],a=c?c(o):o;u(new Pe(a,o.node,t,null,i))},u=function(e){t=(t?t.left=e:n=e,e)},i=0;i<e.count;++i){var o=e.nextBitIsOne(),a=Math.pow(2,e.count-(i+1));o?r(a,Pe.BLACK):(r(a,Pe.BLACK),r(a,Pe.RED))}return n}(new Me(l.length));return new Ae(t||e,n)},Re={},Fe=function(){function h(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(h,"Default",{get:function(){return w.assert(Te,"ChildrenNode.ts has not been loaded"),a=a||new h({".priority":Re},{".priority":Te})},enumerable:!0,configurable:!0}),h.prototype.get=function(e){var t=w.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===Re?null:t},h.prototype.hasIndex=function(e){return w.contains(this.indexSet_,e.toString())},h.prototype.addIndex=function(e,t){w.assert(e!==Ce,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=t.getIterator(we.Wrap),o=i.getNext();o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();var a;a=r?je(n,e.getCompare()):Re;var s=e.toString(),u=w.clone(this.indexSet_);u[s]=e;var l=w.clone(this.indexes_);return l[s]=a,new h(l,u)},h.prototype.addToIndexes=function(u,l){var c=this;return new h(w.map(this.indexes_,function(e,t){var n=w.safeGet(c.indexSet_,t);if(w.assert(n,"Missing index implementation for "+t),e===Re){if(n.isDefinedOn(u.node)){for(var r=[],i=l.getIterator(we.Wrap),o=i.getNext();o;)o.name!=u.name&&r.push(o),o=i.getNext();return r.push(u),je(r,n.getCompare())}return Re}var a=l.get(u.name),s=e;return a&&(s=s.remove(new we(u.name,a))),s.insert(u,u.node)}),this.indexSet_)},h.prototype.removeFromIndexes=function(n,r){return new h(w.map(this.indexes_,function(e){if(e===Re)return e;var t=r.get(n.name);return t?e.remove(new we(n.name,t)):e}),this.indexSet_)},h}(),Le=function(){function s(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ee(this.priorityNode_),this.children_.isEmpty()&&w.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(s,"EMPTY_NODE",{get:function(){return h||(h=new s(new Ae(c),null,Fe.Default))},enumerable:!0,configurable:!0}),s.prototype.isLeafNode=function(){return!1},s.prototype.getPriority=function(){return this.priorityNode_||h},s.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new s(this.children_,e,this.indexMap_)},s.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?h:t},s.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},s.prototype.hasChild=function(e){return null!==this.children_.get(e)},s.prototype.updateImmediateChild=function(e,t){if(w.assert(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n,r=new we(e,t),i=void 0,o=void 0;return o=t.isEmpty()?(i=this.children_.remove(e),this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),this.indexMap_.addToIndexes(r,this.children_)),n=i.isEmpty()?h:this.priorityNode_,new s(i,n,o)},s.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;w.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},s.prototype.isEmpty=function(){return this.children_.isEmpty()},s.prototype.numChildren=function(){return this.children_.count()},s.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(Te,function(e,t){r[e]=t.val(n),i++,a&&s.INTEGER_REGEXP_.test(e)?o=Math.max(o,Number(e)):a=!1}),!n&&a&&o<2*i){var e=[];for(var t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},s.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+Se(this.getPriority().val())+":"),this.forEachChild(Te,function(e,t){var n=t.hash();""!==n&&(r+=":"+e+":"+n)}),this.lazyHash_=""===r?"":T(r)}return this.lazyHash_},s.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new we(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},s.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},s.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new we(t,this.children_.get(t)):null},s.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},s.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new we(t,this.children_.get(t)):null},s.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},s.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},s.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,we.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},s.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},s.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,we.Wrap),i=r.peek();null!=i&&0<t.compare(i,e);)r.getNext(),i=r.peek();return r},s.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ue?-1:0},s.prototype.withIndex=function(e){if(e===Ce||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new s(this.children_,this.priorityNode_,t)},s.prototype.isIndexed=function(e){return e===Ce||this.indexMap_.hasIndex(e)},s.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var n=this.getIterator(Te),r=t.getIterator(Te),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},s.prototype.resolveIndex_=function(e){return e===Ce?null:this.indexMap_.get(e.toString())},s.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,s}(),Ue=new(function(e){function t(){return e.call(this,new Ae(c),Le.EMPTY_NODE,Fe.Default)||this}return y.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Le.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Le));Object.defineProperties(we,{MIN:{value:new we(U,Le.EMPTY_NODE)},MAX:{value:new we(V,Ue)}}),xe.__EMPTY_NODE=Le.EMPTY_NODE,Oe.__childrenNodeConstructor=Le,o=r=Ue;var Ve=!0;i=_;var He,We,Be,qe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?H(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return we.MIN},t.prototype.maxPost=function(){return we.MAX},t.prototype.makePost=function(e,t){var n=_(e);return new we(t,n)},t.prototype.toString=function(){return".value"},t}(ke)),ze=function(n){function e(e){var t=n.call(this)||this;return t.indexPath_=e,w.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),t}return y.__extends(e,n),e.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?H(e.name,t.name):i},e.prototype.makePost=function(e,t){var n=_(e),r=Le.EMPTY_NODE.updateChild(this.indexPath_,n);return new we(t,r)},e.prototype.maxPost=function(){var e=Le.EMPTY_NODE.updateChild(this.indexPath_,Ue);return new we(V,e)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(ke),Ge=function(){function i(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return i.prototype.val=function(){return w.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},i.prototype.exportVal=function(){return w.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},i.prototype.toJSON=function(){return w.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},i.prototype.exists=function(){return w.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},i.prototype.child=function(e){w.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),me("DataSnapshot.child",1,e,!1);var t=new J(e),n=this.ref_.child(t);return new i(this.node_.getChild(t),n,Te)},i.prototype.hasChild=function(e){w.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),me("DataSnapshot.hasChild",1,e,!1);var t=new J(e);return!this.node_.getChild(t).isEmpty()},i.prototype.getPriority=function(){return w.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},i.prototype.forEach=function(n){var r=this;return w.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),w.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(e,t){return n(new i(t,r.ref_.child(e),Te))})},i.prototype.hasChildren=function(){return w.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(i.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),i.prototype.numChildren=function(){return w.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},i.prototype.getRef=function(){return w.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(i.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),i}(),Ke=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+w.stringify(this.snapshot.exportVal())},e}(),Ye=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Qe=function(){function t(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return t.prototype.respondsTo=function(e){return"value"===e},t.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Ke("value",this,new Ge(e.snapshotNode,t.getRef(),n))},t.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},t.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ye(this,e,t):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),$e=function(){function i(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return i.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,w.contains(this.callbacks_,t)},i.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ye(this,e,t):null},i.prototype.createEvent=function(e,t){w.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Ke(e.type,this,new Ge(e.snapshotNode,n,r),e.prevName)},i.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},i.prototype.matches=function(n){if(n instanceof i){if(!this.callbacks_||!n.callbacks_)return!0;if(this.context_===n.context_){var e=w.getCount(n.callbacks_);if(e===w.getCount(this.callbacks_)){if(1!==e)return w.every(this.callbacks_,function(e,t){return n.callbacks_[e]===t});var t=w.getAnyKey(n.callbacks_),r=w.getAnyKey(this.callbacks_);return!(r!==t||n.callbacks_[t]&&this.callbacks_[r]&&n.callbacks_[t]!==this.callbacks_[r])}}}return!1},i.prototype.hasAnyCallback=function(){return null!==this.callbacks_},i}(),Xe=function(){function l(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(l,"__referenceConstructor",{get:function(){return w.assert(He,"Reference.ts has not been loaded"),He},set:function(e){He=e},enumerable:!0,configurable:!0}),l.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ce){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=U)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=V)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Te){if(null!=t&&!ue(t)||null!=n&&!ue(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(w.assert(e.getIndex()instanceof ze||e.getIndex()===qe,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},l.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},l.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},l.prototype.getQueryParams=function(){return this.queryParams_},l.prototype.getRef=function(){return w.validateArgCount("Query.ref",0,0,arguments.length),new l.__referenceConstructor(this.repo,this.path)},l.prototype.on=function(e,t,n,r){w.validateArgCount("Query.on",2,4,arguments.length),pe("Query.on",1,e,!1),w.validateCallback("Query.on",2,t,!1);var i=l.getCancelAndContextArgs_("Query.on",n,r);if("value"===e)this.onValueEvent(t,i.cancel,i.context);else{var o={};o[e]=t,this.onChildEvent(o,i.cancel,i.context)}return t},l.prototype.onValueEvent=function(e,t,n){var r=new Qe(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},l.prototype.onChildEvent=function(e,t,n){var r=new $e(e,t,n);this.repo.addEventCallbackForQuery(this,r)},l.prototype.off=function(e,t,n){w.validateArgCount("Query.off",0,3,arguments.length),pe("Query.off",1,e,!0),w.validateCallback("Query.off",2,t,!0),w.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===e?r=new Qe(t||null,null,n||null):e&&(t&&((i={})[e]=t),r=new $e(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},l.prototype.once=function(t,n,e,r){var i=this;w.validateArgCount("Query.once",1,4,arguments.length),pe("Query.once",1,t,!1),w.validateCallback("Query.once",2,n,!0);var o=l.getCancelAndContextArgs_("Query.once",e,r),a=!0,s=new w.Deferred;s.promise.catch(function(){});var u=function(e){a&&(a=!1,i.off(t,u),n&&n.bind(o.context)(e),s.resolve(e))};return this.on(t,u,function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),s.reject(e)}),s.promise},l.prototype.limitToFirst=function(e){if(w.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new l(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},l.prototype.limitToLast=function(e){if(w.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new l(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},l.prototype.orderByChild=function(e){if(w.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');me("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new J(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new ze(t),r=this.queryParams_.orderBy(n);return l.validateQueryEndpoints_(r),new l(this.repo,this.path,r,!0)},l.prototype.orderByKey=function(){w.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ce);return l.validateQueryEndpoints_(e),new l(this.repo,this.path,e,!0)},l.prototype.orderByPriority=function(){w.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Te);return l.validateQueryEndpoints_(e),new l(this.repo,this.path,e,!0)},l.prototype.orderByValue=function(){w.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(qe);return l.validateQueryEndpoints_(e),new l(this.repo,this.path,e,!0)},l.prototype.startAt=function(e,t){void 0===e&&(e=null),w.validateArgCount("Query.startAt",0,2,arguments.length),le("Query.startAt",1,e,this.path,!0),de("Query.startAt",2,t,!0);var n=this.queryParams_.startAt(e,t);if(l.validateLimit_(n),l.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(t=e=null),new l(this.repo,this.path,n,this.orderByCalled_)},l.prototype.endAt=function(e,t){void 0===e&&(e=null),w.validateArgCount("Query.endAt",0,2,arguments.length),le("Query.endAt",1,e,this.path,!0),de("Query.endAt",2,t,!0);var n=this.queryParams_.endAt(e,t);if(l.validateLimit_(n),l.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new l(this.repo,this.path,n,this.orderByCalled_)},l.prototype.equalTo=function(e,t){if(w.validateArgCount("Query.equalTo",1,2,arguments.length),le("Query.equalTo",1,e,this.path,!1),de("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},l.prototype.toString=function(){return w.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},l.prototype.toJSON=function(){return w.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},l.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},l.prototype.queryIdentifier=function(){var e=this.queryObject(),t=q(e);return"{}"===t?"default":t},l.prototype.isEqual=function(e){if(w.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof l))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.repo===e.repo,n=this.path.equals(e.path),r=this.queryIdentifier()===e.queryIdentifier();return t&&n&&r},l.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,w.validateCallback(e,3,r.cancel,!0),r.context=n,w.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(w.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(l.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),l}(),Je=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return w.contains(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return w.isEmpty(this.set)},e.prototype.count=function(){return w.getCount(this.set)},e.prototype.each=function(n){w.forEach(this.set,function(e,t){return n(e,t)})},e.prototype.keys=function(){var t=[];return w.forEach(this.set,function(e){t.push(e)}),t},e}(),Ze=function(){function i(){this.value_=null,this.children_=null}return i.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();return e=e.popFront(),this.children_.contains(t)?this.children_.get(t).find(e):null},i.prototype.remember=function(e,t){if(e.isEmpty())this.value_=t,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,t);else{null==this.children_&&(this.children_=new Je);var n=e.getFront();this.children_.contains(n)||this.children_.add(n,new i);var r=this.children_.get(n);e=e.popFront(),r.remember(e,t)}},i.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,!(this.children_=null);if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(Te,function(e,t){n.remember(new J(e),t)}),this.forget(e)}if(null===this.children_)return!0;var r=e.getFront();return e=e.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(e)&&this.children_.remove(r),!!this.children_.isEmpty()&&!(this.children_=null)},i.prototype.forEachTree=function(r,i){null!==this.value_?i(r,this.value_):this.forEachChild(function(e,t){var n=new J(r.toString()+"/"+e);t.forEachTree(n,i)})},i.prototype.forEachChild=function(n){null!==this.children_&&this.children_.each(function(e,t){n(e,t)})},i}(),et=function(e,t){return e&&"object"==typeof e?(w.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},tt=function(e,r){var i,t=e.getPriority().val(),n=et(t,r);if(e.isLeafNode()){var o=e,a=et(o.getValue(),r);return a!==o.getValue()||n!==o.getPriority().val()?new Oe(a,_(n)):e}var s=e;return n!==(i=s).getPriority().val()&&(i=i.updatePriority(new Oe(n))),s.forEachChild(Te,function(e,t){var n=tt(t,r);n!==t&&(i=i.updateImmediateChild(e,n))}),i};(Be=We||(We={}))[Be.OVERWRITE=0]="OVERWRITE",Be[Be.MERGE=1]="MERGE",Be[Be.ACK_USER_WRITE=2]="ACK_USER_WRITE",Be[Be.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var nt,rt,it=function(){function t(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,w.assert(!r||t,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ot=function(){function n(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=We.ACK_USER_WRITE,this.source=it.User}return n.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return w.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new J(e));return new n(J.Empty,t,this.revert)}return w.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new n(this.path.popFront(),this.affectedTree,this.revert)},n}(),at=function(){function o(e,t){void 0===t&&(nt||(nt=new Ae(W)),t=nt),this.value=e,this.children=t}return o.fromObject=function(e){var n=o.Empty;return w.forEach(e,function(e,t){n=n.set(new J(e),t)}),n},o.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},o.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:J.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new J(n).child(i.path),value:i.value}:null},o.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},o.prototype.subtree=function(e){if(e.isEmpty())return this;var t=e.getFront(),n=this.children.get(t);return null!==n?n.subtree(e.popFront()):o.Empty},o.prototype.set=function(e,t){if(e.isEmpty())return new o(t,this.children);var n=e.getFront(),r=(this.children.get(n)||o.Empty).set(e.popFront(),t),i=this.children.insert(n,r);return new o(this.value,i)},o.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?o.Empty:new o(null,this.children);var t=e.getFront(),n=this.children.get(t);if(n){var r=n.remove(e.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?o.Empty:new o(this.value,i)}return this},o.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},o.prototype.setTree=function(e,t){if(e.isEmpty())return t;var n,r=e.getFront(),i=(this.children.get(r)||o.Empty).setTree(e.popFront(),t);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new o(this.value,n)},o.prototype.fold=function(e){return this.fold_(J.Empty,e)},o.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(e,t){i[e]=t.fold_(n.child(e),r)}),r(n,this.value,i)},o.prototype.findOnPath=function(e,t){return this.findOnPath_(e,J.Empty,t)},o.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},o.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,J.Empty,t)},o.prototype.foreachOnPath_=function(e,t,n){if(e.isEmpty())return this;this.value&&n(t,this.value);var r=e.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(e.popFront(),t.child(r),n):o.Empty},o.prototype.foreach=function(e){this.foreach_(J.Empty,e)},o.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(e,t){t.foreach_(n.child(e),r)}),this.value&&r(n,this.value)},o.prototype.foreachChild=function(n){this.children.inorderTraversal(function(e,t){t.value&&n(e,t.value)})},o.Empty=new o(null),o}(),st=function(){function t(e,t){this.source=e,this.path=t,this.type=We.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty):new t(this.source,this.path.popFront())},t}(),ut=function(){function t(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=We.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),lt=function(){function n(e,t,n){this.source=e,this.path=t,this.children=n,this.type=We.MERGE}return n.prototype.operationForChild=function(e){if(this.path.isEmpty()){var t=this.children.subtree(new J(e));return t.isEmpty()?null:t.value?new ut(this.source,J.Empty,t.value):new n(this.source,J.Empty,t)}return w.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,this.path.popFront(),this.children)},n.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},n}(),ct=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),ht=function(){function r(e,t){this.eventCache_=e,this.serverCache_=t}return r.prototype.updateEventSnap=function(e,t,n){return new r(new ct(e,t,n),this.serverCache_)},r.prototype.updateServerSnap=function(e,t,n){return new r(this.eventCache_,new ct(e,t,n))},r.prototype.getEventCache=function(){return this.eventCache_},r.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},r.prototype.getServerCache=function(){return this.serverCache_},r.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},r.Empty=new r(new ct(Le.EMPTY_NODE,!1,!1),new ct(Le.EMPTY_NODE,!1,!1)),r}(),ft=function(){function r(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return r.valueChange=function(e){return new r(r.VALUE,e)},r.childAddedChange=function(e,t){return new r(r.CHILD_ADDED,t,e)},r.childRemovedChange=function(e,t){return new r(r.CHILD_REMOVED,t,e)},r.childChangedChange=function(e,t,n){return new r(r.CHILD_CHANGED,t,e,n)},r.childMovedChange=function(e,t){return new r(r.CHILD_MOVED,t,e)},r.CHILD_ADDED="child_added",r.CHILD_REMOVED="child_removed",r.CHILD_CHANGED="child_changed",r.CHILD_MOVED="child_moved",r.VALUE="value",r}(),pt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){w.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(ft.childRemovedChange(t,a)):w.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ft.childAddedChange(t,n)):o.trackChildChange(ft.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Te,function(e,t){n.hasChild(e)||i.trackChildChange(ft.childRemovedChange(e,t))}),n.isLeafNode()||n.forEachChild(Te,function(e,t){if(r.hasChild(e)){var n=r.getImmediateChild(e);n.equals(t)||i.trackChildChange(ft.childChangedChange(e,t,n))}else i.trackChildChange(ft.childAddedChange(e,t))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Le.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),dt=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;w.assert(t==ft.CHILD_ADDED||t==ft.CHILD_CHANGED||t==ft.CHILD_REMOVED,"Only child changes supported for tracking"),w.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=w.safeGet(this.changeMap_,n);if(r){var i=r.type;if(t==ft.CHILD_ADDED&&i==ft.CHILD_REMOVED)this.changeMap_[n]=ft.childChangedChange(n,e.snapshotNode,r.snapshotNode);else if(t==ft.CHILD_REMOVED&&i==ft.CHILD_ADDED)delete this.changeMap_[n];else if(t==ft.CHILD_REMOVED&&i==ft.CHILD_CHANGED)this.changeMap_[n]=ft.childRemovedChange(n,r.oldSnap);else if(t==ft.CHILD_CHANGED&&i==ft.CHILD_ADDED)this.changeMap_[n]=ft.childAddedChange(n,e.snapshotNode);else{if(t!=ft.CHILD_CHANGED||i!=ft.CHILD_CHANGED)throw w.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap_[n]=ft.childChangedChange(n,e.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return w.getValues(this.changeMap_)},e}(),mt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),vt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ct(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),yt=function(e,t){this.viewCache=e,this.changes=t},gt=function(){function h(e){this.filter_=e}return h.prototype.assertIndexed=function(e){w.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),w.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},h.prototype.applyOperation=function(e,t,n,r){var i,o,a=new dt;if(t.type===We.OVERWRITE){var s=t;i=s.source.fromUser?this.applyUserOverwrite_(e,s.path,s.snap,n,r,a):(w.assert(s.source.fromServer,"Unknown source."),o=s.source.tagged||e.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(e,s.path,s.snap,n,r,o,a))}else if(t.type===We.MERGE){var u=t;i=u.source.fromUser?this.applyUserMerge_(e,u.path,u.children,n,r,a):(w.assert(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.getServerCache().isFiltered(),this.applyServerMerge_(e,u.path,u.children,n,r,o,a))}else if(t.type===We.ACK_USER_WRITE){var l=t;i=l.revert?this.revertUserWrite_(e,l.path,n,r,a):this.ackUserWrite_(e,l.path,l.affectedTree,n,r,a)}else{if(t.type!==We.LISTEN_COMPLETE)throw w.assertionError("Unknown operation type: "+t.type);i=this.listenComplete_(e,t.path,n,a)}var c=a.getChanges();return h.maybeAddValueEvent_(e,i,c),new yt(i,c)},h.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(0<n.length||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ft.valueChange(t.getCompleteEventSnap()))}},h.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(w.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),l=u instanceof Le?u:Le.EMPTY_NODE,c=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(e.getEventCache().getNode(),c,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=t.getFront();if(".priority"==f){w.assert(1==t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var m=t.popFront(),v=void 0;if(o.isCompleteForChild(f)){s=e.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);v=null!=y?o.getNode().getImmediateChild(f).updateChild(m,y):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,e.getServerCache());a=null!=v?this.filter_.updateChild(o.getNode(),f,v,m,r,i):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},h.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(t,n);s=l.updateFullNode(u.getNode(),c,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&1<t.getLength())return e;var f=t.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"==h?l.updatePriority(u.getNode(),p):l.updateChild(u.getNode(),h,p,f,mt,null)}var d=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),l.filtersNodes()),m=new vt(r,d,i);return this.generateEventCacheAfterServerEvent_(d,t,r,m,a)},h.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),l=new vt(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=t.getFront();if(".priority"===c)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(c),p=void 0;if(h.isEmpty())p=n;else{var d=l.getCompleteChild(c);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Le.EMPTY_NODE}if(f.equals(p))a=e;else{var m=this.filter_.updateChild(u.getNode(),c,p,h,l,o);a=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},h.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},h.prototype.applyUserMerge_=function(r,i,e,o,a,s){var u=this,l=r;return e.foreach(function(e,t){var n=i.child(e);h.cacheHasChild_(r,n.getFront())&&(l=u.applyUserOverwrite_(l,n,t,o,a,s))}),e.foreach(function(e,t){var n=i.child(e);h.cacheHasChild_(r,n.getFront())||(l=u.applyUserOverwrite_(l,n,t,o,a,s))}),l},h.prototype.applyMerge_=function(n,e){return e.foreach(function(e,t){n=n.updateChild(e,t)}),n},h.prototype.applyServerMerge_=function(o,e,t,a,s,u,l){var c=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,h=o;n=e.isEmpty()?t:at.Empty.setTree(e,t);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(e,t){if(f.hasChild(e)){var n=o.getServerCache().getNode().getImmediateChild(e),r=c.applyMerge_(n,t);h=c.applyServerOverwrite_(h,new J(e),r,a,s,u,l)}}),n.children.inorderTraversal(function(e,t){var n=!o.getServerCache().isCompleteForChild(e)&&null==t.value;if(!f.hasChild(e)&&!n){var r=o.getServerCache().getNode().getImmediateChild(e),i=c.applyMerge_(r,t);h=c.applyServerOverwrite_(h,new J(e),i,a,s,u,l)}}),h},h.prototype.ackUserWrite_=function(e,r,t,n,i,o){if(null!=n.shadowingWrite(r))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=t.value){if(r.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(r))return this.applyServerOverwrite_(e,r,s.getNode().getChild(r),n,i,a,o);if(r.isEmpty()){var u=at.Empty;return s.getNode().forEachChild(Ce,function(e,t){u=u.set(new J(e),t)}),this.applyServerMerge_(e,r,u,n,i,a,o)}return e}var l=at.Empty;return t.foreach(function(e,t){var n=r.child(e);s.isCompleteForPath(n)&&(l=l.set(e,s.getNode().getChild(n)))}),this.applyServerMerge_(e,r,l,n,i,a,o)},h.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,mt,r)},h.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var a=new vt(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var c=e.getServerCache().getNode();w.assert(c instanceof Le,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(c)}l=l,u=this.filter_.updateFullNode(s,l,i)}else{var h=t.getFront(),f=n.calcCompleteChild(h,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,t.popFront(),a,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,Le.EMPTY_NODE,t.popFront(),a,i):s).isEmpty()&&e.getServerCache().isFullyInitialized()&&((o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(J.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},h}(),bt=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===ft.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(ft.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,ft.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,ft.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,ft.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,ft.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,ft.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(r,t,e,i,o){var a=this,n=e.filter(function(e){return e.type===t});n.sort(this.compareChanges_.bind(this)),n.forEach(function(t){var n=a.materializeSingleChange_(t,o);i.forEach(function(e){e.respondsTo(t.type)&&r.push(e.createEvent(n,a.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw w.assertionError("Should only compare child_ events.");var n=new we(e.childName,e.snapshotNode),r=new we(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),_t=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new pt(n.getIndex()),i=n.getNodeFilter();this.processor_=new gt(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(Le.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Le.EMPTY_NODE,a.getNode(),null),l=new ct(s,o.isFullyInitialized(),r.filtersNodes()),c=new ct(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ht(c,l),this.eventGenerator_=new bt(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,n){var r=[];if(n){w.assert(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){n=n;var t=e.createCancelEvent(n,i);t&&r.push(t)})}if(e){for(var t=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){t=t.concat(this.eventRegistrations_.slice(o+1));break}}else t.push(a)}this.eventRegistrations_=t}else this.eventRegistrations_=[];return r},e.prototype.applyOperation=function(e,t,n){e.type===We.MERGE&&null!==e.source.queryId&&(w.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),w.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),w.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Te,function(e,t){n.push(ft.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(ft.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}(),wt=function(){function l(){this.views_={}}return Object.defineProperty(l,"__referenceConstructor",{get:function(){return w.assert(rt,"Reference.ts has not been loaded"),rt},set:function(e){w.assert(!rt,"__referenceConstructor has already been defined"),rt=e},enumerable:!0,configurable:!0}),l.prototype.isEmpty=function(){return w.isEmpty(this.views_)},l.prototype.applyOperation=function(n,r,i){var e=n.source.queryId;if(null!==e){var t=w.safeGet(this.views_,e);return w.assert(null!=t,"SyncTree gave us an op for an invalid query."),t.applyOperation(n,r,i)}var o=[];return w.forEach(this.views_,function(e,t){o=o.concat(t.applyOperation(n,r,i))}),o},l.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=w.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;u=!!s||(s=r instanceof Le?n.calcCompleteEventChildren(r):Le.EMPTY_NODE,!1);var l=new ht(new ct(s,u,!1),new ct(r,i,!1));a=new _t(e,l),this.views_[o]=a}return a.addEventRegistration(t),a.getInitialEvents(t)},l.prototype.removeEventRegistration=function(e,n,r){var t=e.queryIdentifier(),i=[],o=[],a=this.hasCompleteView();if("default"===t){var s=this;w.forEach(this.views_,function(e,t){o=o.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete s.views_[e],t.getQuery().getQueryParams().loadsAllData()||i.push(t.getQuery()))})}else{var u=w.safeGet(this.views_,t);u&&(o=o.concat(u.removeEventRegistration(n,r)),u.isEmpty()&&(delete this.views_[t],u.getQuery().getQueryParams().loadsAllData()||i.push(u.getQuery())))}return a&&!this.hasCompleteView()&&i.push(new l.__referenceConstructor(e.repo,e.path)),{removed:i,events:o}},l.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},l.prototype.getCompleteServerCache=function(n){var r=null;return w.forEach(this.views_,function(e,t){r=r||t.getCompleteServerCache(n)}),r},l.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return w.safeGet(this.views_,t)},l.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},l.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},l.prototype.getCompleteView=function(){return w.findValue(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},l}(),kt=function(){function s(e){this.writeTree_=e}return s.prototype.addWrite=function(e,t){if(e.isEmpty())return new s(new at(t));var n=this.writeTree_.findRootMostValueAndPath(e);if(null!=n){var r=n.path,i=n.value,o=J.relativePath(r,e);return i=i.updateChild(o,t),new s(this.writeTree_.set(r,i))}var a=new at(t);return new s(this.writeTree_.setTree(e,a))},s.prototype.addWrites=function(n,e){var r=this;return w.forEach(e,function(e,t){r=r.addWrite(n.child(e),t)}),r},s.prototype.removeWrite=function(e){return e.isEmpty()?s.Empty:new s(this.writeTree_.setTree(e,at.Empty))},s.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},s.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(J.relativePath(t.path,e)):null},s.prototype.getCompleteChildren=function(){var n=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Te,function(e,t){n.push(new we(e,t))}):this.writeTree_.children.inorderTraversal(function(e,t){null!=t.value&&n.push(new we(e,t.value))}),n},s.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var t=this.getCompleteNode(e);return new s(null!=t?new at(t):this.writeTree_.subtree(e))},s.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},s.prototype.apply=function(e){return s.applySubtreeWrite_(J.Empty,this.writeTree_,e)},s.Empty=new s(new at(null)),s.applySubtreeWrite_=function(n,e,r){if(null!=e.value)return r.updateChild(n,e.value);var i=null;return e.children.inorderTraversal(function(e,t){".priority"===e?(w.assert(null!==t.value,"Priority writes must always be leaf nodes"),i=t.value):r=s.applySubtreeWrite_(n.child(e),t,r)}),r.getChild(n).isEmpty()||null===i||(r=r.updateChild(n.child(".priority"),i)),r},s}(),xt=function(){function l(){this.visibleWrites_=kt.Empty,this.allWrites_=[],this.lastWriteId_=-1}return l.prototype.childWrites=function(e){return new Ct(e,this)},l.prototype.addOverwrite=function(e,t,n,r){w.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},l.prototype.addMerge=function(e,t,n){w.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},l.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},l.prototype.removeWrite=function(t){var n=this,e=this.allWrites_.findIndex(function(e){return e.writeId===t});w.assert(0<=e,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[e];this.allWrites_.splice(e,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(e<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;w.forEach(u,function(e){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(e))})}return!0}return!1},l.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},l.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);if(!r&&i.isEmpty())return e;if(r||null!=e||i.hasCompleteWrite(J.Empty)){var o=l.layerTree_(this.allWrites_,function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t),a=e||Le.EMPTY_NODE;return o.apply(a)}return null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(t);if(u.isEmpty())return e;if(null!=e||u.hasCompleteWrite(J.Empty)){a=e||Le.EMPTY_NODE;return u.apply(a)}return null},l.prototype.calcCompleteEventChildren=function(e,t){var r=Le.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(e);if(n)return n.isLeafNode()||n.forEachChild(Te,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Te,function(e,t){var n=i.childCompoundWrite(new J(e)).apply(t);r=r.updateImmediateChild(e,n)}),i.getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r},l.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){w.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},l.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},l.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},l.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(J.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var l=[],c=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&l.length<r;)0!==c(f,n)&&l.push(f),f=h.getNext();return l},l.prototype.recordContainsPath_=function(n,r){return n.snap?n.path.contains(r):!!w.findKey(n.children,function(e,t){return n.path.child(t).contains(r)})},l.prototype.resetTree_=function(){this.visibleWrites_=l.layerTree_(this.allWrites_,l.DefaultFilter_,J.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},l.DefaultFilter_=function(e){return e.visible},l.layerTree_=function(e,t,n){for(var r=kt.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=J.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=J.relativePath(a,n),r=r.addWrite(J.Empty,o.snap.getChild(s)));else{if(!o.children)throw w.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=J.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=J.relativePath(a,n)).isEmpty())r=r.addWrites(J.Empty,o.children);else{var u=w.safeGet(o.children,s.getFront());if(u){var l=u.getChild(s.popFront());r=r.addWrite(J.Empty,l)}}}}}return r},l}(),Ct=function(){function t(e,t){this.treePath_=e,this.writeTree_=t}return t.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},t.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},t.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},t.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},t.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},t.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),St=function(){function y(e){this.listenProvider_=e,this.syncPointTree_=at.Empty,this.pendingWriteTree_=new xt,this.tagToQueryMap_={},this.queryToTagMap_={}}return y.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new ut(it.User,e,t)):[]},y.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=at.fromObject(t);return this.applyOperationToSyncPoints_(new lt(it.User,e,r))},y.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=at.Empty;return null!=n.snap?r=r.set(J.Empty,!0):w.forEach(n.children,function(e,t){r=r.set(new J(e),t)}),this.applyOperationToSyncPoints_(new ot(n.path,r,t))}return[]},y.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new ut(it.Server,e,t))},y.prototype.applyServerMerge=function(e,t){var n=at.fromObject(t);return this.applyOperationToSyncPoints_(new lt(it.Server,e,n))},y.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new st(it.Server,e))},y.prototype.applyTaggedQueryOverwrite=function(e,t,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=y.parseQueryKey_(r),o=i.path,a=i.queryId,s=J.relativePath(o,e),u=new ut(it.forServerTaggedQuery(a),s,t);return this.applyTaggedOperation_(o,u)},y.prototype.applyTaggedQueryMerge=function(e,t,n){var r=this.queryKeyForTag_(n);if(r){var i=y.parseQueryKey_(r),o=i.path,a=i.queryId,s=J.relativePath(o,e),u=at.fromObject(t),l=new lt(it.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,l)}return[]},y.prototype.applyTaggedListenComplete=function(e,t){var n=this.queryKeyForTag_(t);if(n){var r=y.parseQueryKey_(n),i=r.path,o=r.queryId,a=J.relativePath(i,e),s=new st(it.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},y.prototype.addEventRegistration=function(e,t){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=J.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()});var n,a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(J.Empty)):(a=new wt,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i?n=!0:(n=!1,i=Le.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=t.getCompleteServerCache(J.Empty);n&&(i=i.updateImmediateChild(e,n))}));var s=a.viewExistsForQuery(e);if(!s&&!e.getQueryParams().loadsAllData()){var u=y.makeQueryKey_(e);w.assert(!(u in this.queryToTagMap_),"View does not exist, but we have a tag");var l=y.getNextQueryTag_();this.queryToTagMap_[u]=l,this.tagToQueryMap_["_"+l]=u}var c=this.pendingWriteTree_.childWrites(r),h=a.addEventRegistration(e,t,c,i,n);if(!s&&!o){var f=a.viewForQuery(e);h=h.concat(this.setupListener_(e,f))}return h},y.prototype.removeEventRegistration=function(e,t,n){var r=this,i=e.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===e.queryIdentifier()||o.viewExistsForQuery(e))){var s=o.removeEventRegistration(e,t,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var l=-1!==u.findIndex(function(e){return e.getQueryParams().loadsAllData()}),c=this.syncPointTree_.findOnPath(i,function(e,t){return t.hasCompleteView()});if(l&&!c){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),p=0;p<f.length;++p){var d=f[p],m=d.getQuery(),v=this.createListenerForView_(d);this.listenProvider_.startListening(y.queryForListening_(m),this.tagForQuery_(m),v.hashFn,v.onComplete)}}!c&&0<u.length&&!n&&(l?this.listenProvider_.stopListening(y.queryForListening_(e),null):u.forEach(function(e){var t=r.queryToTagMap_[y.makeQueryKey_(e)];r.listenProvider_.stopListening(y.queryForListening_(e),t)})),this.removeTags_(u)}return a},y.prototype.calcCompleteEventCache=function(i,e){var t=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(e,t){var n=J.relativePath(e,i),r=t.getCompleteServerCache(n);if(r)return r});return t.calcCompleteEventCache(i,n,e,!0)},y.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),w.forEach(n,function(e,t){r=r.concat(t)}),r})},y.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(!n.getQueryParams().loadsAllData()){var r=y.makeQueryKey_(n),i=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+i]}}},y.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},y.prototype.setupListener_=function(e,t){var n=e.path,r=this.tagForQuery_(e),i=this.createListenerForView_(t),o=this.listenProvider_.startListening(y.queryForListening_(e),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)w.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),w.forEach(n,function(e,t){r=r.concat(t)}),r}),u=0;u<s.length;++u){var l=s[u];this.listenProvider_.stopListening(y.queryForListening_(l),this.tagForQuery_(l))}return o},y.prototype.createListenerForView_=function(e){var n=this,r=e.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(e.getServerCache()||Le.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var t=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,r);return n.removeEventRegistration(r,null,t)}}},y.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},y.parseQueryKey_=function(e){var t=e.indexOf("$");return w.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new J(e.substr(0,t))}},y.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},y.prototype.tagForQuery_=function(e){var t=y.makeQueryKey_(e);return w.safeGet(this.queryToTagMap_,t)},y.getNextQueryTag_=function(){return y.nextQueryTag_++},y.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);w.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},y.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(J.Empty))},y.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(J.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(J.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,l,c))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},y.prototype.applyOperationDescendantsHelper_=function(o,e,a,s){var u=this,t=e.get(J.Empty);null==a&&null!=t&&(a=t.getCompleteServerCache(J.Empty));var l=[];return e.children.inorderTraversal(function(e,t){var n=a?a.getImmediateChild(e):null,r=s.child(e),i=o.operationForChild(e);i&&(l=l.concat(u.applyOperationDescendantsHelper_(i,t,n,r)))}),t&&(l=l.concat(t.applyOperation(o,s,a))),l},y.nextQueryTag_=1,y}(),Et=function(){function e(){this.rootNode_=Le.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Ot=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(D("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',F(e)},e}(),Tt=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),w.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return w.deepCopy(this.counters_)},e}(),Nt=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Tt),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Pt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),n=w.clone(e);return this.last_&&w.forEach(this.last_,function(e,t){n[e]=n[e]-t}),this.last_=e,n},e}(),It=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pt(e);var n=1e4+2e4*Math.random();X(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var n=this,e=this.statsListener_.get(),r={},i=!1;w.forEach(e,function(e,t){0<t&&w.contains(n.statsToReport_,e)&&(r[e]=t,i=!0)}),i&&this.server_.reportStats(r),X(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),At=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Dt(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},e.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Dt=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();P&&D("event: "+t.toString()),$(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Mt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},w.assert(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(t){w.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},e}(),jt=function(r){function e(){var t,e,n=r.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))},!1),n}return y.__extends(e,r),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(e){return w.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},e}(Mt),Rt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||w.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return y.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(e){return w.assert("online"===e,"Unknown event type: "+e),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Mt),Ft=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&$(function(){n.onMessage_(t[e])})}(e);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},e}(),Lt=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=M(e),this.stats_=Nt.getCollection(t),this.urlFn=function(e){return t.connectionURL(ee,e)}}return e.prototype.open=function(e,t){var o=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ft(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(w.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!o.isClosed_){o.scriptTagHolder=new Ut(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1],i=e[2];if(o.incrementIncomingBytes_(e),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"==n)o.id=r,o.password=i;else{if("close"!==n)throw new Error("Unrecognized command received: "+n);r?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(r,function(){o.onClosed_()})):o.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];o.incrementIncomingBytes_(e),o.myPacketOrderer.handleResponse(n,r)},function(){o.onClosed_()},o.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=o.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",o.transportSessionId&&(e.s=o.transportSessionId),o.lastSessionId&&(e.ls=o.lastSessionId),!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=o.urlFn(e);o.log_("Connecting via long-poll to "+t),o.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!w.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=w.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=w.base64Encode(t),r=z(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!w.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=w.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Ut=function(){function a(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Je,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,w.isNodeSdk())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=O(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=a.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(e){D("frame writing exception"),e.stack&&D(e.stack),D(e)}}}return a.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||D("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},a.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),w.isNodeSdk()&&this.myID){var t={disconn:"t"};t.id=this.myID,t.pw=this.myPW;var n=this.urlFn(t);a.nodeRestRequest(n)}var r=this.onDisconnect;r&&(this.onDisconnect=null,r())},a.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},a.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},a.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},a.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},a.prototype.addTag=function(e,n){var r=this;w.isNodeSdk()?this.doNodeLongPoll(e,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var t=r.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){var e=t.readyState;e&&"loaded"!==e&&"complete"!==e||(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),n())},t.onerror=function(){D("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(t)}catch(e){}},Math.floor(1))},a}(),Vt=null;"undefined"!=typeof MozWebSocket?Vt=MozWebSocket:"undefined"!=typeof WebSocket&&(Vt=WebSocket);var Ht=function(){function i(e,t,n,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=M(this.connId),this.stats_=Nt.getCollection(t),this.connURL=i.connectionURL_(t,n,r)}return i.connectionURL_=function(e,t,n){var r={v:"5"};return!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},i.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,C.set("previous_websocket_failure",!0);try{if(w.isNodeSdk()){var r=w.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+g.SDK_VERSION+"/"+u.platform+"/"+r}},o=Object({NODE_ENV:"production"}),a=0==this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Vt(this.connURL,[],i)}else this.mySock=new Vt(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var s=e.message||e.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},i.prototype.start=function(){},i.forceDisallow=function(){i.forceDisallow_=!0},i.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==Vt&&!i.forceDisallow_},i.previouslyFailed=function(){return C.isInMemoryStorage||!0===C.get("previous_websocket_failure")},i.prototype.markConnectionHealthy=function(){C.remove("previous_websocket_failure")},i.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=w.jsonEval(t);this.onMessage(n)}},i.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},i.prototype.extractFrameCount_=function(e){if(w.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},i.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},i.prototype.send=function(e){this.resetKeepAlive();var t=w.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=z(t,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},i.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},i.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},i.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},i.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},i.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i}(),Wt=function(){function i(e){this.initTransports_(e)}return Object.defineProperty(i,"ALL_TRANSPORTS",{get:function(){return[Lt,Ht]},enumerable:!0,configurable:!0}),i.prototype.initTransports_=function(e){var t=Ht&&Ht.isAvailable(),n=t&&!Ht.previouslyFailed();if(e.webSocketOnly&&(t||F("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Ht];else{var r=this.transports_=[];G(i.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&r.push(t)})}},i.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},i.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},i}(),Bt=function(){function e(e,t,n,r,i,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=M("c:"+this.id+":"),this.transportManager_=new Wt(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;0<i&&(this.healthyTimeout_=X(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(e){t===n.conn_?n.onConnectionLost_(e):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(e){2!=n.state_&&(t===n.rx_?n.onPrimaryMessageReceived_(e):t===n.secondaryConn_?n.onSecondaryMessageReceived_(e):n.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=B("t",e),n=B("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=B("t",e),n=B("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},e.prototype.onControl_=function(e){var t=B("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?j("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):j("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&F("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),X(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):X(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(C.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),qt=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),zt=function(s){function c(e,t,n,r,i,o){var a=s.call(this)||this;if(a.repoInfo_=e,a.onDataUpdate_=t,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=c.nextPersistentConnectionId_++,a.log_=M("p:"+a.id+":"),a.interruptReasons_={},a.listens_={},a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!w.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),jt.getInstance().on("visible",a.onVisible_,a),-1===e.host.indexOf("fblocal")&&Rt.getInstance().on("online",a.onOnline_,a),a}return y.__extends(c,s),c.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(w.stringify(i)),w.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},c.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},w.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),w.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},c.prototype.sendListen_=function(r){var i=this,o=r.query,a=o.path.toString(),s=o.queryIdentifier();this.log_("Listen on "+a+" for "+s);var e={p:a};r.tag&&(e.q=o.queryObject(),e.t=r.tag),e.h=r.hashFn(),this.sendRequest("q",e,function(e){var t=e.d,n=e.s;c.warnOnListenWarnings_(t,o),(i.listens_[a]&&i.listens_[a][s])===r&&(i.log_("listen response",e),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,t))})},c.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&w.contains(e,"w")){var n=w.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();F("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},c.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},c.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||w.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},c.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,e=w.isValidFormat(i)?"auth":"gauth",t={cred:i};null===this.authOverride_?t.noauth=!0:"object"==typeof this.authOverride_&&(t.authvar=this.authOverride_),this.sendRequest(e,t,function(e){var t=e.s,n=e.d||"error";r.authToken_===i&&("ok"===t?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(t,n))})}},c.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),w.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},c.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},c.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},c.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},c.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},c.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},c.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},c.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},c.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},c.prototype.sendPut_=function(t){var n=this,r=this.outstandingPuts_[t].action,e=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,e,function(e){n.log_(r+" response",e),delete n.outstandingPuts_[t],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(e.s,e.d)})},c.prototype.reportStats=function(e){var n=this;if(this.connected_){var t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,function(e){if("ok"!==e.s){var t=e.d;n.log_("reportStats","Error sending stats: "+t)}})}},c.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+w.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},c.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):j("Unrecognized action received from server: "+w.stringify(e)+"\nAre you using the latest client?")},c.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},c.prototype.scheduleConnect_=function(e){var t=this;w.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},c.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},c.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},c.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_)3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},c.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+c.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,r())};this.realtime_={close:l,sendRequest:function(e){w.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var e=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(e).then(function(e){s?D("getToken() completed but was canceled"):(D("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new Bt(i,o.repoInfo_,t,n,r,function(e){F(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(e){o.log_("Failed to get token: "+e),s||(w.CONSTANTS.NODE_ADMIN&&F(e),l())})}},c.prototype.interrupt=function(e){D("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},c.prototype.resume=function(e){D("Resuming connection for reason: "+e),delete this.interruptReasons_[e],w.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},c.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},c.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},c.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return q(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},c.prototype.removeListen_=function(e,t){var n,r=new J(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===w.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},c.prototype.onAuthRevoked_=function(e,t){D("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||3<=++this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},c.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},c.prototype.restoreState_=function(){var n=this;this.tryAuth(),w.forEach(this.listens_,function(e,t){w.forEach(t,function(e,t){n.sendListen_(t)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}},c.prototype.sendConnectStats_=function(){var e={},t="js";w.CONSTANTS.NODE_ADMIN?t="admin_node":w.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+g.SDK_VERSION.replace(/\./g,"-")]=1,w.isMobileCordova()?e["framework.cordova"]=1:w.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},c.prototype.shouldReconnect_=function(){var e=Rt.getInstance().currentlyOnline();return w.isEmpty(this.interruptReasons_)&&e},c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c}(qt),Gt=function(i){function l(e,t,n){var r=i.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=t,r.authTokenProvider_=n,r.log_=M("p:rest:"),r.listens_={},r}return y.__extends(l,i),l.prototype.reportStats=function(e){throw new Error("Method not implemented.")},l.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(w.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},l.prototype.listen=function(e,t,r,i){var o=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=l.getListenId_(e,r),u={};this.listens_[s]=u;var n=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",n,function(e,t){var n=t;(404===e&&(e=n=null),null===e&&o.onDataUpdate_(a,n,!1,r),w.safeGet(o.listens_,s)===u)&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},l.prototype.unlisten=function(e,t){var n=l.getListenId_(e,t);delete this.listens_[n]},l.prototype.refreshAuthToken=function(e){},l.prototype.restRequest_=function(i,o,a){var s=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(e){var t=e&&e.accessToken;t&&(o.auth=t);var n=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+i+"?"+w.querystring(o);s.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(a&&4===r.readyState){s.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var e=null;if(200<=r.status&&r.status<300){try{e=w.jsonEval(r.responseText)}catch(e){F("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,e)}else 401!==r.status&&404!==r.status&&F("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})},l}(qt),Kt=function(){function e(e,t,n){var a=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new At,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ze,this.persistentConnection_=null;var r=new Ot(n);if(this.stats_=Nt.getCollection(e),t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Gt(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{w.stringify(i)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new zt(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(e){a.server_.refreshAuthToken(e)}),this.statsReporter_=Nt.getOrCreateReporter(e,function(){return new It(a.stats_,a.server_)}),this.transactions_init_(),this.infoData_=new Et,this.infoSyncTree_=new St({startListening:function(e,t,n,r){var i=[],o=a.infoData_.getNode(e.path);return o.isEmpty()||(i=a.infoSyncTree_.applyServerOverwrite(e.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new St({startListening:function(r,e,t,i){return a.server_.listen(r,t,e,function(e,t){var n=i(e,t);a.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(e,t){a.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new J(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var a=w.map(t,function(e){return _(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=_(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=w.map(t,function(e){return _(e)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var l=_(t);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var c=i;0<o.length&&(c=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(c,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var n=this;G(e,function(e,t){n.updateInfo_(t,e)})},e.prototype.updateInfo_=function(e,t){var n=new J("/.info/"+e),r=_(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(i,e,t,o){var a=this;this.log_("set",{path:i.toString(),value:e,priority:t});var n=this.generateServerValues(),r=_(e,t),s=tt(r,n),u=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(i,s,u,!0);this.eventQueue_.queueEvents(l),this.server_.put(i.toString(),r.val(!0),function(e,t){var n="ok"===e;n||F("set at "+i+" failed: "+e);var r=a.serverSyncTree_.ackUserWrite(u,!n);a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(o,e,t)});var c=this.abortTransactions_(i);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},e.prototype.update=function(o,e,a){var s=this;this.log_("update",{path:o.toString(),value:e});var r=!0,i=this.generateServerValues(),u={};if(w.forEach(e,function(e,t){r=!1;var n=_(t);u[e]=tt(n,i)}),r)D("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(a,"ok");else{var l=this.getNextWriteId_(),t=this.serverSyncTree_.applyUserMerge(o,u,l);this.eventQueue_.queueEvents(t),this.server_.merge(o.toString(),e,function(e,t){var n="ok"===e;n||F("update at "+o+" failed: "+e);var r=s.serverSyncTree_.ackUserWrite(l,!n),i=0<r.length?s.rerunTransactions_(o):o;s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(a,e,t)}),w.forEach(e,function(e){var t=s.abortTransactions_(o.child(e));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},e.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),t=function(e,n){var r=new Ze;return e.forEachTree(new J(""),function(e,t){r.remember(e,tt(t,n))}),r}(this.onDisconnect_,e),i=[];t.forEachTree(J.Empty,function(e,t){i=i.concat(r.serverSyncTree_.applyServerOverwrite(e,t));var n=r.abortTransactions_(e);r.rerunTransactions_(n)}),this.onDisconnect_=new Ze,this.eventQueue_.raiseEventsForChangedPath(J.Empty,i)},e.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(e,t){"ok"===e&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,e,t)})},e.prototype.onDisconnectSet=function(n,e,r){var i=this,o=_(e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(e,t){"ok"===e&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,e,t)})},e.prototype.onDisconnectSetWithPriority=function(n,e,t,r){var i=this,o=_(e,t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(e,t){"ok"===e&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,e,t)})},e.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(w.isEmpty(n))return D("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(e,t){"ok"===e&&w.forEach(n,function(e,t){var n=_(t);o.onDisconnect_.remember(r.child(e),n)}),o.callOnCompleteCallback(i,e,t)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;t=e?(this.statsListener_||(this.statsListener_=new Pt(this.stats_)),this.statsListener_.get()):this.stats_.get();var r=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);w.forEach(t,function(e,t){for(var n=e.length;n<r+2;n++)e+=" ";console.log(e+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),D.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(r,i,o){r&&$(function(){if("ok"==i)r(null);else{var e=(i||"error").toUpperCase(),t=e;o&&(t+=": "+o);var n=new Error(t);n.code=e,r(n)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new on(this))},enumerable:!0,configurable:!0}),e}(),Yt=function(){function t(e){this.indexedFilter_=new pt(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},t.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new we(t,n))||(n=Le.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},t.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Le.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Le.EMPTY_NODE);var i=this;return t.forEachChild(Te,function(e,t){i.matches(new we(e,t))||(r=r.updateImmediateChild(e,Le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},t.prototype.updatePriority=function(e,t){return e},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},t.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},t}(),Qt=function(){function e(e){this.rangedFilter_=new Yt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new we(t,n))||(n=Le.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Le.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=Le.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(Le.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;w.assert(s.numChildren()==this.limit_,"");var u=new we(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name==t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(c&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(ft.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ft.childRemovedChange(t,h));var d=s.updateImmediateChild(t,Le.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ft.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?e:c&&0<=o(l,u)?(null!=i&&(i.trackChildChange(ft.childRemovedChange(l.name,l.node)),i.trackChildChange(ft.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Le.EMPTY_NODE)):e},e}(),$t=function(){function r(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Te}return r.prototype.hasStart=function(){return this.startSet_},r.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},r.prototype.getIndexStartValue=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},r.prototype.getIndexStartName=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:U},r.prototype.hasEnd=function(){return this.endSet_},r.prototype.getIndexEndValue=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},r.prototype.getIndexEndName=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:V},r.prototype.hasLimit=function(){return this.limitSet_},r.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},r.prototype.getLimit=function(){return w.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},r.prototype.getIndex=function(){return this.index_},r.prototype.copy_=function(){var e=new r;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},r.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},r.prototype.limitToFirst=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,t},r.prototype.limitToLast=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,t},r.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},r.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},r.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},r.prototype.getQueryObject=function(){var e=r.WIRE_PROTOCOL_CONSTANTS_,t={};if(this.startSet_&&(t[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(t[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(t[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(t[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){t[e.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),t[e.VIEW_FROM]=n}return this.index_!==Te&&(t[e.INDEX]=this.index_.toString()),t},r.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},r.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Te},r.prototype.getNodeFilter=function(){return this.loadsAllData()?new pt(this.getIndex()):this.hasLimit()?new Qt(this):new Yt(this)},r.prototype.toRestQueryStringParameters=function(){var e,t=r.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(e=this.index_===Te?t.PRIORITY_INDEX:this.index_===qe?t.VALUE_INDEX:this.index_===Ce?t.KEY_INDEX:(w.assert(this.index_ instanceof ze,"Unrecognized index type!"),this.index_.toString()),n[t.ORDER_BY]=w.stringify(e),this.startSet_&&(n[t.START_AT]=w.stringify(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+w.stringify(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=w.stringify(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+w.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_)),n},r.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},r.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},r.DEFAULT=new r,r}(),Xt=function(n){function t(e,t){if(!(e instanceof Kt))throw new Error("new Reference() no longer supported - use app.database().");return n.call(this,e,t,$t.DEFAULT,!1)||this}return y.__extends(t,n),t.prototype.getKey=function(){return w.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return w.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof J||(null===this.path.getFront()?function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),me(e,t,n,r)}("Reference.child",1,e,!1):me("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){w.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){w.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){w.validateArgCount("Reference.set",1,2,arguments.length),ve("Reference.set",this.path),le("Reference.set",1,e,this.path,!1),w.validateCallback("Reference.set",2,t,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(w.validateArgCount("Reference.update",1,2,arguments.length),ve("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,F("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}he("Reference.update",1,e,this.path,!1),w.validateCallback("Reference.update",2,t,!0);var i=new w.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(w.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ve("Reference.setWithPriority",this.path),le("Reference.setWithPriority",1,e,this.path,!1),fe("Reference.setWithPriority",2,t,!1),w.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new w.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return w.validateArgCount("Reference.remove",0,1,arguments.length),ve("Reference.remove",this.path),w.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,r,t){if(w.validateArgCount("Reference.transaction",1,3,arguments.length),ve("Reference.transaction",this.path),w.validateCallback("Reference.transaction",1,e,!1),w.validateCallback("Reference.transaction",2,r,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(w.errorPrefix(e,t,r)+"must be a boolean.")}("Reference.transaction",3,t,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===t&&(t=!0);var i=new w.Deferred;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,e,function(e,t,n){e?i.reject(e):i.resolve(new be(t,n)),"function"==typeof r&&r(e,t,n)},t),i.promise},t.prototype.setPriority=function(e,t){w.validateArgCount("Reference.setPriority",1,2,arguments.length),ve("Reference.setPriority",this.path),fe("Reference.setPriority",1,e,!1),w.validateCallback("Reference.setPriority",2,t,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){w.validateArgCount("Reference.push",0,2,arguments.length),ve("Reference.push",this.path),le("Reference.push",1,e,this.path,!0),w.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=_e(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},t.prototype.onDisconnect=function(){return ve("Reference.onDisconnect",this.path),new ge(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(Xe);Xe.__referenceConstructor=Xt,wt.__referenceConstructor=Xt;var Jt,Zt,en=function(){this.children={},this.childCount=0,this.value=null},tn=function(){function i(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new en),this.name_=e,this.parent_=t,this.node_=n}return i.prototype.subTree=function(e){for(var t,n=e instanceof J?e:new J(e),r=this;null!==(t=n.getFront());)r=new i(t,r,w.safeGet(r.node_.children,t)||new en),n=n.popFront();return r},i.prototype.getValue=function(){return this.node_.value},i.prototype.setValue=function(e){w.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},i.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},i.prototype.hasChildren=function(){return 0<this.node_.childCount},i.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},i.prototype.forEachChild=function(n){var r=this;w.forEach(this.node_.children,function(e,t){n(new i(e,r,t))})},i.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},i.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},i.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},i.prototype.path=function(){return new J(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},i.prototype.name=function(){return this.name_},i.prototype.parent=function(){return this.parent_},i.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},i.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=w.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},i}();(Zt=Jt||(Jt={}))[Zt.RUN=0]="RUN",Zt[Zt.SENT=1]="SENT",Zt[Zt.COMPLETED=2]="COMPLETED",Zt[Zt.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Zt[Zt.NEEDS_ABORT=4]="NEEDS_ABORT",Kt.MAX_TRANSACTION_RETRIES_=25,Kt.prototype.transactions_init_=function(){this.transactionQueueTree_=new tn},Kt.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new Xt(this,e);o.on("value",i);var a={path:e,update:t,onComplete:n,status:null,order:O(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(e);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Ge(a.currentInputSnapshot,new Xt(this,a.path),Te);a.onComplete(null,!1,l)}}else{ce("transaction failed: Data returned ",u,a.path),a.status=Jt.RUN;var c=this.transactionQueueTree_.subTree(e),h=c.getValue()||[];h.push(a),c.setValue(h);var f=void 0;"object"==typeof u&&null!==u&&w.contains(u,".priority")?(f=w.safeGet(u,".priority"),w.assert(ue(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(e)||Le.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),d=_(u,f),m=tt(d,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(e,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,v),this.sendReadyTransactions_()}},Kt.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Le.EMPTY_NODE},Kt.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);w.assert(0<n.length,"Sending zero length transaction queue"),n.every(function(e){return e.status===Jt.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},Kt.prototype.sendTransactionQueue_=function(s,u){for(var l=this,e=u.map(function(e){return e.currentWriteId}),t=this.getLatestState_(s,e),n=t,r=t.hash(),i=0;i<u.length;i++){var o=u[i];w.assert(o.status===Jt.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Jt.SENT,o.retryCount++;var a=J.relativePath(s,o.path);n=n.updateChild(a,o.currentOutputSnapshotRaw)}var c=n.val(!0),h=s;this.server_.put(h.toString(),c,function(e){l.log_("transaction put response",{path:h.toString(),status:e});var t=[];if("ok"===e){for(var n=[],r=0;r<u.length;r++){if(u[r].status=Jt.COMPLETED,t=t.concat(l.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new Xt(l,u[r].path),a=new Ge(i,o,Te);n.push(u[r].onComplete.bind(null,null,!0,a))}u[r].unwatcher()}l.pruneCompletedTransactionsBelowNode_(l.transactionQueueTree_.subTree(s)),l.sendReadyTransactions_(),l.eventQueue_.raiseEventsForChangedPath(s,t);for(r=0;r<n.length;r++)$(n[r])}else{if("datastale"===e)for(r=0;r<u.length;r++)u[r].status===Jt.SENT_NEEDS_ABORT?u[r].status=Jt.NEEDS_ABORT:u[r].status=Jt.RUN;else{F("transaction at "+h.toString()+" failed: "+e);for(r=0;r<u.length;r++)u[r].status=Jt.NEEDS_ABORT,u[r].abortReason=e}l.rerunTransactions_(s)}},r)},Kt.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},Kt.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],i=e.filter(function(e){return e.status===Jt.RUN}).map(function(e){return e.currentWriteId}),o=0;o<e.length;o++){var a=e[o],s=J.relativePath(t,a.path),u=!1,l=void 0;if(w.assert(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Jt.NEEDS_ABORT)u=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Jt.RUN)if(a.retryCount>=Kt.MAX_TRANSACTION_RETRIES_)u=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var c=this.getLatestState_(a.path,i);a.currentInputSnapshot=c;var h=e[o].update(c.val());if(void 0!==h){ce("transaction failed: Data returned ",h,a.path);var f=_(h);"object"==typeof h&&null!=h&&w.contains(h,".priority")||(f=f.updatePriority(c.getPriority()));var p=a.currentWriteId,d=this.generateServerValues(),m=tt(f,d);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else u=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],u&&(e[o].status=Jt.COMPLETED,b=e[o].unwatcher,setTimeout(b,Math.floor(0)),e[o].onComplete))if("nodata"===l){var v=new Xt(this,e[o].path),y=e[o].currentInputSnapshot,g=new Ge(y,v,Te);n.push(e[o].onComplete.bind(null,null,!1,g))}else n.push(e[o].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)$(n[o]);this.sendReadyTransactions_()}var b},Kt.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},Kt.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},Kt.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},Kt.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Jt.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(0<n.length?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},Kt.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},Kt.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===Jt.SENT_NEEDS_ABORT||(t[o].status===Jt.SENT?(w.assert(i===o-1,"All SENT items should be at beginning of queue."),t[i=o].status=Jt.SENT_NEEDS_ABORT,t[o].abortReason="set"):(w.assert(t[o].status===Jt.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(o=0;o<n.length;o++)$(n[o])}};var nn,rn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return nn||(nn=new e),nn},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&R("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=ne(n),i=r.repoInfo;return ye("Invalid Firebase Database URL",1,r),r.path.isEmpty()||R("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=w.safeGet(this.repos_,e.app.name);t&&w.safeGet(t,e.repoInfo_.toURLString())===e||R("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=w.safeGet(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=w.safeGet(n,e.toURLString());return r&&R("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Kt(e,this.useRestClient_,t),n[e.toURLString()]=r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),on=function(){function e(e){(this.repo_=e)instanceof Kt||R("Don't call new Database() directly - please use firebase.database()."),this.root_=new Xt(e,J.Empty),this.INTERNAL=new an(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),w.validateArgCount("database.ref",0,1,arguments.length),e instanceof Xt?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),w.validateArgCount(t,1,1,arguments.length);var n=ne(e);ye(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&R(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&R("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){w.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){w.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),an=function(){function e(e){this.database=e}return e.prototype.delete=function(){return y.__awaiter(this,void 0,void 0,function(){return y.__generator(this,function(e){return this.database.checkDeleted_("delete"),rn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},e}(),sn=Object.freeze({forceLongPolling:function(){Ht.forceDisallow(),Lt.forceAllow()},forceWebSockets:function(){Lt.forceDisallow()},isWebSocketsAvailable:function(){return Ht.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),un=zt;zt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},zt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ln=Bt,cn=te,hn=Object.freeze({DataConnection:un,RealTimeConnection:ln,hijackHash:function(i){var o=zt.prototype.put;return zt.prototype.put=function(e,t,n,r){void 0!==r&&(r=i()),o.call(this,e,t,n,r)},function(){zt.prototype.put=o}},ConnectionTarget:cn,queryIdentifier:function(e){return e.queryIdentifier()},listens:function(e){return e.repo.persistentConnection_.listens_},forceRestClient:function(e){rn.getInstance().forceRestClient(e)}}),fn=on.ServerValue;e(g),dn.registerDatabase=e,dn.Database=on,dn.Query=Xe,dn.Reference=Xt,dn.enableLogging=A,dn.ServerValue=fn,dn.DataSnapshot=Ge,dn.OnDisconnect=ge}).call(dn,mn(52))},function(e,t,n){"use strict";function r(t){a.forEach(function(e){e.logLevel=t})}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"setLogLevel",function(){return r}),n.d(t,"Logger",function(){return l}),n.d(t,"LogLevel",function(){return o});var o,i,a=[];(i=o||(o={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var s=o.INFO,u=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},l=function(){function e(e){this.name=e,this._logLevel=s,this._logHandler=u,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.ERROR].concat(e))},e}()},function(e,t,n){"use strict";function r(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(e){return this instanceof h?(this.v=e,this):new h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n.d(t,"__assign",function(){return a}),t.__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},t.__decorate=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a},t.__param=function(n,r){return function(e,t){r(e,t,n)}},t.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.__awaiter=function(o,a,s,u){return new(s||(s=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})},t.__generator=function(n,r){function e(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t},t.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},t.__values=r,t.__read=i,t.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},t.__await=h,t.__asyncGenerator=function(e,t,n){function r(r){l[r]&&(u[r]=function(n){return new Promise(function(e,t){1<c.push([r,n,e,t])||i(r,n)})})}function i(e,t){try{!function(e){e.value instanceof h?Promise.resolve(e.value.v).then(o,a):s(c[0][2],e)}(l[e](t))}catch(e){s(c[0][3],e)}}function o(e){i("next",e)}function a(e){i("throw",e)}function s(e,t){e(t),c.shift(),c.length&&i(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,l=n.apply(e,t||[]),c=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u},t.__asyncDelegator=function(r){function e(t,n){r[t]&&(i[t]=function(e){return(o=!o)?{value:h(r[t](e)),done:"return"===t}:n?n(e):e})}var i,o;return i={},e("next"),e("throw",function(e){throw e}),e("return"),i[Symbol.iterator]=function(){return this},i},t.__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):r(e)},t.__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},t.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__importDefault=function(e){return e&&e.__esModule?e:{default:e}};var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(){function t(e){r(this,t),this.store=this.storageAvailability("localStorage")&&!e?localStorage:new a}return i(t,[{key:"storageAvailability",value:function(e){var t=null;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}},{key:"getItem",value:function(e){return this.store.getItem(e)}},{key:"setItem",value:function(e,t){this.store.setItem(e,t)}},{key:"removeItem",value:function(e){this.store.removeItem(e)}}]),t}();t.default=o;var a=function(){function e(){r(this,e),this.store={}}return i(e,[{key:"getItem",value:function(e){return this.store[e]}},{key:"setItem",value:function(e,t){this.store[e]=t}},{key:"removeItem",value:function(e){delete this.store[e]}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(54),a=(r=o)&&r.__esModule?r:{default:r},s=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.name=e,this.actions={},this.setupStandards()}return i(t,[{key:"setupStandards",value:function(){var i=this;window.addEventListener("message",function(e){var t=e.data,n={};try{n=JSON.parse(t)}catch(e){return}for(var r in n)i.actions[r]&&i.exec(r,n[r])}),this.on("landbot-listen",function(){return console.log("["+i.name+"-LB] listener is active")})}},{key:"on",value:function(e,t){var n=t||function(){};this.actions[e]?this.actions[e].push(n):this.actions[e]=[n]}},{key:"off",value:function(e,t){if(this.actions[e]&&t){var n=this.actions[e].indexOf(t);-1<n&&this.actions[e].splice(n,1)}else delete this.actions[e]}},{key:"exec",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.actions[e])for(var n=0;n<this.actions[e].length;n++)this.actions[e][n](t)}},{key:"send",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=Object.assign(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),{name:this.name});parent.postMessage(JSON.stringify(n),a.default.getOrigin()||"*")}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(92),a=n(183),s=n(184),u=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.name=e,this.logs={},"log"in console&&"group"in console&&"groupCollapsed"in console&&"groupEnd"in console||(this.append=function(){})}return i(t,[{key:"append",value:function(e,t,n){var r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o(this.logs,t,[])),[{log:e,level:n}]);return a(this.logs,t,r),this}},{key:"report",value:function(){console.groupCollapsed("["+this.name+"]: Logger Report Details"),this.breakDown(this.logs),console.groupEnd()}},{key:"breakDown",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];n instanceof Array?this.print(n,t):"object"===(void 0===n?"undefined":r(n))&&this.breakDown(n)}}},{key:"print",value:function(e,t){console.group(t);for(var n=0;n<e.length;n++)console[e[n].level||"log"].apply(null,s(e[n].log));console.groupEnd()}}]),t}();t.default=u},function($,e,t){(function(e){function t(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function n(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function r(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(e,t){for(var n=e.length;n--;)if(g(e[n][0],t))return n;return-1}function o(e){return!(!b(e)||function(e){return!!F&&F in e}(e))&&(function(e){var t=b(e)?V.call(e):"";return t==m||t==v}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?H:T).test(function(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function a(e,t,n,r){if(!b(e))return e;for(var i=-1,o=(t=function(e,t){if(Q(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_(e))||C.test(e)||!x.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return Q(e)?e:Y(e)}(t)).length,a=o-1,s=e;null!=s&&++i<o;){var u=y(t[i]),l=n;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=b(c)?c:(m=t[i+1],(v=null==(v=void 0)?w:v)&&("number"==typeof m||N.test(m))&&-1<m&&m%1==0&&m<v?[]:{}))}p=l,void 0,d=(h=s)[f=u],U.call(h,f)&&g(d,p)&&(void 0!==p||f in h)||(h[f]=p),s=s[u]}var h,f,p,d,m,v;return e}function s(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function u(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return o(n)?n:void 0}function y(e){if("string"==typeof e||_(e))return e;var t=e+"";return"0"==t&&1/e==-d?"-0":t}function l(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new TypeError(f);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return a.cache=n.set(t,r),r};return a.cache=new(l.Cache||r),a}function g(e,t){return e===t||e!=e&&t!=t}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&V.call(e)==k}function c(e){return null==e?"":function(e){if("string"==typeof e)return e;if(_(e))return K?K.call(e):"";var t=e+"";return"0"==t&&1/e==-d?"-0":t}(e)}var h,f="Expected a function",p="__lodash_hash_undefined__",d=1/0,w=9007199254740991,m="[object Function]",v="[object GeneratorFunction]",k="[object Symbol]",x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/,S=/^\./,E=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,O=/\\(\\)?/g,T=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,P="object"==typeof e&&e&&e.Object===Object&&e,I="object"==typeof self&&self&&self.Object===Object&&self,A=P||I||Function("return this")(),D=Array.prototype,M=Function.prototype,j=Object.prototype,R=A["__core-js_shared__"],F=(h=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",L=M.toString,U=j.hasOwnProperty,V=j.toString,H=RegExp("^"+L.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=A.Symbol,B=D.splice,q=u(A,"Map"),z=u(Object,"create"),G=W?W.prototype:void 0,K=G?G.toString:void 0;t.prototype.clear=function(){this.__data__=z?z(null):{}},t.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},t.prototype.get=function(e){var t=this.__data__;if(z){var n=t[e];return n===p?void 0:n}return U.call(t,e)?t[e]:void 0},t.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:U.call(t,e)},t.prototype.set=function(e,t){return this.__data__[e]=z&&void 0===t?p:t,this},n.prototype.clear=function(){this.__data__=[]},n.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():B.call(t,n,1),0))},n.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},n.prototype.has=function(e){return-1<i(this.__data__,e)},n.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},r.prototype.clear=function(){this.__data__={hash:new t,map:new(q||n),string:new t}},r.prototype.delete=function(e){return s(this,e).delete(e)},r.prototype.get=function(e){return s(this,e).get(e)},r.prototype.has=function(e){return s(this,e).has(e)},r.prototype.set=function(e,t){return s(this,e).set(e,t),this};var Y=l(function(e){e=c(e);var i=[];return S.test(e)&&i.push(""),e.replace(E,function(e,t,n,r){i.push(n?r.replace(O,"$1"):t||e)}),i});l.Cache=r;var Q=Array.isArray;$.exports=function(e,t,n){return null==e?e:a(e,t,n)}}).call(e,t(7))},function(ae,e,t){(function(e){function n(t,e){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,function(e){return t[e]})}function r(e){return function(e){return A.test(e)}(e)?function(e){return e.match(I)||[]}(e):function(e){return e.split("")}(e)}function i(e,t){var n,r,i=oe(e)||function(e){return function(e){return h(e)&&u(e)}(e)&&H.call(e,"callee")&&(!G.call(e,"callee")||W.call(e)==v)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=i.length,a=!!o;for(var s in e)!t&&!H.call(e,s)||a&&("length"==s||(n=s,(r=null==(r=o)?m:r)&&("number"==typeof n||x.test(n))&&-1<n&&n%1==0&&n<r))||i.push(s);return i}function o(e){return!(!c(e)||function(e){return!!U&&U in e}(e))&&(l(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?B:k).test(s(e))}function a(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||F)}(e))return K(e);var t=[];for(var n in Object(e))H.call(e,n)&&"constructor"!=n&&t.push(n);return t}function t(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return o(n)?n:void 0}function s(e){if(null!=e){try{return V.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function u(e){return null!=e&&function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=m}(e.length)&&!l(e)}function l(e){var t=c(e)?W.call(e):"";return t==y||t==g}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){return!!e&&"object"==typeof e}var f,p,d,m=9007199254740991,v="[object Arguments]",y="[object Function]",g="[object GeneratorFunction]",b="[object Map]",_="[object Set]",w="[object String]",k=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,C="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",S="\\ud83c[\\udffb-\\udfff]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",T="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",N="[\\ufe0e\\ufe0f]?"+T+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",E,O].join("|")+")[\\ufe0e\\ufe0f]?"+T+")*"),P="(?:"+["[^\\ud800-\\udfff]"+C+"?",C,E,O,"[\\ud800-\\udfff]"].join("|")+")",I=RegExp(S+"(?="+S+")|"+P+N,"g"),A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),D="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,j=D||M||Function("return this")(),R=Function.prototype,F=Object.prototype,L=j["__core-js_shared__"],U=(d=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",V=R.toString,H=F.hasOwnProperty,W=F.toString,B=RegExp("^"+V.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=j.Symbol,z=q?q.iterator:void 0,G=F.propertyIsEnumerable,K=(f=Object.keys,p=Object,function(e){return f(p(e))}),Y=t(j,"DataView"),Q=t(j,"Map"),$=t(j,"Promise"),X=t(j,"Set"),J=t(j,"WeakMap"),Z=s(Y),ee=s(Q),te=s($),ne=s(X),re=s(J),ie=function(e){return W.call(e)};(Y&&"[object DataView]"!=ie(new Y(new ArrayBuffer(1)))||Q&&ie(new Q)!=b||$&&"[object Promise]"!=ie($.resolve())||X&&ie(new X)!=_||J&&"[object WeakMap]"!=ie(new J))&&(ie=function(e){var t=W.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?s(n):void 0;if(r)switch(r){case Z:return"[object DataView]";case ee:return b;case te:return"[object Promise]";case ne:return _;case re:return"[object WeakMap]"}return t});var oe=Array.isArray;ae.exports=function(e){if(!e)return[];if(u(e))return function(e){return"string"==typeof e||!oe(e)&&h(e)&&W.call(e)==w}(e)?r(e):function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e);if(z&&e[z])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[z]());var t=ie(e);return(t==b?function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}:t==_?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}:function(e){return e?n(e,function(e){return u(e)?i(e):a(e)}(e)):[]})(e)}}).call(e,t(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={format:function(e,t){var n=null;switch(t){case"HH:mm":return("0"+(n=new Date(e)).getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2);case"HH:mm:ss.ff":return("0"+(n=new Date(e)).getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("0000"+n.getMilliseconds()).slice(-4);default:return"0"}}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={transformVariables:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)return"";var r=e,i=/([^\?]*)\?/g,o=/(?:^@|[^\w\d@]@)(\w+)/g,a=/@{([^}]*)}/g,s=null;for(s=i.exec(e);s;)r=r.replace(""+s[1]+"?",s[1]),s=i.exec(e);for(s=null,s=o.exec(e);s;)r=r.replace("@"+s[1],n[s[1]]||(t[s[1]]||{}).default||""),s=o.exec(e);for(s=null,s=a.exec(e);s;)r=r.replace("@{"+s[1]+"}",n[s[1]]||(t[s[1]]||{}).default||""),s=a.exec(e);return r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(87),o=(r=i)&&r.__esModule?r:{default:r},a=n(93),s=o.default;t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case a.SET_CONFIG:return Object.assign({},e,t.config);default:return e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),p=n(0),a=n(2),s=n(95),u=n(96),l=n(36),c=n(55),h=r(n(17)),f=n(247),d=r(f),m=r(n(267)),v=r(n(285)),y=r(n(286)),g=r(n(287)),b=n(29),_=r(n(3)),w=r(n(25)),k=r(n(11)),x=r(n(39)),C=r(n(30)),S=r(n(4)),E=n(112),O=h.default.renderFlags,T=h.default.reception$,N=h.default.sending$,P=h.default.messageReception$,I=(h.default.typingState$,h.default.queueMessagesRender$),A=h.default.queueMessagesRenderSubject$,D=(h.default.receiverReady$,h.default.initialChat$,h.default.newMessage$,h.default.initialChatReceive$),M=h.default.newMessageReceive$,j=h.default.inputAnimation$,R=n(8),F=(0,a.connect)(function(e){return{error_text:e.config.text.error,widget_hide_header:e.config.widget_hide_header,config:e.config,input:e.input,messagesList:e.messagesList,agents:e.agents,lastAvatar:e.chat.lastAvatar}},function(n){return{addMessage:function(e){return n({type:s.ADD_MESSAGE,message:e})},addMessagesChunk:function(e){return n({type:s.ADD_MESSAGES_CHUNK,messages:e})},addOldMessagesChunk:function(e){return n({type:s.ADD_OLD_MESSAGES_CHUNK,messages:e})},editAssignedAgent:function(e){return n({type:c.SET_ASSIGNED_AGENT,id:e})},editMessage:function(e,t){return n({type:s.EDIT_MESSAGE,key:e,message:t})},deleteMessage:function(e){return n({type:s.DELETE_MESSAGE,key:e})},resetChat:function(){return n({type:s.RESET_CHAT})},addAgent:function(e){return n({type:u.ADD_AGENT,agent:e})},setInput:function(e){return n({type:l.SET_INPUT,inputData:e})},disableEngage:function(){return n({type:c.DISABLE_ENGAGE})},setLastAvatar:function(e){return n({type:c.SET_LAST_AVATAR,avatar:e})},setFixedAvatar:function(e){return n({type:c.SET_FIXED_AVATAR,value:e})}}})(i=function(e){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={disabled:!0,loadingOldMessages:!1},e.messagesContainer=null,e.moreMessagesButton=null,e.setupListeners(),e.getAgentsInfo(),e.scrollAnimation=null,e.scrollTopFixer=null,e.scrollFixer=null,e.scrollAuto=!0,e.mobileHA=!0,window.temp_data={name:"",phone:"",email:""},window.setFixedAvatar=function(e){return t.setFixedAvatar(e)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,p.Component),o(n,[{key:"setupListeners",value:function(){var l=this;I.subscribe(function(e){if(null!==e){var t=l.processedMessage(e);if("brand"===t.author){var n=t.data.samurai;-1!=n&&_.default.emit("hu-query-get-agent",n),R(t,"data.extra.leaf",!1)&&l.props.disableEngage(),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": Message render","landbot.messages["+t.data.key+"]"),l.appendMessage(t,!0)}}}),T.subscribe({next:function(e){e&&w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": Message received","landbot.messages["+e.key+"]").append(e,"landbot.messages["+e.key+"]")}}),P.subscribe(function(e){for(var t=e.filter(function(e){return e}).filter(function(e){return void 0!==e.samurai}).filter(l.messagesFilter).sort(function(e,t){return e.timestamp-t.timestamp}).map(function(e){return JSON.parse(JSON.stringify(e))}),n=0;n<t.length;n++){var r=t[n];if(null!==r&&n===t.length-1)if(r.role=k.default.addRoleType(r,"end-flow"),l.props.setLastAvatar(r.samurai),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+': Message defined as "end-flow"',"landbot.messages["+r.key+"]"),"referral"===r.type&&t[n-1])if(void 0!==t[n-1].samurai){var i=t[n-1],o=i.extra,a=i.key,s={data:{extra:o,key:a,message:i.message,role:i.role,samurai:i.samurai,type:i.type}};_.default.emit("hu-receive-last-group-message",s),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": Previous message emitted as last group message","landbot.messages["+a+"]")}else w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": Message is referral but none is emitted as last group message","landbot.messages["+r.key+"]","warn");else _.default.emit("hu-receive-last-group-message",l.processedMessage(r)),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": Message emitted as last group message","landbot.messages["+r.key+"]");if(null!==r&&"finish"===r.action&&1===t.length){var u=l.props.messagesList[l.props.messagesList.length-1]||{};k.default.hasRoleType(u.data,"engage")&&l.props.deleteMessage(u.key)}null===r||"hidden"!==r.type?A.next(r):(new f.HiddenMessage(r),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": Hidden message processed","landbot.messages["+r.key+"]"))}}),N.subscribe(function(e){!1!==e.render&&l.disableInput(function(){l.appendMessage(l.processedMessage(e),!0),O.up("initEngageFlag")})}),_.default.on("hu-receive-ghost-message",function(e){l.appendMessage(l.processedMessage(e),!0)}),_.default.on("hu-initial-chat",function(e){if(O.initialChatFlag){O.down("initialChatFlag");var t=e.filter(l.messagesFilter).filter(function(e){return"hidden"!==e.type}).map(l.processedMessage).map(function(e){if("brand"===e.author){var t=e.data.samurai;-1!=t&&_.default.emit("hu-query-get-agent",t)}return e});l.renderInitialChat(t),l.onMessagesChunk(t)}}),_.default.on("hu-remove-chat",function(){O.down("initialChatFlag"),_.default.emit("hu-lb-message-flow-end"),A.next(null),j.next("input_out"),l.props.resetChat(),l.props.setInput({hasOldMessages:!1}),l.setState({disabled:!0},function(){l.scrollBottom(350,"top"),j.next("input_out")})}),_.default.on("hu-reset-chat",function(){_.default.emit("hu-lb-message-flow-end"),O.down("initialChatFlag"),O.up("restarting"),A.next(null),D().subscribe({next:function(e){if(O.restarting){O.down("restarting");var t=e.filter(function(e){return e})[0].filter(l.messagesFilter).filter(function(e){return"hidden"!==e.type}).map(l.processedMessage).map(function(e){if("brand"===e.author){var t=e.data.samurai;-1!=t&&_.default.emit("hu-query-get-agent",t)}return e});l.renderInitialChat(t),l.onMessagesChunk(t)}}}),M().subscribe({next:function(e){O.restarting&&O.down("restarting")}}),l.moreMessagesButton&&(0,b.Animate)(l.moreMessagesButton,{opacity:0},{duration:500},function(){l.moreMessagesButton.style.opacity=0}),l.setState({disabled:!0},function(){l.scrollBottom(300,"top"),j.next("input_out")}),setTimeout(function(){l.props.resetChat()},400),setTimeout(function(){l.props.setInput({hasOldMessages:!1}),_.default.emit("hu-lb-receiver-ready")},600)}),_.default.on("hu-old-chat",function(e){l.concatOldMessages(e.filter(l.messagesFilter).filter(function(e){return"hidden"!==e.type}).map(l.processedMessage))}),_.default.on("hu-get-agent",function(e){l.props.addAgent(e)}),_.default.on("hu-lb-engage-end",function(){O.up("endEngageFlag")}),_.default.on("hu-error-sending-message",function(){_.default.emit("hu-receive-message",{key:k.default.randomKey(20),type:"text",message:l.props.error_text,samurai:-1,role:["error","end-flow"],extra:{hide_textbox:!0,typing:!1}})})}},{key:"componentDidMount",value:function(){_.default.emit("hu-landbot-ready")}},{key:"isExtraWelcome",value:function(e){return!!R(e,"extra.welcome",!1)}},{key:"getAgentsInfo",value:function(){_.default.emit("hu-query-stored-agents")}},{key:"userMoveScroll",value:function(e){(0,b.Animate)(this.messagesContainer,"stop",{mobileHA:this.mobileHA});var t=this.messagesContainer.scrollHeight-this.messagesContainer.clientHeight;this.messagesContainer.scrollTop>=t-30?this.scrollAuto=!0:this.scrollAuto=!1}},{key:"scrollBottom",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"bottom";this.scrollAuto&&((0,b.Animate)(this.messagesContainer,"stop",{mobileHA:this.mobileHA}),(0,b.Animate)("top"===n?this.scrollTopFixer:this.scrollFixer,"scroll",{duration:t,container:this.messagesContainer,mobileHA:this.mobileHA},function(){e.messagesContainer.scrollTop="top"===n?0:e.messagesContainer.scrollHeight}))}},{key:"processedMessage",value:function(e){return{key:e.key,author:void 0!==e.samurai?"brand":"user",data:e}}},{key:"messagesFilter",value:function(e){return-1<E.MESSAGE_TYPES.indexOf(e.type)||"stripe"===e.type&&void 0!==e.samurai}},{key:"appendMessage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.props.messagesList;e.animate=t;var r=n[n.length-1],i=k.default.hasRoleType((r||{}).data,"engage");if(r&&(r.timestamp,e.timestamp),i?this.props.editMessage(r.key,e):this.props.addMessage(e),void 0===e.data.samurai)w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": ["+e.data.key+"] User message => No input changes","landbot.input");else if(0<=e.data.samurai)this.props.setInput({input_motion:!0,input_type:"text",field_type:"text",fixed:!0,backButton:!1}),this.setState({disabled:!1},function(){return k.default.disableInput()}),this.props.editAssignedAgent(e.data.samurai),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": ["+e.data.key+"] Agent message => Input fixed","landbot.input");else{var o={},a=!1,s=this.getExtraTextareaFixed(e.data);s?(o={input_motion:!0,input_type:"text",field_type:"text",fixed:!0,backButton:!1},w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": ["+e.data.key+"] Bot message => Input fixed","landbot.input")):this.getReferralFilter(e.data)?(a=this.state.disabled,o={backButton:!1},w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": ["+e.data.key+"] Bot message => (Referral) No input changes","landbot.input")):o={input_motion:!(a=this.getDisabledInput(e)),input_type:C.default.getInputType(e.data),field:this.getInputField(e.data),field_type:this.getFieldType(e.data),buttons:e.data.buttons,cards:e.data.cards,card_type:e.data.card_type,payloads:e.data.payloads,urls:e.data.urls,extra:e.data.extra,backButton:!k.default.hasRoleType(e.data,"welcome")&&!k.default.hasRoleType(e.data,"revisit")&&!this.isExtraWelcome(e.data)&&"referral"!==e.data.type&&k.default.showBackButton(),fixed:!1},this.props.setInput(o),this.setState({disabled:a},function(){a||s||(i&&j.next("input_enable"),k.default.enableInput())}),this.props.editAssignedAgent(null),w.default.append(x.default.format(new Date,"HH:mm:ss.ff")+": ["+e.data.key+"] Bot message => Input "+C.default.getInputType(e.data),"landbot.input")}}},{key:"renderInitialChat",value:function(e){var t=this;if(0!==e.length){var n=e.length>=this.props.config.messagesLimit,r=e[e.length-1],i=this.getLastBrandMessage(e);if(this.props.addMessagesChunk(e),0<=i.data.samurai||this.getExtraTextareaFixed(i.data))this.props.setInput({hasOldMessages:n,input_motion:!0,input_type:"text",field_type:"text",fixed:!0,backButton:!1}),this.props.editAssignedAgent(i.data.samurai),this.setState({disabled:!1},function(){k.default.disableInput(),setTimeout(function(){j.next("input_enable")},100)});else if(void 0===r.data.samurai)this.props.setInput({hasOldMessages:n}),setTimeout(function(){return t.scrollBottom(350)},10);else{var o={},a=!0;o=this.getExtraTextareaFixed(r.data)?{hasOldMessages:n,input_motion:!(a=!1),input_type:"text",field_type:"text",fixed:!0,backButton:!1}:(a=this.getDisabledInput(r),{hasOldMessages:n,input_type:C.default.getInputType(r.data),field:this.getInputField(r.data),field_type:this.getFieldType(r.data),buttons:r.data.buttons,cards:r.data.cards,card_type:r.data.card_type,payloads:r.data.payloads,urls:r.data.urls,extra:r.data.extra,backButton:!k.default.hasRoleType(r.data,"welcome")&&!k.default.hasRoleType(r.data,"revisit")&&!this.isExtraWelcome(r.data)&&"referral"!==r.data.type&&k.default.showBackButton(),fixed:!1}),this.props.setInput(o),this.setState({disabled:a},function(){a?setTimeout(function(){t.scrollBottom(350)},100):(k.default.enableInput(),setTimeout(function(){j.next("input_enable")},100))})}}}},{key:"concatOldMessages",value:function(e){this.props.addOldMessagesChunk(e),0!==e.length?this.props.setInput({hasOldMessages:!0}):this.props.setInput({hasOldMessages:!1}),this.setState({loadingOldMessages:!1})}},{key:"getLastBrandMessage",value:function(e){for(var t=1,n=e[e.length-t];void 0===n.data.samurai&&t<e.length-1||void 0!==n.data.samurai&&this.getReferralFilter(n.data);)t+=1,n=e[e.length-t];return n}},{key:"onMessagesChunk",value:function(e){var t=e[e.length-1],n=this.getLastBrandMessage(e);t&&(void 0!==t.data.samurai?(w.default.append("Message emitted as last group message "+x.default.format(new Date,"HH:mm:ss.ff"),"landbot.messages["+n.data.key+"]").append(n,"landbot.messages["+n.data.key+"]"),_.default.emit("hu-receive-last-group-message",n)):(w.default.append("Message emitted as last brand message "+x.default.format(new Date,"HH:mm:ss.ff"),"landbot.messages["+n.data.key+"]").append(t,"landbot.messages["+n.data.key+"]"),_.default.emit("hu-receive-last-brand-message",n)))}},{key:"queryOldMessages",value:function(){this.state.loadingOldMessages||(_.default.emit("hu-query-old-messages"),this.setState({loadingOldMessages:!0}))}},{key:"getReferralFilter",value:function(e){return"referral"===e.type&&!1===R(e,"extra.referral")}},{key:"getInputField",value:function(e){return R(e,"extra.textarea.field",!1)}},{key:"getFieldType",value:function(e){return R(e,"extra.textarea.type",null)}},{key:"getExtraTextareaFixed",value:function(e){return R(e,"extra.textarea.fixed",!1)}},{key:"disableInput",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this.props.input.fixed?e():(k.default.disableInput(),this.setState({disabled:!0},e))}},{key:"getDisabledInput",value:function(e){return"none"===C.default.getInputType(e.data)||void 0===e.data.samurai}},{key:"render",value:function(e,t){var r=this,n=e.widget_hide_header,i=e.messagesList,o=e.config,a=o.logo,s=o.brand_name,u=o.tagline,l=(o.keywords,o.branding,e.input),c=l.hasOldMessages,h=(l.input_motion,l.input_type,l.field,l.field_type,l.buttons,l.cards,l.card_type,l.payloads,l.urls,l.extra,l.backButton,l.fixed),f=t.disabled;return t.loadingOldMessages,this.disableInput.bind(this),(0,p.h)("div",{id:"hu-messenger",className:"hu-display-flex hu-flex-1 hu-flex-dir-column hu-overflow-hidden"+(h?" hu-input-fixed":"")},(0,p.h)("div",{id:"hu-messages-container",className:"hu-zindex-0 hu-flex-1 hu-overflow-auto",onTouchMove:function(e){return r.userMoveScroll(e)},onWheel:function(e){return r.userMoveScroll(e)},ref:function(e){return r.messagesContainer=e}},(0,p.h)("div",{id:"scroll-top-fixer",ref:function(e){return r.scrollTopFixer=e}}),!n&&(0,p.h)("div",{id:"hu-header-mobile",className:"hu-a-center hu-m-display-none"},a&&(0,p.h)("img",{className:"hu-header-logo hu-display-block",src:a,alt:""}),(0,p.h)("h1",{className:"hu-header-brand_name hu-w-bold hu-s-23 hu-color_header-text"},s),(0,p.h)("p",{className:"hu-header-tagline hu-s-13 hu-color_header-text hu-margin-0-auto"},u&&S.default.getVirtualDOM(u))),(0,p.h)("div",{className:"hu-messages-wrapper"},(0,p.h)("div",{className:"hu-old-chat"},c&&(0,p.h)("button",{className:"more-messages hu-color_contrast hu-border-color_contrast hu-s-15",ref:function(e){r.moreMessagesButton=e},onClick:this.queryOldMessages.bind(this),tabIndex:-1},(0,p.h)("span",{className:"more-messages-text"},"Load more..."))),i.map(function(e,t,n){return(0,p.h)(d.default,{_key:e.key,author:e.author,data:e.data,animate:e.animate,mobileHA:r.mobileHA,scrollBottom:r.scrollBottom.bind(r)})}),(0,p.h)(m.default,{disabled:f,mobileHA:this.mobileHA,scrollBottom:this.scrollBottom.bind(this)},!h&&(0,p.h)(g.default,{id:"main",disabled:f,emoji:"hu-message-input"})),(0,p.h)("div",{id:"scroll-bottom-fixer",ref:function(e){return r.scrollFixer=e}}))),h&&(0,p.h)(v.default,{disabled:f,mobileHA:this.mobileHA,scrollBottom:this.scrollBottom.bind(this)},(0,p.h)(g.default,{id:"fixed",disabled:f,emoji:"hu-footer-input-fixed"})),(0,p.h)(y.default,{disabled:f,mobileHA:this.mobileHA,scrollBottom:this.scrollBottom.bind(this)},(0,p.h)(g.default,{id:"mobile",disabled:f})),(0,p.h)("div",{id:"hu-msn-sandbox",className:"hu-messages-wrapper"}),(0,p.h)("div",{id:"hu-input-sandbox"}),(0,p.h)("div",{id:"hu-mobile-input-sandbox"}))}}]),n}())||i;t.default=F},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideLoader$=t.appReady$=void 0;var r=n(1);n(61),n(99),n(104),n(67),n(105);var i,o=n(3),a=(i=o)&&i.__esModule?i:{default:i},s=(r.Observable.fromEvent(a.default,"hu-umicore-ready"),r.Observable.fromEvent(a.default,"hu-landbot-ready")).first(),u=r.Observable.fromEvent(a.default,"hu-receive-message"),l=r.Observable.fromEvent(a.default,"hu-initial-chat"),c=r.Observable.merge(u,l).first();t.appReady$=s,t.hideLoader$=c},function(e,t,n){"use strict";var r=n(5),i=n(59),o=n(98);t.toSubscriber=function(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(o.empty)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(n){function e(e){n.call(this),this.errors=e;var t=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=t.name="UnsubscriptionError",this.stack=t.stack,this.message=t.message}return r(e,n),e}(Error);t.UnsubscriptionError=i},function(e,t,n){"use strict";function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:i.noop}var i=n(193);t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return r(e)},t.pipeFromArray=r},function(e,t,n){"use strict";t.noop=function(){}},function(e,t,n){"use strict";var r=n(195);t.fromEvent=r.FromEventObservable.create},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(1),o=n(37),a=n(57),s=n(26),f=n(18),p=Object.prototype.toString,u=function(i){function h(e,t,n,r){i.call(this),this.sourceObj=e,this.eventName=t,this.selector=n,this.options=r}return r(h,i),h.create=function(e,t,n,r){return a.isFunction(n)&&(r=n,n=void 0),new h(e,t,r,n)},h.setupSubscription=function(e,t,n,r,i){var o;if(function(e){return!!e&&"[object NodeList]"===p.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===p.call(e)}(e))for(var a=0,s=e.length;a<s;a++)h.setupSubscription(e[a],t,n,r,i);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var u=e;e.addEventListener(t,n,i),o=function(){return u.removeEventListener(t,n)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var l=e;e.on(t,n),o=function(){return l.off(t,n)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var c=e;e.addListener(t,n),o=function(){return c.removeListener(t,n)}}r.add(new f.Subscription(o))},h.prototype._subscribe=function(r){var e=this.sourceObj,t=this.eventName,n=this.options,i=this.selector;h.setupSubscription(e,t,i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=o.tryCatch(i).apply(void 0,e);n===s.errorObject?r.error(s.errorObject.e):r.next(n)}:function(e){return r.next(e)},r,n)},h}(i.Observable);t.FromEventObservable=u},function(e,t,n){"use strict";var o=n(1),a=n(38),s=n(27),u=n(100);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return s.isScheduler(i)?(r=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof o.Observable?e[0]:u.mergeAll(n)(new a.ArrayObservable(e,r))}},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(r){function e(e,t,n){r.call(this),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}return i(e,r),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(5).Subscriber);t.InnerSubscriber=r},function(e,t,n){"use strict";t.identity=function(e){return e}},function(e,t,n){"use strict";var r=n(200);t.distinctUntilChanged=function(e,t){return r.distinctUntilChanged(e,t)(this)}},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(5),o=n(37),a=n(26);t.distinctUntilChanged=function(t,n){return function(e){return e.lift(new s(t,n))}};var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(r){function e(e,t,n){r.call(this,e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}return i(e,r),e.prototype.compare=function(e,t){return e===t},e.prototype._next=function(e){var t=e;if(this.keySelector&&(t=o.tryCatch(this.keySelector)(e))===a.errorObject)return this.destination.error(a.errorObject.e);var n=!1;if(this.hasKey){if((n=o.tryCatch(this.compare)(this.key,t))===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},e}(r.Subscriber)},function(e,t,n){"use strict";var r=n(202);t.pairwise=function(){return r.pairwise()(this)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(5);t.pairwise=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(t){function e(e){t.call(this,e),this.hasPrev=!1}return r(e,t),e.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},e}(i.Subscriber)},function(e,t,n){"use strict";var r=n(204);t.first=function(e,t,n){return r.first(e,t,n)(this)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(5),a=n(205);t.first=function(t,n,r){return function(e){return e.lift(new o(t,n,r,e))}};var o=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),s=function(o){function e(e,t,n,r,i){o.call(this,e),this.predicate=t,this.resultSelector=n,this.defaultValue=r,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(e,o),e.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},e.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}n&&this._emit(e,t)},e.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},e.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(n)},e.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new a.EmptyError):(e.next(this.defaultValue),e.complete())},e}(i.Subscriber)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);t.EmptyError=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(n){function e(e,t){n.call(this),this.subject=e,this.subscriber=t,this.closed=!1}return r(e,n),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},e}(n(18).Subscription);t.SubjectSubscription=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(68),o=n(107),a=function(n){function e(e){n.call(this),this._value=e}return r(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=n.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){n.prototype.next.call(this,this._value=e)},e}(i.Subject);t.BehaviorSubject=a},function(e,t,n){"use strict";var r=n(1),i=n(108);r.Observable.from=i.from},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(58),a=n(102),s=n(103),u=n(210),l=n(211),c=n(38),h=n(212),f=n(65),p=n(1),d=n(213),m=n(60),r=function(n){function r(e,t){n.call(this,null),this.ish=e,this.scheduler=t}return i(r,n),r.create=function(e,t){if(null!=e){if("function"==typeof e[m.observable])return e instanceof p.Observable&&!t?e:new r(e,t);if(o.isArray(e))return new c.ArrayObservable(e,t);if(s.isPromise(e))return new u.PromiseObservable(e,t);if("function"==typeof e[f.iterator]||"string"==typeof e)return new l.IteratorObservable(e,t);if(a.isArrayLike(e))return new h.ArrayLikeObservable(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},r.prototype._subscribe=function(e){var t=this.ish,n=this.scheduler;return null==n?t[m.observable]().subscribe(e):t[m.observable]().subscribe(new d.ObserveOnSubscriber(e,n,0))},r}(p.Observable);t.FromObservable=r},function(e,t,n){"use strict";function i(e){var t=e.value,n=e.subscriber;n.closed||(n.next(t),n.complete())}function o(e){var t=e.err,n=e.subscriber;n.closed||n.error(t)}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(13),r=function(n){function r(e,t){n.call(this),this.promise=e,this.scheduler=t}return a(r,n),r.create=function(e,t){return new r(e,t)},r.prototype._subscribe=function(t){var n=this,e=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):e.then(function(e){n.value=e,n._isScalar=!0,t.closed||(t.next(e),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(e){s.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!t.closed)return r.schedule(i,0,{value:this.value,subscriber:t})}else e.then(function(e){n.value=e,n._isScalar=!0,t.closed||t.add(r.schedule(i,0,{value:e,subscriber:t}))},function(e){t.closed||t.add(r.schedule(o,0,{err:e,subscriber:t}))}).then(null,function(e){s.root.setTimeout(function(){throw e})})},r}(n(1).Observable);t.PromiseObservable=r},function(e,t,n){"use strict";function r(e){var t=+e.length;return isNaN(t)?0:0!==t&&function(e){return"number"==typeof e&&i.root.isFinite(e)}(t)?(t=function(e){var t=+e;return 0==t?t:isNaN(t)?t:t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0?0:h<t?h:t:t}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(13),a=n(1),s=n(65),u=function(n){function i(e,t){if(n.call(this),this.scheduler=t,null==e)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[s.iterator];if(!t&&"string"==typeof e)return new l(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[s.iterator]()}(e)}return o(i,n),i.create=function(e,t){return new i(e,t)},i.dispatch=function(e){var t=e.index,n=e.hasError,r=e.iterator,i=e.subscriber;if(!n){var o=r.next();return o.done?void i.complete():(i.next(o.value),e.index=t+1,i.closed?void("function"==typeof r.return&&r.return()):void this.schedule(e))}i.error(e.error)},i.prototype._subscribe=function(e){var t=this.iterator,n=this.scheduler;if(n)return n.schedule(i.dispatch,0,{index:0,iterator:t,subscriber:e});for(;;){var r=t.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed){"function"==typeof t.return&&t.return();break}}},i}(a.Observable);t.IteratorObservable=u;var l=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.str=e,this.idx=t,this.len=n}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=r(e)),this.arr=e,this.idx=t,this.len=n}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),h=Math.pow(2,53)-1},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(1),a=n(62),s=n(63),o=function(n){function o(e,t){n.call(this),this.arrayLike=e,(this.scheduler=t)||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(o,n),o.create=function(e,t){var n=e.length;return 0===n?new s.EmptyObservable:1===n?new a.ScalarObservable(e[0],t):new o(e,t)},o.dispatch=function(e){var t=e.arrayLike,n=e.index,r=e.length,i=e.subscriber;if(!i.closed){if(r<=n)return void i.complete();i.next(t[n]),e.index=n+1,this.schedule(e)}},o.prototype._subscribe=function(e){var t=this.arrayLike,n=this.scheduler,r=t.length;if(n)return n.schedule(o.dispatch,0,{arrayLike:t,index:0,length:r,subscriber:e});for(var i=0;i<r&&!e.closed;i++)e.next(t[i]);e.complete()},o}(i.Observable);t.ArrayLikeObservable=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(5),o=n(109);t.observeOn=function(t,n){return void 0===n&&(n=0),function(e){return e.lift(new a(t,n))}};var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=a;var s=function(r){function t(e,t,n){void 0===n&&(n=0),r.call(this,e),this.scheduler=t,this.delay=n}return i(t,r),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},t}(r.Subscriber);t.ObserveOnSubscriber=s;var u=function(e,t){this.notification=e,this.destination=t};t.ObserveOnMessage=u},function(e,t,n){"use strict";var r=n(1),i=n(110);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(1),i=n(216);r.Observable.timer=i.timer},function(e,t,n){"use strict";var r=n(217);t.timer=r.TimerObservable.create},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(218),r=n(1),s=n(28),u=n(27),l=n(111),i=function(r){function i(e,t,n){void 0===e&&(e=0),r.call(this),this.period=-1,this.dueTime=0,a.isNumeric(t)?this.period=Number(t)<1?1:Number(t):u.isScheduler(t)&&(n=t),u.isScheduler(n)||(n=s.async),this.scheduler=n,this.dueTime=l.isDate(e)?+e-this.scheduler.now():e}return o(i,r),i.create=function(e,t,n){return void 0===e&&(e=0),new i(e,t,n)},i.dispatch=function(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}},i.prototype._subscribe=function(e){var t=this.period,n=this.dueTime;return this.scheduler.schedule(i.dispatch,n,{index:0,period:t,subscriber:e})},i}(r.Observable);t.TimerObservable=i},function(e,t,n){"use strict";var r=n(58);t.isNumeric=function(e){return!r.isArray(e)&&0<=e-parseFloat(e)+1}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(13),o=function(n){function e(e,t){n.call(this,e,t),this.scheduler=e,this.work=t,this.pending=!1}return r(e,n),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},e.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?t:void i.root.clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},e}(n(220).Action);t.AsyncAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(n){function e(e,t){n.call(this)}return r(e,n),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},e}(n(18).Subscription);t.Action=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(n(222).Scheduler);t.AsyncScheduler=i},function(e,t,n){"use strict";var r=function(){function n(e,t){void 0===t&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},n.now=Date.now?Date.now:function(){return+new Date},n}();t.Scheduler=r},function(e,t,n){"use strict";var r=n(1),i=n(224);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";var r=n(225);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return r.startWith.apply(void 0,e)(this)}},function(e,t,n){"use strict";var i=n(38),o=n(62),a=n(63),s=n(226),u=n(27);t.startWith=function(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];return function(e){var t=r[r.length-1];u.isScheduler(t)?r.pop():t=null;var n=r.length;return 1===n?s.concat(new o.ScalarObservable(r[0],t),e):1<n?s.concat(new i.ArrayObservable(r,t),e):s.concat(new a.EmptyObservable(t),e)}}},function(e,t,n){"use strict";var r=n(27),i=n(110),o=n(108),a=n(227);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&r.isScheduler(e[1])?o.from(e[0]):a.concatAll()(i.of.apply(void 0,e))}},function(e,t,n){"use strict";var r=n(100);t.concatAll=function(){return r.mergeAll(1)}},function(e,t,n){"use strict";var r=n(1),i=n(229);r.Observable.prototype.concatMap=i.concatMap},function(e,t,n){"use strict";var r=n(230);t.concatMap=function(e,t){return r.concatMap(e,t)(this)}},function(e,t,n){"use strict";var r=n(101);t.concatMap=function(e,t){return r.mergeMap(e,t,1)}},function(e,t,n){"use strict";var r=n(1),i=n(232);r.Observable.prototype.delay=i.delay},function(e,t,n){"use strict";var r=n(28),i=n(233);t.delay=function(e,t){return void 0===t&&(t=r.async),i.delay(e,t)(this)}},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(28),o=n(111),a=n(5),s=n(109);t.delay=function(e,t){void 0===t&&(t=r.async);var n=o.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(n,t))}};var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delay,this.scheduler))},e}(),l=function(r){function t(e,t,n){r.call(this,e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return i(t,r),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(0<n.length){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new c(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(s.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete())},t}(a.Subscriber),c=function(e,t){this.time=e,this.notification=t}},function(e,t,n){"use strict";var r=n(1),i=n(235);r.Observable.prototype.delayWhen=i.delayWhen},function(e,t,n){"use strict";var r=n(236);t.delayWhen=function(e,t){return r.delayWhen(e,t)(this)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(5),o=n(1),a=n(66),s=n(64);t.delayWhen=function(t,n){return n?function(e){return new c(e,n).lift(new u(t))}:function(e){return e.lift(new u(t))}};var u=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delayDurationSelector))},e}(),l=function(n){function e(e,t){n.call(this,e),this.delayDurationSelector=t,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return r(e,n),e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(e,t){this._error(e)},e.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},e.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),n=null;return-1!==t&&(n=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),n},e.prototype.tryDelay=function(e,t){var n=s.subscribeToResult(this,e,t);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(t)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(a.OuterSubscriber),c=function(n){function e(e,t){n.call(this),this.source=e,this.subscriptionDelay=t}return r(e,n),e.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new h(e,this.source))},e}(o.Observable),h=function(n){function e(e,t){n.call(this),this.parent=e,this.source=t,this.sourceSubscribed=!1}return r(e,n),e.prototype._next=function(e){this.subscribeToSource()},e.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(i.Subscriber)},function(e,t,n){"use strict";var r=n(1),i=n(238);r.Observable.prototype.bufferWhen=i.bufferWhen},function(e,t,n){"use strict";var r=n(239);t.bufferWhen=function(e){return r.bufferWhen(e)(this)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(18),o=n(37),a=n(26),s=n(66),u=n(64);t.bufferWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))},e}(),c=function(n){function e(e,t){n.call(this,e),this.closingSelector=t,this.subscribing=!1,this.openBuffer()}return r(e,n),e.prototype._next=function(e){this.buffer.push(e)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(e,t,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var n=o.tryCatch(this.closingSelector)();n===a.errorObject?this.error(a.errorObject.e):(e=new i.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(u.subscribeToResult(this,n)),this.subscribing=!1)},e}(s.OuterSubscriber)},function(e,t,n){"use strict";var r=n(1),i=n(241);r.Observable.prototype.debounceTime=i.debounceTime},function(e,t,n){"use strict";var r=n(28),i=n(242);t.debounceTime=function(e,t){return void 0===t&&(t=r.async),i.debounceTime(e,t)(this)}},function(e,t,n){"use strict";function i(e){e.debouncedNext()}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(5),a=n(28);t.debounceTime=function(t,n){return void 0===n&&(n=a.async),function(e){return e.lift(new s(t,n))}};var s=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.dueTime,this.scheduler))},e}(),u=function(r){function e(e,t,n){r.call(this,e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return o(e,r),e.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(i,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},e}(r.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.userMessageAnimation$=t.brandMessageAnimation$=t.avatarQuery$=t.messageMotion$=t.messageAvatarResponded$=t.messageMounted$=void 0;var i=n(1),o=n(68);n(61),n(99),n(104),n(67),n(244),n(105);var a=r(n(3)),s=r(n(25)),u=r(n(22)),l=r(n(11)),c=r(n(39)),h=n(106),f=r(n(56)),p=function(){return i.Observable.fromEvent(a.default,"hu-lb-message-mounted")},d=function(){return i.Observable.fromEvent(a.default,"hu-lb-response-avatar-coords")};t.messageMounted$=p,t.messageAvatarResponded$=d,t.messageMotion$=function(){return i.Observable.merge(p(),d()).distinctUntilChanged().pairwise().map(function(e){return e.filter(function(e){return void 0!==e})[0]}).first()},t.avatarQuery$=function(){return i.Observable.fromEvent(a.default,"hu-lb-query-avatar-coords")},t.brandMessageAnimation$=function(e){return(new o.Subject).concatMap(function(n){return i.Observable.from(["brand_init","brand_avatar_in","brand_bubble_left_in","brand_typing_on","brand_typing_off","brand_bubble_resize","brand_input_enable","brand_flow_end"]).concatMap(function(e){var t=u.default.getState().config.typing_options;switch(e){case"brand_init":return i.Observable.of(e).delay(0);case"brand_avatar_in":return i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.fromEvent(a.default,"hu-lb-avatar-translation-end"),i.Observable.timer(250))}).first();case"brand_bubble_left_in":return i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.fromEvent(a.default,"hu-lb-bubble-in"),i.Observable.timer(250))}).first();case"brand_typing_on":return n.typing?l.default.hasRoleType(n,"engage")?(h.typingState$.next({key:n.key,state:n.typingDelay}),f.default.endEngageFlag?(s.default.append(c.default.format(new Date,"HH:mm:ss.ff")+": End Engage Flag was True. Disabling typing...","landbot.messages["+n.key+"]"),f.default.down("endEngageFlag"),i.Observable.of(e).delay(0)):(s.default.append(c.default.format(new Date,"HH:mm:ss.ff")+": Typing enabled till timer || engage-end event received","landbot.messages["+n.key+"]"),i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.timer(n.typingDelay),i.Observable.fromEvent(a.default,"hu-lb-engage-end"))}))):!0===t.state?(s.default.append(c.default.format(new Date,"HH:mm:ss.ff")+": Typing enabled","landbot.messages["+n.key+"]"),h.typingState$.next({key:n.key,state:n.typingDelay}),i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.timer(n.typingDelay),i.Observable.fromEvent(a.default,"hu-lb-key-arrowdown"))})):i.Observable.of(e).delay(0):(s.default.append(c.default.format(new Date,"HH:mm:ss.ff")+": Typing disabled","landbot.messages["+n.key+"]"),h.typingState$.next({key:n.key,state:!1}),i.Observable.of(e).delay(0));case"brand_typing_off":return f.default.down("endEngageFlag"),h.typingState$.next({key:n.key,state:!1}),i.Observable.of(e).delay(0);case"brand_bubble_resize":return i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.fromEvent(a.default,"hu-lb-bubble-resize-end"),i.Observable.timer(0))}).first();case"brand_input_enable":return i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.fromEvent(a.default,"hu-lb-input-resize-end"),i.Observable.timer(0))}).first();case"brand_flow_end":default:return i.Observable.of(e).delay(0)}})})},t.userMessageAnimation$=function(e){return(new o.Subject).concatMap(function(e){return i.Observable.from(["user_input_out","user_bubble_right_in","user_bubble_resize","user_flow_end"]).concatMap(function(e){switch(e){case"user_input_out":return i.Observable.of(e).delay(0);case"user_bubble_right_in":return i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.fromEvent(a.default,"hu-lb-bubble-in"),i.Observable.timer(350))}).first();case"user_bubble_resize":return i.Observable.of(e).delayWhen(function(){return i.Observable.merge(i.Observable.fromEvent(a.default,"hu-lb-bubble-resize-end"),i.Observable.timer(350))}).first();case"user_flow_end":default:return i.Observable.of(e).delay(0)}})})}},function(e,t,n){"use strict";var r=n(1),i=n(245);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";var r=n(246);t.map=function(e,t){return r.map(e,t)(this)}},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(5);t.map=function(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new o(t,n))}};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();t.MapOperator=o;var a=function(r){function e(e,t,n){r.call(this,e),this.project=t,this.count=0,this.thisArg=n||this}return i(e,r),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(r.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenMessage=void 0;var i=r(n(248)),o=r(n(266));t.HiddenMessage=o.default,t.default=i.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_dec,_class,_preact=__webpack_require__(0),_preactRedux=__webpack_require__(2),_actions=__webpack_require__(55),_reactive=__webpack_require__(17),_reactive2=_interopRequireDefault(_reactive),_EventDriver=__webpack_require__(3),_EventDriver2=_interopRequireDefault(_EventDriver),_Logger=__webpack_require__(25),_Logger2=_interopRequireDefault(_Logger),_Avatar=__webpack_require__(249),_Avatar2=_interopRequireDefault(_Avatar),_constants=__webpack_require__(112),_Animate=__webpack_require__(29),_DateUtils=__webpack_require__(39),_DateUtils2=_interopRequireDefault(_DateUtils),_ChatUtils=__webpack_require__(11),_ChatUtils2=_interopRequireDefault(_ChatUtils),_SpecialUtils=__webpack_require__(69),_SpecialUtils2=_interopRequireDefault(_SpecialUtils),_DomUtils=__webpack_require__(4),_DomUtils2=_interopRequireDefault(_DomUtils),renderFlags=_reactive2.default.renderFlags,typingState$=_reactive2.default.typingState$,queueMessagesRenderSubject$=_reactive2.default.queueMessagesRenderSubject$,inputAnimation$=_reactive2.default.inputAnimation$,messageMotion$=_reactive2.default.messageMotion$,avatarQuery$=_reactive2.default.avatarQuery$,brandMessageAnimation$=_reactive2.default.brandMessageAnimation$,userMessageAnimation$=_reactive2.default.userMessageAnimation$,_get=__webpack_require__(8),mapStateToProps=function(e){return{error_text:e.config.text.error,avatar_shape:e.config.avatar_shape,logo:e.config.logo,avatar_url:e.config.avatar_url,brand_name:e.config.brand_name,engage_protocol:e.config.engage_protocol,typing_options:e.config.typing_options,fixed:e.input.fixed,messagesList:e.messagesList,agents:e.agents,chat:e.chat,lastAvatar:e.chat.lastAvatar,fixed_avatar:e.chat.fixed_avatar}},mapDispatchToProps=function(e){return{enableEngage:function(){return e({type:_actions.ENABLE_ENGAGE})}}},Message=(_dec=(0,_preactRedux.connect)(mapStateToProps,mapDispatchToProps))(_class=function(_Component){function Message(t){_classCallCheck(this,Message);var n=_possibleConstructorReturn(this,(Message.__proto__||Object.getPrototypeOf(Message)).call(this,t));if(n.state={typing:t.data.typing,url:"image"===t.data.type?"string"==typeof t.data.url?t.data.url:n.getUrls([t.data.url])[0]:t.data.url,urls:"multiple_images"===t.data.type?"string"==typeof t.data.urls[0]?t.data.urls:n.getUrls(t.data.urls):[],avatarVisibility:!0,eval:!1},n.messageElement=null,n.messageInfo=null,n.messageContentRef=null,n.messageInnerContent=null,n.bubbleElem=null,n.motion=!1,n.mobileHA=t.mobileHA||!1,n.setupListeners(),n.scrollBottom=t.scrollBottom,n.fadeOut=n.fadeOut.bind(n),n.props.animate){var e="brand"===t.author?brandMessageAnimation$(t.data):userMessageAnimation$(t.data);e.subscribe({next:function(e){switch(e){case"brand_init":n.scrollBottom(250);break;case"brand_avatar_in":case"brand_bubble_left_in":case"brand_typing_on":break;case"brand_typing_off":n.setBubbleSize(250);break;case"brand_bubble_resize":break;case"brand_input_enable":inputAnimation$.next("input_enable");break;case"brand_flow_end":_EventDriver2.default.emit("hu-lb-message-flow-end");break;case"user_input_out":inputAnimation$.next("input_out"),n.setUserMessageSize();break;case"user_bubble_right_in":case"user_bubble_resize":break;case"user_flow_end":t.engage_protocol&&(t.fixed||setTimeout(function(){renderFlags.initEngageFlag&&t.chat.engage?(queueMessagesRenderSubject$.next(null),queueMessagesRenderSubject$.next({key:"engage_"+renderFlags.engageIndex++,type:"text",message:t.error_text,samurai:n.props.lastAvatar||-1,role:["engage","end-flow"],extra:{hide_textbox:!0}})):renderFlags.initEngageFlag&&!t.chat.engage&&t.enableEngage()},500)),_EventDriver2.default.emit("hu-lb-message-flow-end")}}}),e.next(n.props.data)}return n.__fixed_avatar=!0===n.props.fixed_avatar?n.props.avatar_url:n.props.fixed_avatar,n}return _inherits(Message,_Component),_createClass(Message,[{key:"setupListeners",value:function(){var t=this;messageMotion$().subscribe({next:function(e){t.motion&&!t.rendered&&(t.rendered=!0,t.setAvatarTranslation(e))}})}},{key:"setupMountedListeners",value:function(){var n=this;if("brand"===this.props.author)var r=avatarQuery$().subscribe({next:function(e){if(n.messageElement&&e===n.props.data.key){r.unsubscribe();var t=n.messageElement.offsetTop+n.messageElement.offsetHeight;_EventDriver2.default.emit("hu-lb-response-avatar-coords",t),n.setState({avatarVisibility:!1})}}});var e=this.state.typing,t=this.props.data.key;if(e)var i=typingState$.subscribe({next:function(e){e.key===t&&(!1===e.state?(_Logger2.default.append(["%c"+_DateUtils2.default.format(new Date,"HH:mm:ss.ff")+": Typing OFF","color:blue"],"landbot.messages["+t+"]"),i&&i.unsubscribe(),_EventDriver2.default.emit("hu-lb-bubble-typing-end")):(_Logger2.default.append(["%c"+_DateUtils2.default.format(new Date,"HH:mm:ss.ff")+": Typing ON","color:blue"],"landbot.messages["+t+"]"),n.setState({typing:e.state})))}});_EventDriver2.default.on("hu-reset-chat",this.fadeOut)}},{key:"componentDidMount",value:function(){this.setupMountedListeners(),_EventDriver2.default.emit("hu-lb-message-mounted"),this.motion||(this.rendered=!0),this.state.eval||this.executeScripts(),this.messageElement&&this.messageElement.removeAttribute("style")}},{key:"componentWillUnmount",value:function(){_EventDriver2.default.removeListener("hu-reset-chat",this.fadeOut),this.messageElement&&this.messageElement.removeAttribute("style"),this.messageContentRef&&this.messageContentRef.removeAttribute("style"),this.messageInnerContent&&this.messageInnerContent.removeAttribute("style")}},{key:"shouldComponentUpdate",value:function(e,t){for(var n=["url","avatarVisibility","eval","typing"],r=!1,i=0;i<n.length;i++)this.state[n[i]]!==t[n[i]]&&(r=!0);JSON.stringify(this.state.urls)!==JSON.stringify(t.urls)&&(r=!0);for(var o=this.props.data,a=["message","title","url"],s=0;s<a.length;s++)o[a[s]]!==e.data[a[s]]&&(r=!0);for(var u=["extraClass","avatar_shape","logo","avatar_url","fixed_avatar"],l=0;l<u.length;l++)this.props[u[l]]!==e[u[l]]&&(r=!0);return JSON.stringify(this.props.agents)!==JSON.stringify(e.agents)&&(r=!0),JSON.stringify(this.props.data.role)!==JSON.stringify(e.data.role)&&(r=!0),r}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.role?this.props.data.role:[],n=e.data.role?e.data.role:[];-1<t.indexOf("engage")&&-1===n.indexOf("engage")&&(this.__fixed_avatar=!0===this.props.fixed_avatar?this.props.avatar_url:this.props.fixed_avatar)}},{key:"componentDidUpdate",value:function(e){var t=this.props.data.key,n=e.data.role?e.data.role:[],r=this.props.data.role?this.props.data.role:[];-1<n.indexOf("engage")&&-1===r.indexOf("engage")&&("image"===this.props.data.type&&this.setState({url:this.props.data.url}),"multiple_images"===this.props.data.type&&this.setState({urls:this.props.data.urls}),_EventDriver2.default.emit("hu-lb-engage-end"),_Logger2.default.append(_DateUtils2.default.format(new Date,"HH:mm:ss.ff")+": Sent endEngage event","landbot.messages["+t+"]"),this.executeScripts())}},{key:"fadeOut",value:function(){var e=this;(0,_Animate.Animate)(this.messageElement,{opacity:0},{duration:500},function(){e.messageElement.style.opacity=0})}},{key:"getUrls",value:function(n){for(var r=this,i=[],e=0;e<n.length;e++)!function(t){var e=new FileReader;e.readAsDataURL(n[t]),e.onload=function(e){i[t]=e.target.result,r.setState({url:i[0],urls:i})}}(e);return Array(n.length).fill(null)}},{key:"messageEnvironment",value:function(e){var t=this.props.messagesList,n=this.getMessageIndex(e);return-1===n?{prev:void 0,next:void 0}:{prev:t[n-1],next:t[n+1]}}},{key:"getMessageIndex",value:function(e){for(var t=this.props.messagesList,n=0;n<t.length;n++)if(t[n].key===e)return n;return-1}},{key:"getInfoRelativeCoords",value:function(e){return this.messageElement?e-(this.messageElement.offsetTop+this.messageElement.offsetHeight):0}},{key:"setAvatarTranslation",value:function(e){if(this.messageInfo){var t=this.messageInfo,n=this.getInfoRelativeCoords(e);t.style.transition="transform 0ms",t.style.visibility="hidden",t.style.transform="translateY("+n+"px)",t.style.visibility="",t.addEventListener("transitionend",function(e){"transform"===e.propertyName&&_EventDriver2.default.emit("hu-lb-avatar-translation-end")}),setTimeout(function(){t.style.transition="transform .25s",t.style.transform="translateY(0px)"},10)}}},{key:"setBubbleSize",value:function(e){var t=this,n=e.duration,r=void 0===n?250:n;if(this.bubbleElem){var i=this.bubbleElem,o=this.messageElement.cloneNode(!0);o.className=o.className.replace(/\sanimate/,"");var a=o.querySelector(".hu-message-bubble");a.style.width="auto",a.style.height="auto",document.getElementById("hu-msn-sandbox").appendChild(o);var s=_DomUtils2.default.getComputedStyle(a).width,u=_DomUtils2.default.getComputedStyle(a).height,l="upper_image"===_ChatUtils2.default.getMessageType(this.props.data)?"block":"inline-block";this.setState({typing:!1},function(){(0,_Animate.Animate)(i,{width:s,height:u},{duration:r,mobileHA:t.mobileHA,complete:function(){_EventDriver2.default.emit("hu-lb-bubble-resize-end"),(0,_Animate.Animate)(t.messageInnerContent,{opacity:1},{duration:0,display:l,mobileHA:t.mobileHA}),setTimeout(function(){i.style.width="auto",i.style.height="auto"},200)}},function(){i.style.width="auto",i.style.height="auto",t.messageInnerContent.style.display=l})}),this.scrollBottom(250);for(var c=document.getElementById("hu-msn-sandbox");c.firstChild;)c.removeChild(c.firstChild)}}},{key:"setUserMessageSize",value:function(){var e=this.messageElement,t=_DomUtils2.default.getComputedStyle(e.childNodes[0]).height;(0,_Animate.Animate)(e,{height:t},{duration:350,mobileHA:this.mobileHA,complete:function(){_EventDriver2.default.emit("hu-lb-bubble-resize-end"),setTimeout(function(){e.style.height="auto"},400)}},function(){e.style.height="auto"}),this.scrollBottom(350)}},{key:"executeScripts",value:function executeScripts(){var div=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.messageInnerContent;if(this.props.animate){for(var evalScript=function evalScript(scriptText){try{eval(scriptText)}catch(e){console.error(e)}},messageContent=this.props.data.title||this.props.data.message,scripts=_DomUtils2.default.getElementsByTagName("script",messageContent),extraScript=_get(this.props.data,"extra.script",""),richTextScripts=_DomUtils2.default.getScriptsFromText("script",this.props.data.rich_text),i=0;i<scripts.length;i++)evalScript(scripts[i].textContent);for(var j=0;j<richTextScripts.length;j++)evalScript(richTextScripts[j].textContent);evalScript(extraScript),this.setState({eval:!0})}}},{key:"getAgent",value:function(){var e=this.props,t=e.data,n=e.agents,r=(e.logo,e.avatar_url),i=e.brand_name,o=UmiCoreConfig.staticUrl+"landbot/files/lb-default-avatar.jpg";return this.__fixed_avatar?{avatar:this.__fixed_avatar,name:i}:0<t.samurai?n[t.samurai]?n[t.samurai]:{avatar:o,name:"landbot"}:t.samurai<-1&&n[t.samurai]?n[t.samurai]:{avatar:r,name:i}}},{key:"onBubbleClick",value:function(){this.state.typing&&_EventDriver2.default.emit("hu-lb-key-arrowdown")}},{key:"getYoutubeURL",value:function(e){var t="",n=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return n&&11==n[2].length&&(t="https://www.youtube.com/embed/"+n[2]),t}},{key:"render",value:function(e,t){var n=this,r=e.avatar_shape,i=e.avatar_url,o=e.author,a=e.timestamp,s=e.data,u=(e.agents,e.animate),l=s.key,c=s.type,h=(s.message,s.title,s.file_name,s.brand,s.url_referral,t.typing),f=_get(e,"data.extra.extraClass",""),p=t.url,d=t.urls,m=t.avatarVisibility,v=_DateUtils2.default.format(a||Date.now(),"HH:mm"),y=_constants.mapMessagesContent[_ChatUtils2.default.getMessageType(s)],g=(0,_preact.h)(y,{animate:u,data:s,author:o,url:p,urls:d,messageInnerContent:function(e){return n.messageInnerContent=e},getYoutubeURL:this.getYoutubeURL.bind(this)}),b=this.messageEnvironment(l),_=b.prev,w=b.next,k=this.motion,x=this.rendered,C=!1,S=!1,E=m,O=0<s.samurai,T=this.getAgent();u&&"brand"===o&&(void 0!==_?"user"===_.author?C=!0:"brand"===_.author&&(_.data.samurai!==s.samurai?C=!0:(C=!1,_EventDriver2.default.emit("hu-lb-avatar-translation-end")),x||k||(this.motion=!0),_EventDriver2.default.emit("hu-lb-query-avatar-coords",_.key)):C=!0),void 0!==w&&("user"===w.author?E=!0:"brand"===w.author&&(s.samurai!==w.data.samurai?S=E=!0:E=!1));var N=["animate","left-in"],P=[u,C].map(function(e,t){return!!e&&N[t]}).filter(function(e){return e}).join(" ");return(0,_preact.h)("div",{id:l,className:"hu-message "+o+" "+P+" "+f+(S?" splitter":""),"data-type":c,"data-samurai":s.samurai,"data-role":(e.data.role||[]).join(",")||null,ref:function(e){return n.messageElement=e}},(0,_preact.h)("div",{className:"hu-message-container"},(0,_preact.h)("div",{className:"hu-message-margin"},i&&(0,_preact.h)("div",{className:"hu-message-info"+(E?" visible":""),ref:function(e){return n.messageInfo=e}},"brand"===o&&(0,_preact.h)(_Avatar2.default,{avatar_shape:r,isAgent:O,agent:T}),(0,_preact.h)("div",{className:"hu-message-date hu-a-center hu-s-10 hu-color_contrast"},(0,_preact.h)("span",null,O?T.name:v))),(0,_preact.h)("div",{key:l,className:"hu-message-content",ref:function(e){return n.messageContentRef=e}},(0,_preact.h)("div",{className:"hu-message-bubble hu-position-relative"+(h?" typing":"")+("brand"===o?" hu-background-color_bot-message-background":" hu-background-color_user-message-background"),ref:function(e){return n.bubbleElem=e},onClick:this.onBubbleClick.bind(this)},"brand"===o&&(0,_preact.h)("div",{className:"typing-spinner"},(0,_preact.h)("div",{className:"ball hu-background-color_accent"}),(0,_preact.h)("div",{className:"ball hu-background-color_accent"}),(0,_preact.h)("div",{className:"ball hu-background-color_accent"})),g)))))}}]),Message}(_preact.Component))||_class;exports.default=Message},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){var t=e.avatar_shape,n=e.isAgent,r=e.agent;return(0,i.h)("div",{key:r.avatar,className:"hu-message-avatar hu-background-color_contrast-fade "+t+(n?" agent":"")},(0,i.h)("div",{className:"hu-message-avatar_img hu-background-contain hu-width-full hu-height-full",style:{backgroundImage:r.avatar?'url("'+r.avatar+'")':null}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=n(4),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.data,n=e.author,r=e.messageInnerContent;return(0,i.h)("p",{className:"hu-message-text "+("brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:r},t.rich_text?(0,i.h)("div",{className:"hu-rich_text",dangerouslySetInnerHTML:{__html:t.rich_text||null}}):a.default.getVirtualDOM(t.message))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function o(e){this.DEFAULTS={linkify:{enable:!0,class:"hu-link",class_big:"hu-big"},code:{enable:!0,class:"hu-code"},html:{enable:!1},symbols:{"*":{class:"hu-bold"},_:{class:"hu-italic"}}},this.extendDefaults=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(e[n]=t[n]);return e},this.options=this.extendDefaults(this.DEFAULTS,e),this.transform=function(e,t){if(e instanceof Node==0)throw new Error("[RichText]: 1st argument must be a Node");if("string"!=typeof t)throw new Error("[RichText]: 2nd argument must be a String");if((e.innerHTML="")!=t){var n=new o.Transformer(t,this.options);this.options.html.enable&&n.htmlInjection(),this.options.code.enable&&n.codify(),n.divideByLine(),n.domify(),!0===this.options.linkify.enable&&n.linkify();for(var r=n.sections,i=0;i<r.length;i++)e.appendChild(r[i]);return r}}};h.Transformer=function(e,t){this.raw=e,this.sections=[e],this.utils=new h.Utils(t),this.htmlInjection=function(){var t=this,n=new RegExp(/{html}([\s\S]*?){\/html}/g);this.sections=this.utils.splitStringFocus(this.sections,n),this.sections=this.sections.map(function(e){return t.utils.convertToHtml(e,n)})},this.codify=function(){var t=this,n=new RegExp(/```([\s\S]*?)```/g);this.sections=this.utils.splitStringFocus(this.sections,n),this.sections=this.sections.map(function(e){return t.utils.convertToCode(e,n)})},this.divideByLine=function(){this.sections=this.utils.splitStringFocus(this.sections,"\n")},this.domify=function(){var n=this;this.sections=this.sections.map(function(e,t){return n.utils.domifyString(e)}),this.sections=this.utils.levelUpArray(this.sections)},this.linkify=function(){var n=this;this.sections=this.sections.map(function(e,t){return n.utils.linkifyNode(e)}),this.sections=this.utils.levelUpArray(this.sections)}},h.FormatNode=function(e){this.index=-1<e.index?e.index:-1,this.symbols=e.symbols||[],this.hasSymbol=function(e){return-1<this.symbols.indexOf(e)},this.removeSymbol=function(n){this.symbols=this.symbols.filter(function(e,t){return e!=n})}},h.Utils=function(e){this.symbols=e.symbols,this.symbolsArr=Object.keys(e.symbols),this.linkify=e.linkify,this.code=e.code,this.splitStringFocus=function(e,t){var n=t instanceof RegExp?t:new RegExp(t,"g"),r=e.map(function(e,t){return"string"==typeof e?e.replace(n,"!$&!").split("!"):e});return this.levelUpArray(r.slice(0))},this.levelUpArray=function(e){for(var t=0;t<e.length;t++)e[t]instanceof Array?e.splice.apply(e,[t,1].concat(e[t])):(""==e[t].textContent&&"BR"!=e[t].tagName&&""==e[t].innerHTML||""==e[t])&&e.splice(t--,1);return e},this.domifyString=function(e){if("string"!=typeof e)return e;if("\n"==e)return document.createElement("br");var t=this.getFormatNodes(e);t=this.cleanFormatNodes(t.slice(0));var n=this.getNodeSections(e,t);return this.nodeProcessor(n,t)},this.getFormatNodes=function(e){for(var n=this,t=[""," ","\n","\t","(","[","{","'",'"',"`","",""],r=[" ","\n","\t",")","]","}","'",'"',"`","!","?",",",".",";",":"],i=[],o=!1,a=0;a<e.length;a++){var s=this.discoverSymbol(e.slice(a));if(1==s.state){var u=i[i.length-1];if(1==(!!u&&-1<u.symbols.indexOf(s.symbol))){var l=e.charAt(a+s.symbol.length);(function(e){if(!e||""==e)return!0;var t=n.composeRegExp(n.symbolsArr,"exclusive");return null!=e.match(t)}(e.slice(a+s.symbol.length).split(n.composeRegExp(r))[0])||-1<r.indexOf(l))&&i.push(this.createSubstractorNode(s.symbol,a,u)),o=!0}else{var c=e.charAt(a-1);(o||-1<t.indexOf(c))&&(i.push(this.createAdderNode(s.symbol,a,u)),o=!0)}}else o=!1;a+=s.symbol?s.symbol.length-1:0}return i[0]&&0==i[0].index||i.unshift(new h.FormatNode({index:0,symbols:[]})),i},this.discoverSymbol=function(n){var e,t=this.symbolsArr;return{state:null!=(e=(t=t.filter(function(e,t){return e==n.slice(0,e.length)})).sort(function(e,t){return t.length-e.length})[0]),symbol:e}},this.createSubstractorNode=function(n,e,t){return new h.FormatNode({index:e,symbols:t.symbols.slice(0).filter(function(e,t){return e!=n})})},this.createAdderNode=function(e,t,n){return new h.FormatNode({index:t,symbols:n?(r=n.symbols.slice(0),r.push(e),r):[e]});var r},this.cleanFormatNodes=function(e){var t=e.length-1;if(!e[t])return e;if(0==e[t].symbols.length)return e;for(var n=e.slice(0),r=e[t].symbols,i=r.map(function(){return!1});-1<t;){for(var o=0;o<r.length;o++)n[t].hasSymbol(r[o])||(i[o]=!0),i[o]||n[t].removeSymbol(r[o]);n[t+1]&&JSON.stringify(n[t+1].symbols)==JSON.stringify(n[t].symbols)&&n.splice(t+1,1),t--}return n},this.getNodeSections=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r].index,o=t[r+1]?t[r+1].index:e.length;n.push(e.slice(i,o))}return n},this.nodeProcessor=function(e,r){var i=this;return e.map(function(e,t){var n=!!r[t-1]&&r[t-1].symbols;return i.spanify(e,r[t].symbols,n)})},this.spanify=function(e,t,n){var r,i,o=this;if("string"!=typeof e)return e;r=n?t.concat(n):t,i=this.composeRegExp(r,"begins"),e=e.replace(i,"");var a=t.map(function(e){return o.symbols[e].class});if(0<a.length){var s=document.createElement("span");return s.className="rich-text "+a.join(" "),s.textContent=e,s}return document.createTextNode(e)},this.escapeRegExp=function(e){if(!e)return"";var t=RegExp("["+["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"].join("\\")+"]","g");return e.replace(t,"\\$&")},this.composeRegExp=function(e,t){var n=this;return"begins"===t?new RegExp("^("+e.map(function(e){return n.escapeRegExp(e)}).join("|")+")+","g"):"exclusive"===t?new RegExp("^("+e.map(function(e){return n.escapeRegExp(e)}).join("|")+")+$","g"):new RegExp("("+e.map(function(e){return n.escapeRegExp(e)}).join("|")+")+","g")},this.convertToCode=function(e,t){if("string"!=typeof e||""===e)return e;if(null===e.match(t))return e;var n=document.createElement("span");return n.className="rich-text "+this.code.class,n.textContent=e.replace(t,"$1"),n},this.convertToHtml=function(e,t){if("string"!=typeof e||""===e)return e;if(null===e.match(t))return e;var n=document.createElement("div");return n.className="rich-text rich-text-noop",n.innerHTML=e.replace(t,"$1").trim(),n},this.linkifyNode=function(e){if(e.className&&-1<e.className.indexOf("rich-text-noop"))return e;for(var t,l=this,n=/(http(s)?(:\/\/))?(www\.)?([-\w\.]+@)?(?:(?:[-\w\.]+(\.(?:nl|se|no|es|milru|fr|es|uk|ca|de|jp|au|us|ch|it|io|org|com|net|int|edu|mil|arpa|ly|in)))|(?:(?:(?:[0-9]{1,3}\.){3}[0-9]{1,3})|(?:localhost)(?:[0-9]{1,5})?))([-a-zA-Z0-9:%_\+.~#?&\/\/=@]*)(?:(?:\[.+?\])*(?:!!)*)/gi,r=e.textContent,i=[];t=n.exec(r);){var o=document.createTextNode(r.slice(0,t.index)),a=function(e){var t="!!"==e.slice(e.length-2,e.length),n=null!=e.match(/\[.*\]/g),r="http"==e.slice(0,4),i=/^[a-zA-Z0-9.!#$%&*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e),o=document.createElement("a"),a=t?l.linkify.class+" "+l.linkify.class_big:l.linkify.class,s=t?e.slice(0,e.length-2):e;s=n?s.replace(/(^.*)\[(.*)\](.*)/g,"$2"):s;var u=t?e.slice(0,e.length-2):e;return u=n?u.replace(/(^.*)\[(.*)\](.*)/g,"$1"):u,u=r||i?u:"http://".concat(u),u=i?"mailto:".concat(u):u,o.className="rich-text "+a,o.href=u,o.target=i?"_top":"_blank",o.textContent=s,o}(r.slice(t.index,t.index+t[0].length));i.push(o,a),r=r.slice(t.index+t[0].length),n.lastIndex=0}if(0<i.length&&""!=r&&i.push(document.createTextNode(r)),0<i.length){if(e.innerHTML="",!(e instanceof HTMLElement))return i;for(var s=0;s<i.length;s++)""!=i[s].textContent&&e.appendChild(i[s])}return[e]}},h.VERSION="2.0.5";var r=new h({linkify:{enable:!0,class:"hu-link",class_big:"hu-size-big"},code:{enable:!0,class:"hu-code"},html:{enable:!0},symbols:{"*":{class:"hu-w-bold"},_:{class:"hu-st-italic"},"%h1":{class:"hu-s-20"},"%c1":{class:"hu-color_accent"},"%c2":{class:"hu-color_dark"},"[vcenter]":{class:"hu-v-middle"}}});t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=r(n(8)),s=r(n(9)),u=r(n(69));t.default=function(e){var t=e.data,n=e.author,r=e.messageInnerContent,i=s.default.getHref((0,a.default)(t,"extra.socialUrl"));return(0,o.h)("p",{className:"hu-message-text "+("brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:r},t.message,(0,o.h)("div",{className:"referral-buttons"},(0,o.h)("a",{href:u.default.getReferralUrl("facebook",i),target:"_blank",className:"menu-button referral-facebook hu-a-center hu-s-13"},(0,o.h)("svg",{style:"width:24px;height:24px",viewBox:"0 0 24 24"},(0,o.h)("path",{fill:"#FFFFFF",d:"M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6A4,4 0 0,1 14,2H17Z"})),(0,o.h)("span",null,"Facebook")),(0,o.h)("a",{href:u.default.getReferralUrl("twitter",i),target:"_blank",className:"menu-button referral-twitter hu-a-center hu-s-13"},(0,o.h)("svg",{style:"width:24px;height:24px",viewBox:"0 0 24 24"},(0,o.h)("path",{fill:"#FFFFFF",d:"M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"})),(0,o.h)("span",null,"Twitter")),(0,o.h)("a",{href:u.default.getReferralUrl("linkedin",i),target:"_blank",className:"menu-button referral-linkedin hu-a-center hu-s-13"},(0,o.h)("svg",{style:"width:24px;height:24px",viewBox:"0 0 24 24"},(0,o.h)("path",{fill:"#FFFFFF",d:"M21,21H17V14.25C17,13.19 15.81,12.31 14.75,12.31C13.69,12.31 13,13.19 13,14.25V21H9V9H13V11C13.66,9.93 15.36,9.24 16.5,9.24C19,9.24 21,11.28 21,13.75V21M7,21H3V9H7V21M5,3A2,2 0 0,1 7,5A2,2 0 0,1 5,7A2,2 0 0,1 3,5A2,2 0 0,1 5,3Z"})),(0,o.h)("span",null,"LinkedIn")),(0,o.h)("a",{href:u.default.getReferralUrl("whatsapp",i),target:"_blank",className:"menu-button referral-whatsapp hu-a-center hu-s-13"},(0,o.h)("svg",{style:"width:24px;height:24px",viewBox:"0 0 24 24"},(0,o.h)("path",{fill:"#FFFFFF",d:"M16.75,13.96C17,14.09 17.16,14.16 17.21,14.26C17.27,14.37 17.25,14.87 17,15.44C16.8,16 15.76,16.54 15.3,16.56C14.84,16.58 14.83,16.92 12.34,15.83C9.85,14.74 8.35,12.08 8.23,11.91C8.11,11.74 7.27,10.53 7.31,9.3C7.36,8.08 8,7.5 8.26,7.26C8.5,7 8.77,6.97 8.94,7H9.41C9.56,7 9.77,6.94 9.96,7.45L10.65,9.32C10.71,9.45 10.75,9.6 10.66,9.76L10.39,10.17L10,10.59C9.88,10.71 9.74,10.84 9.88,11.09C10,11.35 10.5,12.18 11.2,12.87C12.11,13.75 12.91,14.04 13.15,14.17C13.39,14.31 13.54,14.29 13.69,14.13L14.5,13.19C14.69,12.94 14.85,13 15.08,13.08L16.75,13.96M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C10.03,22 8.2,21.43 6.65,20.45L2,22L3.55,17.35C2.57,15.8 2,13.97 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.72 4.54,15.31 5.46,16.61L4.5,19.5L7.39,18.54C8.69,19.46 10.28,20 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z"})),(0,o.h)("span",null,"WhatsApp"))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=n(4),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.data,n=e.author,r=e.messageInnerContent;return t.url?(0,i.h)("div",{className:"hu-message-image",ref:r},t.url&&(0,i.h)("a",{className:"image-anchor",href:t.url,target:"_blank"},(0,i.h)("img",{src:t.url})),t.title&&(0,i.h)("p",{className:"brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text",ref:r},t.rich_text?(0,i.h)("div",{className:"hu-rich_text",dangerouslySetInnerHTML:{__html:t.rich_text||null}}):a.default.getVirtualDOM(t.title))):(0,i.h)("p",{className:"hu-message-text "+("brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:r},t.rich_text?(0,i.h)("div",{className:"hu-rich_text",dangerouslySetInnerHTML:{__html:t.rich_text||null}}):a.default.getVirtualDOM(t.title))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=n(4),s=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.data,n=e.author,r=e.url,i=e.file_name,o=e.messageInnerContent;return(0,a.h)("div",{className:"hu-message-image",ref:o},(r||t.url)&&(0,a.h)("a",{className:"image-anchor",href:r||t.url,target:"_blank"},(0,a.h)("img",{src:r||t.url,alt:i})),t.message&&(0,a.h)("p",{className:"brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text",ref:o},s.default.getVirtualDOM(t.message)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.urls,n=e.messageInnerContent;return(0,r.h)("div",{className:"hu-message-image",ref:n},t.map(function(e){return e&&(0,r.h)("a",{className:"image-anchor",href:e,target:"_blank"},(0,r.h)("img",{src:e}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){var t=e.data,n=e.messageInnerContent,r=e.getYoutubeURL;return(0,i.h)("div",{className:"hu-message-iframe",ref:n},t.url&&(0,i.h)("iframe",{type:"text/html",width:"640",height:"360",src:r(t.url),frameborder:"0",allowFullScreen:!0}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){var t=e.data,n=e.author,r=e.messageInnerContent;return(0,i.h)("p",{style:{borderBottom:"1px solid black"},className:"hu-message-document "+("brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:r},(0,i.h)("a",{style:{textDecoration:"none"},href:"string"==typeof t.url?t.url:null,target:"_blank"},(0,i.h)("i",{style:{marginRight:5},className:"fi document"}),"File"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=r((r(n(4)),n(9))),s=n(8),u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={time:e.animate?s(e,"data.extra.redirect.timeout","X"):0},t.countdown=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"componentDidMount",value:function(){"number"==typeof this.state.time&&!0===this.props.animate&&(this.countdown=setInterval(this.tick.bind(this),1e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.countdown)}},{key:"tick",value:function(){var e=this.state.time-1;e<0?this.finalize():this.setState({time:e})}},{key:"finalize",value:function(){clearInterval(this.countdown);var e=a.default.getHref(this.props.data.url||this.props.data.extra.redirect.url);window.top!=window.self?window.top.location.href=e:location.href=e}},{key:"render",value:function(e,t){var n=-1<["dialog","menu"].indexOf(e.data.type)?e.data.title:e.data.message,r=n.indexOf("{timeout}"),i=r+"{timeout}".length;return(0,o.h)("p",{className:"hu-message-text "+("brand"===e.data.author?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:e.messageInnerContent},-1<r?[n.substring(0,r),(0,o.h)("b",null,t.time),n.substring(i)]:n)}}]),n}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(4),a=(r=i)&&r.__esModule?r:{default:r},s=n(8);t.default=function(e){var t=e.data,n=e.author,r=e.messageInnerContent,i=s(t,"extra.message.upper_image",!1);return(0,o.h)("p",{className:"hu-message-text "+("brand"===n?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:r},i&&(0,o.h)("div",{className:"hu-message_upper-image hu-background-cover",style:{backgroundImage:"url("+i+")"}}),a.default.getVirtualDOM(t.title||t.message))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(113);t.default=function(e){var t=e.data,n=e.messageInnerContent,r="https://maps.googleapis.com/maps/api/staticmap?center="+t.latitude+","+t.longitude+"&size=600x300&zoom=15&markers=color:red%7C"+t.latitude+","+t.longitude+"&key="+a.GOOGLE_API_KEY,i="https://www.google.com/maps/search/?api=1&query="+t.latitude+","+t.longitude;return(0,o.h)("div",{className:"hu-message-location",ref:n},(0,o.h)("a",{className:"image-anchor",href:i,target:"_blank"},(0,o.h)("img",{src:r})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=n(4),s=(r=a)&&r.__esModule?r:{default:r},u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.stripeHandler=null,t.submitted=!1,t._initStripe=t._initStripe.bind(t),t._onSuccess=t._onSuccess.bind(t),t._onOpen=t._onOpen.bind(t),t._onClose=t._onClose.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"componentDidMount",value:function(){if(!0===this.props.animate)if(window.StripeCheckout)this._initStripe();else{var e=document.createElement("script");e.type="text/javascript",e.src="https://checkout.stripe.com/checkout.js",e.onload=this._initStripe,document.getElementsByTagName("head")[0].appendChild(e)}}},{key:"render",value:function(e,t){return(0,o.h)("p",{className:"hu-message-text "+("brand"===e.author?"hu-color_bot-message-text":"hu-color_user-message-text"),ref:e.messageInnerContent},e.data.rich_text?(0,o.h)("div",{className:"hu-rich_text",dangerouslySetInnerHTML:{__html:e.data.rich_text||null}}):s.default.getVirtualDOM(e.data.message))}},{key:"_initStripe",value:function(){var e=this.props.data;this.stripeHandler=StripeCheckout.configure({key:e.stripe_key,image:e.image,locale:"auto",token:this._onSuccess,allowRememberMe:!1,opened:this._onOpen,closed:this._onClose}),this._launchStripe()}},{key:"_launchStripe",value:function(){var e=this.props.data;this.stripeHandler.open({name:e.name,description:e.description,amount:e.amount,currency:e.currency,email:e.email})}},{key:"_onSuccess",value:function(e){this.submitted=!0,Landbot.exec("landbot-msg-send",{type:"stripe",action:"submit",render:!1,payload:{payment_id:this.props.data.payment_id,stripe_token:e.id}})}},{key:"_onOpen",value:function(){}},{key:"_onClose",value:function(){if(!this.submitted){var e=this.props.data;ghostMessage({type:"text",samurai:e.samurai,extra:{hide_textbox:!0},message:e.close_message}),Landbot.exec("landbot-msg-send",{type:"stripe",action:"close",render:!1})}}}]),n}();t.default=u},function(e,t,n){"use strict";var r;r=function(){function a(n){function t(e){var t=n.match(e);return t&&1<t.length&&t[1]||""}function e(e){var t=n.match(e);return t&&1<t.length&&t[2]||""}var r,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=!/like android/i.test(n)&&/android/i.test(n),a=/nexus\s*[0-6]\s*/i.test(n),s=!a&&/nexus\s*[0-9]+/i.test(n),u=/CrOS/.test(n),l=/silk/i.test(n),c=/sailfish/i.test(n),h=/tizen/i.test(n),f=/(web|hpw)os/i.test(n),p=/windows phone/i.test(n),d=(/SamsungBrowser/i.test(n),!p&&/windows/i.test(n)),m=!i&&!l&&/macintosh/i.test(n),v=!o&&!c&&!h&&!f&&/linux/i.test(n),y=e(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),g=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(n)&&!/tablet pc/i.test(n),_=!b&&/[^-]mobi/i.test(n),w=/xbox/i.test(n);/opera/i.test(n)?r={name:"Opera",opera:C,version:g||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(n)?r={name:"Opera",opera:C,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||g}:/SamsungBrowser/i.test(n)?r={name:"Samsung Internet for Android",samsungBrowser:C,version:g||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(n)?r={name:"Opera Coast",coast:C,version:g||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(n)?r={name:"Yandex Browser",yandexbrowser:C,version:g||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(n)?r={name:"UC Browser",ucbrowser:C,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(n)?r={name:"Maxthon",maxthon:C,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(n)?r={name:"Epiphany",epiphany:C,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(n)?r={name:"Puffin",puffin:C,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(n)?r={name:"Sleipnir",sleipnir:C,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(n)?r={name:"K-Meleon",kMeleon:C,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:C},y?(r.msedge=C,r.version=y):(r.msie=C,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(n)?r={name:"Internet Explorer",msie:C,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?r={name:"Chrome",osname:"Chrome OS",chromeos:C,chromeBook:C,chrome:C,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(n)?r={name:"Microsoft Edge",msedge:C,version:y}:/vivaldi/i.test(n)?r={name:"Vivaldi",vivaldi:C,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||g}:c?r={name:"Sailfish",osname:"Sailfish OS",sailfish:C,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(n)?r={name:"SeaMonkey",seamonkey:C,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(n)?(r={name:"Firefox",firefox:C,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)&&(r.firefoxos=C,r.osname="Firefox OS")):l?r={name:"Amazon Silk",silk:C,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(n)?r={name:"PhantomJS",phantom:C,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(n)?r={name:"SlimerJS",slimer:C,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(n)||/rim\stablet/i.test(n)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:C,version:g||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(r={name:"WebOS",osname:"WebOS",webos:C,version:g||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(n)&&(r.touchpad=C)):/bada/i.test(n)?r={name:"Bada",osname:"Bada",bada:C,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:h?r={name:"Tizen",osname:"Tizen",tizen:C,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||g}:/qupzilla/i.test(n)?r={name:"QupZilla",qupzilla:C,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||g}:/chromium/i.test(n)?r={name:"Chromium",chromium:C,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||g}:/chrome|crios|crmo/i.test(n)?r={name:"Chrome",chrome:C,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?r={name:"Android",version:g}:/safari|applewebkit/i.test(n)?(r={name:"Safari",safari:C},g&&(r.version=g)):i?(r={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},g&&(r.version=g)):r=/googlebot/i.test(n)?{name:"Googlebot",googlebot:C,version:t(/googlebot\/(\d+(\.\d+))/i)||g}:{name:t(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(n)?(/(apple)?webkit\/537\.36/i.test(n)?(r.name=r.name||"Blink",r.blink=C):(r.name=r.name||"Webkit",r.webkit=C),!r.version&&g&&(r.version=g)):!r.opera&&/gecko\//i.test(n)&&(r.name=r.name||"Gecko",r.gecko=C,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!o&&!r.silk?!r.windowsphone&&i?(r[i]=C,r.ios=C,r.osname="iOS"):m?(r.mac=C,r.osname="macOS"):w?(r.xbox=C,r.osname="Xbox"):d?(r.windows=C,r.osname="Windows"):v&&(r.linux=C,r.osname="Linux"):(r.android=C,r.osname="Android");var k="";r.windows?k=function(e){switch(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}():r.windowsphone?k=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?k=(k=t(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):i?k=(k=t(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):o?k=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?k=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?k=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?k=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(k=t(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(r.osversion=k);var x=!r.windows&&k.split(".")[0];return b||s||"ipad"==i||o&&(3==x||4<=x&&!_)||r.silk?r.tablet=C:(_||"iphone"==i||"ipod"==i||o||a||r.blackberry||r.webos||r.bada)&&(r.mobile=C),r.msedge||r.msie&&10<=r.version||r.yandexbrowser&&15<=r.version||r.vivaldi&&1<=r.version||r.chrome&&20<=r.version||r.samsungBrowser&&4<=r.version||r.firefox&&20<=r.version||r.safari&&6<=r.version||r.opera&&10<=r.version||r.ios&&r.osversion&&6<=r.osversion.split(".")[0]||r.blackberry&&10.1<=r.version||r.chromium&&20<=r.version?r.a=C:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=C:r.x=C,r}function r(e){return e.split(".").length}function i(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function s(e){for(var n=Math.max(r(e[0]),r(e[1])),t=i(e,function(e){var t=n-r(e);return i((e+=new Array(1+t).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});0<=--n;){if(t[0][n]>t[1][n])return 1;if(t[0][n]!==t[1][n])return-1;if(0===n)return 0}}function o(e,t,n){var r=u;"string"==typeof t&&(n=t,t=void 0),void 0===t&&(t=!1),n&&(r=a(n));var i=""+r.version;for(var o in e)if(e.hasOwnProperty(o)&&r[o]){if("string"!=typeof e[o])throw new Error("Browser version in the minVersion map should be a string: "+o+": "+String(e));return s([i,e[o]])<0}return t}var C=!0,u=a("undefined"!=typeof navigator&&navigator.userAgent||"");return u.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in u)return!0}return!1},u.isUnsupportedBrowser=o,u.compareVersions=s,u.check=function(e,t,n){return!o(e,t,n)},u._detect=a,u.detect=a,u},void 0!==e&&e.exports?e.exports=r():n(263)("bowser",r)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,i,o){"use strict";(function(e){var t,n,r,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){function a(e){var t=e.length,n=c.type(e);return"function"!==n&&!c.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}if(!t.jQuery){var c=function e(t,n){return new e.fn.init(t,n)};c.isWindow=function(e){return e&&e===e.window},c.type=function(e){return e?"object"==(void 0===e?"undefined":h(e))||"function"==typeof e?n[i.call(e)]||"object":void 0===e?"undefined":h(e):e+""},c.isArray=Array.isArray||function(e){return"array"===c.type(e)},c.isPlainObject=function(e){var t;if(!e||"object"!==c.type(e)||e.nodeType||c.isWindow(e))return!1;try{if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||r.call(e,t)},c.each=function(e,t,n){var r=0,i=e.length,o=a(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(e.hasOwnProperty(r)&&!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(e[r],r,e[r]))break;return e},c.data=function(e,t,n){if(void 0===n){var r=e[c.expando],i=r&&s[r];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var o=e[c.expando]||(e[c.expando]=++c.uuid);return s[o]=s[o]||{},s[o][t]=n}},c.removeData=function(e,t){var n=e[c.expando],r=n&&s[n];r&&(t?c.each(t,function(e,t){delete r[t]}):delete s[n])},c.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"!=(void 0===a?"undefined":h(a))&&"function"!==c.type(a)&&(a={}),s===u&&(a=this,s--);s<u;s++)if(i=arguments[s])for(r in i)i.hasOwnProperty(r)&&(e=a[r],a!==(n=i[r])&&(l&&n&&(c.isPlainObject(n)||(t=c.isArray(n)))?(o=t?(t=!1,e&&c.isArray(e)?e:[]):e&&c.isPlainObject(e)?e:{},a[r]=c.extend(l,o,n)):void 0!==n&&(a[r]=n)));return a},c.queue=function(e,t,n){if(e){var r=c.data(e,t=(t||"fx")+"queue");return n?(!r||c.isArray(n)?r=c.data(e,t,(o=[],(i=n)&&(a(Object(i))?function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];e.length=i}(o,"string"==typeof i?[i]:i):[].push.call(o,i)),o)):r.push(n),r):r||[]}var i,o},c.dequeue=function(e,i){c.each(e.nodeType?[e]:e,function(e,t){var n=c.queue(t,i=i||"fx"),r=n.shift();"inprogress"===r&&(r=n.shift()),r&&("fx"===i&&n.unshift("inprogress"),r.call(t,function(){c.dequeue(t,i)}))})},c.fn=c.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){var n=this[0],e=function(e){for(var t=n.offsetParent;t&&"html"!==t.nodeName.toLowerCase()&&t.style&&"static"===t.style.position;)t=t.offsetParent;return t||document}(),t=this.offset(),r=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:c(e).offset();return t.top-=parseFloat(n.style.marginTop)||0,t.left-=parseFloat(n.style.marginLeft)||0,e.style&&(r.top+=parseFloat(e.style.borderTopWidth)||0,r.left+=parseFloat(e.style.borderLeftWidth)||0),{top:t.top-r.top,left:t.left-r.left}}};var s={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var n={},r=n.hasOwnProperty,i=n.toString,e="Boolean Number String Function Array Date RegExp Object Error".split(" "),o=0;o<e.length;o++)n["[object "+e[o]+"]"]=e[o].toLowerCase();c.fn.init.prototype=c.fn,t.Velocity={Utilities:c}}}(window),r=function(){return function(e,V,H,W){function v(e){return Y.isWrapped(e)?e=n.call(e):Y.isNode(e)&&(e=[e]),e}function B(e){var t=G.data(e,"velocity");return null===t?W:t}function y(e,t){var n=B(e);n&&n.delayTimer&&!n.delayPaused&&(n.delayRemaining=n.delay-t+n.delayBegin,n.delayPaused=!0,clearTimeout(n.delayTimer.setTimeout))}function g(e,t){var n=B(e);n&&n.delayTimer&&n.delayPaused&&(n.delayPaused=!1,n.delayTimer.setTimeout=setTimeout(n.delayTimer.next,n.delayRemaining))}function r(a,t,s,n){function r(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function o(e){return 3*e}function u(e,t,n){return((r(t,n)*e+i(t,n))*e+o(t))*e}function l(e,t,n){return 3*r(t,n)*e*e+2*i(t,n)*e+o(t)}function c(e){for(var t=0,n=1,r=m-1;n!==r&&g[n]<=e;++n)t+=v;var i=t+(e-g[--n])/(g[n+1]-g[n])*v,o=l(i,a,s);return.001<=o?function(e,t){for(var n=0;n<f;++n){var r=l(t,a,s);if(0===r)return t;t-=(u(t,a,s)-e)/r}return t}(e,i):0===o?i:function(e,t,n){for(var r,i,o=0;0<(r=u(i=t+(n-t)/2,a,s)-e)?n=i:t=i,Math.abs(r)>p&&++o<d;);return i}(e,t,t+v)}function h(){b=!0,a===t&&s===n||function(){for(var e=0;e<m;++e)g[e]=u(e*v,a,s)}()}var f=4,p=1e-7,d=10,m=11,v=1/(m-1),e="Float32Array"in V;if(4!==arguments.length)return!1;for(var y=0;y<4;++y)if("number"!=typeof arguments[y]||isNaN(arguments[y])||!isFinite(arguments[y]))return!1;a=Math.min(a,1),s=Math.min(s,1),a=Math.max(a,0),s=Math.max(s,0);var g=e?new Float32Array(m):new Array(m),b=!1,_=function(e){return b||h(),a===t&&s===n?e:0===e?0:1===e?1:u(c(e),t,n)};_.getControlPoints=function(){return[{x:a,y:t},{x:s,y:n}]};var w="generateBezier("+[a,t,s,n]+")";return _.toString=function(){return w},_}function q(e,t){var n=e;return Y.isString(e)?Q.Easings[e]||(n=!1):n=Y.isArray(e)&&1===e.length?function(t){return function(e){return Math.round(e*t)*(1/t)}}.apply(null,e):Y.isArray(e)&&2===e.length?s.apply(null,e.concat([t])):!(!Y.isArray(e)||4!==e.length)&&r.apply(null,e),!1===n&&(n=Q.Easings[Q.defaults.easing]?Q.defaults.easing:a),n}function z(e){if(e){var t=Q.timestamp&&!0!==e?e:T.now(),n=Q.State.calls.length;1e4<n&&(Q.State.calls=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}(Q.State.calls),n=Q.State.calls.length);for(var r=0;r<n;r++)if(Q.State.calls[r]){var i=Q.State.calls[r],o=i[0],a=i[2],s=i[3],u=!!s,l=null,c=i[5],h=i[6];if(s||(s=Q.State.calls[r][3]=t-16),c){if(!0!==c.resume)continue;s=i[3]=Math.round(t-h-16),i[5]=null}h=i[6]=t-s;for(var f=Math.min(h/a.duration,1),p=0,d=o.length;p<d;p++){var m=o[p],v=m.element;if(B(v)){var y=!1;if(a.display!==W&&null!==a.display&&"none"!==a.display){if("flex"===a.display){G.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(e,t){$.setPropertyValue(v,"display",t)})}$.setPropertyValue(v,"display",a.display)}for(var g in a.visibility!==W&&"hidden"!==a.visibility&&$.setPropertyValue(v,"visibility",a.visibility),m)if(m.hasOwnProperty(g)&&"element"!==g){var b,_=m[g],w=Y.isString(_.easing)?Q.Easings[_.easing]:_.easing;if(Y.isString(_.pattern)){var k=1===f?function(e,t,n){var r=_.endValue[t];return n?Math.round(r):r}:function(e,t,n){var r=_.startValue[t],i=_.endValue[t]-r,o=r+i*w(f,a,i);return n?Math.round(o):o};b=_.pattern.replace(/{(\d+)(!)?}/g,k)}else if(1===f)b=_.endValue;else{var x=_.endValue-_.startValue;b=_.startValue+x*w(f,a,x)}if(!u&&b===_.currentValue)continue;if(_.currentValue=b,"tween"===g)l=b;else{var C;if($.Hooks.registered[g]){C=$.Hooks.getRoot(g);var S=B(v).rootPropertyValueCache[C];S&&(_.rootPropertyValue=S)}var E=$.setPropertyValue(v,g,_.currentValue+(O<9&&0===parseFloat(b)?"":_.unitType),_.rootPropertyValue,_.scrollData);$.Hooks.registered[g]&&($.Normalizations.registered[C]?B(v).rootPropertyValueCache[C]=$.Normalizations.registered[C]("extract",null,E[1]):B(v).rootPropertyValueCache[C]=E[1]),"transform"===E[0]&&(y=!0)}}a.mobileHA&&B(v).transformCache.translate3d===W&&(B(v).transformCache.translate3d="(0px, 0px, 0px)",y=!0),y&&$.flushTransformCache(v)}}a.display!==W&&"none"!==a.display&&(Q.State.calls[r][2].display=!1),a.visibility!==W&&"hidden"!==a.visibility&&(Q.State.calls[r][2].visibility=!1),a.progress&&a.progress.call(i[1],i[1],f,Math.max(0,s+a.duration-t),s,l),1===f&&I(r)}}Q.State.isTicking&&N(z)}function I(e,t){if(!Q.State.calls[e])return!1;for(var n=Q.State.calls[e][0],r=Q.State.calls[e][1],i=Q.State.calls[e][2],o=Q.State.calls[e][4],a=!1,s=0,u=n.length;s<u;s++){var l=n[s].element;t||i.loop||("none"===i.display&&$.setPropertyValue(l,"display",i.display),"hidden"===i.visibility&&$.setPropertyValue(l,"visibility",i.visibility));var c=B(l);if(!0!==i.loop&&(G.queue(l)[1]===W||!/\.velocityQueueEntryFlag/i.test(G.queue(l)[1]))&&c){c.isAnimating=!1;var h=!(c.rootPropertyValueCache={});G.each($.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,r=c.transformCache[t];c.transformCache[t]!==W&&new RegExp("^\\("+n+"[^.]").test(r)&&(h=!0,delete c.transformCache[t])}),i.mobileHA&&(h=!0,delete c.transformCache.translate3d),h&&$.flushTransformCache(l),$.Values.removeClass(l,"velocity-animating")}if(!t&&i.complete&&!i.loop&&s===u-1)try{i.complete.call(r,r)}catch(e){setTimeout(function(){throw e},1)}o&&!0!==i.loop&&o(r),c&&!0===i.loop&&!t&&(G.each(c.tweensContainer,function(e,t){if(/^rotate/.test(e)&&(parseFloat(t.startValue)-parseFloat(t.endValue))%360==0){var n=t.startValue;t.startValue=t.endValue,t.endValue=n}/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),Q(l,"reverse",{loop:!0,delay:i.delay})),!1!==i.queue&&G.dequeue(l,i.queue)}Q.State.calls[e]=!1;for(var f=0,p=Q.State.calls.length;f<p;f++)if(!1!==Q.State.calls[f]){a=!0;break}!1===a&&(Q.State.isTicking=!1,delete Q.State.calls,Q.State.calls=[])}var G,i,O=function(){if(H.documentMode)return H.documentMode;for(var e=7;4<e;e--){var t=H.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return W}(),t=(i=0,V.webkitRequestAnimationFrame||V.mozRequestAnimationFrame||function(e){var t,n=(new Date).getTime();return t=Math.max(0,16-(n-i)),i=n+t,setTimeout(function(){e(n+t)},t)}),T=function(){var e=V.performance||{};if("function"!=typeof e.now){var t=e.timing&&e.timing.navigationStart?e.timing.navigationStart:(new Date).getTime();e.now=function(){return(new Date).getTime()-t}}return e}(),n=function(){var s=Array.prototype.slice;try{return s.call(H.documentElement),s}catch(e){return function(e,t){var n=this.length;if("number"!=typeof e&&(e=0),"number"!=typeof t&&(t=n),this.slice)return s.call(this,e,t);var r,i=[],o=0<=e?e:Math.max(0,n+e),a=(t<0?n+t:Math.min(t,n))-o;if(0<a)if(i=new Array(a),this.charAt)for(r=0;r<a;r++)i[r]=this.charAt(o+r);else for(r=0;r<a;r++)i[r]=this[o+r];return i}}}(),K=function(){return Array.prototype.includes?function(e,t){return e.includes(t)}:Array.prototype.indexOf?function(e,t){return 0<=e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}},Y={isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isWrapped:function(e){return e&&e!==V&&Y.isNumber(e.length)&&!Y.isString(e)&&!Y.isFunction(e)&&!Y.isNode(e)&&(0===e.length||Y.isNode(e[0]))},isSVG:function(e){return V.SVGElement&&e instanceof V.SVGElement},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},o=!1;if(e.fn&&e.fn.jquery?(G=e,o=!0):G=V.Velocity.Utilities,O<=8&&!o)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(O<=7)){var a="swing",Q={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:V.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:H.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:G,Redirects:{},Easings:{},Promise:V.Promise,defaults:{queue:"",duration:400,easing:a,begin:W,complete:W,progress:W,display:W,visibility:W,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:function(e){G.data(e,"velocity",{isSVG:Y.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:5,patch:0},debug:!1,timestamp:!0,pauseAll:function(n){var r=(new Date).getTime();G.each(Q.State.calls,function(e,t){if(t){if(n!==W&&(t[2].queue!==n||!1===t[2].queue))return!0;t[5]={resume:!1}}}),G.each(Q.State.delayedElements,function(e,t){t&&y(t,r)})},resumeAll:function(n){(new Date).getTime();G.each(Q.State.calls,function(e,t){if(t){if(n!==W&&(t[2].queue!==n||!1===t[2].queue))return!0;t[5]&&(t[5].resume=!0)}}),G.each(Q.State.delayedElements,function(e,t){t&&g(t)})}};V.pageYOffset!==W?(Q.State.scrollAnchor=V,Q.State.scrollPropertyLeft="pageXOffset",Q.State.scrollPropertyTop="pageYOffset"):(Q.State.scrollAnchor=H.documentElement||H.body.parentNode||H.body,Q.State.scrollPropertyLeft="scrollLeft",Q.State.scrollPropertyTop="scrollTop");var s=function(){function g(e){return-e.tension*e.x-e.friction*e.v}function b(e,t,n){var r={x:e.x+n.dx*t,v:e.v+n.dv*t,tension:e.tension,friction:e.friction};return{dx:r.v,dv:g(r)}}return function e(t,n,r){var i,o,a,s,u,l,c,h,f,p,d,m={x:-1,v:0,tension:null,friction:null},v=[0],y=0;for(t=parseFloat(t)||500,n=parseFloat(n)||20,r=r||null,m.tension=t,m.friction=n,o=(i=null!==r)?(y=e(t,n))/r*.016:.016;u=o,void 0,l={dx:(s=a||m).v,dv:g(s)},c=b(s,.5*u,l),h=b(s,.5*u,c),f=b(s,u,h),p=1/6*(l.dx+2*(c.dx+h.dx)+f.dx),d=1/6*(l.dv+2*(c.dv+h.dv)+f.dv),s.x=s.x+p*u,s.v=s.v+d*u,a=s,v.push(1+a.x),y+=16,1e-4<Math.abs(a.x)&&1e-4<Math.abs(a.v););return i?function(e){return v[e*(v.length-1)|0]}:y}}();Q.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},G.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){Q.Easings[t[0]]=r.apply(null,t[1])});var $=Q.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<$.Lists.colors.length;e++){var t="color"===$.Lists.colors[e]?"0 0 0 1":"255 255 255 1";$.Hooks.templates[$.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,r,i;if(O)for(n in $.Hooks.templates)if($.Hooks.templates.hasOwnProperty(n)){i=(r=$.Hooks.templates[n])[0].split(" ");var o=r[1].match($.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),o.push(o.shift()),$.Hooks.templates[n]=[i.join(" "),o.join(" ")])}for(n in $.Hooks.templates)if($.Hooks.templates.hasOwnProperty(n))for(var a in i=(r=$.Hooks.templates[n])[0].split(" "))if(i.hasOwnProperty(a)){var s=n+i[a],u=a;$.Hooks.registered[s]=[n,u]}},getRoot:function(e){var t=$.Hooks.registered[e];return t?t[0]:e},getUnit:function(e,t){var n=(e.substr(t||0,5).match(/^[a-z%]+/)||[])[0]||"";return n&&K($.Lists.units)?n:""},fixColors:function(e){return e.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,function(e,t,n){return $.Lists.colorNames.hasOwnProperty(n)?(t||"rgba(")+$.Lists.colorNames[n]+(t?"":",1)"):t+n})},cleanRootPropertyValue:function(e,t){return $.RegEx.valueUnwrap.test(t)&&(t=t.match($.RegEx.valueUnwrap)[1]),$.Values.isCSSNullValue(t)&&(t=$.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=$.Hooks.registered[e];if(n){var r=n[0],i=n[1];return(t=$.Hooks.cleanRootPropertyValue(r,t)).toString().match($.RegEx.valueSplit)[i]}return t},injectValue:function(e,t,n){var r=$.Hooks.registered[e];if(r){var i,o=r[0],a=r[1];return(i=(n=$.Hooks.cleanRootPropertyValue(o,n)).toString().match($.RegEx.valueSplit))[a]=t,i.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return r=$.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match($.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return Q.State.isFirefox?"filter":"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(O<=8)switch(e){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return r?r[1]/100:1;case"inject":return(t.style.zoom=1)<=parseFloat(n)?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){function o(e,t,n){if("border-box"===$.getPropertyValue(t,"boxSizing").toString().toLowerCase()!==(n||!1))return 0;var r,i,o=0,a="width"===e?["Left","Right"]:["Top","Bottom"],s=["padding"+a[0],"padding"+a[1],"border"+a[0]+"Width","border"+a[1]+"Width"];for(r=0;r<s.length;r++)i=parseFloat($.getPropertyValue(t,s[r])),isNaN(i)||(o+=i);return n?-o:o}function e(r,i){return function(e,t,n){switch(e){case"name":return r;case"extract":return parseFloat(n)+o(r,t,i);case"inject":return parseFloat(n)-o(r,t,i)+"px"}}}O&&!(9<O)||Q.State.isGingerbread||($.Lists.transformsBase=$.Lists.transformsBase.concat($.Lists.transforms3D));for(var t=0;t<$.Lists.transformsBase.length;t++)!function(){var i=$.Lists.transformsBase[t];$.Normalizations.registered[i]=function(e,t,n){switch(e){case"name":return"transform";case"extract":return B(t)===W||B(t).transformCache[i]===W?/^scale/i.test(i)?1:0:B(t).transformCache[i].replace(/[()]/g,"");case"inject":var r=!1;switch(i.substr(0,i.length-1)){case"translate":r=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":Q.State.isAndroid&&B(t).transformCache[i]===W&&n<1&&(n=1),r=!/(\d)$/i.test(n);break;case"skew":r=!/(deg|\d)$/i.test(n);break;case"rotate":r=!/(deg|\d)$/i.test(n)}return r||(B(t).transformCache[i]="("+n+")"),B(t).transformCache[i]}}}();for(var n=0;n<$.Lists.colors.length;n++)!function(){var a=$.Lists.colors[n];$.Normalizations.registered[a]=function(e,t,n){switch(e){case"name":return a;case"extract":var r;if($.RegEx.wrappedValueAlreadyExtracted.test(n))r=n;else{var i,o={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?i=o[n]!==W?o[n]:o.black:$.RegEx.isHex.test(n)?i="rgb("+$.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(i=o.black),r=(i||n).toString().match($.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return(!O||8<O)&&3===r.split(" ").length&&(r+=" 1"),r;case"inject":return/^rgb/.test(n)?n:(O<=8?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(O<=8?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")")}}}();$.Normalizations.registered.innerWidth=e("width",!0),$.Normalizations.registered.innerHeight=e("height",!0),$.Normalizations.registered.outerWidth=e("width"),$.Normalizations.registered.outerHeight=e("height")}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(O||Q.State.isAndroid&&!Q.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(Q.State.prefixMatches[e])return[Q.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;n<r;n++){var i;if(i=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),Y.isString(Q.State.prefixElement.style[i]))return[Q.State.prefixMatches[e]=i,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return!e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){if(e)if(e.classList)e.classList.add(t);else if(Y.isString(e.className))e.className+=(e.className.length?" ":"")+t;else{var n=e.getAttribute(O<=7?"className":"class")||"";e.setAttribute("class",n+(n?" ":"")+t)}},removeClass:function(e,t){if(e)if(e.classList)e.classList.remove(t);else if(Y.isString(e.className))e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ");else{var n=e.getAttribute(O<=7?"className":"class")||"";e.setAttribute("class",n.replace(new RegExp("(^|s)"+t.split(" ").join("|")+"(s|$)","gi")," "))}}},getPropertyValue:function(e,t,n,l){function c(e,t){var n=0;if(O<=8)n=G.css(e,t);else{var r=!1;/^(width|height)$/.test(t)&&0===$.getPropertyValue(e,"display")&&(r=!0,$.setPropertyValue(e,"display",$.Values.getDisplayType(e)));var i,o=function(){r&&$.setPropertyValue(e,"display","none")};if(!l){if("height"===t&&"border-box"!==$.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var a=e.offsetHeight-(parseFloat($.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat($.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat($.getPropertyValue(e,"paddingTop"))||0)-(parseFloat($.getPropertyValue(e,"paddingBottom"))||0);return o(),a}if("width"===t&&"border-box"!==$.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var s=e.offsetWidth-(parseFloat($.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat($.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat($.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat($.getPropertyValue(e,"paddingRight"))||0);return o(),s}}i=B(e)===W?V.getComputedStyle(e,null):B(e).computedStyle?B(e).computedStyle:B(e).computedStyle=V.getComputedStyle(e,null),"borderColor"===t&&(t="borderTopColor"),""!==(n=9===O&&"filter"===t?i.getPropertyValue(t):i[t])&&null!==n||(n=e.style[t]),o()}if("auto"===n&&/^(top|right|bottom|left)$/i.test(t)){var u=c(e,"position");("fixed"===u||"absolute"===u&&/top|left/i.test(t))&&(n=G(e).position()[t]+"px")}return n}var r;if($.Hooks.registered[t]){var i=t,o=$.Hooks.getRoot(i);n===W&&(n=$.getPropertyValue(e,$.Names.prefixCheck(o)[0])),$.Normalizations.registered[o]&&(n=$.Normalizations.registered[o]("extract",e,n)),r=$.Hooks.extractValue(i,n)}else if($.Normalizations.registered[t]){var a,s;"transform"!==(a=$.Normalizations.registered[t]("name",e))&&(s=c(e,$.Names.prefixCheck(a)[0]),$.Values.isCSSNullValue(s)&&$.Hooks.templates[t]&&(s=$.Hooks.templates[t][1])),r=$.Normalizations.registered[t]("extract",e,s)}if(!/^[\d-]/.test(r)){var u=B(e);if(u&&u.isSVG&&$.Names.SVGAttribute(t))if(/^(height|width)$/i.test(t))try{r=e.getBBox()[t]}catch(e){r=0}else r=e.getAttribute(t);else r=c(e,$.Names.prefixCheck(t)[0])}return $.Values.isCSSNullValue(r)&&(r=0),2<=Q.debug&&console.log("Get "+t+": "+r),r},setPropertyValue:function(e,t,n,r,i){var o=t;if("scroll"===t)i.container?i.container["scroll"+i.direction]=n:"Left"===i.direction?V.scrollTo(n,i.alternateValue):V.scrollTo(i.alternateValue,n);else if($.Normalizations.registered[t]&&"transform"===$.Normalizations.registered[t]("name",e))$.Normalizations.registered[t]("inject",e,n),o="transform",n=B(e).transformCache[t];else{if($.Hooks.registered[t]){var a=t,s=$.Hooks.getRoot(t);r=r||$.getPropertyValue(e,s),n=$.Hooks.injectValue(a,n,r),t=s}if($.Normalizations.registered[t]&&(n=$.Normalizations.registered[t]("inject",e,n),t=$.Normalizations.registered[t]("name",e)),o=$.Names.prefixCheck(t)[0],O<=8)try{e.style[o]=n}catch(e){Q.debug&&console.log("Browser does not support ["+n+"] for ["+o+"]")}else{var u=B(e);u&&u.isSVG&&$.Names.SVGAttribute(t)?e.setAttribute(t,n):e.style[o]=n}2<=Q.debug&&console.log("Set "+t+" ("+o+"): "+n)}return[o,n]},flushTransformCache:function(t){var n="",e=B(t);if((O||Q.State.isAndroid&&!Q.State.isChrome)&&e&&e.isSVG){var r=function(e){return parseFloat($.getPropertyValue(t,e))},i={translate:[r("translateX"),r("translateY")],skewX:[r("skewX")],skewY:[r("skewY")],scale:1!==r("scale")?[r("scale"),r("scale")]:[r("scaleX"),r("scaleY")],rotate:[r("rotateZ"),0,0]};G.each(B(t).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(n+=e+"("+i[e].join(" ")+") ",delete i[e])})}else{var o,a;G.each(B(t).transformCache,function(e){if(o=B(t).transformCache[e],"transformPerspective"===e)return a=o,!0;9===O&&"rotateZ"===e&&(e="rotate"),n+=e+o+" "}),a&&(n="perspective"+a+" "+n)}$.setPropertyValue(t,"transform",n)}};$.Hooks.register(),$.Normalizations.register(),Q.hook=function(e,r,i){var o;return e=v(e),G.each(e,function(e,t){if(B(t)===W&&Q.init(t),i===W)o===W&&(o=$.getPropertyValue(t,r));else{var n=$.setPropertyValue(t,r,i);"transform"===n[0]&&Q.CSS.flushTransformCache(t),o=n}}),o};var u=function e(){function t(){return r?T.promise||null:i}var n,r,i,o,S,E,O,a=arguments[0]&&(arguments[0].p||G.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||Y.isString(arguments[0].properties));Y.isWrapped(this)?(r=!1,o=0,i=S=this):(r=!0,o=1,S=a?arguments[0].elements||arguments[0].e:arguments[0]);var T={promise:null,resolver:null,rejecter:null};if(r&&Q.Promise&&(T.promise=new Q.Promise(function(e,t){T.resolver=e,T.rejecter=t})),O=a?(E=arguments[0].properties||arguments[0].p,arguments[0].options||arguments[0].o):(E=arguments[o],arguments[o+1]),S=v(S)){var N,P=S.length,F=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(E)&&!G.isPlainObject(O)){O={};for(var s=o+1;s<arguments.length;s++)Y.isArray(arguments[s])||!/^(fast|normal|slow)$/i.test(arguments[s])&&!/^\d/.test(arguments[s])?Y.isString(arguments[s])||Y.isArray(arguments[s])?O.easing=arguments[s]:Y.isFunction(arguments[s])&&(O.complete=arguments[s]):O.duration=arguments[s]}switch(E){case"scroll":N="scroll";break;case"reverse":N="reverse";break;case"pause":var u=(new Date).getTime();return G.each(S,function(e,t){y(t,u)}),G.each(Q.State.calls,function(e,r){var i=!1;r&&G.each(r[1],function(e,n){var t=O===W?"":O;return!0!==t&&r[2].queue!==t&&(O!==W||!1!==r[2].queue)||(G.each(S,function(e,t){if(t===n)return r[5]={resume:!1},!(i=!0)}),!i&&void 0)})}),t();case"resume":return G.each(S,function(e,t){g(t)}),G.each(Q.State.calls,function(e,r){var i=!1;r&&G.each(r[1],function(e,n){var t=O===W?"":O;return!0!==t&&r[2].queue!==t&&(O!==W||!1!==r[2].queue)||!r[5]||(G.each(S,function(e,t){if(t===n)return r[5].resume=!0,!(i=!0)}),!i&&void 0)})}),t();case"finish":case"finishAll":case"stop":G.each(S,function(e,t){B(t)&&B(t).delayTimer&&(clearTimeout(B(t).delayTimer.setTimeout),B(t).delayTimer.next&&B(t).delayTimer.next(),delete B(t).delayTimer),"finishAll"!==E||!0!==O&&!Y.isString(O)||(G.each(G.queue(t,Y.isString(O)?O:""),function(e,t){Y.isFunction(t)&&t()}),G.queue(t,Y.isString(O)?O:"",[]))});var l=[];return G.each(Q.State.calls,function(o,a){a&&G.each(a[1],function(e,r){var i=O===W?"":O;if(!0!==i&&a[2].queue!==i&&(O!==W||!1!==a[2].queue))return!0;G.each(S,function(e,t){if(t===r)if((!0===O||Y.isString(O))&&(G.each(G.queue(t,Y.isString(O)?O:""),function(e,t){Y.isFunction(t)&&t(null,!0)}),G.queue(t,Y.isString(O)?O:"",[])),"stop"===E){var n=B(t);n&&n.tweensContainer&&!1!==i&&G.each(n.tweensContainer,function(e,t){t.endValue=t.currentValue}),l.push(o)}else"finish"!==E&&"finishAll"!==E||(a[2].duration=1)})})}),"stop"===E&&(G.each(l,function(e,t){I(t,!0)}),T.promise&&T.resolver(S)),t();default:if(!G.isPlainObject(E)||Y.isEmptyObject(E)){if(Y.isString(E)&&Q.Redirects[E]){var c=(n=G.extend({},O)).duration,h=n.delay||0;return!0===n.backwards&&(S=G.extend(!0,[],S).reverse()),G.each(S,function(e,t){parseFloat(n.stagger)?n.delay=h+parseFloat(n.stagger)*e:Y.isFunction(n.stagger)&&(n.delay=h+n.stagger.call(t,e,P)),n.drag&&(n.duration=parseFloat(c)||(/^(callout|transition)/.test(E)?1e3:400),n.duration=Math.max(n.duration*(n.backwards?1-e/P:(e+1)/P),.75*n.duration,200)),Q.Redirects[E].call(t,t,n||{},e,P,S,T.promise?T:W)}),t()}var f="Velocity: First argument ("+E+") was not a property map, a known action, or a registered redirect. Aborting.";return T.promise?T.rejecter(new Error(f)):V.console&&console.log(f),t()}N="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},U=[];G.each(S,function(e,t){Y.isNode(t)&&function(D,C){function n(e){var I,A,t,n,r,i;if(j.begin&&0===F)try{j.begin.call(S,S)}catch(e){setTimeout(function(){throw e},1)}if("scroll"===N){var o,a,s,u=/^x$/i.test(j.axis)?"Left":"Top",l=parseFloat(j.offset)||0;j.container?Y.isWrapped(j.container)||Y.isNode(j.container)?(j.container=j.container[0]||j.container,s=(o=j.container["scroll"+u])+G(D).position()[u.toLowerCase()]+l):j.container=null:(o=Q.State.scrollAnchor[Q.State["scrollProperty"+u]],a=Q.State.scrollAnchor[Q.State["scrollProperty"+("Left"===u?"Top":"Left")]],s=G(D).offset()[u.toLowerCase()]+l),R={scroll:{rootPropertyValue:!1,startValue:o,currentValue:o,endValue:s,unitType:"",easing:j.easing,scrollData:{container:j.container,direction:u,alternateValue:a}},element:D},Q.debug&&console.log("tweensContainer (scroll): ",R.scroll,D)}else if("reverse"===N){if(!(I=B(D)))return;if(!I.tweensContainer)return void G.dequeue(D,j.queue);for(var c in"none"===I.opts.display&&(I.opts.display="auto"),"hidden"===I.opts.visibility&&(I.opts.visibility="visible"),I.opts.loop=!1,I.opts.begin=null,I.opts.complete=null,O.easing||delete j.easing,O.duration||delete j.duration,j=G.extend({},I.opts,j),A=G.extend(!0,{},I?I.tweensContainer:null))if(A.hasOwnProperty(c)&&"element"!==c){var h=A[c].startValue;A[c].startValue=A[c].currentValue=A[c].endValue,A[c].endValue=h,Y.isEmptyObject(O)||(A[c].easing=j.easing),Q.debug&&console.log("reverse tweensContainer ("+c+"): "+JSON.stringify(A[c]),D)}R=A}else if("start"===N){(I=B(D))&&I.tweensContainer&&!0===I.isAnimating&&(A=I.tweensContainer);var f=function(e,t){var n,r=$.Hooks.getRoot(e),i=!1,o=t[0],a=t[1],s=t[2];if(I&&I.isSVG||"tween"===r||!1!==$.Names.prefixCheck(r)[1]||$.Normalizations.registered[r]!==W){(j.display!==W&&null!==j.display&&"none"!==j.display||j.visibility!==W&&"hidden"!==j.visibility)&&/opacity|filter/.test(e)&&!s&&0!==o&&(s=0),j._cacheValues&&A&&A[e]?(s===W&&(s=A[e].endValue+A[e].unitType),i=I.rootPropertyValueCache[r]):$.Hooks.registered[e]?s===W?(i=$.getPropertyValue(D,r),s=$.getPropertyValue(D,e,i)):i=$.Hooks.templates[r][1]:s===W&&(s=$.getPropertyValue(D,e));var u,l,c,h=!1,f=function(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=$.Values.getUnitType(e)),[r,n]};if(s!==o&&Y.isString(s)&&Y.isString(o)){n="";var p=0,d=0,m=[],v=[],y=0,g=0,b=0;for(s=$.Hooks.fixColors(s),o=$.Hooks.fixColors(o);p<s.length&&d<o.length;){var _=s[p],w=o[d];if(/[\d\.-]/.test(_)&&/[\d\.-]/.test(w)){for(var k=_,x=w,C=".",S=".";++p<s.length;){if((_=s[p])===C)C="..";else if(!/\d/.test(_))break;k+=_}for(;++d<o.length;){if((w=o[d])===S)S="..";else if(!/\d/.test(w))break;x+=w}var E=$.Hooks.getUnit(s,p),O=$.Hooks.getUnit(o,d);if(p+=E.length,d+=O.length,E===O)k===x?n+=k+E:(n+="{"+m.length+(g?"!":"")+"}"+E,m.push(parseFloat(k)),v.push(parseFloat(x)));else{var T=parseFloat(k),N=parseFloat(x);n+=(y<5?"calc":"")+"("+(T?"{"+m.length+(g?"!":"")+"}":"0")+E+" + "+(N?"{"+(m.length+(T?1:0))+(g?"!":"")+"}":"0")+O+")",T&&(m.push(T),v.push(0)),N&&(m.push(0),v.push(N))}}else{if(_!==w){y=0;break}n+=_,p++,d++,0===y&&"c"===_||1===y&&"a"===_||2===y&&"l"===_||3===y&&"c"===_||4<=y&&"("===_?y++:(y&&y<5||4<=y&&")"===_&&--y<5)&&(y=0),0===g&&"r"===_||1===g&&"g"===_||2===g&&"b"===_||3===g&&"a"===_||3<=g&&"("===_?(3===g&&"a"===_&&(b=1),g++):b&&","===_?3<++b&&(g=b=0):(b&&g<(b?5:4)||(b?4:3)<=g&&")"===_&&--g<(b?5:4))&&(g=b=0)}}p===s.length&&d===o.length||(Q.debug&&console.error('Trying to pattern match mis-matched strings ["'+o+'", "'+s+'"]'),n=W),n&&(m.length?(Q.debug&&console.log('Pattern found "'+n+'" -> ',m,v,"["+s+","+o+"]"),s=m,o=v,l=c=""):n=W)}if(n||(s=(u=f(e,s))[0],c=u[1],o=(u=f(e,o))[0].replace(/^([+-\/*])=/,function(e,t){return h=t,""}),l=u[1],s=parseFloat(s)||0,o=parseFloat(o)||0,"%"===l&&(/^(fontSize|lineHeight)$/.test(e)?(o/=100,l="em"):/^scale/.test(e)?(o/=100,l=""):/(Red|Green|Blue)$/i.test(e)&&(o=o/100*255,l=""))),/[\/*]/.test(h))l=c;else if(c!==l&&0!==s)if(0===o)l=c;else{M=M||function(){var e={myParent:D.parentNode||H.body,position:$.getPropertyValue(D,"position"),fontSize:$.getPropertyValue(D,"fontSize")},t=e.position===L.lastPosition&&e.myParent===L.lastParent,n=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var r={};if(n&&t)r.emToPx=L.lastEmToPx,r.percentToPxWidth=L.lastPercentToPxWidth,r.percentToPxHeight=L.lastPercentToPxHeight;else{var i=I&&I.isSVG?H.createElementNS("http://www.w3.org/2000/svg","rect"):H.createElement("div");Q.init(i),e.myParent.appendChild(i),G.each(["overflow","overflowX","overflowY"],function(e,t){Q.CSS.setPropertyValue(i,t,"hidden")}),Q.CSS.setPropertyValue(i,"position",e.position),Q.CSS.setPropertyValue(i,"fontSize",e.fontSize),Q.CSS.setPropertyValue(i,"boxSizing","content-box"),G.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){Q.CSS.setPropertyValue(i,t,"100%")}),Q.CSS.setPropertyValue(i,"paddingLeft","100em"),r.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat($.getPropertyValue(i,"width",null,!0))||1)/100,r.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat($.getPropertyValue(i,"height",null,!0))||1)/100,r.emToPx=L.lastEmToPx=(parseFloat($.getPropertyValue(i,"paddingLeft"))||1)/100,e.myParent.removeChild(i)}return null===L.remToPx&&(L.remToPx=parseFloat($.getPropertyValue(H.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(V.innerWidth)/100,L.vhToPx=parseFloat(V.innerHeight)/100),r.remToPx=L.remToPx,r.vwToPx=L.vwToPx,r.vhToPx=L.vhToPx,1<=Q.debug&&console.log("Unit ratios: "+JSON.stringify(r),D),r}();var P=/margin|padding|left|right|width|text|word|letter/i.test(e)||/X$/.test(e)||"x"===e?"x":"y";switch(c){case"%":s*="x"==P?M.percentToPxWidth:M.percentToPxHeight;break;case"px":break;default:s*=M[c+"ToPx"]}switch(l){case"%":s*=1/("x"==P?M.percentToPxWidth:M.percentToPxHeight);break;case"px":break;default:s*=1/M[l+"ToPx"]}}switch(h){case"+":o=s+o;break;case"-":o=s-o;break;case"*":o*=s;break;case"/":o=s/o}R[e]={rootPropertyValue:i,startValue:s,currentValue:s,endValue:o,unitType:l,easing:a},n&&(R[e].pattern=n),Q.debug&&console.log("tweensContainer ("+e+"): "+JSON.stringify(R[e]),D)}else Q.debug&&console.log("Skipping ["+r+"] due to a lack of browser support.")};for(var p in E)if(E.hasOwnProperty(p)){var d=$.Names.camelCase(p),m=(t=E[p],i=r=n=void 0,Y.isFunction(t)&&(t=t.call(D,C,P)),Y.isArray(t)?(n=t[0],i=!Y.isArray(t[1])&&/^[\d-]/.test(t[1])||Y.isFunction(t[1])||$.RegEx.isHex.test(t[1])?t[1]:Y.isString(t[1])&&!$.RegEx.isHex.test(t[1])&&Q.Easings[t[1]]||Y.isArray(t[1])?(r=q(t[1],j.duration),t[2]):t[1]||t[2]):n=t,r=r||j.easing,Y.isFunction(n)&&(n=n.call(D,C,P)),Y.isFunction(i)&&(i=i.call(D,C,P)),[n||0,r,i]);if(K($.Lists.colors)){var v=m[0],y=m[1],g=m[2];if($.RegEx.isHex.test(v)){for(var b=["Red","Green","Blue"],_=$.Values.hexToRgb(v),w=g?$.Values.hexToRgb(g):W,k=0;k<b.length;k++){var x=[_[k]];y&&x.push(y),w!==W&&x.push(w[k]),f(d+b[k],x)}continue}}f(d,m)}R.element=D}R.element&&($.Values.addClass(D,"velocity-animating"),U.push(R),(I=B(D))&&(""===j.queue&&(I.tweensContainer=R,I.opts=j),I.isAnimating=!0),F===P-1?(Q.State.calls.push([U,S,j,null,T.resolver,null,0]),!1===Q.State.isTicking&&(Q.State.isTicking=!0,z())):F++)}var M,e,j=G.extend({},Q.defaults,O),R={};switch(B(D)===W&&Q.init(D),parseFloat(j.delay)&&!1!==j.queue&&G.queue(D,j.queue,function(e){Q.velocityQueueEntryFlag=!0;var t=Q.State.delayedElements.count++;Q.State.delayedElements[t]=D;var n,r=(n=t,function(){Q.State.delayedElements[n]=!1,e()});B(D).delayBegin=(new Date).getTime(),B(D).delay=parseFloat(j.delay),B(D).delayTimer={setTimeout:setTimeout(e,parseFloat(j.delay)),next:r}}),j.duration.toString().toLowerCase()){case"fast":j.duration=200;break;case"normal":j.duration=400;break;case"slow":j.duration=600;break;default:j.duration=parseFloat(j.duration)||1}if(!1!==Q.mock&&(!0===Q.mock?j.duration=j.delay=1:(j.duration*=parseFloat(Q.mock)||1,j.delay*=parseFloat(Q.mock)||1)),j.easing=q(j.easing,j.duration),j.begin&&!Y.isFunction(j.begin)&&(j.begin=null),j.progress&&!Y.isFunction(j.progress)&&(j.progress=null),j.complete&&!Y.isFunction(j.complete)&&(j.complete=null),j.display!==W&&null!==j.display&&(j.display=j.display.toString().toLowerCase(),"auto"===j.display&&(j.display=Q.CSS.Values.getDisplayType(D))),j.visibility!==W&&null!==j.visibility&&(j.visibility=j.visibility.toString().toLowerCase()),j.mobileHA=j.mobileHA&&Q.State.isMobile&&!Q.State.isGingerbread,!1===j.queue)if(j.delay){var t=Q.State.delayedElements.count++;Q.State.delayedElements[t]=D;var r=(e=t,function(){Q.State.delayedElements[e]=!1,n()});B(D).delayBegin=(new Date).getTime(),B(D).delay=parseFloat(j.delay),B(D).delayTimer={setTimeout:setTimeout(n,parseFloat(j.delay)),next:r}}else n();else G.queue(D,j.queue,function(e,t){if(!0===t)return T.promise&&T.resolver(S),!0;Q.velocityQueueEntryFlag=!0,n()});""!==j.queue&&"fx"!==j.queue||"inprogress"===G.queue(D)[0]||G.dequeue(D)}(t,e)}),(n=G.extend({},Q.defaults,O)).loop=parseInt(n.loop,10);var p=2*n.loop-1;if(n.loop)for(var d=0;d<p;d++){var m={delay:n.delay,progress:n.progress};d===p-1&&(m.display=n.display,m.visibility=n.visibility,m.complete=n.complete),e(S,"reverse",m)}return t()}T.promise&&(E&&O&&!1===O.promiseRejectEmpty?T.resolver():T.rejecter())};(Q=G.extend(u,Q)).animate=u;var N=V.requestAnimationFrame||t;if(!Q.State.isMobile&&H.hidden!==W){var l=function(){H.hidden?(N=function(e){return setTimeout(function(){e(!0)},16)},z()):N=V.requestAnimationFrame||t};l(),H.addEventListener("visibilitychange",l)}return e.Velocity=Q,e!==V&&(e.fn.velocity=u,e.fn.velocity.defaults=Q.defaults),G.each(["Down","Up"],function(e,h){Q.Redirects["slide"+h]=function(n,e,r,t,i,o){var a=G.extend({},e),s=a.begin,u=a.complete,l={},c={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};a.display===W&&(a.display="Down"===h?"inline"===Q.CSS.Values.getDisplayType(n)?"inline-block":"block":"none"),a.begin=function(){for(var e in 0===r&&s&&s.call(i,i),c)if(c.hasOwnProperty(e)){l[e]=n.style[e];var t=$.getPropertyValue(n,e);c[e]="Down"===h?[t,0]:[0,t]}l.overflow=n.style.overflow,n.style.overflow="hidden"},a.complete=function(){for(var e in l)l.hasOwnProperty(e)&&(n.style[e]=l[e]);r===t-1&&(u&&u.call(i,i),o&&o.resolver(i))},Q(n,c,a)}}),G.each(["In","Out"],function(e,l){Q.Redirects["fade"+l]=function(e,t,n,r,i,o){var a=G.extend({},t),s=a.complete,u={opacity:"In"===l?1:0};0!==n&&(a.begin=null),a.complete=n!==r-1?null:function(){s&&s.call(i,i),o&&o.resolver(i)},a.display===W&&(a.display="In"===l?"auto":"none"),Q(this,u,a)}}),Q}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,window?window.document:void 0)},"object"==h(e)&&"object"==h(e.exports)?e.exports=r():void 0!==(n="function"==typeof(t=r)?t.call(i,o,i,e):t)&&(e.exports=n)}).call(i,o(265)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),HiddenMessage=function(){function HiddenMessage(e){switch(_classCallCheck(this,HiddenMessage),this.type=e.type,this.action=e.action,this.content=e.script,e.action){case"script":this.exec()}}return _createClass(HiddenMessage,[{key:"exec",value:function exec(){try{eval(this.content)}catch(e){console.error(e)}}}]),HiddenMessage}();exports.default=HiddenMessage},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=n(0),u=n(2),l=r(n(17)),c=r(n(268)),h=r(n(271)),f=r(n(3)),p=r(n(4)),d=n(29),m=l.default.inputAnimation$,v=(0,u.connect)(function(e){return{input_type:e.input.input_type,autocompleteValues:e.input.autocompleteValues,autocompleteActive:e.input.autocompleteActive,calendarActive:e.input.calendarActive,calendarOptions:e.input.calendarOptions}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={visible:!1},t.scrollBottom=e.scrollBottom,t.mobileHA=e.mobileHA,t.inputBoxElem=null,t.lastHeight=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.Component),a(n,[{key:"componentDidMount",value:function(){var t=this;m.subscribe({next:function(e){!1===t.props.disabled?"input_enable"===e?t.state.visible||t.setInputSize():"input_in"===e&&t.setState({visible:!0},function(){return f.default.emit("hu-lb-input-focus")}):"input_out"===e&&(t.fixInputSize(),t.setState({visible:!1},function(){}))}})}},{key:"fixInputSize",value:function(){var e=this.inputBoxElem;if(e){var t=p.default.getComputedStyle(e).height;e.style.height=t}}},{key:"setInputSize",value:function(e){var t=this,n=this.inputBoxElem;if(n)if("number"==typeof e)(0,d.Animate)(n,{height:e},{duration:350,delay:350,mobileHA:this.mobileHA},function(){n.style.height=e});else{var r=n.parentElement,i=p.default.getComputedStyle(r).width,o=document.createElement("div");o.id=r.id,o.style.width=parseInt(i)+"px";var a=n.cloneNode(!0);a.style.height="auto",o.appendChild(a),document.getElementById("hu-input-sandbox").appendChild(o);var s=p.default.getComputedStyle(a).height;this.lastHeight=parseInt(s),(0,d.Animate)(n,{height:s},{duration:350,mobileHA:this.mobileHA,complete:function(){m.next("input_in"),setTimeout(function(){!1===t.props.disabled&&(n.style.height="auto")},200)}},function(){m.next("input_in"),!1===t.props.disabled&&(n.style.height="auto")}),this.scrollBottom(350);for(var u=document.getElementById("hu-input-sandbox");u.firstChild;)u.removeChild(u.firstChild)}}},{key:"render",value:function(e,t){var n=this,r=t.visible;return(0,s.h)("div",{id:"hu-message-input",className:"hu-display-block hu-position-relative"+(r?" enabled":""),ref:function(e){return n.inputBaseElem=e}},(0,s.h)("div",{className:"hu-input-overflow-content"},"autocomplete"===e.input_type&&(0,s.h)(c.default,{className:"DropMenu-Autocomplete",active:e.autocompleteActive,list:e.autocompleteValues}),"date"===e.input_type&&(0,s.h)(h.default,o({active:e.calendarActive},e.calendarOptions))),(0,s.h)("div",{className:"hu-input-box hu-height-0 hu-overflow-hidden",ref:function(e){return n.inputBoxElem=e}},e.children))}}]),n}())||i;t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(269),o=(r=i)&&r.__esModule?r:{default:r};n(270),t.default=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=r(n(3)),s=r(n(9)),u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.container=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"componentDidUpdate",value:function(e){e.active!==this.props.active&&this.container.scrollTo(0,0),this.container&&this.scrollToSelection()}},{key:"scrollToSelection",value:function(){var e=this.container.querySelector(".DropMenu_item.active");e&&(e.offsetTop+e.offsetHeight<=this.container.scrollTop+this.container.offsetHeight&&e.offsetTop>=this.container.scrollTop||(e.offsetTop<this.container.scrollTop?this.container.scrollTo(0,e.offsetTop):this.container.scrollTo(0,e.offsetTop+e.offsetHeight-this.container.offsetHeight)))}},{key:"render",value:function(e){var t=this;return(0,o.h)("div",{className:"DropMenu hu-border-radius-3 hu-shadow-large"+(e.active?" active":"")+" "+e.className,ref:function(e){return t.container=e}},(0,o.h)("ul",{className:"DropMenu_list"},0===e.list.length&&(0,o.h)("li",{className:"DropMenu_noresults hu-s-12"},"0 results"),e.list.map(function e(t){switch(t.type){case"group":return[(0,o.h)("li",{className:"DropMenu_group-title hu-t-uppercase hu-color_accent"},t.text),(0,o.h)("ul",{className:"DropMenu_list"},s.default.getArrayFrom(t.list).map(e))];default:return t.text&&(0,o.h)("li",{className:"DropMenu_item hu-display-flex hu-align-center"+(t.active?" active":""),onClick:function(){return a.default.emit("Autocomplete-entry",{text:t.text,payload:t.payload})}},"image"===t.include&&(0,o.h)("div",{className:"DropMenu_item_attachment hu-border-radius-3 hu-background-cover",style:{backgroundImage:"url("+t.image+")"}}),"icon"===t.include&&(0,o.h)("div",{className:"DropMenu_item_attachment hu-border-radius-3 hu-display-flex hu-align-center hu-justify-center"},(0,o.h)("i",{className:"fi "+t.icon+" hu-s-25"})),"emoji"===t.include&&(0,o.h)("div",{className:"DropMenu_item_attachment hu-border-radius-3 hu-display-flex hu-align-center hu-justify-center hu-s-30"},t.emoji),(0,o.h)("span",{className:"hu-flex-1"},t.text))}})))}}]),n}();t.default=u},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(272),o=(r=i)&&r.__esModule?r:{default:r};n(283),n(284),t.default=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(0),o=r(n(3)),a=r((r(n(91)),n(24))),s=n(114),l=r(s),c=function(e){var t=e.date,n=e.onChange,r=a.default.multiLang;return(0,u.h)("div",{className:"DayPicker-Caption"},(0,u.h)("div",{className:"DayPicker-Caption__content"},(0,u.h)("div",{className:"DayPicker-Caption__content__item"},(0,u.h)("select",{className:"DayPicker-Caption__month",onChange:function(e){return n(new Date(t.getFullYear(),e.target.value))},value:t.getMonth()},r.getObject("months").map(function(e,t){return(0,u.h)("option",{value:t},e)}))),(0,u.h)("div",{className:"DayPicker-Caption__content__item"},(0,u.h)("select",{className:"DayPicker-Caption__year",onChange:function(e){return n(new Date(e.target.value,t.getMonth()))},value:t.getFullYear()},Array(200).fill(0).map(function(e,t){return(new Date).getFullYear()+t-100}).map(function(e){return(0,u.h)("option",{value:e},e)})))))},h=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={value:null,from:null,to:null,month:(new Date).getMonth(),year:(new Date).getFullYear()},t.multilang=a.default.multiLang,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.Component),i(n,[{key:"onSelect",value:function(e,t){if(this.props.isRange){var n=s.DateUtils.addDayToRange(e,{from:this.state.from,to:this.state.to});this.setState({from:n.from,to:n.to}),o.default.emit("Calendar-entry",{value:[n.from,n.to]})}else this.setState({value:e}),o.default.emit("Calendar-entry",{value:e})}},{key:"handleMonthChange",value:function(e){var t=this.state.month,n=e.getMonth(),r=this.state.year;11===t&&0===n?this.setState({month:e.getMonth(),year:r+1}):0===t&&11===n?this.setState({month:e.getMonth(),year:r-1}):this.setState({month:e.getMonth()})}},{key:"onChange",value:function(e){this.setState({year:e.getFullYear(),month:e.getMonth()})}},{key:"render",value:function(e,t){var n=this,r=e.active,i=(e.format,e.isRange),o=t.value,a=t.from,s=t.to;return(0,u.h)("div",{className:"CalendarComponent hu-shadow hu-border-radius-3"+(r?" active":"")},(0,u.h)(l.default,{locale:this.multilang.getLang(),months:this.multilang.getObject("months"),weekdaysLong:this.multilang.getObject("weekdays_long"),weekdaysShort:this.multilang.getObject("weekdays_short"),firstDayOfWeek:this.multilang.getObject("first_weekday"),className:i?"Selectable":null,selectedDays:i?[a,{from:a,to:s}]:o,month:new Date(t.year,t.month),onDayClick:this.onSelect.bind(this),onMonthChange:this.handleMonthChange.bind(this),fixedWeeks:!0,modifiers:i?{start:a,end:s}:null,captionElement:function(e){var t=e.date;return(0,u.h)(c,{date:t,onChange:n.onChange.bind(n)})}}))}}]),n}();t.default=h},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModifiersUtils=t.LocaleUtils=t.DateUtils=t.DayPicker=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=n(14),u=i(s),l=i((i(n(12)),n(278))),c=i(n(115)),h=i(n(279)),f=i(n(116)),p=r(n(44)),d=r(n(19)),m=r(n(41)),v=r(n(70)),y=i(n(43)),g=n(42),b=t.DayPicker=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));r.dayPicker=null,r.showNextMonth=function(e){if(r.allowNextMonth()){var t=r.props.pagedNavigation?r.props.numberOfMonths:1,n=d.addMonths(r.state.currentMonth,t);r.showMonth(n,e)}},r.showPreviousMonth=function(e){if(r.allowPreviousMonth()){var t=r.props.pagedNavigation?r.props.numberOfMonths:1,n=d.addMonths(r.state.currentMonth,-t);r.showMonth(n,e)}},r.handleKeyDown=function(e){switch(e.persist(),e.keyCode){case g.LEFT:r.showPreviousMonth();break;case g.RIGHT:r.showNextMonth();break;case g.UP:r.showPreviousYear();break;case g.DOWN:r.showNextYear()}r.props.onKeyDown&&r.props.onKeyDown(e)},r.handleDayKeyDown=function(e,t,n){switch(n.persist(),n.keyCode){case g.LEFT:p.cancelEvent(n),r.focusPreviousDay(n.target);break;case g.RIGHT:p.cancelEvent(n),r.focusNextDay(n.target);break;case g.UP:p.cancelEvent(n),r.focusPreviousWeek(n.target);break;case g.DOWN:p.cancelEvent(n),r.focusNextWeek(n.target);break;case g.ENTER:case g.SPACE:p.cancelEvent(n),r.props.onDayClick&&r.handleDayClick(e,t,n)}r.props.onDayKeyDown&&r.props.onDayKeyDown(e,t,n)},r.handleDayClick=function(e,t,n){n.persist(),t[r.props.classNames.outside]&&r.props.enableOutsideDaysClick&&r.handleOutsideDayClick(e),r.props.onDayClick&&r.props.onDayClick(e,t,n)},r.handleTodayButtonClick=function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth());r.showMonth(n),e.target.blur(),r.props.onTodayButtonClick&&(e.persist(),r.props.onTodayButtonClick(new Date(t.getFullYear(),t.getMonth(),t.getDate()),v.getModifiersForDay(t,r.props.modifiers),e))};var t=r.getCurrentMonthFromProps(e);return r.state={currentMonth:t},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.Component),a(n,[{key:"componentDidUpdate",value:function(e){if(e.month!==this.props.month&&!d.isSameMonth(e.month,this.props.month)){var t=this.getCurrentMonthFromProps(this.props);this.setState({currentMonth:t})}}},{key:"getCurrentMonthFromProps",value:function(e){var t=p.startOfMonth(e.month||e.initialMonth);if(e.pagedNavigation&&1<e.numberOfMonths&&e.fromMonth){var n=p.getMonthsDiff(e.fromMonth,t);t=d.addMonths(e.fromMonth,Math.floor(n/e.numberOfMonths)*e.numberOfMonths)}else e.toMonth&&1<e.numberOfMonths&&p.getMonthsDiff(t,e.toMonth)<=0&&(t=d.addMonths(e.toMonth,1-this.props.numberOfMonths));return t}},{key:"getNextNavigableMonth",value:function(){return d.addMonths(this.state.currentMonth,this.props.numberOfMonths)}},{key:"getPreviousNavigableMonth",value:function(){return d.addMonths(this.state.currentMonth,-1)}},{key:"allowPreviousMonth",value:function(){var e=d.addMonths(this.state.currentMonth,-1);return this.allowMonth(e)}},{key:"allowNextMonth",value:function(){var e=d.addMonths(this.state.currentMonth,this.props.numberOfMonths);return this.allowMonth(e)}},{key:"allowMonth",value:function(e){var t=this.props,n=t.fromMonth,r=t.toMonth;return!(!t.canChangeMonth||n&&p.getMonthsDiff(n,e)<0||r&&0<p.getMonthsDiff(r,e))}},{key:"allowYearChange",value:function(){return this.props.canChangeMonth}},{key:"showMonth",value:function(e,t){var n=this;this.allowMonth(e)&&this.setState({currentMonth:p.startOfMonth(e)},function(){t&&t(),n.props.onMonthChange&&n.props.onMonthChange(n.state.currentMonth)})}},{key:"showNextYear",value:function(){if(this.allowYearChange()){var e=d.addMonths(this.state.currentMonth,12);this.showMonth(e)}}},{key:"showPreviousYear",value:function(){if(this.allowYearChange()){var e=d.addMonths(this.state.currentMonth,-12);this.showMonth(e)}}},{key:"focusFirstDayOfMonth",value:function(){p.getDayNodes(this.dayPicker,this.props.classNames)[0].focus()}},{key:"focusLastDayOfMonth",value:function(){var e=p.getDayNodes(this.dayPicker,this.props.classNames);e[e.length-1].focus()}},{key:"focusPreviousDay",value:function(e){var t=this,n=p.getDayNodes(this.dayPicker,this.props.classNames),r=p.nodeListToArray(n).indexOf(e);-1!==r&&(0===r?this.showPreviousMonth(function(){return t.focusLastDayOfMonth()}):n[r-1].focus())}},{key:"focusNextDay",value:function(e){var t=this,n=p.getDayNodes(this.dayPicker,this.props.classNames),r=p.nodeListToArray(n).indexOf(e);-1!==r&&(r===n.length-1?this.showNextMonth(function(){return t.focusFirstDayOfMonth()}):n[r+1].focus())}},{key:"focusNextWeek",value:function(e){var t=this,n=p.getDayNodes(this.dayPicker,this.props.classNames),r=p.nodeListToArray(n).indexOf(e);r>n.length-8?this.showNextMonth(function(){var e=7-(n.length-r);p.getDayNodes(t.dayPicker,t.props.classNames)[e].focus()}):n[r+7].focus()}},{key:"focusPreviousWeek",value:function(e){var t=this,n=p.getDayNodes(this.dayPicker,this.props.classNames),r=p.nodeListToArray(n).indexOf(e);r<=6?this.showPreviousMonth(function(){var e=p.getDayNodes(t.dayPicker,t.props.classNames);e[e.length-7+r].focus()}):n[r-7].focus()}},{key:"handleOutsideDayClick",value:function(e){var t=this.state.currentMonth,n=this.props.numberOfMonths,r=p.getMonthsDiff(t,e);0<r&&n<=r?this.showNextMonth():r<0&&this.showPreviousMonth()}},{key:"renderNavbar",value:function(){var e=this.props,t=e.labels,n=e.locale,r=e.localeUtils,i=e.canChangeMonth,o=e.navbarElement,a=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["labels","locale","localeUtils","canChangeMonth","navbarElement"]);if(!i)return null;var s={month:this.state.currentMonth,classNames:this.props.classNames,className:this.props.classNames.navBar,nextMonth:this.getNextNavigableMonth(),previousMonth:this.getPreviousNavigableMonth(),showPreviousButton:this.allowPreviousMonth(),showNextButton:this.allowNextMonth(),onNextClick:this.showNextMonth,onPreviousClick:this.showPreviousMonth,dir:a.dir,labels:t,locale:n,localeUtils:r};return u.default.isValidElement(o)?u.default.cloneElement(o,s):u.default.createElement(o,s)}},{key:"renderMonths",value:function(){for(var e=[],t=p.getFirstDayOfWeekFromProps(this.props),n=0;n<this.props.numberOfMonths;n+=1){var r=d.addMonths(this.state.currentMonth,n);e.push(u.default.createElement(h.default,o({key:n},this.props,{month:r,firstDayOfWeek:t,onDayKeyDown:this.handleDayKeyDown,onDayClick:this.handleDayClick})))}return this.props.reverseMonths&&e.reverse(),e}},{key:"renderFooter",value:function(){return this.props.todayButton?u.default.createElement("div",{className:this.props.classNames.footer},this.renderTodayButton()):null}},{key:"renderTodayButton",value:function(){return u.default.createElement("button",{type:"button",tabIndex:0,className:this.props.classNames.todayButton,"aria-label":this.props.todayButton,onClick:this.handleTodayButtonClick},this.props.todayButton)}},{key:"render",value:function(){var t=this,e=this.props.classNames.container;return this.props.onDayClick||(e=e+" "+this.props.classNames.interactionDisabled),this.props.className&&(e=e+" "+this.props.className),u.default.createElement("div",o({},this.props.containerProps,{className:e,ref:function(e){return t.dayPicker=e},lang:this.props.locale}),u.default.createElement("div",{className:this.props.classNames.wrapper,tabIndex:this.props.canChangeMonth&&void 0!==this.props.tabIndex?this.props.tabIndex:-1,onKeyDown:this.handleKeyDown,onFocus:this.props.onFocus,onBlur:this.props.onBlur},this.renderNavbar(),u.default.createElement("div",{className:this.props.classNames.months},this.renderMonths()),this.renderFooter()))}}]),n}();b.VERSION="7.1.9",b.defaultProps={classNames:y.default,tabIndex:0,initialMonth:new Date,numberOfMonths:1,labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},locale:"en",localeUtils:m,showOutsideDays:!1,enableOutsideDaysClick:!0,fixedWeeks:!1,canChangeMonth:!0,reverseMonths:!1,pagedNavigation:!1,showWeekNumbers:!1,showWeekDays:!0,renderDay:function(e){return e.getDate()},renderWeek:function(e){return e},weekdayElement:u.default.createElement(f.default,null),navbarElement:u.default.createElement(c.default,{classNames:y.default}),captionElement:u.default.createElement(l.default,{classNames:y.default})},b.propTypes={},b.DateUtils=d,b.LocaleUtils=m,b.ModifiersUtils=v,t.DateUtils=d,t.LocaleUtils=m,t.ModifiersUtils=v,t.default=b},function(e,t,n){"use strict";var r=n(275),a=n(276),s=n(277);e.exports=function(){function e(e,t,n,r,i,o){o!==s&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(14),s=r(o),a=r((r(n(12)),n(41))),u=n(42),l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleKeyUp=t.handleKeyUp.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"shouldComponentUpdate",value:function(e){return e.locale!==this.props.locale||e.classNames!==this.props.classNames||e.date.getMonth()!==this.props.date.getMonth()||e.date.getFullYear()!==this.props.date.getFullYear()}},{key:"handleKeyUp",value:function(e){e.keyCode===u.ENTER&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.date,r=e.months,i=e.locale,o=e.localeUtils,a=e.onClick;return s.default.createElement("div",{className:t.caption,role:"heading"},s.default.createElement("div",{onClick:a,onKeyUp:this.handleKeyUp},r?r[n.getMonth()]+" "+n.getFullYear():o.formatMonthTitle(n,i)))}}]),n}();l.defaultProps={localeUtils:a.default},(t.default=l).propTypes={}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(14),_=i(u),w=i((i(n(12)),n(280))),l=i(n(281)),k=n(42),c=r(n(70)),x=r(n(44)),C=r(n(19)),o=function(e){function o(){var e,t,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=u=a(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r))),u.renderDay=function(e){var t=u.props.month.getMonth(),n=x.getModifiersFromProps(u.props),r=c.getModifiersForDay(e,n);C.isSameDay(e,new Date)&&!Object.prototype.hasOwnProperty.call(n,u.props.classNames.today)&&r.push(u.props.classNames.today),e.getMonth()!==t&&r.push(u.props.classNames.outside);var i=e.getMonth()!==t,o=-1;u.props.onDayClick&&!i&&1===e.getDate()&&(o=u.props.tabIndex);var a=""+e.getFullYear()+e.getMonth()+e.getDate(),s={};return r.forEach(function(e){s[e]=!0}),_.default.createElement(l.default,{key:(i?"outside-":"")+a,classNames:u.props.classNames,day:e,modifiers:s,modifiersStyles:u.props.modifiersStyles,empty:i&&!u.props.showOutsideDays&&!u.props.fixedWeeks,tabIndex:o,ariaLabel:u.props.localeUtils.formatDay(e,u.props.locale),ariaDisabled:i||-1<r.indexOf("disabled"),ariaSelected:-1<r.indexOf("selected"),onClick:u.props.onDayClick,onFocus:u.props.onDayFocus,onKeyDown:u.props.onDayKeyDown,onMouseEnter:u.props.onDayMouseEnter,onMouseLeave:u.props.onDayMouseLeave,onMouseDown:u.props.onDayMouseDown,onMouseUp:u.props.onDayMouseUp,onTouchEnd:u.props.onDayTouchEnd,onTouchStart:u.props.onDayTouchStart},u.props.renderDay(e,s))},a(u,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,u.Component),s(o,[{key:"render",value:function(){var e=this,t=this.props,r=t.classNames,i=t.month,n=t.months,o=t.fixedWeeks,a=t.captionElement,s=t.weekdayElement,u=t.locale,l=t.localeUtils,c=t.weekdaysLong,h=t.weekdaysShort,f=t.firstDayOfWeek,p=t.onCaptionClick,d=t.showWeekNumbers,m=t.showWeekDays,v=t.onWeekClick,y={date:i,classNames:r,months:n,localeUtils:l,locale:u,onClick:p?function(e){return p(i,e)}:void 0},g=_.default.isValidElement(a)?_.default.cloneElement(a,y):_.default.createElement(a,y),b=x.getWeekArray(i,f,o);return _.default.createElement("div",{className:r.month,role:"grid"},g,m&&_.default.createElement(w.default,{classNames:r,weekdaysShort:h,weekdaysLong:c,firstDayOfWeek:f,showWeekNumbers:d,locale:u,localeUtils:l,weekdayElement:s}),_.default.createElement("div",{className:r.body,role:"rowgroup"},b.map(function(t){var n=void 0;return d&&(n=C.getWeekNumber(t[6])),_.default.createElement("div",{key:t[0].getTime(),className:r.week,role:"row"},d&&_.default.createElement("div",{className:r.weekNumber,tabIndex:0,role:"gridcell",onClick:v?function(e){return v(n,t,e)}:void 0,onKeyUp:v?function(e){return e.keyCode===k.ENTER&&v(n,t,e)}:void 0},e.props.renderWeek(n,t,i)),t.map(e.renderDay))})))}}]),o}();(t.default=o).propTypes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(14),d=r(o),a=(r(n(12)),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"render",value:function(){for(var e=this.props,t=e.classNames,n=e.firstDayOfWeek,r=e.showWeekNumbers,i=e.weekdaysLong,o=e.weekdaysShort,a=e.locale,s=e.localeUtils,u=e.weekdayElement,l=[],c=0;c<7;c+=1){var h=(c+n)%7,f={key:c,className:t.weekday,weekday:h,weekdaysLong:i,weekdaysShort:o,localeUtils:s,locale:a},p=d.default.isValidElement(u)?d.default.cloneElement(u,f):d.default.createElement(u,f);l.push(p)}return d.default.createElement("div",{className:t.weekdays,role:"rowgroup"},d.default.createElement("div",{className:t.weekdaysRow,role:"row"},r&&d.default.createElement("div",{className:t.weekday}),l))}}]),t}());(t.default=a).propTypes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function k(t,n,r){if(t)return function(e){e.persist(),t(n,r,e)}}Object.defineProperty(t,"__esModule",{value:!0});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(14),C=r(o),s=(r(n(12)),n(19)),u=n(44),S=r(n(43)),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"shouldComponentUpdate",value:function(o){var a=this,e=Object.keys(this.props),t=Object.keys(o);return e.length!==t.length||e.some(function(e){if("modifiers"!==e&&"modifiersStyles"!==e&&"classNames"!==e)return"day"===e?!(0,s.isSameDay)(a.props[e],o[e]):!(0,u.hasOwnProp)(o,e)||a.props[e]!==o[e];var t=a.props[e],n=o[e],r=Object.keys(t),i=Object.keys(n);return r.length!==i.length||r.some(function(e){return!(0,u.hasOwnProp)(n,e)||t[e]!==n[e]})})}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.modifiersStyles,r=e.day,i=e.tabIndex,o=e.empty,a=e.modifiers,s=e.onMouseEnter,u=e.onMouseLeave,l=e.onMouseUp,c=e.onMouseDown,h=e.onClick,f=e.onKeyDown,p=e.onTouchStart,d=e.onTouchEnd,m=e.onFocus,v=e.ariaLabel,y=e.ariaDisabled,g=e.ariaSelected,b=e.children,_=t.day;t!==S.default?_+=" "+Object.keys(a).join(" "):_+=Object.keys(a).map(function(e){return" "+_+"--"+e}).join("");var w=void 0;return n&&Object.keys(a).filter(function(e){return!!n[e]}).forEach(function(e){w=x({},w,n[e])}),o?C.default.createElement("div",{"aria-disabled":!0,className:_,style:w}):C.default.createElement("div",{className:_,tabIndex:i,style:w,role:"gridcell","aria-label":v,"aria-disabled":y,"aria-selected":g,onClick:k(h,r,a),onKeyDown:k(f,r,a),onMouseEnter:k(s,r,a),onMouseLeave:k(u,r,a),onMouseUp:k(l,r,a),onMouseDown:k(c,r,a),onTouchEnd:k(d,r,a),onTouchStart:k(p,r,a),onFocus:k(m,r,a)},b)}}]),t}();a.defaultProps={tabIndex:-1},a.defaultProps={modifiers:{},modifiersStyles:{},empty:!1},(t.default=a).propTypes={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierPropType=void 0;var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r},a={localeUtils:o.default.shape({formatMonthTitle:o.default.func,formatWeekdayShort:o.default.func,formatWeekdayLong:o.default.func,getFirstDayOfWeek:o.default.func}),range:o.default.shape({from:o.default.instanceOf(Date),to:o.default.instanceOf(Date)}),after:o.default.shape({after:o.default.instanceOf(Date)}),before:o.default.shape({before:o.default.instanceOf(Date)})};t.ModifierPropType=o.default.oneOfType([a.after,a.before,a.range,o.default.func,o.default.array]),t.default=a},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=r(n(17)),l=r(n(4)),c=n(29),h=a.default.inputAnimation$,s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={visible:!1},t.scrollBottom=e.scrollBottom,t.mobileHA=e.mobileHA,t.inputBoxElem=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"componentDidMount",value:function(){var t=this;h.subscribe({next:function(e){!1===t.props.disabled?"input_enable"===e?t.state.visible||t.setInputSize():"input_in"===e&&t.setState({visible:!0}):"input_out"===e&&(t.fixInputSize(),t.setState({visible:!1}))}})}},{key:"fixInputSize",value:function(){var e=this.inputBoxElem;if(e){var t=l.default.getComputedStyle(e).height;e.style.height=t}}},{key:"setInputSize",value:function(e){var t=this,n=this.inputBoxElem;if(n)if("number"==typeof e)(0,c.Animate)(n,{height:e},{duration:350,delay:350,mobileHA:this.mobileHA},function(){n.style.height=e});else{var r=n.parentElement,i=l.default.getComputedStyle(r).width,o=document.createElement("div");o.id=r.id,o.style.width=parseInt(i)+"px";var a=n.cloneNode(!0);a.style.height="auto",o.appendChild(a),document.getElementById("hu-input-sandbox").appendChild(o);var s=l.default.getComputedStyle(a).height;(0,c.Animate)(n,{height:s},{duration:350,mobileHA:this.mobileHA,complete:function(){h.next("input_in"),setTimeout(function(){!1===t.props.disabled&&(n.style.height="auto")},200)}},function(){h.next("input_in"),!1===t.props.disabled&&(n.style.height="auto")}),this.scrollBottom(350);for(var u=document.getElementById("hu-input-sandbox");u.firstChild;)u.removeChild(u.firstChild)}}},{key:"render",value:function(e,t){var n=this,r=t.visible;return(0,o.h)("div",{id:"hu-footer-input-fixed",className:"hu-margin-0-auto hu-display-none hu-m-display-block hu-position-relative hu-padding-0"+(r?" enabled":""),ref:function(e){return n.inputBaseElem=e}},(0,o.h)("div",{className:"hu-input-box hu-height-0 hu-overflow-hidden",ref:function(e){return n.inputBoxElem=e}},e.children))}}]),n}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=r((n(2),n(17))),s=r(n(3)),u=r(n(4)),l=n(29),c=a.default.inputAnimation$,h=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={visible:!1},t.scrollBottom=e.scrollBottom,t.mobileHA=e.mobileHA,t.inputBoxElem=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"componentDidMount",value:function(){var t=this;c.subscribe({next:function(e){!1===t.props.disabled?"input_enable"===e?t.state.visible||t.setInputSize():"input_in"===e&&t.setState({visible:!0},function(){return s.default.emit("hu-lb-input-focus")}):"input_out"===e&&t.setState({visible:!1},function(){return t.setInputSize(0)})}})}},{key:"setInputSize",value:function(e){var t=this.inputBoxElem;if(t)if("number"==typeof e)(0,l.Animate)(t,{height:e},{duration:350,mobileHA:this.mobileHA},function(){t.style.height=e});else{var n=t.parentElement,r=u.default.getComputedStyle(n).width,i=document.createElement("div");i.id=n.id,i.style.width=parseInt(r)+"px";var o=t.cloneNode(!0);o.style.height="auto",i.appendChild(o),document.getElementById("hu-mobile-input-sandbox").appendChild(i);var a=u.default.getComputedStyle(o).height;(0,l.Animate)(t,{height:a},{duration:350,mobileHA:this.mobileHA,complete:function(){setTimeout(function(){t.style.height="auto"},200)}},function(){t.style.height="auto"}),this.props.scrollBottom(350);for(var s=document.getElementById("hu-mobile-input-sandbox");s.firstChild;)s.removeChild(s.firstChild)}}},{key:"render",value:function(e,t){var n=this,r=t.visible;return(0,o.h)("div",{id:"hu-footer-input-mobile",className:"hu-zindex-2 hu-position-relative hu-m-display-none"+(r?" enabled":""),ref:function(e){return n.inputBaseElem=e}},(0,o.h)("div",{className:"hu-input-box hu-height-0 hu-overflow-hidden",ref:function(e){return n.inputBoxElem=e}},e.children))}}]),n}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),T=n(0),a=n(2),N=r(n(3)),P=n(288),I=r(n(119)),s=r(n(11)),A=r(n(9)),D=n(8),u=(0,a.connect)(function(e){return{config:e.config,input:e.input,avatar_url:e.config.avatar_url}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.backButtonElem=null,t.remountID="0",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,T.Component),o(n,[{key:"componentWillReceiveProps",value:function(e){(!0===this.props.disabled&&!1===e.disabled||this.props.input.fixed!==e.input.fixed)&&(this.remountID=Math.random().toString())}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.disabled,n=this.props.input,r=(n.input_motion,n.input_type),i=n.field,o=n.buttons,a=n.cards,s=n.payloads,u=(n.urls,n.extra);return n.fixed,!(!0===t&&t===e.input.disabled&&r===e.input.input_type&&i===e.input.field&&this.compareObjects(o,e.input.buttons)&&this.compareObjects(a,e.input.cards)&&this.compareObjects(s,e.input.payloads)&&this.compareObjects(u,e.input.extra))}},{key:"compareObjects",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"inputSubmit",value:function(e){if(!this.props.disabled){var t=this.props.input.extra,n=Object.keys(D(t,"destinations",{}))[0],r={destination:n,type:D(t,"destinations["+n+"].type",0),process:D(t,"destinations["+n+"].process")};s.default.sendMessage(Object.assign({},e,{extra:Object.assign({},n?function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,Object.assign({type:P.MAP_INPUT_DATA_TYPE[this.props.input_type]||r.type},r.process?{process:r.process}:{},e.extra?e.extra:{})):{})}))}}},{key:"backClick",value:function(){this.inputSubmit({type:"button",message:this.props.config.text.back,payload:"#back"}),this.backButtonElem.blur()}},{key:"render",value:function(e){var t=this,n=(e.disabled,e.config.branding),r=e.input,i=r.input_motion,o=r.input_type,a=r.field,s=r.field_type,u=r.buttons,l=void 0===u?[]:u,c=r.cards,h=void 0===c?[]:c,f=r.card_type,p=void 0===f?"image":f,d=r.payloads,m=void 0===d?[]:d,v=r.urls,y=void 0===v?[]:v,g=r.extra,b=r.backButton,_=r.fixed,w=(0,T.h)("div",{className:"hu-input-back"},(0,T.h)("button",{className:"back-button hu-color_contrast hu-border-color_contrast hu-not-selectable hu-s-10",onClick:this.backClick.bind(this),tabIndex:l?Object.keys(l).length+1:5,ref:function(e){t.backButtonElem=e}},(0,T.h)("span",{className:"left-arrow"},(0,T.h)("svg",{className:"hu-fill_button-text",xmlns:"http://www.w3.org/2000/svg"},(0,T.h)("path",{d:"M 11.78125 2.28125 L 2.78125 11.28125 L 2.09375 12 L 2.78125 12.71875 L 11.78125 21.71875 L 13.21875 20.28125 L 5.9375 13 L 22 13 L 22 11 L 5.9375 11 L 13.21875 3.71875 Z "}))),(0,T.h)("span",{className:"back-text hu-t-uppercase"},this.props.config.text.back))),k={field:D(g,"textarea.field",!1),type:D(g,"textarea.type",null),value:D(g,"textarea.value",null),fixed:D(g,"textarea.fixed",!1),size:D(g,"textarea.size",!1),maxChars:D(g,"textarea.maxChars",0),prefix:D(g,"textarea.prefix",null),minValue:D(g,"textarea.minValue",null),maxValue:D(g,"textarea.maxValue",null),locationOptions:D(g,"textarea.locationOptions",null),dateOptions:D(g,"textarea.dateOptions",{})},x={type:D(g,"buttons.type",null),dual_buttons:D(g,"buttons.dual_buttons",!1),pile_up:D(g,"buttons.pile_up",!1),alignment:D(g,"buttons.alignment","horizontal"),includes:D(g,"buttons.includes",[]),images:D(g,"buttons.images",[]),icons:D(g,"buttons.icons",[]),emojis:D(g,"buttons.emojis",[]),urls:D(g,"buttons.urls",[]),multi:D(g,"buttons.multi",!1),search:D(g,"buttons.search",!1),cards:D(g,"buttons.cards",[]),list:D(g,"buttons.list",[]),tags:D(g,"buttons.tags",[]),cumulative:D(g,"buttons.cumulative",!1),random:D(g,"buttons.random",!1)},C={state:D(g,"legal.state",!1),text:D(g,"legal.text",""),link:D(g,"legal.link",""),linkText:D(g,"legal.linkText","")},S=P.MAP_INPUT_TYPES[o]||null,E=(0,T.h)(S,{key:this.remountID,emoji:this.props.emoji,field:a,field_type:s,fixed:_,textareaData:k,inputSubmit:this.inputSubmit.bind(this),buttons:l,cards:h,card_type:p,payloads:m,urls:y,buttonsData:x,clicked:!1,ee:N.default}),O="main"===e.id||-1<["fixed","mobile"].indexOf(e.id)&&"text"===o;return"menu"===o&&0===l.length?(0,T.h)("div",{className:"hu-input-container hu-position-relative"}):(0,T.h)("div",{className:"hu-input-container hu-position-relative "+o+(e.avatar_url?"":" zero-margin")},i&&[n&&(0,T.h)(I.default,{mobile:!0}),(0,T.h)("div",{className:"hu-input-header"},b&&w),(0,T.h)("div",{className:"hu-input-body"},O&&E,C.state&&(0,T.h)("p",{className:"hu-input-legal-consent hu-color_contrast hu-s-14"},C.text," ",(0,T.h)("a",{className:"hu-input-legal-consent-link hu-d-none hu-border-color_contrast",href:A.default.getHref(C.link),target:"_blank"},C.linkText)))])}}]),n}())||i;t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MAP_INPUT_DATA_TYPE=t.DATA_TYPES=t.MAP_INPUT_TYPES=void 0;var i=r(n(289)),o=r(n(293)),a=r(n(294)),s=r(n(295)),u=r(n(296)),l=r(n(297)),c=r(n(298)),h=r(n(302)),f=r(n(303)),p=r(n(304)),d=r(n(305)),m=r(n(306)),v=r(n(307));t.MAP_INPUT_TYPES={text:i.default,field:i.default,file:o.default,menu:a.default,multi:s.default,referral:u.default,carousel:c.default,yes_no:l.default,autocomplete:h.default,scale:f.default,rating:p.default,number:d.default,location:m.default,date:v.default},t.DATA_TYPES={String:0,Integer:1,Float:2,Boolean:3,Date:4,Time:5,Datetime:6,File:7},t.MAP_INPUT_DATA_TYPE={text:0,field:0,file:7,menu:0,multi:0,referral:0,carousel:0,yes_no:0,autocomplete:0,scale:1,rating:0,number:2,location:0,date:4}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),k=n(0),a=n(2),x=r(n(40)),C=r(n(30)),S=r(n(290)),s=r(n(291));n(292);var u=(0,a.connect)(function(e){return{config:e.config}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={field:e.field,field_type:e.field_type,textareaData:e.textareaData,text:e.textareaData.value?t.getValue(e.textareaData.value):"",empty:!e.textareaData.value||!t.getValue(e.textareaData.value),images:[]},t.input=null,t.imagesInput=null,t.inputContainer=null,t.buttonsContainer=null,t.emojiButton=null,t.emojisAttached=!1,t.autocomplete=null,t.setInputFocus=t.setInputFocus.bind(t),t.setFocusWithChar=t.setFocusWithChar.bind(t),t.ee=e.ee,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,k.Component),o(n,[{key:"getValue",value:function(e){return"$"===e.charAt(0)?temp_data[e.substring(1)]||"":e}},{key:"onFocus",value:function(e){-1===this.inputContainer.className.indexOf("focus")&&(this.inputContainer.className+=" focus")}},{key:"onTextareaClick",value:function(e){this.buttonsContainer&&this.buttonsContainer.contains(e.target)||this.setInputFocus()}},{key:"onBlur",value:function(){this.input&&(this.input.blur(),this.inputContainer.className=this.inputContainer.className.replace(/\sfocus/g,""))}},{key:"onKeyDown",value:function(e){if(13==(e.keyCode||e.which))if(e.shiftKey){e.preventDefault();var t=window.getSelection(),n=t.anchorNode,r=t.anchorOffset,i=n.textContent,o=i.slice(0,r),a=i.slice(r)||" ";n.textContent=o+"\n"+a;var s=document.createRange();s.setStart(n,r+1),s.setEnd(n,r+1),t.removeAllRanges(),t.addRange(s)}else e.preventDefault(),this.state.empty||this.send()}},{key:"onInputKeyDown",value:function(e){13==(e.keyCode||e.which)&&(e.preventDefault(),this.state.empty||this.send())}},{key:"onChange",value:function(e){var t="string"==typeof e.target.value?e.target.value:e.target.textContent;this.setState({text:t,empty:""===t})}},{key:"onPaste",value:function(e){var t;t=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e.clipboardData.getData("text/plain"),document.execCommand("inserttext",!1,t),e.preventDefault()}},{key:"send",value:function(){this.emojisAttached&&this.emojisAttached.hide();var e=this.state.images,t=this.input&&this.input.value||this.state.text;if((""!==t||0!=e.length)&&(this.props.inputSubmit({type:0<e.length?"file":"text",message:t,files:e}),this.props.textareaData.field&&(temp_data[this.props.textareaData.field]=t),this.setState({text:"",empty:!0,images:[]}),!this.props.fixed)){this.onBlur(),this.input.style.visibility="hidden";var n=this.input;setTimeout(function(){n&&(n.style.visibility="visible")},1)}}},{key:"setInputFocus",value:function(){this.input&&this.input.focus()}},{key:"setFocusWithChar",value:function(e){document.activeElement!==this.input&&this.input&&this.input.focus()}},{key:"componentDidMount",value:function(){this.ee.on("hu-lb-input-focus",this.setInputFocus),this.ee.on("hu-lb-text-focus",this.setFocusWithChar)}},{key:"componentWillUnmount",value:function(){this.ee.removeListener("hu-lb-input-focus",this.setInputFocus),this.ee.removeListener("hu-lb-text-focus",this.setFocusWithChar)}},{key:"attachImage",value:function(e){for(var t=e.target.files,n=[],r=0;r<t.length;r++)n.push(t[r]);this.setState({empty:!1,images:n})}},{key:"attachEmojis",value:function(){!1===this.emojisAttached&&(this.emojisAttached=new s.default(this.input,this.emojiButton,document.getElementById(this.props.emoji),{pages:["People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],search:!0,preview:!0,height:"300px",positionX:"right",positionY:"bottom",offsetY:-285,offsetX:56,spritesUrl:"https://storage.googleapis.com/static.helloumi.com/daisho/img/sprite-icons.png"}),this.emojisAttached.show())}},{key:"removeImage",value:function(e){var t=this.state.images.slice();t.splice(e,1),this.setState({images:t})}},{key:"render",value:function(e,t){var n=this,r=t.text,i=t.empty,o=t.images,a=e.field,s=e.field_type,u=e.fixed,l=e.textareaData,c=C.default.getInputPlaceholder(l,u),h=C.default.getInputAspect(l),f=C.default.getInputNativeBehavior(l),p=-1<["image"].indexOf(s)||u||!1,d=-1<["text"].indexOf(s)||u||!1,m=(0,k.h)("button",{className:"send hu-display-flex",onClick:this.send.bind(this),tabIndex:2},(0,k.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",x:"3650",y:"3688"},(0,k.h)("path",{fill:"",d:"M1.1 21.757l22.7-9.73L1.1 2.3l.012 7.912 13.623 1.816-13.623 1.817-.01 7.912z"}))),v=(0,k.h)("div",{className:"attach",tabIndex:3,onClick:function(){n.imagesInput.click()}},(0,k.h)("svg",{className:"hu-fill_contrast",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",x:"3650",y:"3688",viewBox:"0 0 35 30"},(0,k.h)("path",{fill:"",d:"M32.8,0c0.6,0,1.1,0.2,1.6,0.6C34.8,1,35,1.6,35,2.2v25.6c0,0.6-0.2,1.1-0.6,1.6C34,29.8,33.4,30,32.8,30 H2.2c-0.6,0-1.1-0.2-1.6-0.6C0.2,29,0,28.4,0,27.8V2.2C0,1.6,0.2,1,0.6,0.6C1,0.2,1.6,0,2.2,0H32.8z M23.8,15c0.4,0,0.8,0.2,1,0.5 l7.7,8.3V3.4c0-0.6-0.3-0.9-1-0.9h-28c-0.6,0-0.9,0.3-1,0.9v20.3l9.8-11.9c0.4-0.4,0.9-0.6,1.3-0.6c0.6,0,1,0.2,1.3,0.5l4.2,4.6 l0.3,0.3c0.3,0.2,0.6,0.3,0.9,0.3c0.3,0,0.6-0.1,0.9-0.4l1.4-1.2C23.1,15.1,23.4,15,23.8,15L23.8,15z M28.9,11.4 c-0.7,0.7-1.6,1.1-2.7,1.1c-1,0-1.9-0.4-2.7-1.1c-0.7-0.7-1.1-1.6-1.1-2.7c0-1,0.4-1.9,1.1-2.7C24.3,5.4,25.2,5,26.2,5 c1,0,1.9,0.4,2.7,1.1C29.6,6.8,30,7.7,30,8.8C30,9.8,29.6,10.7,28.9,11.4z"})),(0,k.h)("input",{className:"hu-opacity-0",type:"file",accept:"image/*",ref:function(e){return n.imagesInput=e},onChange:function(e){return n.attachImage(e)}})),y=(0,k.h)("div",{className:"emoji",tabIndex:4,onClick:this.attachEmojis.bind(this),ref:function(e){n.emojiButton=e}},(0,k.h)("svg",{className:"hu-fill_contrast",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",x:"3650",y:"3688",viewBox:"0 0 34 34"},(0,k.h)("path",{fill:"",d:"M17.1,34.3C7.7,34.3,0,26.6,0,17.1S7.7,0,17.1,0s17.1,7.7,17.1,17.1S26.6,34.3,17.1,34.3z M17.1,2.9 C9.3,2.9,2.9,9.3,2.9,17.1s6.4,14.3,14.3,14.3S31.4,25,31.4,17.1S25,2.9,17.1,2.9z M11.4,14.3c-1.6,0-2.9-1.3-2.9-2.9 s1.3-2.9,2.9-2.9s2.9,1.3,2.9,2.9S13,14.3,11.4,14.3z M17.1,27.1c-3.8,0-7.1-2.4-8.2-6c-0.2-0.8,0.2-1.5,0.9-1.8 c0.7-0.2,1.5,0.2,1.8,0.9c0.7,2.4,2.9,4,5.4,4s4.7-1.6,5.4-4c0.2-0.8,1-1.2,1.8-0.9c0.7,0.2,1.2,1,0.9,1.8 C24.2,24.7,20.9,27.1,17.1,27.1z M22.9,14.3c-1.6,0-2.9-1.3-2.9-2.9s1.3-2.9,2.9-2.9s2.9,1.3,2.9,2.9S24.4,14.3,22.9,14.3z"}))),g=x.default.only(["chrome","firefox","safari","opera","msedge"]),b={text:g?"contenteditable":"native",image:g?"contenteditable":"native",number:"native",email:"native",tel:"native",url:g?"contenteditable":"native"},_={contenteditable:(0,k.h)("div",{className:"hu-textarea hu-color_textarea-text",contentEditable:!0,tabIndex:1,placeholder:c,ref:function(e){return n.input=e},onInput:function(e){return n.onChange(e)},onKeyDown:function(e){return n.onKeyDown(e)},onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onPaste:this.onPaste,suppressContentEditableWarning:!0,"data-gramm_editor":"false"},r),native:(0,k.h)("input",{key:"native",className:"hu-textarea hu-color_textarea-text",tabIndex:1,placeholder:c,ref:function(e){return n.input=e},onInput:function(e){return n.onChange(e)},onChange:function(e){return n.onChange(e)},onKeyDown:function(e){return n.onInputKeyDown(e)},onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),"data-gramm_editor":"false",value:r,type:f,name:a})},w=0===o.length?_[b[s||"text"]]:(0,k.h)(S.default,{images:o,removeImage:this.removeImage.bind(this)});return(0,k.h)("div",{className:h+(i?" empty":"")},(0,k.h)("div",{className:"hu-textarea-input-container hu-background-color_textarea-background hu-border-color_textarea-border "+(0<o.length?"image":"text"),ref:function(e){return n.inputContainer=e},onClick:this.onTextareaClick.bind(this)},w,(0,k.h)("div",{className:"hu-textarea-buttons",ref:function(e){return n.buttonsContainer=e}},m,(0,k.h)("div",{className:"attachments"},p&&v,!x.default.isMobile()&&e.emoji&&d&&y))),(0,k.h)("p",{className:"hu-textarea-footer-info hu-not-selectable hu-s-10 hu-color_contrast hu-t-uppercase"},e.config.text.input_text_help))}}]),n}())||i;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(0),o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={imagesList:Array.from(e.images).map(function(e){return{key:e.name,url:null}})},t.showThumbnails(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.Component),r(n,[{key:"showThumbnails",value:function(e){for(var n=this,r=(e||this.props).images,i=this.state.imagesList.slice(),t=0;t<r.length;t++)!function(t){var e=new FileReader;e.readAsDataURL(r[t]),e.onload=function(e){i[t].url=e.target.result,n.setState({imagesList:i})}}(t)}},{key:"componentWillReceiveProps",value:function(e){var t=e.images;this.compareFileList(t,this.props.images)||(this.setState({imagesList:Array.from(t).map(function(e){return{key:e.name,url:null}})}),this.showThumbnails(e))}},{key:"compareFileList",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].name!==t[n].name)return!1;return!0}},{key:"render",value:function(){var e=this.props,n=(e.images,e.removeImage),t=this.state.imagesList;return(0,i.h)("div",{className:"hu-images-preview"},t.map(function(e,t){return(0,i.h)("div",{className:"thumbnail",key:e.key,style:e.url&&"background-image: url("+e.url+");"},(0,i.h)("div",{className:"thumbnail-button"},(0,i.h)("svg",{className:"hu-fill_accent",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",x:"3650",y:"3688",viewBox:"0 0 610 610",onclick:function(){return n(t)}},(0,i.h)("path",{fill:!0,d:"M387.128,170.748L306,251.915l-81.128-81.167l-54.124,54.124L251.915,306l-81.128,81.128l54.085,54.086L306,360.086 l81.128,81.128l54.086-54.086L360.086,306l81.128-81.128L387.128,170.748z M522.38,89.62 c-119.493-119.493-313.267-119.493-432.76,0c-119.493,119.493-119.493,313.267,0,432.76 c119.493,119.493,313.267,119.493,432.76,0C641.873,402.888,641.873,209.113,522.38,89.62z M468.295,468.295 c-89.62,89.619-234.932,89.619-324.551,0c-89.62-89.62-89.62-234.932,0-324.551c89.62-89.62,234.931-89.62,324.551,0 C557.914,233.363,557.914,378.637,468.295,468.295z"}))))}))}}]),n}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function n(e,t,r,i){if(this.DEFAULTS={pages:["People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],search:!1,preview:!1,width:"325px",height:"200px",positionY:"top",positionX:"right",offsetY:0,offsetX:0,spritesUrl:""},this.options=this.extendDefaults(this.DEFAULTS,i),"object"!==(void 0===e?"undefined":o(e)))throw new TypeError("input must be an object, type "+(void 0===e?"undefined":o(e))+" was given instead.");if("object"!==(void 0===t?"undefined":o(t)))throw new TypeError("trigger must be an object, type "+(void 0===t?"undefined":o(t))+" was given instead.");if("object"!==(void 0===r?"undefined":o(r)))throw new TypeError("attach must be an object, type "+(void 0===r?"undefined":o(r))+" was given instead.");if("object"!==(void 0===i?"undefined":o(i)))throw new TypeError("options must be an object, type "+(void 0===i?"undefined":o(i))+" was given instead.");if(this.options.pages.map(function(e,t){if(n.emojiPages.indexOf(e)<0)throw new TypeError('options.page "'+this.options.pages[t]+"\" doesn't exist. Try these: "+n.emojiPages)}),"boolean"!=typeof this.options.search)throw new TypeError("options.search must be a boolean, type "+o(this.options.search)+" was given instead.");if("boolean"!=typeof this.options.preview)throw new TypeError("options.preview must be a boolean, type "+o(this.options.preview)+" was given instead.");if(n.positionYValues.indexOf(this.options.positionY)<0)throw new TypeError('options.positionY value "'+this.options.positionY+'" not available, try these: '+n.positionYValues);if(n.positionXValues.indexOf(this.options.positionX)<0)throw new TypeError('options.positionX value "'+this.options.positionX+'" not available, try these: '+n.positionXValues);if("number"!=typeof this.options.offsetY||"number"!=typeof this.options.offsetX)throw new TypeError("options.offset must be a number");if("string"!=typeof this.options.spritesUrl)throw new TypeError("options.spritesUrl must be a string, type "+(void 0===i?"undefined":o(i))+" was given instead.");this.input=e,this.trigger=t,this.attach=r,this.container=null,this.tabs=null,this.search=null,this.pagesScroll=null,this.checkScroll=!0,this.preview=null,this.init()};s.VERSION="1.0.1",s.positionYValues=["top","bottom"],s.positionXValues=["left","center","right"],s.emojiPages=["People","Nature","Food","Activity","Travel","Objects","Symbols","Flags"],s.contamination=15,s.prototype.extendDefaults=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(e[n]=t[n]);return e},s.prototype.toggle=function(e){this.container.contains(e.target)||(!0==("block"===this.container.style.display)?this.hide():this.show())},s.prototype.show=function(){this.container.style.display="block",this.options.search&&this.search.focus(),null==this.pagesScroll&&(this.pagesScroll=this.getAllPagesPosition())},s.prototype.hide=function(){this.container.style.display="none",this.search&&this.cancelSearch()},s.prototype.globalHide=function(e){this.container.contains(e.target)||this.trigger.contains(e.target)||"block"==this.container.style.display&&this.hide()},s.prototype.setInput=function(e){this.input=e},s.prototype.setContainerPosition=function(){var e="top"==this.options.positionY,t="bottom"==this.options.positionY,n="left"==this.options.positionX,r="center"==this.options.positionX,i="right"==this.options.positionX;e?this.container.style.bottom=this.options.offsetY+"px":t&&(this.container.style.top=this.options.offsetY+"px"),n?this.container.style.right=this.options.offsetX+"px":r?(this.container.style.left=0,this.container.style.right=0,this.container.style.margin="0 auto"):i&&(this.container.style.left=this.options.offsetX+"px")},s.prototype.updateContainerPosition=function(e,t){var n="top"==this.options.positionY,r="bottom"==this.options.positionY,i="left"==this.options.positionX,o="right"==this.options.positionX;n?this.container.style.bottom=this.options.offsetY+e+"px":r&&(this.container.style.top=this.options.offsetY+e+"px"),i?this.container.style.right=this.options.offsetX+t+"px":o&&(this.container.style.left=this.options.offsetX+t+"px")},s.prototype.selectPage=function(e){this.search&&this.cancelSearch();var t=e.target?e.target.parentNode.getAttribute("data-tab")||e.target.getAttribute("data-tab"):e;this.pageClassHandler(t),this.checkScroll=!1,this.container.querySelector("section").scrollTop=this.getPagePosition(t)},s.prototype.pageClassHandler=function(e){for(var t=this.tabs.querySelectorAll("li.hu-active"),n=0;n<t.length;n++)t[n].className=t[n].className.replace(" hu-active","");this.tabs.querySelector('[data-tab="'+e+'"]').className+=" hu-active"},s.prototype.scrollListener=function(e){if(this.checkScroll){this.checkScroll=!1;var t=e.target.scrollTop,n=this.getPageFromScroll(t);this.pageClassHandler(n)}setTimeout(function(){this.checkScroll=!0},200)},s.prototype.getAllPagesPosition=function(){var e=this.options.pages,t=[];for(var n in e){var r=this.container.querySelector("#page_"+e[n]).offsetTop;!0===this.options.search?r-=91:r-=49,t.push(r)}return t},s.prototype.getPagePosition=function(e){var t=this.container.querySelector("#page_"+e).offsetTop;return!0===this.options.search?t-=91:t-=49,t+1},s.prototype.getPageFromScroll=function(e){for(var t=this.options.pages,n=null,r=t.length-1;-1<r;r--)if(e>this.pagesScroll[r]){n=t[r];break}return null!==n?n:t[0]},s.prototype.searchListener=function(e){var t=e.target.value.toLowerCase(),n=[];if(""!=t){n=this.getObjectsFromJSON(s.EMOJIS,t);this.showSearchPage(),this.fillSearchPage(n)}else this.hideSearchPage()},s.prototype.showSearchPage=function(){for(var e=0;e<this.options.pages.length;e++){var t=this.container.querySelector("#page_"+this.options.pages[e]);-1==t.className.indexOf("hu-hidden")&&(t.className+=" hu-hidden")}var n=this.container.querySelector("#page_Search");-1!=n.className.indexOf("hu-hidden")&&(n.className=n.className.replace(" hu-hidden",""))},s.prototype.hideSearchPage=function(){for(var e=0;e<this.options.pages.length;e++){var t=this.container.querySelector("#page_"+this.options.pages[e]);-1<t.className.indexOf("hu-hidden")&&(t.className=t.className.replace(" hu-hidden",""))}var n=this.container.querySelector("#page_Search");-1<n.className.indexOf("hu-hidden")||(n.className+=" hu-hidden")},s.prototype.fillSearchPage=function(e){var t=this.container.querySelector("#page_Search .hu-emoji-list-items");for(var n in t.innerHTML="",e){var r=document.createElement("span");r.className="hu-emoji",r.textContent=e[n].value,r.setAttribute("data-name",e[n].name),r.setAttribute("data-value",e[n].value),r.addEventListener("click",this.pickEmoji.bind(this)),r.addEventListener("mouseenter",this.previewOn.bind(this)),r.addEventListener("mouseleave",this.previewOff.bind(this));var i=document.createElement("div");i.className="hu-emoji-item",i.appendChild(r),t.appendChild(i)}this.alignmentTrick(t,s.contamination)},s.prototype.cancelSearch=function(){this.search.value="";var e=document.createEvent("HTMLEvents");e.initEvent("keyup",!1,!0),this.search.dispatchEvent(e)},s.prototype.alignmentTrick=function(e,t){for(var n=0;n<t;n++){var r=document.createElement("div");r.className="hu-emoji-item",e.appendChild(r)}},s.prototype.getObjectsFromJSON=function(e,t){var n=[];for(var r in e)e.hasOwnProperty(r)&&("object"==o(e[r])?n=n.concat(this.getObjectsFromJSON(e[r],t)):-1<e[r].indexOf(t)&&n.push(e));return n},s.prototype.placeCaretAtEnd=function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}},s.prototype.pickEmoji=function(e){var t=e.target.getAttribute("data-value");this.insertEmoji(t,this.input),void 0!==this.input.value?this.input.focus():this.placeCaretAtEnd(this.input)},s.prototype.insertEmoji=function(e,t){var n=e.length;if(document.selection)t.focus(),document.selection.createRange().text=e;else if(t.selectionStart||"0"==t.selectionStart){var r=t.selectionStart,i=t.selectionEnd;t.value=t.value.substring(0,r)+e+t.value.substring(i,t.value.length),this.triggerEvent(t,"input"),t.focus(),t.setSelectionRange(r+n,i+n)}else void 0===t.value?t.textContent+=e:t.value+=e,this.triggerEvent(t,"input")},s.prototype.triggerEvent=function(e,t){var n;"createEvent"in document?((n=document.createEvent("HTMLEvents")).initEvent(t,!1,!0),e.dispatchEvent(n)):((n=document.createEventObject()).eventType=t,e.fireEvent("on"+n.eventType,n))},s.prototype.previewOn=function(e){var t=this.preview.querySelector(".hu-emoji-preview-image"),n=this.preview.querySelector(".hu-emoji-preview-title"),r=this.preview.querySelector(".hu-emoji-preview-name"),i=e.target||e,o=i.getAttribute("data-name"),a=o.slice(1,o.length-1);t.innerHTML=i.outerHTML,n.textContent=a,r.textContent=o},s.prototype.previewOff=function(){var e=this.preview.querySelector(".hu-emoji-preview-image"),t=this.preview.querySelector(".hu-emoji-preview-title"),n=this.preview.querySelector(".hu-emoji-preview-name");e.innerHTML="",t.innerHTML="",n.innerHTML=""},s.prototype.init=function(){var e,t,n,r,i,o,a;if(this.container=document.createElement("div"),this.container.className="hu-emoji-container",this.container.style.display="none",this.options.width&&(this.container.style.width=this.options.width),this.options.height&&(this.container.style.height=this.options.height),this.setContainerPosition(),(e=document.createElement("div")).className="hu-emoji-wrapper",t=document.createElement("header"),(n=document.createElement("div")).className="hu-emoji-types",(this.tabs=n).appendChild(this.getEmojiTopbar()),t.appendChild(n),!0===this.options.search){(r=document.createElement("div")).className="hu-emoji-search";var s=document.createElement("input");s.setAttribute("placeholder","Search emojis"),s.addEventListener("keyup",this.searchListener.bind(this)),s.addEventListener("paste",this.searchListener.bind(this)),r.appendChild(s),this.search=s,t.appendChild(r)}(i=document.createElement("section")).addEventListener("scroll",this.scrollListener.bind(this));var u=document.createElement("div");for(var l in u.className="hu-emoji-list",i.appendChild(u),this.options.pages)u.appendChild(this.getEmojiPage(this.options.pages[l]));if(!0===this.options.search&&u.appendChild(this.getSearchPage()),o=document.createElement("footer"),!0===this.options.preview){(a=document.createElement("div")).className="hu-emoji-preview";var c=document.createElement("div");c.className="hu-emoji-preview-image";var h=document.createElement("div");h.className="hu-emoji-preview-info";var f=document.createElement("h4");f.className="hu-emoji-preview-title";var p=document.createElement("p");p.className="hu-emoji-preview-name",h.appendChild(f),h.appendChild(p),a.appendChild(c),a.appendChild(h),this.preview=a,o.appendChild(a)}e.appendChild(t),e.appendChild(i),e.appendChild(o),this.container.appendChild(e),this.attach.appendChild(this.container),this.selectPage(this.options.pages[0]),this.trigger.addEventListener("click",this.toggle.bind(this)),document.addEventListener("click",this.globalHide.bind(this))},s.prototype.getEmojiPage=function(e){var t=document.createElement("div");t.className="hu-emoji-list-page",t.id="page_"+e;var n=document.createElement("h3");n.className="hu-emoji-list-type",n.textContent=e,t.appendChild(n);var r=document.createElement("div");for(var i in r.className="hu-emoji-list-items",s.EMOJIS[e]){var o=document.createElement("span");o.className="hu-emoji",o.textContent=s.EMOJIS[e][i].value,o.setAttribute("data-name",s.EMOJIS[e][i].name),o.setAttribute("data-value",s.EMOJIS[e][i].value),o.addEventListener("click",this.pickEmoji.bind(this)),o.addEventListener("mouseenter",this.previewOn.bind(this)),o.addEventListener("mouseleave",this.previewOff.bind(this));var a=document.createElement("div");a.className="hu-emoji-item",a.appendChild(o),r.appendChild(a)}return this.alignmentTrick(r,s.contamination),t.appendChild(r),t},s.prototype.getSearchPage=function(){var e=document.createElement("div");e.className="hu-emoji-list-page hu-hidden",e.id="page_Search";var t=document.createElement("h3");t.className="hu-emoji-list-type",t.textContent="Search results",e.appendChild(t);var n=document.createElement("div");return n.className="hu-emoji-list-items",e.appendChild(n),e},s.prototype.getEmojiTopbar=function(){var e=document.createElement("ul");for(var t in this.options.pages){var n=document.createElement("li");n.setAttribute("data-tab",this.options.pages[t]),n.addEventListener("click",this.selectPage.bind(this));var r=document.createElement("div");r.className="icon hu-tab-"+this.options.pages[t],r.style.backgroundImage="url("+this.options.spritesUrl+")",n.appendChild(r),e.appendChild(n)}return e},s.EMOJIS={People:[{name:":grinning:",value:""},{name:":grin:",value:""},{name:":joy:",value:""},{name:":smiley:",value:""},{name:":smile:",value:""},{name:":sweat_smile:",value:""},{name:":laughing:",value:""},{name:":innocent:",value:""},{name:":smiling_imp:",value:""},{name:":wink:",value:""},{name:":blush:",value:""},{name:":yum:",value:""},{name:":relieved:",value:""},{name:":heart_eyes:",value:""},{name:":sunglasses:",value:""},{name:":smirk:",value:""},{name:":neutral_face:",value:""},{name:":expressionless:",value:""},{name:":unamused:",value:""},{name:":sweat:",value:""},{name:":pensive:",value:""},{name:":confused:",value:""},{name:":confounded:",value:""},{name:":kissing:",value:""},{name:":kissing_heart:",value:""},{name:":kissing_smiling_eyes:",value:""},{name:":kissing_closed_eyes:",value:""},{name:":stuck_out_tongue:",value:""},{name:":stuck_out_tongue_winking_eye:",value:""},{name:":stuck_out_tongue_closed_eyes:",value:""},{name:":disappointed:",value:""},{name:":worried:",value:""},{name:":angry:",value:""},{name:":rage:",value:""},{name:":cry:",value:""},{name:":persevere:",value:""},{name:":triumph:",value:""},{name:":disappointed_relieved:",value:""},{name:":frowning:",value:""},{name:":anguished:",value:""},{name:":fearful:",value:""},{name:":weary:",value:""},{name:":sleepy:",value:""},{name:":tired_face:",value:""},{name:":grimacing:",value:""},{name:":sob:",value:""},{name:":open_mouth:",value:""},{name:":hushed:",value:""},{name:":cold_sweat:",value:""},{name:":scream:",value:""},{name:":astonished:",value:""},{name:":flushed:",value:""},{name:":sleeping:",value:""},{name:":dizzy_face:",value:""},{name:":no_mouth:",value:""},{name:":mask:",value:""},{name:":smile_cat:",value:""},{name:":joy_cat:",value:""},{name:":smiley_cat:",value:""},{name:":heart_eyes_cat:",value:""},{name:":smirk_cat:",value:""},{name:":kissing_cat:",value:""},{name:":pouting_cat:",value:""},{name:":crying_cat_face:",value:""},{name:":scream_cat:",value:""},{name:":slightly_frowning_face:",value:""},{name:":slightly_smiling_face:",value:""},{name:":upside_down_face:",value:""},{name:":face_with_rolling_eyes:",value:""},{name:":no_good:",value:""},{name:":ok_woman:",value:""},{name:":bow:",value:""},{name:":see_no_evil:",value:""},{name:":hear_no_evil:",value:""},{name:":speak_no_evil:",value:""},{name:":raising_hand:",value:""},{name:":raised_hands:",value:""},{name:":person_frowning:",value:""},{name:":person_with_pouting_face:",value:""},{name:":pray:",value:""},{name:":rowboat:",value:""},{name:":bicyclist:",value:""},{name:":mountain_bicyclist:",value:""},{name:":walking:",value:""},{name:":shopping_bags:",value:""},{name:":zipper_mouth_face:",value:""},{name:":money_mouth_face:",value:""},{name:":face_with_thermometer:",value:""},{name:":nerd_face:",value:""},{name:":thinking_face:",value:""},{name:":face_with_head_bandage:",value:""},{name:":robot_face:",value:""},{name:":hugging_face:",value:""},{name:":the_horns:",value:""},{name:":man-man-boy:",value:""},{name:":man-man-boy-boy:",value:""},{name:":man-man-girl:",value:""},{name:":man-man-girl-boy:",value:""},{name:":man-man-girl-girl:",value:""},{name:":man-woman-boy-boy:",value:""},{name:":man-woman-girl:",value:""},{name:":man-woman-girl-boy:",value:""},{name:":man-woman-girl-girl:",value:""},{name:":man-heart-man:",value:""},{name:":man-kiss-man:",value:""},{name:":woman-woman-boy:",value:""},{name:":woman-woman-boy-boy:",value:""},{name:":woman-woman-girl:",value:""},{name:":woman-woman-girl-boy:",value:""},{name:":woman-woman-girl-girl:",value:""},{name:":woman-heart-woman:",value:""},{name:":woman-kiss-woman:",value:""},{name:":umbrella:",value:""},{name:":umbrella_with_rain_drops:",value:""},{name:":point_up:",value:""},{name:":skull_and_crossbones:",value:""},{name:":white_frowning_face:",value:""},{name:":relaxed:",value:""},{name:":spades:",value:""},{name:":clubs:",value:""},{name:":hearts:",value:""},{name:":diamonds:",value:""},{name:":helmet_with_white_cross:",value:""},{name:":umbrella_on_ground:",value:""},{name:":skier:",value:""},{name:":person_with_ball:",value:""},{name:":fist:",value:""},{name:":hand:",value:""},{name:":v:",value:""},{name:":writing_hand:",value:""},{name:":sparkles:",value:""},{name:":mahjong:",value:""},{name:":black_joker:",value:""},{name:":cyclone:",value:""},{name:":closed_umbrella:",value:""},{name:":stars:",value:""},{name:":thermometer:",value:""},{name:":jack_o_lantern:",value:""},{name:":christmas_tree:",value:""},{name:":santa:",value:""},{name:":fireworks:",value:""},{name:":sparkler:",value:""},{name:":school_satchel:",value:""},{name:":mortar_board:",value:""},{name:":art:",value:""},{name:":tophat:",value:""},{name:":circus_tent:",value:""},{name:":performing_arts:",value:""},{name:":slot_machine:",value:""},{name:":flower_playing_cards:",value:""},{name:":snowboarder:",value:""},{name:":runner:",value:""},{name:":surfer:",value:""},{name:":horse_racing:",value:""},{name:":swimmer:",value:""},{name:":weight_lifter:",value:""},{name:":golfer:",value:""},{name:":racing_motorcycle:",value:""},{name:":racing_car:",value:""},{name:":amphora:",value:""},{name:":skin-tone-2:",value:""},{name:":skin-tone-3:",value:""},{name:":skin-tone-4:",value:""},{name:":skin-tone-5:",value:""},{name:":skin-tone-6:",value:""},{name:":eyes:",value:""},{name:":eye:",value:""},{name:":ear:",value:""},{name:":nose:",value:""},{name:":lips:",value:""},{name:":tongue:",value:""},{name:":point_up_2:",value:""},{name:":point_down:",value:""},{name:":point_left:",value:""},{name:":point_right:",value:""},{name:":facepunch:",value:""},{name:":wave:",value:""},{name:":ok_hand:",value:""},{name:":+1:",value:""},{name:":-1:",value:""},{name:":clap:",value:""},{name:":open_hands:",value:""},{name:":crown:",value:""},{name:":womans_hat:",value:""},{name:":eyeglasses:",value:""},{name:":necktie:",value:""},{name:":shirt:",value:""},{name:":jeans:",value:""},{name:":dress:",value:""},{name:":kimono:",value:""},{name:":bikini:",value:""},{name:":womans_clothes:",value:""},{name:":purse:",value:""},{name:":handbag:",value:""},{name:":pouch:",value:""},{name:":mans_shoe:",value:""},{name:":athletic_shoe:",value:""},{name:":high_heel:",value:""},{name:":sandal:",value:""},{name:":boot:",value:""},{name:":footprints:",value:""},{name:":bust_in_silhouette:",value:""},{name:":busts_in_silhouette:",value:""},{name:":boy:",value:""},{name:":girl:",value:""},{name:":man:",value:""},{name:":woman:",value:""},{name:":family:",value:""},{name:":couple:",value:""},{name:":two_men_holding_hands:",value:""},{name:":two_women_holding_hands:",value:""},{name:":cop:",value:""},{name:":dancers:",value:""},{name:":bride_with_veil:",value:""},{name:":person_with_blond_hair:",value:""},{name:":man_with_gua_pi_mao:",value:""},{name:":man_with_turban:",value:""},{name:":older_man:",value:""},{name:":older_woman:",value:""},{name:":baby:",value:""},{name:":construction_worker:",value:""},{name:":princess:",value:""},{name:":japanese_ogre:",value:""},{name:":japanese_goblin:",value:""},{name:":ghost:",value:""},{name:":angel:",value:""},{name:":alien:",value:""},{name:":space_invader:",value:""},{name:":imp:",value:""},{name:":skull:",value:""},{name:":information_desk_person:",value:""},{name:":guardsman:",value:""},{name:":dancer:",value:""},{name:":lipstick:",value:""},{name:":nail_care:",value:""},{name:":massage:",value:""},{name:":haircut:",value:""},{name:":barber:",value:""},{name:":kiss:",value:""},{name:":love_letter:",value:""},{name:":ring:",value:""},{name:":gem:",value:""},{name:":couplekiss:",value:""},{name:":couple_with_heart:",value:""},{name:":anger:",value:""},{name:":bomb:",value:""},{name:":zzz:",value:""},{name:":boom:",value:""},{name:":sweat_drops:",value:""},{name:":dash:",value:""},{name:":hankey:",value:""},{name:":muscle:",value:""},{name:":dizzy:",value:""},{name:":currency_exchange:",value:""},{name:":heavy_dollar_sign:",value:""},{name:":chart:",value:""},{name:":prayer_beads:",value:""},{name:":hole:",value:""},{name:":man_in_business_suit_levitating:",value:""},{name:":sleuth_or_spy:",value:""},{name:":dark_sunglasses:",value:""},{name:":raised_hand_with_fingers_splayed:",value:""},{name:":middle_finger:",value:""},{name:":spock-hand:",value:""},{name:":frame_with_picture:",value:""},{name:":speaking_head_in_silhouette:",value:""}],Nature:[{name:":sunny:",value:""},{name:":cloud:",value:""},{name:":snowman:",value:""},{name:":comet:",value:""},{name:":shamrock:",value:""},{name:":zap:",value:""},{name:":snowman_without_snow:",value:""},{name:":partly_sunny:",value:""},{name:":thunder_cloud_and_rain:",value:""},{name:":snowflake:",value:""},{name:":star:",value:""},{name:":rainbow:",value:""},{name:":ocean:",value:""},{name:":earth_africa:",value:""},{name:":earth_americas:",value:""},{name:":earth_asia:",value:""},{name:":new_moon:",value:""},{name:":waxing_crescent_moon:",value:""},{name:":first_quarter_moon:",value:""},{name:":moon:",value:""},{name:":full_moon:",value:""},{name:":waning_gibbous_moon:",value:""},{name:":last_quarter_moon:",value:""},{name:":waning_crescent_moon:",value:""},{name:":crescent_moon:",value:""},{name:":new_moon_with_face:",value:""},{name:":first_quarter_moon_with_face:",value:""},{name:":last_quarter_moon_with_face:",value:""},{name:":full_moon_with_face:",value:""},{name:":sun_with_face:",value:""},{name:":star2:",value:""},{name:":mostly_sunny:",value:""},{name:":barely_sunny:",value:""},{name:":partly_sunny_rain:",value:""},{name:":rain_cloud:",value:""},{name:":snow_cloud:",value:""},{name:":lightning:",value:""},{name:":tornado:",value:""},{name:":fog:",value:""},{name:":wind_blowing_face:",value:""},{name:":seedling:",value:""},{name:":evergreen_tree:",value:""},{name:":deciduous_tree:",value:""},{name:":palm_tree:",value:""},{name:":cactus:",value:""},{name:":tulip:",value:""},{name:":cherry_blossom:",value:""},{name:":rose:",value:""},{name:":hibiscus:",value:""},{name:":sunflower:",value:""},{name:":blossom:",value:""},{name:":ear_of_rice:",value:""},{name:":herb:",value:""},{name:":four_leaf_clover:",value:""},{name:":maple_leaf:",value:""},{name:":fallen_leaf:",value:""},{name:":leaves:",value:""},{name:":rosette:",value:""},{name:":rat:",value:""},{name:":mouse2:",value:""},{name:":ox:",value:""},{name:":water_buffalo:",value:""},{name:":cow2:",value:""},{name:":tiger2:",value:""},{name:":leopard:",value:""},{name:":rabbit2:",value:""},{name:":cat2:",value:""},{name:":dragon:",value:""},{name:":crocodile:",value:""},{name:":whale2:",value:""},{name:":snail:",value:""},{name:":snake:",value:""},{name:":racehorse:",value:""},{name:":ram:",value:""},{name:":goat:",value:""},{name:":sheep:",value:""},{name:":monkey:",value:""},{name:":rooster:",value:""},{name:":chicken:",value:""},{name:":dog2:",value:""},{name:":pig2:",value:""},{name:":boar:",value:""},{name:":elephant:",value:""},{name:":octopus:",value:""},{name:":shell:",value:""},{name:":bug:",value:""},{name:":ant:",value:""},{name:":bee:",value:""},{name:":beetle:",value:""},{name:":fish:",value:""},{name:":tropical_fish:",value:""},{name:":blowfish:",value:""},{name:":turtle:",value:""},{name:":hatching_chick:",value:""},{name:":baby_chick:",value:""},{name:":hatched_chick:",value:""},{name:":bird:",value:""},{name:":penguin:",value:""},{name:":koala:",value:""},{name:":poodle:",value:""},{name:":dromedary_camel:",value:""},{name:":camel:",value:""},{name:":dolphin:",value:""},{name:":mouse:",value:""},{name:":cow:",value:""},{name:":tiger:",value:""},{name:":rabbit:",value:""},{name:":cat:",value:""},{name:":dragon_face:",value:""},{name:":whale:",value:""},{name:":horse:",value:""},{name:":monkey_face:",value:""},{name:":dog:",value:""},{name:":pig:",value:""},{name:":frog:",value:""},{name:":hamster:",value:""},{name:":wolf:",value:""},{name:":bear:",value:""},{name:":panda_face:",value:""},{name:":pig_nose:",value:""},{name:":feet:",value:""},{name:":chipmunk:",value:""},{name:":bouquet:",value:""},{name:":droplet:",value:""},{name:":white_flower:",value:""},{name:":fire:",value:""},{name:":dove_of_peace:",value:""},{name:":spider:",value:""},{name:":spider_web:",value:""},{name:":crab:",value:""},{name:":lion_face:",value:""},{name:":scorpion:",value:""},{name:":turkey:",value:""},{name:":unicorn_face:",value:""}],Food:[{name:":coffee:",value:""},{name:":hotdog:",value:""},{name:":taco:",value:""},{name:":burrito:",value:""},{name:":chestnut:",value:""},{name:":hot_pepper:",value:""},{name:":corn:",value:""},{name:":mushroom:",value:""},{name:":tomato:",value:""},{name:":eggplant:",value:""},{name:":grapes:",value:""},{name:":melon:",value:""},{name:":watermelon:",value:""},{name:":tangerine:",value:""},{name:":lemon:",value:""},{name:":banana:",value:""},{name:":pineapple:",value:""},{name:":apple:",value:""},{name:":green_apple:",value:""},{name:":pear:",value:""},{name:":peach:",value:""},{name:":cherries:",value:""},{name:":strawberry:",value:""},{name:":hamburger:",value:""},{name:":pizza:",value:""},{name:":meat_on_bone:",value:""},{name:":poultry_leg:",value:""},{name:":rice_cracker:",value:""},{name:":rice_ball:",value:""},{name:":rice:",value:""},{name:":curry:",value:""},{name:":ramen:",value:""},{name:":spaghetti:",value:""},{name:":bread:",value:""},{name:":fries:",value:""},{name:":sweet_potato:",value:""},{name:":dango:",value:""},{name:":oden:",value:""},{name:":sushi:",value:""},{name:":fried_shrimp:",value:""},{name:":fish_cake:",value:""},{name:":icecream:",value:""},{name:":shaved_ice:",value:""},{name:":ice_cream:",value:""},{name:":doughnut:",value:""},{name:":cookie:",value:""},{name:":chocolate_bar:",value:""},{name:":candy:",value:""},{name:":lollipop:",value:""},{name:":custard:",value:""},{name:":honey_pot:",value:""},{name:":cake:",value:""},{name:":bento:",value:""},{name:":stew:",value:""},{name:":egg:",value:""},{name:":fork_and_knife:",value:""},{name:":tea:",value:""},{name:":sake:",value:""},{name:":wine_glass:",value:""},{name:":cocktail:",value:""},{name:":tropical_drink:",value:""},{name:":beer:",value:""},{name:":beers:",value:""},{name:":baby_bottle:",value:""},{name:":knife_fork_plate:",value:""},{name:":champagne:",value:""},{name:":popcorn:",value:""},{name:":birthday:",value:""},{name:":hocho:",value:""},{name:":cheese_wedge:",value:""}],Activity:[{name:":soccer:",value:""},{name:":baseball:",value:""},{name:":golf:",value:""},{name:":ice_skate:",value:""},{name:":medal:",value:""},{name:":fishing_pole_and_fish:",value:""},{name:":video_game:",value:""},{name:":dart:",value:""},{name:":8ball:",value:""},{name:":game_die:",value:""},{name:":bowling:",value:""},{name:":running_shirt_with_sash:",value:""},{name:":tennis:",value:""},{name:":ski:",value:""},{name:":basketball:",value:""},{name:":sports_medal:",value:""},{name:":trophy:",value:""},{name:":football:",value:""},{name:":rugby_football:",value:""},{name:":cricket_bat_and_ball:",value:""},{name:":volleyball:",value:""},{name:":field_hockey_stick_and_ball:",value:""},{name:":ice_hockey_stick_and_puck:",value:""},{name:":table_tennis_paddle_and_ball:",value:""},{name:":badminton_racquet_and_shuttlecock:",value:""},{name:":joystick:",value:""}],Travel:[{name:":hotsprings:",value:""},{name:":anchor:",value:""},{name:":shinto_shrine:",value:""},{name:":church:",value:""},{name:":mountain:",value:""},{name:":fountain:",value:""},{name:":ferry:",value:""},{name:":boat:",value:""},{name:":tent:",value:""},{name:":fuelpump:",value:""},{name:":airplane:",value:""},{name:":foggy:",value:""},{name:":night_with_stars:",value:""},{name:":sunrise_over_mountains:",value:""},{name:":sunrise:",value:""},{name:":city_sunset:",value:""},{name:":city_sunrise:",value:""},{name:":bridge_at_night:",value:""},{name:":volcano:",value:""},{name:":milky_way:",value:""},{name:":globe_with_meridians:",value:""},{name:":carousel_horse:",value:""},{name:":ferris_wheel:",value:""},{name:":roller_coaster:",value:""},{name:":snow_capped_mountain:",value:""},{name:":camping:",value:""},{name:":beach_with_umbrella:",value:""},{name:":building_construction:",value:""},{name:":house_buildings:",value:""},{name:":cityscape:",value:""},{name:":derelict_house_building:",value:""},{name:":classical_building:",value:""},{name:":desert:",value:""},{name:":desert_island:",value:""},{name:":national_park:",value:""},{name:":stadium:",value:""},{name:":house:",value:""},{name:":house_with_garden:",value:""},{name:":office:",value:""},{name:":post_office:",value:""},{name:":european_post_office:",value:""},{name:":hospital:",value:""},{name:":bank:",value:""},{name:":hotel:",value:""},{name:":love_hotel:",value:""},{name:":convenience_store:",value:""},{name:":school:",value:""},{name:":department_store:",value:""},{name:":factory:",value:""},{name:":japanese_castle:",value:""},{name:":european_castle:",value:""},{name:":wedding:",value:""},{name:":seat:",value:""},{name:":kaaba:",value:""},{name:":mosque:",value:""},{name:":synagogue:",value:""},{name:":world_map:",value:""},{name:":mount_fuji:",value:""},{name:":tokyo_tower:",value:""},{name:":statue_of_liberty:",value:""},{name:":japan:",value:""},{name:":rocket:",value:""},{name:":helicopter:",value:""},{name:":steam_locomotive:",value:""},{name:":railway_car:",value:""},{name:":bullettrain_side:",value:""},{name:":bullettrain_front:",value:""},{name:":train2:",value:""},{name:":metro:",value:""},{name:":light_rail:",value:""},{name:":station:",value:""},{name:":tram:",value:""},{name:":train:",value:""},{name:":bus:",value:""},{name:":oncoming_bus:",value:""},{name:":trolleybus:",value:""},{name:":busstop:",value:""},{name:":minibus:",value:""},{name:":ambulance:",value:""},{name:":fire_engine:",value:""},{name:":police_car:",value:""},{name:":oncoming_police_car:",value:""},{name:":taxi:",value:""},{name:":oncoming_taxi:",value:""},{name:":car:",value:""},{name:":oncoming_automobile:",value:""},{name:":blue_car:",value:""},{name:":truck:",value:""},{name:":articulated_lorry:",value:""},{name:":tractor:",value:""},{name:":monorail:",value:""},{name:":mountain_railway:",value:""},{name:":suspension_railway:",value:""},{name:":mountain_cableway:",value:""},{name:":aerial_tramway:",value:""},{name:":ship:",value:""},{name:":speedboat:",value:""},{name:":traffic_light:",value:""},{name:":vertical_traffic_light:",value:""},{name:":construction:",value:""},{name:":rotating_light:",value:""},{name:":bike:",value:""},{name:":motorway:",value:""},{name:":railway_track:",value:""},{name:":motor_boat:",value:""},{name:":small_airplane:",value:""},{name:":airplane_departure:",value:""},{name:":airplane_arriving:",value:""},{name:":satellite:",value:""},{name:":passenger_ship:",value:""}],Objects:[{name:":watch:",value:""},{name:":hourglass:",value:""},{name:":keyboard:",value:""},{name:":alarm_clock:",value:""},{name:":stopwatch:",value:""},{name:":timer_clock:",value:""},{name:":hourglass_flowing_sand:",value:""},{name:":phone:",value:""},{name:":hammer_and_pick:",value:""},{name:":crossed_swords:",value:""},{name:":scales:",value:""},{name:":alembic:",value:""},{name:":gear:",value:""},{name:":coffin:",value:""},{name:":funeral_urn:",value:""},{name:":pick:",value:""},{name:":chains:",value:""},{name:":scissors:",value:""},{name:":email:",value:""},{name:":pencil2:",value:""},{name:":black_nib:",value:""},{name:":ribbon:",value:""},{name:":gift:",value:""},{name:":balloon:",value:""},{name:":tada:",value:""},{name:":confetti_ball:",value:""},{name:":tanabata_tree:",value:""},{name:":bamboo:",value:""},{name:":dolls:",value:""},{name:":flags:",value:""},{name:":wind_chime:",value:""},{name:":rice_scene:",value:""},{name:":reminder_ribbon:",value:""},{name:":studio_microphone:",value:""},{name:":level_slider:",value:""},{name:":control_knobs:",value:""},{name:":film_frames:",value:""},{name:":admission_tickets:",value:""},{name:":microphone:",value:""},{name:":movie_camera:",value:""},{name:":headphones:",value:""},{name:":ticket:",value:""},{name:":clapper:",value:""},{name:":musical_note:",value:""},{name:":notes:",value:""},{name:":saxophone:",value:""},{name:":guitar:",value:""},{name:":musical_keyboard:",value:""},{name:":trumpet:",value:""},{name:":violin:",value:""},{name:":musical_score:",value:""},{name:":izakaya_lantern:",value:""},{name:":label:",value:""},{name:":bow_and_arrow:",value:""},{name:":syringe:",value:""},{name:":pill:",value:""},{name:":bulb:",value:""},{name:":moneybag:",value:""},{name:":credit_card:",value:""},{name:":yen:",value:""},{name:":dollar:",value:""},{name:":euro:",value:""},{name:":pound:",value:""},{name:":money_with_wings:",value:""},{name:":computer:",value:""},{name:":briefcase:",value:""},{name:":minidisc:",value:""},{name:":floppy_disk:",value:""},{name:":cd:",value:""},{name:":dvd:",value:""},{name:":file_folder:",value:""},{name:":open_file_folder:",value:""},{name:":page_with_curl:",value:""},{name:":page_facing_up:",value:""},{name:":date:",value:""},{name:":calendar:",value:""},{name:":card_index:",value:""},{name:":chart_with_upwards_trend:",value:""},{name:":chart_with_downwards_trend:",value:""},{name:":bar_chart:",value:""},{name:":clipboard:",value:""},{name:":pushpin:",value:""},{name:":round_pushpin:",value:""},{name:":paperclip:",value:""},{name:":straight_ruler:",value:""},{name:":triangular_ruler:",value:""},{name:":bookmark_tabs:",value:""},{name:":ledger:",value:""},{name:":notebook:",value:""},{name:":notebook_with_decorative_cover:",value:""},{name:":closed_book:",value:""},{name:":book:",value:""},{name:":green_book:",value:""},{name:":blue_book:",value:""},{name:":orange_book:",value:""},{name:":books:",value:""},{name:":scroll:",value:""},{name:":memo:",value:""},{name:":telephone_receiver:",value:""},{name:":pager:",value:""},{name:":fax:",value:""},{name:":satellite_antenna:",value:""},{name:":outbox_tray:",value:""},{name:":inbox_tray:",value:""},{name:":package:",value:""},{name:":e-mail:",value:""},{name:":incoming_envelope:",value:""},{name:":envelope_with_arrow:",value:""},{name:":mailbox_closed:",value:""},{name:":mailbox:",value:""},{name:":mailbox_with_mail:",value:""},{name:":mailbox_with_no_mail:",value:""},{name:":postbox:",value:""},{name:":newspaper:",value:""},{name:":iphone:",value:""},{name:":calling:",value:""},{name:":camera:",value:""},{name:":camera_with_flash:",value:""},{name:":video_camera:",value:""},{name:":tv:",value:""},{name:":radio:",value:""},{name:":vhs:",value:""},{name:":film_projector:",value:""},{name:":battery:",value:""},{name:":electric_plug:",value:""},{name:":mag:",value:""},{name:":mag_right:",value:""},{name:":lock_with_ink_pen:",value:""},{name:":closed_lock_with_key:",value:""},{name:":key:",value:""},{name:":lock:",value:""},{name:":unlock:",value:""},{name:":bookmark:",value:""},{name:":link:",value:""},{name:":flashlight:",value:""},{name:":wrench:",value:""},{name:":hammer:",value:""},{name:":nut_and_bolt:",value:""},{name:":gun:",value:""},{name:":microscope:",value:""},{name:":telescope:",value:""},{name:":crystal_ball:",value:""},{name:":candle:",value:""},{name:":mantelpiece_clock:",value:""},{name:":linked_paperclips:",value:""},{name:":lower_left_ballpoint_pen:",value:""},{name:":lower_left_fountain_pen:",value:""},{name:":lower_left_paintbrush:",value:""},{name:":lower_left_crayon:",value:""},{name:":desktop_computer:",value:""},{name:":printer:",value:""},{name:":three_button_mouse:",value:""},{name:":trackball:",value:""},{name:":card_index_dividers:",value:""},{name:":card_file_box:",value:""},{name:":file_cabinet:",value:""},{name:":wastebasket:",value:""},{name:":spiral_note_pad:",value:""},{name:":spiral_calendar_pad:",value:""},{name:":compression:",value:""},{name:":old_key:",value:""},{name:":rolled_up_newspaper:",value:""},{name:":dagger_knife:",value:""},{name:":ballot_box_with_ballot:",value:""},{name:":moyai:",value:""},{name:":door:",value:""},{name:":smoking:",value:""},{name:":toilet:",value:""},{name:":shower:",value:""},{name:":bath:",value:""},{name:":bathtub:",value:""},{name:":couch_and_lamp:",value:""},{name:":sleeping_accommodation:",value:""},{name:":bellhop_bell:",value:""},{name:":bed:",value:""},{name:":hammer_and_wrench:",value:""},{name:":shield:",value:""},{name:":oil_drum:",value:""}],Symbols:[{name:":copyright:",value:""},{name:":registered:",value:""},{name:":bangbang:",value:""},{name:":interrobang:",value:""},{name:":tm:",value:""},{name:":information_source:",value:""},{name:":left_right_arrow:",value:""},{name:":arrow_up_down:",value:""},{name:":arrow_upper_left:",value:""},{name:":arrow_upper_right:",value:""},{name:":arrow_lower_right:",value:""},{name:":arrow_lower_left:",value:""},{name:":leftwards_arrow_with_hook:",value:""},{name:":arrow_right_hook:",value:""},{name:":eject:",value:""},{name:":fast_forward:",value:""},{name:":rewind:",value:""},{name:":arrow_double_up:",value:""},{name:":arrow_double_down:",value:""},{name:":black_right_pointing_double_triangle_with_vertical_bar:",value:""},{name:":black_left_pointing_double_triangle_with_vertical_bar:",value:""},{name:":black_right_pointing_triangle_with_double_vertical_bar:",value:""},{name:":double_vertical_bar:",value:""},{name:":black_square_for_stop:",value:""},{name:":black_circle_for_record:",value:""},{name:":m:",value:""},{name:":black_small_square:",value:""},{name:":white_small_square:",value:""},{name:":arrow_forward:",value:""},{name:":arrow_backward:",value:""},{name:":white_medium_square:",value:""},{name:":black_medium_square:",value:""},{name:":white_medium_small_square:",value:""},{name:":black_medium_small_square:",value:""},{name:":ballot_box_with_check:",value:""},{name:":radioactive_sign:",value:""},{name:":biohazard_sign:",value:""},{name:":orthodox_cross:",value:""},{name:":star_and_crescent:",value:""},{name:":peace_symbol:",value:""},{name:":yin_yang:",value:""},{name:":wheel_of_dharma:",value:""},{name:":aries:",value:""},{name:":taurus:",value:""},{name:":gemini:",value:""},{name:":cancer:",value:""},{name:":leo:",value:""},{name:":virgo:",value:""},{name:":libra:",value:""},{name:":scorpius:",value:""},{name:":sagittarius:",value:""},{name:":capricorn:",value:""},{name:":aquarius:",value:""},{name:":pisces:",value:""},{name:":recycle:",value:""},{name:":wheelchair:",value:""},{name:":atom_symbol:",value:""},{name:":fleur_de_lis:",value:""},{name:":warning:",value:""},{name:":white_circle:",value:""},{name:":black_circle:",value:""},{name:":ophiuchus:",value:""},{name:":no_entry:",value:""},{name:":white_check_mark:",value:""},{name:":heavy_check_mark:",value:""},{name:":heavy_multiplication_x:",value:""},{name:":latin_cross:",value:""},{name:":star_of_david:",value:""},{name:":eight_spoked_asterisk:",value:""},{name:":eight_pointed_black_star:",value:""},{name:":sparkle:",value:""},{name:":x:",value:""},{name:":negative_squared_cross_mark:",value:""},{name:":question:",value:""},{name:":grey_question:",value:""},{name:":grey_exclamation:",value:""},{name:":exclamation:",value:""},{name:":heavy_heart_exclamation_mark_ornament:",value:""},{name:":heart:",value:""},{name:":heavy_plus_sign:",value:""},{name:":heavy_minus_sign:",value:""},{name:":heavy_division_sign:",value:""},{name:":arrow_right:",value:""},{name:":curly_loop:",value:""},{name:":loop:",value:""},{name:":arrow_heading_up:",value:""},{name:":arrow_heading_down:",value:""},{name:":arrow_left:",value:""},{name:":arrow_up:",value:""},{name:":arrow_down:",value:""},{name:":black_large_square:",value:""},{name:":white_large_square:",value:""},{name:":o:",value:""},{name:":wavy_dash:",value:""},{name:":part_alternation_mark:",value:""},{name:":congratulations:",value:""},{name:":secret:",value:""},{name:":a:",value:""},{name:":b:",value:""},{name:":o2:",value:""},{name:":parking:",value:""},{name:":ab:",value:""},{name:":cl:",value:""},{name:":cool:",value:""},{name:":free:",value:""},{name:":id:",value:""},{name:":new:",value:""},{name:":ng:",value:""},{name:":ok:",value:""},{name:":sos:",value:""},{name:":up:",value:""},{name:":vs:",value:""},{name:":koko:",value:""},{name:":sa:",value:""},{name:":u7121:",value:""},{name:":u6307:",value:""},{name:":u7981:",value:""},{name:":u7a7a:",value:""},{name:":u5408:",value:""},{name:":u6e80:",value:""},{name:":u6709:",value:""},{name:":u6708:",value:""},{name:":u7533:",value:""},{name:":u5272:",value:""},{name:":u55b6:",value:""},{name:":ideograph_advantage:",value:""},{name:":accept:",value:""},{name:":crossed_flags:",value:""},{name:":cinema:",value:""},{name:":checkered_flag:",value:""},{name:":atm:",value:""},{name:":waving_white_flag:",value:""},{name:":waving_black_flag:",value:""},{name:":heartbeat:",value:""},{name:":broken_heart:",value:""},{name:":two_hearts:",value:""},{name:":sparkling_heart:",value:""},{name:":heartpulse:",value:""},{name:":cupid:",value:""},{name:":blue_heart:",value:""},{name:":green_heart:",value:""},{name:":yellow_heart:",value:""},{name:":purple_heart:",value:""},{name:":gift_heart:",value:""},{name:":revolving_hearts:",value:""},{name:":heart_decoration:",value:""},{name:":diamond_shape_with_a_dot_inside:",value:""},{name:":speech_balloon:",value:""},{name:":thought_balloon:",value:""},{name:":100:",value:""},{name:":name_badge:",value:""},{name:":loudspeaker:",value:""},{name:":mega:",value:""},{name:":postal_horn:",value:""},{name:":vibration_mode:",value:""},{name:":mobile_phone_off:",value:""},{name:":no_mobile_phones:",value:""},{name:":signal_strength:",value:""},{name:":twisted_rightwards_arrows:",value:""},{name:":repeat:",value:""},{name:":repeat_one:",value:""},{name:":arrows_clockwise:",value:""},{name:":arrows_counterclockwise:",value:""},{name:":low_brightness:",value:""},{name:":high_brightness:",value:""},{name:":mute:",value:""},{name:":speaker:",value:""},{name:":sound:",value:""},{name:":loud_sound:",value:""},{name:":bell:",value:""},{name:":no_bell:",value:""},{name:":radio_button:",value:""},{name:":back:",value:""},{name:":end:",value:""},{name:":on:",value:""},{name:":soon:",value:""},{name:":top:",value:""},{name:":underage:",value:""},{name:":keycap_ten:",value:""},{name:":capital_abcd:",value:""},{name:":abcd:",value:""},{name:":1234:",value:""},{name:":symbols:",value:""},{name:":abc:",value:""},{name:":six_pointed_star:",value:""},{name:":beginner:",value:""},{name:":trident:",value:""},{name:":black_square_button:",value:""},{name:":white_square_button:",value:""},{name:":red_circle:",value:""},{name:":large_blue_circle:",value:""},{name:":large_orange_diamond:",value:""},{name:":large_blue_diamond:",value:""},{name:":small_orange_diamond:",value:""},{name:":small_blue_diamond:",value:""},{name:":small_red_triangle:",value:""},{name:":small_red_triangle_down:",value:""},{name:":arrow_up_small:",value:""},{name:":arrow_down_small:",value:""},{name:":om_symbol:",value:""},{name:":menorah_with_nine_branches:",value:""},{name:":clock1:",value:""},{name:":clock2:",value:""},{name:":clock3:",value:""},{name:":clock4:",value:""},{name:":clock5:",value:""},{name:":clock6:",value:""},{name:":clock7:",value:""},{name:":clock8:",value:""},{name:":clock9:",value:""},{name:":clock10:",value:""},{name:":clock11:",value:""},{name:":clock12:",value:""},{name:":clock130:",value:""},{name:":clock230:",value:""},{name:":clock330:",value:""},{name:":clock430:",value:""},{name:":clock530:",value:""},{name:":clock630:",value:""},{name:":clock730:",value:""},{name:":clock830:",value:""},{name:":clock930:",value:""},{name:":clock1030:",value:""},{name:":clock1130:",value:""},{name:":clock1230:",value:""},{name:":left_speech_bubble:",value:""},{name:":right_anger_bubble:",value:""},{name:":triangular_flag_on_post:",value:""},{name:":no_entry_sign:",value:""},{name:":no_smoking:",value:""},{name:":put_litter_in_its_place:",value:""},{name:":do_not_litter:",value:""},{name:":potable_water:",value:""},{name:":non-potable_water:",value:""},{name:":no_bicycles:",value:""},{name:":no_pedestrians:",value:""},{name:":children_crossing:",value:""},{name:":mens:",value:""},{name:":womens:",value:""},{name:":restroom:",value:""},{name:":baby_symbol:",value:""},{name:":wc:",value:""},{name:":passport_control:",value:""},{name:":customs:",value:""},{name:":baggage_claim:",value:""},{name:":left_luggage:",value:""},{name:":place_of_worship:",value:""}],Flags:[{name:":flag-ac:",value:""},{name:":flag-ad:",value:""},{name:":flag-ae:",value:""},{name:":flag-af:",value:""},{name:":flag-ag:",value:""},{name:":flag-ai:",value:""},{name:":flag-al:",value:""},{name:":flag-am:",value:""},{name:":flag-ao:",value:""},{name:":flag-aq:",value:""},{name:":flag-ar:",value:""},{name:":flag-as:",value:""},{name:":flag-at:",value:""},{name:":flag-au:",value:""},{name:":flag-aw:",value:""},{name:":flag-ax:",value:""},{name:":flag-az:",value:""},{name:":flag-ba:",value:""},{name:":flag-bb:",value:""},{name:":flag-bd:",value:""},{name:":flag-be:",value:""},{name:":flag-bf:",value:""},{name:":flag-bg:",value:""},{name:":flag-bh:",value:""},{name:":flag-bi:",value:""},{name:":flag-bj:",value:""},{name:":flag-bl:",value:""},{name:":flag-bm:",value:""},{name:":flag-bn:",value:""},{name:":flag-bo:",value:""},{name:":flag-bq:",value:""},{name:":flag-br:",value:""},{name:":flag-bs:",value:""},{name:":flag-bt:",value:""},{name:":flag-bv:",value:""},{name:":flag-bw:",value:""},{name:":flag-by:",value:""},{name:":flag-bz:",value:""},{name:":flag-ca:",value:""},{name:":flag-cc:",value:""},{name:":flag-cd:",value:""},{name:":flag-cf:",value:""},{name:":flag-cg:",value:""},{name:":flag-ch:",value:""},{name:":flag-ci:",value:""},{name:":flag-ck:",value:""},{name:":flag-cl:",value:""},{name:":flag-cm:",value:""},{name:":flag-cn:",value:""},{name:":flag-co:",value:""},{name:":flag-cp:",value:""},{name:":flag-cr:",value:""},{name:":flag-cu:",value:""},{name:":flag-cv:",value:""},{name:":flag-cw:",value:""},{name:":flag-cx:",value:""},{name:":flag-cy:",value:""},{name:":flag-cz:",value:""},{name:":flag-de:",value:""},{name:":flag-dg:",value:""},{name:":flag-dj:",value:""},{name:":flag-dk:",value:""},{name:":flag-dm:",value:""},{name:":flag-do:",value:""},{name:":flag-dz:",value:""},{name:":flag-ea:",value:""},{name:":flag-ec:",value:""},{name:":flag-ee:",value:""},{name:":flag-eg:",value:""},{name:":flag-eh:",value:""},{name:":flag-er:",value:""},{name:":flag-es:",value:""},{name:":flag-et:",value:""},{name:":flag-eu:",value:""},{name:":flag-fi:",value:""},{name:":flag-fj:",value:""},{name:":flag-fk:",value:""},{name:":flag-fm:",value:""},{name:":flag-fo:",value:""},{name:":flag-fr:",value:""},{name:":flag-ga:",value:""},{name:":flag-gb:",value:""},{name:":flag-gd:",value:""},{name:":flag-ge:",value:""},{name:":flag-gf:",value:""},{name:":flag-gg:",value:""},{name:":flag-gh:",value:""},{name:":flag-gi:",value:""},{name:":flag-gl:",value:""},{name:":flag-gm:",value:""},{name:":flag-gn:",value:""},{name:":flag-gp:",value:""},{name:":flag-gq:",value:""},{name:":flag-gr:",value:""},{name:":flag-gs:",value:""},{name:":flag-gt:",value:""},{name:":flag-gu:",value:""},{name:":flag-gw:",value:""},{name:":flag-gy:",value:""},{name:":flag-hk:",value:""},{name:":flag-hm:",value:""},{name:":flag-hn:",value:""},{name:":flag-hr:",value:""},{name:":flag-ht:",value:""},{name:":flag-hu:",value:""},{name:":flag-ic:",value:""},{name:":flag-id:",value:""},{name:":flag-ie:",value:""},{name:":flag-il:",value:""},{name:":flag-im:",value:""},{name:":flag-in:",value:""},{name:":flag-io:",value:""},{name:":flag-iq:",value:""},{name:":flag-ir:",value:""},{name:":flag-is:",value:""},{name:":flag-it:",value:""},{name:":flag-je:",value:""},{name:":flag-jm:",value:""},{name:":flag-jo:",value:""},{name:":flag-jp:",value:""},{name:":flag-ke:",value:""},{name:":flag-kg:",value:""},{name:":flag-kh:",value:""},{name:":flag-ki:",value:""},{name:":flag-km:",value:""},{name:":flag-kn:",value:""},{name:":flag-kp:",value:""},{name:":flag-kr:",value:""},{name:":flag-kw:",value:""},{name:":flag-ky:",value:""},{name:":flag-kz:",value:""},{name:":flag-la:",value:""},{name:":flag-lb:",value:""},{name:":flag-lc:",value:""},{name:":flag-li:",value:""},{name:":flag-lk:",value:""},{name:":flag-lr:",value:""},{name:":flag-ls:",value:""},{name:":flag-lt:",value:""},{name:":flag-lu:",value:""},{name:":flag-lv:",value:""},{name:":flag-ly:",value:""},{name:":flag-ma:",value:""},{name:":flag-mc:",value:""},{name:":flag-md:",value:""},{name:":flag-me:",value:""},{name:":flag-mf:",value:""},{name:":flag-mg:",value:""},{name:":flag-mh:",value:""},{name:":flag-mk:",value:""},{name:":flag-ml:",value:""},{name:":flag-mm:",value:""},{name:":flag-mn:",value:""},{name:":flag-mo:",value:""},{name:":flag-mp:",value:""},{name:":flag-mq:",value:""},{name:":flag-mr:",value:""},{name:":flag-ms:",value:""},{name:":flag-mt:",value:""},{name:":flag-mu:",value:""},{name:":flag-mv:",value:""},{name:":flag-mw:",value:""},{name:":flag-mx:",value:""},{name:":flag-my:",value:""},{name:":flag-mz:",value:""},{name:":flag-na:",value:""},{name:":flag-nc:",value:""},{name:":flag-ne:",value:""},{name:":flag-nf:",value:""},{name:":flag-ng:",value:""},{name:":flag-ni:",value:""},{name:":flag-nl:",value:""},{name:":flag-no:",value:""},{name:":flag-np:",value:""},{name:":flag-nr:",value:""},{name:":flag-nu:",value:""},{name:":flag-nz:",value:""},{name:":flag-om:",value:""},{name:":flag-pa:",value:""},{name:":flag-pe:",value:""},{name:":flag-pf:",value:""},{name:":flag-pg:",value:""},{name:":flag-ph:",value:""},{name:":flag-pk:",value:""},{name:":flag-pl:",value:""},{name:":flag-pm:",value:""},{name:":flag-pn:",value:""},{name:":flag-pr:",value:""},{name:":flag-ps:",value:""},{name:":flag-pt:",value:""},{name:":flag-pw:",value:""},{name:":flag-py:",value:""},{name:":flag-qa:",value:""},{name:":flag-re:",value:""},{name:":flag-ro:",value:""},{name:":flag-rs:",value:""},{name:":flag-ru:",value:""},{name:":flag-rw:",value:""},{name:":flag-sa:",value:""},{name:":flag-sb:",value:""},{name:":flag-sc:",value:""},{name:":flag-sd:",value:""},{name:":flag-se:",value:""},{name:":flag-sg:",value:""},{name:":flag-sh:",value:""},{name:":flag-si:",value:""},{name:":flag-sj:",value:""},{name:":flag-sk:",value:""},{name:":flag-sl:",value:""},{name:":flag-sm:",value:""},{name:":flag-sn:",value:""},{name:":flag-so:",value:""},{name:":flag-sr:",value:""},{name:":flag-ss:",value:""},{name:":flag-st:",value:""},{name:":flag-sv:",value:""},{name:":flag-sx:",value:""},{name:":flag-sy:",value:""},{name:":flag-sz:",value:""},{name:":flag-ta:",value:""},{name:":flag-tc:",value:""},{name:":flag-td:",value:""},{name:":flag-tf:",value:""},{name:":flag-tg:",value:""},{name:":flag-th:",value:""},{name:":flag-tj:",value:""},{name:":flag-tk:",value:""},{name:":flag-tl:",value:""},{name:":flag-tm:",value:""},{name:":flag-tn:",value:""},{name:":flag-to:",value:""},{name:":flag-tr:",value:""},{name:":flag-tt:",value:""},{name:":flag-tv:",value:""},{name:":flag-tw:",value:""},{name:":flag-tz:",value:""},{name:":flag-ua:",value:""},{name:":flag-ug:",value:""},{name:":flag-um:",value:""},{name:":flag-us:",value:""},{name:":flag-uy:",value:""},{name:":flag-uz:",value:""},{name:":flag-va:",value:""},{name:":flag-vc:",value:""},{name:":flag-ve:",value:""},{name:":flag-vg:",value:""},{name:":flag-vi:",value:""},{name:":flag-vn:",value:""},{name:":flag-vu:",value:""},{name:":flag-wf:",value:""},{name:":flag-ws:",value:""},{name:":flag-xk:",value:""},{name:":flag-ye:",value:""},{name:":flag-yt:",value:""},{name:":flag-za:",value:""},{name:":flag-zm:",value:""},{name:":flag-zw:",value:""}]},t.default=s},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),o=n(2),s=(0,o.connect)(function(e){return{config:e.config}})(r=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={files:[],dragOver:!1,overLimit:!1},t.inputRef=null,t.MAX_FILE_SIZE=1e7,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),i(n,[{key:"onDragOver",value:function(e){e.preventDefault(),this.setState({dragOver:!0})}},{key:"onDragLeave",value:function(){this.setState({dragOver:!1})}},{key:"onDrop",value:function(e){e.preventDefault(),this.setState({dragOver:!1}),this.insertFiles(e.dataTransfer.files)}},{key:"onInputChange",value:function(e){this.insertFiles(e.target.files)}},{key:"notifyMaxFileSize",value:function(){var e=this;this.setState({dragOver:!1,overLimit:!0},function(){setTimeout(function(){return e.setState({overLimit:!1})},2e3)})}},{key:"insertFiles",value:function(e){var t,n,r=[],i=null,o=null,a=0;if(e){for(var s=0;s<e.length;s++){if(i=e[s],n=i.type,o=/^image/.test(n)?"image":"file",a=(t=i.size)<1e3?t+"Bytes":t<1e6?(t/1e3).toFixed()+"KB":(t/1e6).toFixed(1)+"MB",!(i.size>this.MAX_FILE_SIZE)){this.insertImage({file:i,type:o,i:s}),r.push({file:i,type:o,size:a,name:i.name});break}this.notifyMaxFileSize()}this.setState({files:r})}}},{key:"insertImage",value:function(e){var t=this,n=e.file,r=e.type,i=e.i;if("image"===r){var o=new FileReader;o.onloadend=function(){var e=t.state;e.files[i].url=o.result,t.setState({files:e.files})},o.readAsDataURL(n)}}},{key:"removeFile",value:function(e){var t=this.state.files.slice();t.splice(e,1),this.setState({files:t})}},{key:"onButtonClick",value:function(){this.state.files[0]?this.props.inputSubmit({type:"file",files:this.state.files.map(function(e){return e.file})}):this.inputRef.click()}},{key:"render",value:function(e,t){var n=this,r=t.files,i=t.dragOver,o=t.overLimit;return(0,a.h)("div",{className:"hu-input-file"+(i?" input-drag-over":""),onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragEnd:this.onDragLeave.bind(this),onDrop:this.onDrop.bind(this)},(0,a.h)("div",{className:"input-drop-area"},0===r.length?(0,a.h)("div",{className:"input-drop-border hu-display-flex hu-align-center hu-justify-center"},(0,a.h)("span",{className:"hu-s-14 hu-t-uppercase hu-w-bold"},e.config.text.input_file_help),(0,a.h)("i",{className:"fi document input-drop-icon hu-s-40"})):(0,a.h)("div",{className:"files-container"},r.map(function(e,t){return(0,a.h)("div",{className:"file-thumbnail hu-text-center hu-align-center hu-justify-center","data-type":e.type||null,style:{backgroundImage:e.url?'url("'+e.url+'")':null}},(0,a.h)("div",{className:"file-thumbnail-button",onClick:function(){return n.removeFile(t)}},(0,a.h)("svg",{style:"width:24px;height:24px",viewBox:"0 0 24 24"},(0,a.h)("path",{fill:"#000000",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}))),"image"!==e.type&&(0,a.h)("i",{className:"fi document hu-s-50"}))}))),(0,a.h)("div",{className:"input-area hu-display-flex hu-align-center"},(0,a.h)("button",{className:"input-file-button hu-w-bold hu-s-14 hu-display-flex hu-align-center hu-background-color_button-background hu-color_button-text hu-background-color_button-background-light_hover",onClick:this.onButtonClick.bind(this),"data-file":r[0]?"1":"0"},!!r[0]&&(0,a.h)("span",{className:"submit-text hu-flex-1"},e.config.text.send),!!r[0]&&(0,a.h)("span",{className:"right-arrow"},(0,a.h)("svg",{className:"hu-fill_button-text",xmlns:"http://www.w3.org/2000/svg"},(0,a.h)("path",{d:"M 11.78125 2.28125 L 2.78125 11.28125 L 2.09375 12 L 2.78125 12.71875 L 11.78125 21.71875 L 13.21875 20.28125 L 5.9375 13 L 22 13 L 22 11 L 5.9375 11 L 13.21875 3.71875 Z "}))),!r[0]&&e.config.text.select_file),!o&&r[0]?(0,a.h)("span",{key:"file-name",className:"input-file-name hu-flex-1 hu-s-14 hu-a-right hu-x-ellipsis","data-state":"info",title:r[0].name},r[0].name+" | "+r[0].size):(0,a.h)("span",{key:"file-name",className:"input-file-name hu-flex-1 hu-s-14 hu-a-right hu-x-ellipsis","data-state":o?"danger":null},"MAX. 10MB")),(0,a.h)("input",{className:"hu-display-none",type:"file",ref:function(e){return n.inputRef=e},onChange:this.onInputChange.bind(this)}))}}]),n}())||r;t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),v=n(0),a=n(2),y=r(n(9)),g=r(n(4)),s=(0,a.connect)(function(e){return{config:e.config}})(i=function(e){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={buttons:t.buttons,payloads:t.payloads,urls:t.urls,buttonsData:t.buttonsData,search_filter:"",filter_results:t.buttons instanceof Array?t.buttons.map(function(e){return e.toLowerCase()}):Object.keys(t.buttons).map(function(e){return t.buttons[e].toLowerCase()})},e.buttonsContainer=null,e.input=null,e.setInputFocus=e.setInputFocus.bind(e),e.setFocusWithChar=e.setFocusWithChar.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,v.Component),o(n,[{key:"componentDidMount",value:function(){this.props.ee.on("hu-lb-input-focus",this.setInputFocus),this.props.ee.on("hu-lb-text-focus",this.setFocusWithChar)}},{key:"componentWillUnmount",value:function(){this.props.ee.removeListener("hu-lb-input-focus",this.setInputFocus),this.props.ee.removeListener("hu-lb-text-focus",this.setFocusWithChar)}},{key:"setInputFocus",value:function(){this.input&&this.input.focus()}},{key:"setFocusWithChar",value:function(e){document.activeElement!==this.input&&this.input&&this.input.focus()}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.buttons,i=n.payloads,o=n.buttonsData;if(!this.compareObjects(r,e.buttons)||!this.compareObjects(i,e.payloads)||!this.compareObjects(o,e.buttonsData))return!0;var a=this.state,s=a.search_filter,u=a.filter_results;return s!==t.search_filter||!this.compareObjects(u,t.filter_results)}},{key:"compareObjects",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"clickHandler",value:function(e){var t=this.props,n=t.buttons,r=t.payloads,i=y.default.getArrayFrom(n),o=y.default.getArrayFrom(r||n);this.props.inputSubmit({type:"button",message:i[e],payload:o[e]||i[e]});var a=this.buttonsContainer.querySelector('.hu-input-menu_button[data-key="'+e+'"]');a&&(a.className+=" clicked",a.blur())}},{key:"onSearchInput",value:function(e){this.setState({search_filter:e.target.value,filter_results:this.getMatches(e.target.value)})}},{key:"getMatches",value:function(t){var e=this.props.buttons;return y.default.getArrayFrom(e).map(function(e){return e.toLowerCase()}).filter(function(e){return-1<e.indexOf(t.toLowerCase())})}},{key:"mountIncludes",value:function(e){var t=this.props.buttonsData,n=t.includes,r=t.icons,i=t.emojis,o=t.images;switch(n[e]){case"icon":return r&&(0,v.h)("div",{className:"include-icon-container hu-s-30"},(0,v.h)("i",{className:"fi "+r[e]+" hu-s-30"}));case"image":return o&&(0,v.h)("div",{className:"include-image-container"},(0,v.h)("div",{className:"include-image",style:{backgroundImage:o[e]?"url("+o[e]+")":null}}));case"emoji":return i&&(0,v.h)("div",{className:"include-icon-container hu-s-35"},i[e]);default:return null}}},{key:"render",value:function(e,t){var n=this,r=e.buttons,i=e.urls,o=e.buttonsData,a=(t.clicked,t.search_filter),s=t.filter_results,u=o.search,l=o.random?function(e){return e}(y.default.getArrayFrom(r)):y.default.getArrayFrom(r),c=function(){var e="";return o.dual_buttons&&(e=e.concat(" dual")),o.pile_up&&(e=e.concat(" pileup")),"vertical"===o.alignment&&(e=e.concat(" vertical")),e},h=l.map(function(e){return null});if(i instanceof Array)h=i.slice();else{var f=0;for(var p in i)isNaN(p)?h[f]=i[p]:h[parseInt(p)]=i[p],f+=1}var d=y.default.getArrayFrom(o.urls),m=(0<h.length?h:d).map(y.default.getHref);return(0,v.h)("div",{className:"hu-input-menu hu-position-relative"},(0,v.h)("span",{className:"hu-input-menu_help hu-input-menu-info hu-display-block hu-not-selectable hu-s-10 hu-color_contrast hu-t-uppercase"},u?e.config.text.input_instant_search_help:e.config.text.input_menu_help),u?(0,v.h)("div",{className:"hu-drop-search hu-border-color_textarea-border"},(0,v.h)("div",{className:"drop-search-input-container hu-background-color_textarea-background hu-border-color_textarea-border"},(0,v.h)("input",{className:"drop-search-input hu-s-14 hu-color_textarea-text hu-placeholder-color_textarea-text",type:"text",placeholder:e.config.text.search,value:a,onInput:function(e){return n.onSearchInput(e)},ref:function(e){return n.input=e}}),(0,v.h)("i",{className:"fi magnification-lens hu-color_textarea-text"})),(0,v.h)("div",{className:"hu-input-menu-buttons hu-display-flex hu-flex-wrap hu-background-color_textarea-background-fade-02"+c(),ref:function(e){return n.buttonsContainer=e}},l.map(function(e,t){return-1<s.indexOf(e.toLowerCase())&&(0,v.h)("a",{key:Math.random(),href:m[t],target:"_blank",onClick:function(){return n.clickHandler(t)},className:"hu-input-menu_button menu-button "+(o.includes?o.includes[t]:"")+" hu-color_button-text hu-background-color_button-background hu-border-color_button-background-dark hu-d-none hu-justify-start","data-key":t,"data-link":m[t]?"1":null,tabIndex:t+1},n.mountIncludes(t),(0,v.h)("div",{className:"hu-display-flex hu-align-center hu-a-center"},(0,v.h)("span",{className:"button-text"},g.default.getVirtualDOM(e)),(0,v.h)("i",{className:"fi chains link-icon hu-s-16"})))}))):(0,v.h)("div",{className:"hu-input-menu-buttons hu-display-flex hu-flex-wrap "+c(),ref:function(e){return n.buttonsContainer=e}},l.map(function(e,t){return(0,v.h)("a",{key:Math.random(),href:m[t],target:"_blank",onClick:function(){return n.clickHandler(t)},className:"hu-input-menu_button "+(o.includes[t]?o.includes[t]:"")+" hu-display-flex hu-color_button-text hu-background-color_button-background hu-background-color_button-background-light_hover hu-border-color_button-background-dark hu-border-2 hu-border-radius-3 hu-a-center hu-d-none hu-justify-center hu-flex-dir-column hu-align-stretch hu-c-pointer","data-key":t,"data-link":m[t]?"1":null,tabIndex:t+1},n.mountIncludes(t),(0,v.h)("div",{className:"hu-input-menu_button_text hu-display-flex hu-align-center hu-a-center"},(0,v.h)("span",{className:"button-text hu-flex-1"},g.default.getVirtualDOM(e)),(0,v.h)("i",{className:"fi chains link-icon hu-s-16"})))})))}}]),n}())||i;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),p=n(0),o=(0,n(2).connect)(function(e){return{config:e.config}})(r=function(e){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={buttons:t.buttons,payloads:t.payloads,buttonsData:t.buttonsData,checks:t.buttons instanceof Array?t.buttons.map(function(e){return!1}):Object.keys(t.buttons).map(function(e){return!1}),search_filter:"",filter_results:t.buttons instanceof Array?t.buttons.map(function(e){return e.toLowerCase()}):Object.keys(t.buttons).map(function(e){return t.buttons[e].toLowerCase()})},e.checksContainer=null,e.submitButton=null,e.input=null,e.setInputFocus=e.setInputFocus.bind(e),e.setFocusWithChar=e.setFocusWithChar.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,p.Component),i(n,[{key:"componentDidMount",value:function(){this.props.ee.on("hu-lb-input-focus",this.setInputFocus),this.props.ee.on("hu-lb-text-focus",this.setFocusWithChar)}},{key:"componentWillUnmount",value:function(){this.props.ee.removeListener("hu-lb-input-focus",this.setInputFocus),this.props.ee.removeListener("hu-lb-text-focus",this.setFocusWithChar)}},{key:"setInputFocus",value:function(){this.input&&this.input.focus()}},{key:"setFocusWithChar",value:function(e){document.activeElement!==this.input&&this.input&&this.input.focus()}},{key:"clickHandler",value:function(e){var t=(this.props.buttons,this.state.checks.slice());t[e]=!t[e],this.setState({checks:t})}},{key:"submitHandler",value:function(){var e=this.props,t=e.buttons,n=e.payloads,r=this.state.checks,i=t instanceof Array?t:Object.keys(t).map(function(e){return t[e]}),o=null;o=n?n instanceof Array?n:Object.keys(n).map(function(e){return n[e]}):t instanceof Array?t:Object.keys(t).map(function(e){return t[e]}),this.props.inputSubmit({type:"button",message:i.filter(function(e,t){return r[t]}).join(", "),payload:o.filter(function(e,t){return r[t]}).join(", ")})}},{key:"onSearchInput",value:function(e){this.setState({search_filter:e.target.value,filter_results:this.getMatches(e.target.value)})}},{key:"getMatches",value:function(t){var n=this.props.buttons;return(n instanceof Array?n.map(function(e){return e.toLowerCase()}):Object.keys(n).map(function(e){return n[e].toLowerCase()})).filter(function(e){return-1<e.indexOf(t.toLowerCase())})}},{key:"render",value:function(e,t){var n=this,r=e.buttons,i=e.buttonsData,o=t.checks,a=t.search_filter,s=t.filter_results,u=i.search,l=r instanceof Array?r:Object.keys(r).map(function(e){return r[e]}),c=o.every(function(e){return!e}),h=function(){var e="";return"vertical"===i.alignment&&(e=e.concat(" vertical")),e},f=(0,p.h)("div",{className:"hu-input-multi-footer"},(0,p.h)("button",{className:"hu-input-multi_submit hu-background-color_button-background hu-color_button-text hu-s-14 hu-border-radius-3 hu-c-pointer",onClick:this.submitHandler.bind(this),ref:function(e){n.submitButton=e},disabled:c},e.config.text.send));return(0,p.h)("div",{className:"hu-input-multi"},(0,p.h)("span",{className:"hu-input-multi_help hu-display-block hu-not-selectable hu-s-10 hu-color_contrast hu-t-uppercase"},u?e.config.text.input_instant_search_help:e.config.text.input_multi_help),u?(0,p.h)("div",{className:"hu-drop-search hu-border-color_textarea-border"},(0,p.h)("div",{className:"drop-search-input-container hu-background-color_textarea-background hu-border-color_textarea-border"},(0,p.h)("input",{className:"drop-search-input hu-s-14 hu-color_textarea-text hu-placeholder-color_textarea-text",type:"text",placeholder:e.config.text.search,value:a,onInput:function(e){return n.onSearchInput(e)},ref:function(e){return n.input=e}}),(0,p.h)("i",{className:"fi magnification-lens hu-color_textarea-text"})),(0,p.h)("div",{className:"hu-buttons-container"},(0,p.h)("div",{className:"hu-input-multi-buttons"+h(),ref:function(e){return n.checksContainer=e}},l.map(function(e,t){return(-1<s.indexOf(e.toLowerCase())||o[t])&&(0,p.h)("div",{className:"hu-input-multi_button hu-color_button-text hu-background-color_button-background hu-position-relative hu-border-radius-3 hu-display-flex hu-align-center hu-c-pointer"+(o[t]?" active":""),"data-key":t,onClick:function(){return n.clickHandler(t)}},(0,p.h)("div",{className:"check-block"},(0,p.h)("input",{className:"check-input",type:"checkbox","data-key":t,checked:o[t]}),(0,p.h)("label",{className:"check-label"})),(0,p.h)("span",{className:"button-text"},e))})))):(0,p.h)("div",{className:"hu-buttons-container"},(0,p.h)("div",{className:"hu-input-multi-buttons"+h(),ref:function(e){return n.checksContainer=e}},l.map(function(e,t){return(0,p.h)("div",{className:"hu-input-multi_button hu-color_button-text hu-background-color_button-background hu-position-relative hu-border-radius-3 hu-display-flex hu-align-center hu-c-pointer"+(o[t]?" active":""),"data-key":t,onClick:function(){return n.clickHandler(t)}},(0,p.h)("div",{className:"check-block"},(0,p.h)("input",{className:"check-input",type:"checkbox","data-key":t,checked:o[t]}),(0,p.h)("label",{className:"check-label"})),(0,p.h)("span",{className:"button-text"},e))}))),f)}}]),n}())||r;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=n(23),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(){switch(a.default.viral_goodbye_type){case"":break;default:return(0,i.h)("div",{className:"hu-input-menu hu-input-referral"},(0,i.h)("span",{className:"hu-input-menu-info hu-display-block hu-not-selectable hu-s-14 hu-color_contrast"},"Want to create your own? It's easy, beautiful and free"),(0,i.h)("div",{className:"hu-input-menu-buttons"},(0,i.h)("a",{href:o.referralGoodbyeURL,className:"menu-button hu-color_button-text hu-background-color_button-background hu-border-color_button-background-dark",target:"_blank"},(0,i.h)("svg",{width:"31px",height:"27px",viewBox:"0 0 31 27",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},(0,i.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,i.h)("path",{className:"hu-fill_button-text",d:"M30.0011525,5.51999975 C30.4811549,6.6800055 30.7211525,7.89999325 30.7211525,9.17999959 C30.7211525,10.5800065 30.4311554,11.8999933 29.8511525,13.1399994 C29.2711497,14.3800056 28.4611578,15.429995 27.4211526,16.2899993 C26.6611489,16.9900027 24.7011686,18.7799848 21.5411529,21.659999 C18.5811382,24.3600124 16.7711564,26.0099958 16.1111531,26.6099988 C15.8911521,26.7899997 15.6411546,26.8799988 15.3611532,26.8799988 C15.0811518,26.8799988 14.8311543,26.7899997 14.6111532,26.6099988 C13.6311484,25.7299944 11.0611742,23.3800181 6.90115356,19.5599991 C4.92114375,17.7599902 3.7911551,16.7400005 3.51115371,16.4999993 C3.43115331,16.4199989 3.34115422,16.3399997 3.24115372,16.2599993 C2.22114867,15.399995 1.4311566,14.3550055 0.871153829,13.1249994 C0.311151054,11.8949933 0.0211539665,10.5900064 0.00115386744,9.20999959 C-0.0188462317,7.94999334 0.221151358,6.7300056 0.721153835,5.54999975 C1.18115611,4.4299942 1.84114949,3.44000415 2.70115375,2.57999988 C4.38116207,0.859991362 6.39114188,0 8.73115348,0 C10.0111598,0 11.2261476,0.279997187 12.3761533,0.839999962 C13.526159,1.40000274 14.521149,2.1899948 15.3611532,3.20999986 C16.2011573,2.1899948 17.1961473,1.40000274 18.346153,0.839999962 C19.4961587,0.279997187 20.7111465,0 21.9911529,0 C24.3311645,0 26.3411443,0.849991462 28.0211526,2.54999989 C28.8811569,3.41000415 29.5411502,4.3999942 30.0011525,5.51999975 Z M17.0411531,4.79999979 C16.621151,5.36000256 16.0611566,5.63999975 15.3611532,5.63999975 C14.6611497,5.63999975 14.1011553,5.36000256 13.6811533,4.79999979 C13.0811503,4.01999592 12.3461577,3.41000205 11.4761534,2.96999987 C10.606149,2.52999769 9.69115823,2.3099999 8.73115348,2.3099999 C7.03114505,2.3099999 5.56115982,2.93999357 4.32115367,4.19999981 C3.6811505,4.84000298 3.19115542,5.57999555 2.85115374,6.41999971 C2.47115186,7.30000407 2.29115367,8.22999473 2.31115376,9.20999959 C2.31115376,10.2300046 2.52115165,11.2049948 2.94115374,12.1349995 C3.36115582,13.0650041 3.96114979,13.8499962 4.74115366,14.4899994 C4.78115385,14.5499996 4.86115305,14.6199989 4.98115364,14.6999993 C5.00115374,14.7199994 5.02115354,14.7499991 5.04115364,14.7899993 C5.40115543,15.1100009 6.34114598,15.9599924 7.86115352,17.3399992 L9.30115345,18.6599992 C12.1811677,21.2800121 14.2011474,23.1199937 15.3611532,24.1799989 C16.2811577,23.3399948 17.8211423,21.9400088 19.981153,19.9799991 C22.6811664,17.4799867 24.6511466,15.6800048 25.8911527,14.5799993 L25.9511527,14.5199994 C26.7111565,13.8999963 27.3111504,13.130004 27.7511526,12.2099995 C28.1911548,11.2499947 28.4111526,10.2400048 28.4111526,9.17999959 C28.4111526,8.19999473 28.2311544,7.27000408 27.8711526,6.38999971 C27.5311509,5.54999555 27.0411559,4.81000298 26.4011527,4.16999981 C25.1611465,2.92999367 23.6911613,2.3099999 21.9911529,2.3099999 C21.0311481,2.3099999 20.1161573,2.52499774 19.246153,2.95499987 C18.3761487,3.385002 17.6411561,3.99999582 17.0411531,4.79999979 Z",id:"",fill:"#FFFFFF"}))),(0,i.h)("span",{className:"button-text"},"Create a Landbot"))))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=n(2),u=n(4),l=(i=u)&&i.__esModule?i:{default:i},c=(0,s.connect)(function(e){return{config:e.config}})(r=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={buttons:e.buttons,payloads:e.payloads,buttonsData:e.buttonsData},t.buttonsContainer=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),o(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.buttons,i=n.payloads,o=n.buttonsData;return!(this.compareObjects(r,e.buttons)&&this.compareObjects(i,e.payloads)&&this.compareObjects(o,e.buttonsData))}},{key:"compareObjects",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"clickHandler",value:function(e){var t,n=this.props,r=n.buttons,i=n.payloads,o=r instanceof Array?r:Object.keys(r).map(function(e){return r[e]});t=i?i instanceof Array?i:Object.keys(i).map(function(e){return i[e]}):r instanceof Array?r:Object.keys(r).map(function(e){return r[e]}),this.props.inputSubmit({type:"button",message:o[e],payload:t[e]||o[e]})}},{key:"mountIncludes",value:function(e){var t=this.props.buttonsData,n=t.includes,r=t.icons,i=t.emojis,o=t.images;if(n)switch(n[e]){case"icon":return r&&(0,a.h)("span",{className:"button-icon hu-s-25"},(0,a.h)("i",{className:"fi "+r[e]}));case"image":return o&&(0,a.h)("div",{className:"button-image hu-width-full hu-height-full hu-background-cover",style:{backgroundImage:o[e]?"url("+o[e]+")":null}});case"emoji":return i&&(0,a.h)("span",{className:"button-icon hu-s-30"},i[e]);default:return null}}},{key:"render",value:function(e,t){var n=this,r=e.buttons,i=r instanceof Array?r:Object.keys(r).map(function(e){return r[e]});return(0,a.h)("div",{className:"hu-input-yes_no hu-display-flex hu-align-center hu-justify-center"},i.map(function(e,t){return(0,a.h)("a",{onClick:function(){return n.clickHandler(t)},className:"yes_no-button hu-btn hu-border-circle hu-color_button-text hu-background-color_button-background hu-background-color_button-background-light_hover hu-position-relative","data-key":t,tabIndex:t+1},n.mountIncludes(t),(0,a.h)("span",{className:"button-text hu-s-12 hu-color_contrast"},l.default.getVirtualDOM(e)))}))}}]),n}())||r;t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(0),a=n(2),l=r(n(299)),c=r(n(9)),s=(0,a.connect)(function(e){return{config:e.config}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.buttonsContainer=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.Component),o(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.buttons,i=n.payloads,o=n.buttonsData;return!(this.compareObjects(r,e.buttons)&&this.compareObjects(i,e.payloads)&&this.compareObjects(o,e.buttonsData))}},{key:"compareObjects",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"clickHandler",value:function(e){this.props.inputSubmit({type:"button",message:e.message,payload:e.payload})}},{key:"render",value:function(e,t){var n=e.cards,r=e.card_type,i=e.payloads,o=c.default.getArrayFrom(n),a=c.default.getArrayFrom(i||o.map(function(e){return e.title})),s=o.map(function(e,t){return Object.assign({},o[t],{message:o[t].title||"#"+(t+1),payload:a[t]})});return(0,u.h)("div",{className:"hu-input-carousel"},(0,u.h)(l.default,{className:"input-"+r,multi:!1,items:s,onClick:this.clickHandler.bind(this)}))}}]),n}())||i;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(300),o=(r=i)&&r.__esModule?r:{default:r};n(301),t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.itemsLength=e.items.length,t.state={active:0},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),r(n,[{key:"getIndex",value:function(e){return e>this.itemsLength-1?e%this.itemsLength:e<0?e%this.itemsLength==0?0:e%this.itemsLength+this.itemsLength:e}},{key:"next",value:function(){this.setState({active:this.state.active+1})}},{key:"prev",value:function(){this.setState({active:this.state.active-1})}},{key:"render",value:function(r,e){var i=this,o=function(e){return e<0?Math.floor(e/i.itemsLength):Math.ceil(e/i.itemsLength)},t=[Object.assign({},r.items[this.getIndex(e.active-2)],{_key:e.active-2}),Object.assign({},r.items[this.getIndex(e.active-1)],{_key:e.active-1}),Object.assign({},r.items[this.getIndex(e.active)],{_key:e.active}),Object.assign({},r.items[this.getIndex(e.active+1)],{_key:e.active+1}),Object.assign({},r.items[this.getIndex(e.active+2)],{_key:e.active+2})];return(0,a.h)("div",{className:"Carousel "+r.className},(0,a.h)("header",{className:"Carousel_header"}),(0,a.h)("div",{className:"Carousel_body hu-position-relative"},(0,a.h)("div",{className:"Carousel_items hu-position-relative"},t.map(function(t,n){return(0,a.h)("a",{key:o(t._key)+"_"+i.getIndex(t._key),"data-id":o(t._key)+"_"+i.getIndex(t._key),className:"Carousel_item hu-btn hu-background-cover hu-border-radius-3 hu-overflow-hidden "+function(e){return e<2?"Carousel_item_prev":2===e?"Carousel_item_active":"Carousel_item_next"}(n),style:{zIndex:function(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 1;case 4:default:return 0}}(n),backgroundImage:t.image?"url("+t.image+")":null},onClick:function(e){return function(e,t,n){switch(n){case 0:case 1:e.preventDefault(),i.prev();break;case 2:r.onClick(t);break;case 3:case 4:e.preventDefault(),i.next();break;default:e.preventDefault()}}(e,t,n)},href:t.href||null,target:"_blank"},(0,a.h)("div",{className:"Carousel_item_overlay hu-position-cover "+(2===n?"":"active")}),"image"===t.type&&t.title&&(0,a.h)("div",{className:"Card-picture_content"},(0,a.h)("p",{className:"Card-picture_content_title hu-s-13"},t.title)),"catalogue"===t.type&&(0,a.h)("div",{className:"Card-catalogue_content"},t.title&&(0,a.h)("h1",{className:"Card-catalogue_content_title hu-s-17 hu-w-bold"},t.title),t.description&&(0,a.h)("p",{className:"Card-catalogue_content_description hu-s-11 hu-t-uppercase"},t.description),(t.attribute||t.cta)&&(0,a.h)("div",{className:"hu-display-flex hu-align-center",style:{marginTop:10}},(0,a.h)("strong",{className:"Card-catalogue_content_attribute hu-s-16 hu-position-relative"},t.attribute),(0,a.h)("span",{className:"hu-flex-1"}),(0,a.h)("a",{className:"Card-catalogue_content_cta hu-btn hu-background-color_button-background hu-background-color_button-background-light_hover hu-color_button-text hu-s-12 hu-t-uppercase hu-w-bold"},t.cta))))})),(0,a.h)("div",{className:"Carousel_nav hu-zindex-2 hu-display-flex"},(0,a.h)("button",{className:"Carousel_nav_prev hu-btn hu-border-circle",onClick:this.prev.bind(this)},(0,a.h)("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,a.h)("path",{d:"M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"}))),(0,a.h)("button",{className:"Carousel_nav_next hu-btn hu-a-left",onClick:this.next.bind(this)},(0,a.h)("span",{className:"hu-s-12 hu-t-uppercase hu-w-bold"},"Next"),(0,a.h)("svg",{fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,a.h)("path",{d:"M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"}))))),(0,a.h)("footer",{className:"Carousel_footer"}))}}]),n}();t.default=i},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),f=n(0),a=n(2),s=n(36),u=r(n(3)),p=r(n(40)),l=r((r(n(30)),n(9))),c={value:"",focus:!1,selection:null,suggestion:"",matches:[]},d=(0,a.connect)(function(e){return{config:e.config,autocompleteValues:e.input.autocompleteValues,autocompleteActive:e.input.autocompleteActive}},function(t){return{setInputData:function(e){return t({type:s.SET_INPUT,inputData:e})}}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state=l.default.cloneObject(c),t.list=e.buttonsData.list,t.input=null,t.inputContainer=null,t.buttonsContainer=null,t.setInputFocus=t.setInputFocus.bind(t),t.setFocusWithChar=t.setFocusWithChar.bind(t),t.selectEntry=t.selectEntry.bind(t),t.clickHandleBinding=t.onDocumentClick.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,f.Component),o(n,[{key:"componentDidMount",value:function(){u.default.on("hu-lb-text-focus",this.setFocusWithChar),u.default.on("Autocomplete-entry",this.selectEntry),document.addEventListener("click",this.clickHandleBinding),this.props.setInputData({autocompleteValues:this.getSuggestions()})}},{key:"componentWillUnmount",value:function(){u.default.removeListener("hu-lb-text-focus",this.setFocusWithChar),u.default.removeListener("Autocomplete-entry",this.selectEntry),document.removeEventListener("click",this.clickHandleBinding)}},{key:"onDocumentClick",value:function(e){document.querySelector("#hu-message-input .DropMenu-Autocomplete").contains(e.target)||document.querySelector("#hu-message-input .hu-textarea-input-container").contains(e.target)||this.props.setInputData({autocompleteActive:!1})}},{key:"onFocus",value:function(e){this.setState({focus:!0}),this.props.setInputData({autocompleteActive:!0})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"onTextareaClick",value:function(e){this.buttonsContainer&&this.buttonsContainer.contains(e.target)||this.setInputFocus()}},{key:"onKeyDown",value:function(e){var t=e.keyCode||e.which;if(13==t)if(e.shiftKey){e.preventDefault();var n=window.getSelection(),r=n.anchorNode,i=n.anchorOffset,o=r.textContent,a=o.slice(0,i),s=o.slice(i)||" ";r.textContent=a+"\n"+s;var u=document.createRange();u.setStart(r,i+1),u.setEnd(r,i+1),n.removeAllRanges(),n.addRange(u)}else e.preventDefault(),this.send();else 38===t?(e.preventDefault(),this.selectPrev()):40===t?(e.preventDefault(),this.selectNext()):27===t&&(this.input.blur(),this.props.setInputData({autocompleteActive:!1}))}},{key:"onInputKeyDown",value:function(e){var t=e.keyCode||e.which;13==t?(e.preventDefault(),this.send()):38===t?(e.preventDefault(),this.selectPrev()):40===t?(e.preventDefault(),this.selectNext()):27===t&&(this.input.blur(),this.props.setInputData({autocompleteActive:!1}))}},{key:"onChange",value:function(e){var t=this,n="string"==typeof e.target.value?e.target.value:e.target.textContent;this.setState({value:n},function(){t.props.setInputData({autocompleteValues:t.getSuggestions()})})}},{key:"onPaste",value:function(e){var t;t=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e.clipboardData.getData("text/plain"),document.execCommand("inserttext",!1,t),e.preventDefault()}},{key:"send",value:function(e){e instanceof Event&&e.stopPropagation();var t=this.state.selection;null!==t&&(this.props.inputSubmit({type:"button",message:t.text,payload:t.payload||t.text}),this.setState(c),this.props.setInputData({autocompleteValues:[],autocompleteActive:!1}))}},{key:"selectEntry",value:function(e){this.props.inputSubmit({type:"button",message:e.text,payload:e.payload||e.text}),this.setState(c),this.props.setInputData({autocompleteValues:[],autocompleteActive:!1})}},{key:"selectPrev",value:function(){var e=this.props.autocompleteValues,i="",o=!1,a=!1,t=function e(t){for(var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=t.length-1;0<=r;r--){if(o)return;if("group"===t[r].type)e(l.default.getArrayFrom(t[r].list),n);else{if(n)return t[r].active=!0,o=!0,void(i=t[r]);if(t[r].active)a=!0,delete t[r].active;else if(a)return t[r].active=!0,o=!(a=!1),void(i=t[r])}}};t(l.default.getArrayFrom(e)),o||t(l.default.getArrayFrom(e),!0),this.setState({suggestion:this.state.value+i.text.slice(this.state.value.length),selection:i}),this.props.setInputData({autocompleteValues:e})}},{key:"selectNext",value:function(){var e=this.props.autocompleteValues,i="",o=!1,a=!1,t=function e(t){for(var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=0;r<t.length;r++){if(o)return;if("group"===t[r].type)e(l.default.getArrayFrom(t[r].list),n);else{if(n)return t[r].active=!0,o=!0,void(i=t[r]);if(t[r].active)a=!0,delete t[r].active;else if(a)return t[r].active=!0,o=!(a=!1),void(i=t[r])}}};t(l.default.getArrayFrom(e)),o||t(l.default.getArrayFrom(e),!0),this.setState({suggestion:this.state.value+i.text.slice(this.state.value.length),selection:i}),this.props.setInputData({autocompleteValues:e})}},{key:"setInputFocus",value:function(){this.input&&this.input.focus()}},{key:"setFocusWithChar",value:function(e){document.activeElement!==this.input&&this.setInputFocus()}},{key:"getSuggestions",value:function(){var i=this;if(""===this.state.value)return this.setState({suggestion:"",selection:null}),l.default.getArrayFrom(this.props.buttonsData.list);var o="",a=null,e=function r(e){return e.map(function(e){if("group"===e.type){var t=r(l.default.getArrayFrom(e.list)).filter(function(e){return e});return 0<t.length&&Object.assign({},e,{list:t})}var n=0===e.text.toLowerCase().indexOf(i.state.value.toLowerCase());return n&&!o&&(o=i.state.value+e.text.slice(i.state.value.length),a=e),!!n&&e})}(l.default.getArrayFrom(this.props.buttonsData.list)).filter(function(e){return e});return this.setState({suggestion:o,selection:a}),e}},{key:"render",value:function(e,t){var n=this,r=t.value,i=(t.focus,t.selection),o=e.config.text.autocomplete_input_placeholder,a=i?r+i.text.slice(r.length):r?"":e.config.text.autocomplete_input_placeholder,s=(0,f.h)("button",{className:"send hu-display-flex hu-align-center hu-c-pointer",onClick:this.send.bind(this),tabIndex:2},(0,f.h)("span",{style:{margin:"0 5px"},className:"hu-color_textarea-border hu-s-11 hu-t-uppercase"},e.config.text.send),(0,f.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",x:"3650",y:"3688"},(0,f.h)("path",{className:"hu-fill_textarea-border",d:"M1.1 21.757l22.7-9.73L1.1 2.3l.012 7.912 13.623 1.816-13.623 1.817-.01 7.912z"}))),u=(0,f.h)("button",{className:"search hu-display-flex hu-align-center hu-c-pointer",onClick:this.setInputFocus.bind(this)},(0,f.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,f.h)("path",{className:"hu-fill_textarea-border",d:"M23.809 21.646l-6.205-6.205c1.167-1.605 1.857-3.579 1.857-5.711 0-5.365-4.365-9.73-9.731-9.73-5.365 0-9.73 4.365-9.73 9.73 0 5.366 4.365 9.73 9.73 9.73 2.034 0 3.923-.627 5.487-1.698l6.238 6.238 2.354-2.354zm-20.955-11.916c0-3.792 3.085-6.877 6.877-6.877s6.877 3.085 6.877 6.877-3.085 6.877-6.877 6.877c-3.793 0-6.877-3.085-6.877-6.877z"})),(0,f.h)("span",{style:{margin:"0 5px"},className:"hu-color_textarea-border hu-s-11 hu-t-uppercase"},e.config.text.search)),l=p.default.only(["chrome","firefox","safari","opera","msedge"]),c={contenteditable:(0,f.h)("div",h({className:"hu-textarea hu-color_textarea-text",contentEditable:!0,tabIndex:1,suggestion:a,placeholder:"",ref:function(e){return n.input=e},onInput:function(e){return n.onChange(e)},onKeyDown:function(e){return n.onKeyDown(e)},onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onPaste:this.onPaste,suppressContentEditableWarning:!0,"data-gramm_editor":"false"},"tabIndex",e.disabled?"-1":"0"),r),native:(0,f.h)("input",h({key:"native",className:"hu-textarea hu-color_textarea-text",tabIndex:1,placeholder:o,ref:function(e){return n.input=e},onInput:function(e){return n.onChange(e)},onChange:function(e){return n.onChange(e)},onKeyDown:function(e){return n.onInputKeyDown(e)},onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),"data-gramm_editor":"false",value:r,type:"text"},"tabIndex",e.disabled?"-1":"0"))}[l?"contenteditable":"native"];return(0,f.h)("div",{className:"hu-textarea-heavy"},(0,f.h)("div",{className:"hu-textarea-input-container hu-background-color_textarea-background hu-border-color_textarea-border text"+(t.focus?" focus":"")+(e.autocompleteActive?" highlight":""),ref:function(e){return n.inputContainer=e},onClick:this.onTextareaClick.bind(this)},c,(0,f.h)("div",{className:"hu-textarea-buttons",ref:function(e){return n.buttonsContainer=e}},i?s:u)),(0,f.h)("p",{className:"hu-textarea-footer-info hu-not-selectable hu-s-10 hu-color_contrast hu-t-uppercase"},e.config.text.input_autocomplete_help))}}]),n}())||i;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=n(0),a=n(2),s=n(9),c=(i=s)&&i.__esModule?i:{default:i},u=(0,a.connect)(function(e){return{config:e.config}})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"render",value:function(n,e){var t=this,r=n.buttons,i=n.payloads,o=n.buttonsData,a=c.default.getArrayFrom(r),s=c.default.getArrayFrom(i||r),u=c.default.getArrayFrom(o.tags);return(0,l.h)("div",{className:"hu-input-scale hu-position-relative",ref:function(e){return t.scaleContainer=e}},(0,l.h)("div",{className:"Scale"},(0,l.h)("div",{className:"Scale-container hu-display-flex hu-align-center"},a.map(function(e,t){return(0,l.h)("a",{target:"_blank",onClick:function(){return n.inputSubmit({type:"button",message:a[t],payload:s[t]})},className:"Scale_item hu-display-flex hu-flex-1 hu-align-center hu-justify-center hu-s-16 hu-w-bold hu-c-pointer hu-position-relative hu-color_button-text hu-background-color_button-background hu-border-color_button-background-dark hu-border-right-color_button-background-darky","data-key":t,tabIndex:t+1},(0,l.h)("div",{className:"Scale_item_highlighter hu-zindex-1 hu-position-cover"}),(0,l.h)("span",{className:"hu-zindex-2"},e))})),(0,l.h)("div",{className:"Scale-footer"},(0,l.h)("div",{className:"Scale-footer_tags hu-display-flex hu-align-center hu-justify-space-between hu-color_contrast"},u.map(function(e){return(0,l.h)("span",{className:"hu-s-11 hu-w-bold hu-t-uppercase"},e)})))))}}]),t}())||r;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(0),a=n(2),s=n(9),l=(i=s)&&i.__esModule?i:{default:i},c=(0,a.connect)(function(e){return{config:e.config}})(r=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={hoverIndex:-1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.Component),o(n,[{key:"render",value:function(n,r){var i=this,e=n.buttons,t=n.payloads,o=n.buttonsData,a=l.default.getArrayFrom(e),s=l.default.getArrayFrom(t||e);return(0,u.h)("div",{className:"hu-input-rating hu-position-relative",ref:function(e){return i.scaleContainer=e}},(0,u.h)("span",{className:"hu-input-rating-info hu-display-block hu-not-selectable hu-s-10 hu-color_contrast hu-t-uppercase"},n.config.text.input_rating_help),(0,u.h)("div",{className:"Rating"},(0,u.h)("div",{className:"Rating-container hu-display-flex hu-align-center"},a.map(function(e,t){return(0,u.h)("a",{target:"_blank",onClick:function(){return n.inputSubmit({type:"button",message:o.cumulative?a.slice(0,t+1).join(""):a[t],payload:s[t]})},className:"Rating_item hu-display-flex hu-align-center hu-justify-center hu-c-pointer hu-position-relative","data-key":t,"data-color":r.hoverIndex>=t?"1":"0",tabIndex:t+1,onMouseOver:function(){return i.setState({hoverIndex:t})},onMouseLeave:function(){return i.setState({hoverIndex:-1})}},(0,u.h)("span",{className:8<=a.length?"hu-s-25":"hu-s-35"},e),(0,u.h)("span",{className:"Rating_item_index hu-s-11 hu-color_contrast"},t+1))}))))}}]),n}())||r;t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=n(0),o=n(2),a=(0,o.connect)(function(e){return{config:e.config}})(r=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={value:"",empty:!0,valid:!1,validationInfo:"",focus:!1},t.input=null,t.setInputFocus=t.setInputFocus.bind(t),t.setFocusWithChar=t.setFocusWithChar.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.Component),i(n,[{key:"componentDidMount",value:function(){this.props.ee.on("hu-lb-input-focus",this.setInputFocus),this.props.ee.on("hu-lb-text-focus",this.setFocusWithChar)}},{key:"componentWillUnmount",value:function(){this.props.ee.removeListener("hu-lb-input-focus",this.setInputFocus),this.props.ee.removeListener("hu-lb-text-focus",this.setFocusWithChar)}},{key:"onFocus",value:function(e){this.setState({focus:!0})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"onInputKeyDown",value:function(e){13==(e.keyCode||e.which)&&(e.preventDefault(),!this.state.empty&&this.state.valid&&this.send())}},{key:"onChange",value:function(e){var t=this.props.textareaData,n=t.minValue,r=t.maxValue,i="string"==typeof e.target.value?e.target.value:e.target.textContent;isNaN(i)?this.setState({value:i,empty:""===i,valid:!1,validationInfo:"Input data must be a number"}):this.setState({value:i,empty:""===i,valid:function(e,t,n){var r=!0;return"number"==typeof t&&(r=r&&Number(e)>=t),"number"==typeof n&&(r=r&&Number(e)<=n),r}(i,n,r),validationInfo:function(e){var t=e.value,n=e.min,r=e.max,i=e.texts,o=void 0===i?{}:i;return isNaN(t)?"Input value must be a number":"number"==typeof n&&Number(t)<n?o.minInfo:"number"==typeof r&&Number(t)>r?o.maxInfo:""}({value:i,min:n,max:r,texts:{minInfo:this.props.config.text.input_number_help_min.replace(/@field/g,n),maxInfo:this.props.config.text.input_number_help_max.replace(/@field/g,r)}})})}},{key:"send",value:function(){var e=this.state,t=e.value,n=e.valid,r=e.empty;if(n&&!r){this.props.inputSubmit({type:"text",message:t,extra:{value:Number(t)}}),this.setState({value:"",empty:!0}),this.input.style.visibility="hidden";var i=this.input;i&&(i.blur(),setTimeout(function(){i&&(i.style.visibility="visible")},1))}}},{key:"setInputFocus",value:function(){this.input&&this.input.focus()}},{key:"setFocusWithChar",value:function(e){document.activeElement!==this.input&&this.input&&this.input.focus()}},{key:"render",value:function(e,t){var n=this,r=e.textareaData,i=t.value,o=t.valid,a=t.validationInfo,s=t.empty,u=t.focus;return(0,l.h)("div",{className:"hu-input-number"+(s?" empty":"")+(o?" valid":"")},!o&&!s&&(0,l.h)("span",{className:"hu-input-number_info hu-color_button-text hu-background-color_button-background hu-border-radius-3 hu-s-10 hu-t-uppercase"},a),(0,l.h)("div",{className:"hu-input-number-container hu-display-flex hu-align-stretch hu-overflow-hidden hu-border-radius-4 hu-background-color_textarea-background hu-color_textarea-border hu-position-relative"+(u?" focus":"")},r.prefix&&(0,l.h)("div",{className:"hu-input-number_prefix hu-display-flex hu-align-center hu-justify-center hu-textarea-prefix"},(0,l.h)("span",{className:"hu-s-17 hu-w-bold"},r.prefix)),(0,l.h)("input",{className:"hu-input-number_input hu-flex-1 hu-color_textarea-text hu-placeholder-color_textarea-text",tabIndex:1,ref:function(e){return n.input=e},onInput:function(e){return n.onChange(e)},onChange:function(e){return n.onChange(e)},onKeyDown:function(e){return n.onInputKeyDown(e)},onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),"data-gramm_editor":"false",value:i,type:"number",min:"number"==typeof r.minValue?r.minValue:null,max:"number"==typeof r.maxValue?r.maxValue:null}),(0,l.h)("button",{className:"hu-input-number_btn hu-display-flex hu-align-center hu-justify-center"+(o?" hu-c-pointer":""),onClick:this.send.bind(this),tabIndex:2},(o||s)&&(0,l.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",x:"3650",y:"3688"},(0,l.h)("path",{className:"hu-fill_textarea-border",fill:"",d:"M1.1 21.757l22.7-9.73L1.1 2.3l.012 7.912 13.623 1.816-13.623 1.817-.01 7.912z"})),!o&&!s&&(0,l.h)("span",{className:"hu-s-24"},""))),(0,l.h)("p",{className:"hu-input-number_help hu-not-selectable hu-s-10 hu-a-right hu-color_contrast hu-t-uppercase"},e.config.text.input_text_help))}}]),n}())||r;t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(0),a=n(2),s=r(n(40)),l=r(n(30)),c=n(113),h=(0,a.connect)(function(e){return{config:e.config}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={value:"",empty:!0,focus:!1},t.input=null,t.autocomplete=null,t.setInputFocus=t.setInputFocus.bind(t),t.setFocusWithChar=t.setFocusWithChar.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.Component),o(n,[{key:"componentDidMount",value:function(){this.props.ee.on("hu-lb-input-focus",this.setInputFocus),this.props.ee.on("hu-lb-text-focus",this.setFocusWithChar)}},{key:"componentWillUnmount",value:function(){this.props.ee.removeListener("hu-lb-input-focus",this.setInputFocus),this.props.ee.removeListener("hu-lb-text-focus",this.setFocusWithChar)}},{key:"initializeLocationAutocomplete",value:function(){if(this.input&&null===this.autocomplete&&!s.default.isMobile()){var e=JSON.parse(this.props.textareaData.locationOptions||"{}");this.autocomplete=new google.maps.places.Autocomplete(this.input,e)}}},{key:"onInputKeyDown",value:function(e){if(13==(e.keyCode||e.which)&&(e.preventDefault(),!this.state.empty)){this.send(),google.maps.event.clearInstanceListeners(this.input);for(var t=document.querySelectorAll(".pac-container"),n=0;n<t.length;n++)t[n].parentElement.removeChild(t[n])}}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t,empty:""===t})}},{key:"onFocus",value:function(e){this.setState({focus:!0})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"send",value:function(){if(!this.state.empty){var e=this.input&&this.input.value||this.state.value;this.props.inputSubmit({type:"text",message:e}),this.setState({value:"",empty:!0});var t=this.input;t&&(this.input.style.visibility="hidden",t.blur(),setTimeout(function(){t&&(t.style.visibility="visible")},1))}}},{key:"setInputFocus",value:function(){this.input&&this.input.focus()}},{key:"setFocusWithChar",value:function(e){document.activeElement!==this.input&&this.input&&this.input.focus()}},{key:"render",value:function(e,t){var n=this,r=e.textareaData,i=t.value,o=t.empty,a=t.focus,s=l.default.getInputPlaceholder(r);return(0,u.h)("div",{className:"hu-input-location"+(o?" empty":"")},(0,u.h)("script",{onLoad:this.initializeLocationAutocomplete.bind(this),src:"https://maps.googleapis.com/maps/api/js?key="+c.GOOGLE_API_KEY+"&libraries=places"}),(0,u.h)("div",{className:"hu-input-location-container hu-display-flex hu-align-stretch hu-overflow-hidden hu-border-radius-4 hu-background-color_textarea-background hu-color_textarea-border hu-position-relative"+(a?" focus":"")},(0,u.h)("input",{key:"location-input",className:"hu-input-location_input hu-flex-1 hu-color_textarea-text hu-placeholder-color_textarea-text",tabIndex:1,placeholder:s,ref:function(e){return n.input=e},onInput:function(e){return n.onChange(e)},onChange:function(e){return n.onChange(e)},onKeyDown:function(e){return n.onInputKeyDown(e)},onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),"data-gramm_editor":"false",value:i,type:"text"}),(0,u.h)("button",{className:"hu-input-location_btn hu-display-flex hu-align-center hu-justify-center hu-c-pointer",onClick:this.send.bind(this),tabIndex:2},(0,u.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",x:"3650",y:"3688"},(0,u.h)("path",{className:"hu-fill_textarea-border",fill:"",d:"M1.1 21.757l22.7-9.73L1.1 2.3l.012 7.912 13.623 1.816-13.623 1.817-.01 7.912z"})))),(0,u.h)("p",{className:"hu-input-location_help hu-not-selectable hu-s-10 hu-a-right hu-color_contrast hu-t-uppercase"},e.config.text.input_text_help))}}]),n}())||i;t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FORMAT=void 0;var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=n(0),a=n(2),s=n(36),l=r(n(3)),c=r(n(30)),h=n(114),f=r(n(308)),p=t.DEFAULT_FORMAT="YYYY/MM/DD",d=(0,a.connect)(function(e){return{config:e.config,calendarActive:e.input.calendarActive}},function(t){return{setInputData:function(e){return t({type:s.SET_INPUT,inputData:e})}}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={value:"",valid:!1,timestamp:null,empty:!0,focus:!1},t.input=null,t.onCalendarSelection=t.onCalendarSelection.bind(t),t.clickHandleBinding=t.onDocumentClick.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.Component),o(n,[{key:"componentDidMount",value:function(){l.default.on("Calendar-entry",this.onCalendarSelection),document.addEventListener("click",this.clickHandleBinding),this.props.setInputData({calendarOptions:this.props.textareaData.dateOptions})}},{key:"componentWillUnmount",value:function(){l.default.removeListener("Calendar-entry",this.onCalendarSelection),document.removeEventListener("click",this.clickHandleBinding)}},{key:"onDocumentClick",value:function(e){document.querySelector("#hu-message-input .CalendarComponent").contains(e.target)||document.querySelector("#hu-message-input .hu-input-date-container").contains(e.target)||this.props.setInputData({calendarActive:!1})}},{key:"onCalendarSelection",value:function(e){var t=e.value;this.setState({value:function(e,t){var n=t.format||p;if(e instanceof Array){var r=e[0]?(0,f.default)(e[0],n):"",i=e[1]?(0,f.default)(e[1],n):"";return r||i?r+" - "+i:""}return(0,f.default)(e,n)}(t,this.props.textareaData.dateOptions),timestamp:t,empty:function(e,t){return e instanceof Array?!e.reduce(function(e,t){return t||!!e},!1):!e}(t,this.props.textareaData.dateOptions),valid:function(e,t){return e instanceof Array?h.DateUtils.isDate(e[0])&&h.DateUtils.isDate(e[1]):h.DateUtils.isDate(e)}(t,this.props.textareaData.dateOptions)})}},{key:"onClick",value:function(){this.props.setInputData({calendarActive:!this.props.calendarActive})}},{key:"send",value:function(){var e=this.state,t=e.valid,n=e.value,r=e.timestamp;if(t){this.props.setInputData({calendarActive:!1}),this.props.textareaData.dateOptions.isRange?this.props.inputSubmit({type:"text",message:n}):this.props.inputSubmit({type:"text",message:n,extra:{timestamp:r.valueOf()/1e3}}),this.setState({value:"",empty:!0,valid:!1});var i=this.input;i&&(this.input.style.visibility="hidden",i.blur(),setTimeout(function(){i&&(i.style.visibility="visible")},1))}}},{key:"render",value:function(e,t){var n=e.textareaData,r=t.value,i=t.valid,o=t.empty,a=t.focus,s=c.default.getInputPlaceholder(n);return(0,u.h)("div",{className:"hu-input-date"+(o?" empty":"")+(i?" valid":"")},(0,u.h)("div",{className:"hu-input-date-container hu-display-flex hu-align-stretch hu-overflow-hidden hu-border-radius-4 hu-background-color_textarea-background hu-color_textarea-border hu-position-relative"+(a?" focus":"")},(0,u.h)("div",{key:"date-input",className:"hu-input-date_input hu-display-flex hu-align-center hu-flex-1 hu-color_textarea-text hu-placeholder-color_textarea-text hu-c-pointer",placeholder:s,onClick:this.onClick.bind(this)},r),(0,u.h)("button",{className:"hu-input-date_btn hu-display-flex hu-align-center hu-justify-center hu-c-pointer",onClick:this.send.bind(this),tabIndex:2},(0,u.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",x:"3650",y:"3688"},(0,u.h)("path",{className:"hu-fill_textarea-border",fill:"",d:"M1.1 21.757l22.7-9.73L1.1 2.3l.012 7.912 13.623 1.816-13.623 1.817-.01 7.912z"})))),(0,u.h)("p",{className:"hu-input-date_help hu-not-selectable hu-s-10 hu-a-right hu-color_contrast hu-t-uppercase"},e.config.text.input_text_help))}}]),n}())||i;t.default=d},function(e,t,n){function r(e,t){t=t||"";var n=0<e?"-":"+",r=Math.abs(e),i=r%60;return n+o(Math.floor(r/60),2)+t+o(i,2)}function o(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}var i=n(309),a=n(313),s=n(118),u=n(15),l=n(316),c=n(317),h={M:function(e){return e.getMonth()+1},MM:function(e){return o(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return o(e.getDate(),2)},DDD:function(e){return i(e)},DDDD:function(e){return o(i(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return a(e)},WW:function(e){return o(a(e),2)},YY:function(e){return o(e.getFullYear(),4).substr(2)},YYYY:function(e){return o(e.getFullYear(),4)},GG:function(e){return String(s(e)).substr(2)},GGGG:function(e){return s(e)},H:function(e){return e.getHours()},HH:function(e){return o(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:12<t?t%12:t},hh:function(e){return o(h.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return o(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return o(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return o(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return o(e.getMilliseconds(),3)},Z:function(e){return r(e.getTimezoneOffset(),":")},ZZ:function(e){return r(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};e.exports=function(e,t,n){var r=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",i=(n||{}).locale,o=c.format.formatters,a=c.format.formattingTokensRegExp;i&&i.format&&i.format.formatters&&(o=i.format.formatters,i.format.formattingTokensRegExp&&(a=i.format.formattingTokensRegExp));var s=u(e);return l(s)?function(e,t,n){var r,i,o,a=e.match(n),s=a.length;for(r=0;r<s;r++)i=t[a[r]]||h[a[r]],a[r]=i||((o=a[r]).match(/\[[\s\S]/)?o.replace(/^\[|]$/g,""):o.replace(/\\/g,""));return function(e){for(var t="",n=0;n<s;n++)a[n]instanceof Function?t+=a[n](e,h):t+=a[n];return t}}(r,o,a)(s):"Invalid Date"}},function(e,t,n){var r=n(15),i=n(310),o=n(311);e.exports=function(e){var t=r(e);return o(t,i(t))+1}},function(e,t,n){var r=n(15);e.exports=function(e){var t=r(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},function(e,t,n){var a=n(312);e.exports=function(e,t){var n=a(e),r=a(t),i=n.getTime()-6e4*n.getTimezoneOffset(),o=r.getTime()-6e4*r.getTimezoneOffset();return Math.round((i-o)/864e5)}},function(e,t,n){var r=n(15);e.exports=function(e){var t=r(e);return t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(15),i=n(71),o=n(315);e.exports=function(e){var t=r(e),n=i(t).getTime()-o(t).getTime();return Math.round(n/6048e5)+1}},function(e,t,n){var a=n(15);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,r=a(e),i=r.getDay(),o=(i<n?7:0)+i-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}},function(e,t,n){var r=n(118),i=n(71);e.exports=function(e){var t=r(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),i(n)}},function(e,t,n){var r=n(117);e.exports=function(e){if(r(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")}},function(e,t,n){var r=n(318),i=n(319);e.exports={distanceInWords:r(),format:i()}},function(e,t){e.exports=function(){var i={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,t,n){var r;return n=n||{},r="string"==typeof i[e]?i[e]:1===t?i[e].one:i[e].other.replace("{{count}}",t),n.addSuffix?0<n.comparison?"in "+r:r+" ago":r}}}},function(e,t,n){var l=n(320);e.exports=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Su","Mo","Tu","We","Th","Fr","Sa"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["AM","PM"],s=["am","pm"],u=["a.m.","p.m."],e={MMM:function(e){return t[e.getMonth()]},MMMM:function(e){return n[e.getMonth()]},dd:function(e){return r[e.getDay()]},ddd:function(e){return i[e.getDay()]},dddd:function(e){return o[e.getDay()]},A:function(e){return 1<=e.getHours()/12?a[1]:a[0]},a:function(e){return 1<=e.getHours()/12?s[1]:s[0]},aa:function(e){return 1<=e.getHours()/12?u[1]:u[0]}};return["M","D","DDD","d","Q","W"].forEach(function(n){e[n+"o"]=function(e,t){return function(e){var t=e%100;if(20<t||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(t[n](e))}}),{formatters:e,formattingTokensRegExp:l(e)}}},function(e,t){var i=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var r=i.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+r.join("|")+"|.)","g")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.height,n=void 0===t?28:t;return(0,r.h)("svg",{className:"hu-landbot-logo",height:n+"px",viewBox:"0 0 164 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},(0,r.h)("g",{className:"hu-fill_button-text",stroke:"none","stroke-width":"1"},(0,r.h)("g",{transform:"translate(-270.000000, -167.000000)"},(0,r.h)("g",{transform:"translate(268.000000, 159.000000)"},(0,r.h)("g",null,(0,r.h)("path",{d:"M2.36735944,35 L2.36735944,10.2204859 L8.10431807,10.2204859 L8.10431807,30.0406412 L15.1545564,30.0406412 L15.1545564,35 L2.36735944,35 Z M16.3462361,26.463682 C16.3462361,25.1849559 16.550714,23.9984081 16.9596759,22.9040029 C17.3686379,21.8095977 17.938872,20.8678473 18.6703955,20.0787236 C19.401919,19.2895998 20.2572702,18.6646462 21.2364749,18.203844 C22.2156796,17.7430418 23.2755087,17.5126442 24.4159941,17.5126442 C25.6947202,17.5126442 26.8035089,17.7833614 27.7423934,18.324804 C28.6812778,18.8662466 29.3868706,19.5516795 29.8591929,20.3811235 L29.8591929,17.9446441 L35.2678316,17.9446441 L35.2678316,35 L29.8591929,35 L29.8591929,32.5980806 C29.4329508,33.3814443 28.7475178,34.0495975 27.8028733,34.6025601 C26.8582288,35.1555227 25.7292804,35.4319999 24.4159941,35.4319999 C23.2870288,35.4319999 22.2300796,35.2016023 21.2451149,34.7408001 C20.2601502,34.2799979 19.401919,33.6521643 18.6703955,32.8572805 C17.938872,32.0623967 17.3686379,31.1177664 16.9596759,30.0233612 C16.550714,28.928956 16.3462361,27.7424081 16.3462361,26.463682 Z M21.7203148,26.463682 C21.7203148,27.0512048 21.8211138,27.6127991 22.0227147,28.1484816 C22.2243157,28.6841642 22.5007928,29.1449595 22.8521545,29.5308813 C23.2035162,29.9168031 23.6268719,30.22784 24.1222342,30.4640011 C24.6175966,30.7001622 25.1705509,30.818241 25.7811138,30.818241 C26.3916767,30.818241 26.947511,30.7001622 27.4486334,30.4640011 C27.9497558,30.22784 28.3759914,29.9168031 28.7273531,29.5308813 C29.0787148,29.1449595 29.355192,28.6870442 29.5567929,28.1571216 C29.7583939,27.6271991 29.8591929,27.0627249 29.8591929,26.463682 C29.8591929,25.8761592 29.7583939,25.3232049 29.5567929,24.8048024 C29.355192,24.2864 29.0787148,23.8256047 28.7273531,23.4224028 C28.3759914,23.0192008 27.9526358,22.7024041 27.4572734,22.472003 C26.9619111,22.2416019 26.4031968,22.1264031 25.7811138,22.1264031 C25.1705509,22.1264031 24.6175966,22.2416019 24.1222342,22.472003 C23.6268719,22.7024041 23.2035162,23.0192008 22.8521545,23.4224028 C22.5007928,23.8256047 22.2243157,24.2864 22.0227147,24.8048024 C21.8211138,25.3232049 21.7203148,25.8761592 21.7203148,26.463682 Z M37.6524709,35 L37.6524709,17.9446441 L43.0611096,17.9446441 L43.0611096,20.4156835 C43.5334319,19.4940791 44.2534245,18.7798464 45.2211091,18.272964 C46.1887937,17.7660816 47.3465419,17.5126442 48.6943883,17.5126442 C49.8694339,17.5126442 50.837104,17.6969623 51.5974276,18.065604 C52.3577512,18.4342458 52.9740649,18.900801 53.4463872,19.4652837 C53.9878297,20.1219268 54.3449461,20.882239 54.5177469,21.7462432 C54.6905477,22.6102473 54.7769468,23.6527966 54.7769468,24.8739224 L54.7769468,35 L49.3683081,35 L49.3683081,26.2563221 C49.3683081,25.0582364 49.1494304,24.0704065 48.7116683,23.2928028 C48.2739062,22.5151991 47.5020741,22.1264031 46.3961488,22.1264031 C45.2671835,22.1264031 44.429112,22.5151991 43.8819094,23.2928028 C43.3347068,24.0704065 43.0611096,25.1158358 43.0611096,26.429122 L43.0611096,35 L37.6524709,35 Z M55.8655865,26.463682 C55.8655865,25.1849559 56.0700644,23.9984081 56.4790264,22.9040029 C56.8879883,21.8095977 57.4582225,20.8678473 58.189746,20.0787236 C58.9212694,19.2895998 59.7766207,18.6646462 60.7558253,18.203844 C61.73503,17.7430418 62.7948592,17.5126442 63.9353446,17.5126442 C65.2140707,17.5126442 66.3228593,17.7833614 67.2617438,18.324804 C68.2006283,18.8662466 68.906221,19.5516795 69.3785433,20.3811235 L69.3785433,10.2204859 L74.787182,10.2204859 L74.787182,35 L69.3785433,35 L69.3785433,32.5980806 C68.9523013,33.3814443 68.2668683,34.0495975 67.3222238,34.6025601 C66.3775793,35.1555227 65.2486308,35.4319999 63.9353446,35.4319999 C62.8063792,35.4319999 61.74943,35.2016023 60.7644653,34.7408001 C59.7795007,34.2799979 58.9212694,33.6521643 58.189746,32.8572805 C57.4582225,32.0623967 56.8879883,31.1177664 56.4790264,30.0233612 C56.0700644,28.928956 55.8655865,27.7424081 55.8655865,26.463682 Z M61.2396652,26.463682 C61.2396652,27.0512048 61.3404642,27.6127991 61.5420652,28.1484816 C61.7436661,28.6841642 62.0201433,29.1449595 62.371505,29.5308813 C62.7228666,29.9168031 63.1462223,30.22784 63.6415847,30.4640011 C64.136947,30.7001622 64.6899014,30.818241 65.3004643,30.818241 C65.9110272,30.818241 66.4668615,30.7001622 66.9679839,30.4640011 C67.4691062,30.22784 67.8953419,29.9168031 68.2467036,29.5308813 C68.5980652,29.1449595 68.8745424,28.6870442 69.0761434,28.1571216 C69.2777443,27.6271991 69.3785433,27.0627249 69.3785433,26.463682 C69.3785433,25.8761592 69.2777443,25.3232049 69.0761434,24.8048024 C68.8745424,24.2864 68.5980652,23.8256047 68.2467036,23.4224028 C67.8953419,23.0192008 67.4719862,22.7024041 66.9766239,22.472003 C66.4812615,22.2416019 65.9225472,22.1264031 65.3004643,22.1264031 C64.6899014,22.1264031 64.136947,22.2416019 63.6415847,22.472003 C63.1462223,22.7024041 62.7228666,23.0192008 62.371505,23.4224028 C62.0201433,23.8256047 61.7436661,24.2864 61.5420652,24.8048024 C61.3404642,25.3232049 61.2396652,25.8761592 61.2396652,26.463682 Z M77.1718214,35 L77.1718214,10.2204859 L82.5804601,10.2204859 L82.5804601,20.3811235 C83.0067021,19.5977598 83.6921351,18.9238467 84.6367796,18.359364 C85.5814241,17.7948813 86.7276523,17.5126442 88.0754988,17.5126442 C89.2044641,17.5126442 90.2585333,17.7372819 91.237738,18.186564 C92.2169427,18.6358461 93.0722939,19.2607997 93.8038174,20.0614436 C94.5353409,20.8620874 95.108455,21.8124776 95.523177,22.9126429 C95.937899,24.0128081 96.1452568,25.196476 96.1452568,26.463682 C96.1452568,27.7424081 95.937899,28.928956 95.523177,30.0233612 C95.108455,31.1177664 94.5353409,32.0623967 93.8038174,32.8572805 C93.0722939,33.6521643 92.2169427,34.2799979 91.237738,34.7408001 C90.2585333,35.2016023 89.1929443,35.4319999 88.0409388,35.4319999 C86.6700522,35.4319999 85.518064,35.1411229 84.5849396,34.5593601 C83.6518151,33.9775973 82.983662,33.323844 82.5804601,32.5980806 L82.5804601,35 L77.1718214,35 Z M82.5804601,26.463682 C82.5804601,27.0742449 82.681259,27.6415991 82.88286,28.1657616 C83.084461,28.6899241 83.3638181,29.1507194 83.7209398,29.5481613 C84.0780615,29.9456032 84.5042971,30.25664 84.9996595,30.4812811 C85.4950218,30.7059221 86.0479762,30.818241 86.6585391,30.818241 C87.269102,30.818241 87.8220563,30.7001622 88.3174187,30.4640011 C88.8127811,30.22784 89.2390167,29.9168031 89.5961384,29.5308813 C89.9532601,29.1449595 90.2326172,28.6870442 90.4342182,28.1571216 C90.6358192,27.6271991 90.7366181,27.0627249 90.7366181,26.463682 C90.7366181,25.8991993 90.6415791,25.3520049 90.4514982,24.8220824 C90.2614173,24.2921599 89.9878201,23.8256047 89.6306984,23.4224028 C89.2735767,23.0192008 88.8415811,22.7024041 88.3346987,22.472003 C87.8278163,22.2416019 87.269102,22.1264031 86.6585391,22.1264031 C86.0479762,22.1264031 85.4950218,22.2416019 84.9996595,22.472003 C84.5042971,22.7024041 84.0780615,23.0192008 83.7209398,23.4224028 C83.3638181,23.8256047 83.084461,24.2864 82.88286,24.8048024 C82.681259,25.3232049 82.5804601,25.8761592 82.5804601,26.463682 Z M96.3353367,26.463682 C96.3353367,25.2425562 96.5513345,24.090568 96.9833366,23.0076829 C97.4153386,21.9247977 98.0402922,20.9744074 98.8582161,20.1564835 C99.67614,19.3385596 100.66685,18.6876863 101.830375,18.203844 C102.993901,17.7200017 104.318687,17.4780842 105.804774,17.4780842 C107.290862,17.4780842 108.618528,17.7200017 109.787814,18.203844 C110.957099,18.6876863 111.947809,19.3385596 112.759973,20.1564835 C113.572137,20.9744074 114.19133,21.9247977 114.617572,23.0076829 C115.043814,24.090568 115.256932,25.2425562 115.256932,26.463682 C115.256932,27.6848078 115.043814,28.839676 114.617572,29.9283212 C114.19133,31.0169664 113.572137,31.9702366 112.759973,32.7881605 C111.947809,33.6060844 110.957099,34.2569578 109.787814,34.7408001 C108.618528,35.2246424 107.290862,35.4665599 105.804774,35.4665599 C104.318687,35.4665599 102.993901,35.2246424 101.830375,34.7408001 C100.66685,34.2569578 99.67614,33.6060844 98.8582161,32.7881605 C98.0402922,31.9702366 97.4153386,31.0198464 96.9833366,29.9369612 C96.5513345,28.8540761 96.3353367,27.6963279 96.3353367,26.463682 Z M101.743975,26.463682 C101.743975,27.0742449 101.839014,27.6415991 102.029095,28.1657616 C102.219176,28.6899241 102.489893,29.1507194 102.841255,29.5481613 C103.192617,29.9456032 103.615973,30.25664 104.111335,30.4812811 C104.606697,30.7059221 105.159652,30.818241 105.770214,30.818241 C106.380777,30.818241 106.942372,30.7059221 107.455014,30.4812811 C107.967657,30.25664 108.399652,29.9456032 108.751014,29.5481613 C109.102375,29.1507194 109.378853,28.6928041 109.580454,28.1744016 C109.782055,27.6559992 109.882853,27.085765 109.882853,26.463682 C109.882853,25.8761592 109.782055,25.317445 109.580454,24.7875224 C109.378853,24.2575999 109.102375,23.7968046 108.751014,23.4051228 C108.399652,23.0134409 107.970536,22.7024041 107.463654,22.472003 C106.956772,22.2416019 106.392297,22.1264031 105.770214,22.1264031 C105.159652,22.1264031 104.606697,22.2416019 104.111335,22.472003 C103.615973,22.7024041 103.192617,23.0134409 102.841255,23.4051228 C102.489893,23.7968046 102.219176,24.2575999 102.029095,24.7875224 C101.839014,25.317445 101.743975,25.8761592 101.743975,26.463682 Z M114.773092,21.9708831 L114.773092,17.9446441 L117.451492,17.9446441 L117.451492,12.8816053 L122.84285,12.8816053 L122.84285,17.9446441 L126.730849,17.9446441 L126.730849,21.9708831 L122.84285,21.9708831 L122.84285,28.0707217 C122.84285,28.7043247 122.90045,29.2083195 123.01565,29.5827213 C123.130851,29.9571231 123.295009,30.2508801 123.50813,30.4640011 C123.721251,30.6771221 123.980449,30.8153607 124.28573,30.878721 C124.591011,30.9420813 124.933728,30.973761 125.31389,30.973761 C125.544291,30.973761 125.838048,30.965121 126.19517,30.947841 C126.552291,30.9305609 126.863328,30.8988812 127.128289,30.852801 L127.128289,35 C126.725087,35.0691203 126.221093,35.1324797 125.61629,35.19008 C125.011487,35.2476802 124.300134,35.2764799 123.48221,35.2764799 C122.848607,35.2764799 122.180454,35.2304004 121.477731,35.13824 C120.775007,35.0460795 120.124134,34.804162 119.525091,34.4124801 C118.926048,34.0207983 118.430693,33.4188844 118.039011,32.6067206 C117.64733,31.7945567 117.451492,30.6800081 117.451492,29.2630414 L117.451492,21.9708831 L114.773092,21.9708831 Z M129.270369,31.7859208 C129.270369,31.2905584 129.365408,30.8297631 129.555489,30.4035211 C129.74557,29.9772791 129.999007,29.6057629 130.315809,29.2889614 C130.63261,28.9721599 131.009886,28.7187224 131.447648,28.5286415 C131.88541,28.3385606 132.351966,28.2435216 132.847328,28.2435216 C133.34269,28.2435216 133.809245,28.3385606 134.247008,28.5286415 C134.68477,28.7187224 135.062046,28.9721599 135.378847,29.2889614 C135.695649,29.6057629 135.949086,29.9772791 136.139167,30.4035211 C136.329248,30.8297631 136.424287,31.2905584 136.424287,31.7859208 C136.424287,32.2812831 136.329248,32.7391984 136.139167,33.1596804 C135.949086,33.5801624 135.695649,33.9516786 135.378847,34.2742402 C135.062046,34.5968017 134.68477,34.8502391 134.247008,35.03456 C133.809245,35.2188809 133.34269,35.3110399 132.847328,35.3110399 C132.351966,35.3110399 131.88541,35.2188809 131.447648,35.03456 C131.009886,34.8502391 130.63261,34.5968017 130.315809,34.2742402 C129.999007,33.9516786 129.74557,33.5801624 129.555489,33.1596804 C129.365408,32.7391984 129.270369,32.2812831 129.270369,31.7859208 Z M138.135007,12.2768054 C138.135007,11.3091208 138.466203,10.4969691 139.128606,9.840326 C139.791009,9.18368287 140.617561,8.85536623 141.608286,8.85536623 C142.103648,8.85536623 142.561563,8.94176535 142.982045,9.11456617 C143.402527,9.28736699 143.774044,9.52640455 144.096605,9.831686 C144.419167,10.1369675 144.666844,10.5027237 144.839645,10.9289657 C145.012446,11.3552078 145.098845,11.8044832 145.098845,12.2768054 C145.098845,12.7491277 145.012446,13.1926431 144.839645,13.6073651 C144.666844,14.0220871 144.419167,14.3878433 144.096605,14.7046448 C143.774044,15.0214463 143.402527,15.2691238 142.982045,15.4476847 C142.561563,15.6262455 142.103648,15.7155246 141.608286,15.7155246 C141.112923,15.7155246 140.657888,15.6262455 140.243166,15.4476847 C139.828444,15.2691238 139.462688,15.0214463 139.145886,14.7046448 C138.829085,14.3878433 138.581407,14.0220871 138.402847,13.6073651 C138.224286,13.1926431 138.135007,12.7491277 138.135007,12.2768054 Z M138.912606,35 L138.912606,17.9446441 L144.321245,17.9446441 L144.321245,35 L138.912606,35 Z M146.187485,26.463682 C146.187485,25.2425562 146.403482,24.090568 146.835484,23.0076829 C147.267486,21.9247977 147.89244,20.9744074 148.710364,20.1564835 C149.528288,19.3385596 150.518998,18.6876863 151.682523,18.203844 C152.846049,17.7200017 154.170835,17.4780842 155.656922,17.4780842 C157.143009,17.4780842 158.470676,17.7200017 159.639961,18.203844 C160.809247,18.6876863 161.799957,19.3385596 162.612121,20.1564835 C163.424285,20.9744074 164.043478,21.9247977 164.46972,23.0076829 C164.895962,24.090568 165.10908,25.2425562 165.10908,26.463682 C165.10908,27.6848078 164.895962,28.839676 164.46972,29.9283212 C164.043478,31.0169664 163.424285,31.9702366 162.612121,32.7881605 C161.799957,33.6060844 160.809247,34.2569578 159.639961,34.7408001 C158.470676,35.2246424 157.143009,35.4665599 155.656922,35.4665599 C154.170835,35.4665599 152.846049,35.2246424 151.682523,34.7408001 C150.518998,34.2569578 149.528288,33.6060844 148.710364,32.7881605 C147.89244,31.9702366 147.267486,31.0198464 146.835484,29.9369612 C146.403482,28.8540761 146.187485,27.6963279 146.187485,26.463682 Z M151.596123,26.463682 C151.596123,27.0742449 151.691162,27.6415991 151.881243,28.1657616 C152.071324,28.6899241 152.342041,29.1507194 152.693403,29.5481613 C153.044765,29.9456032 153.46812,30.25664 153.963483,30.4812811 C154.458845,30.7059221 155.011799,30.818241 155.622362,30.818241 C156.232925,30.818241 156.794519,30.7059221 157.307162,30.4812811 C157.819804,30.25664 158.2518,29.9456032 158.603162,29.5481613 C158.954523,29.1507194 159.231,28.6928041 159.432601,28.1744016 C159.634202,27.6559992 159.735001,27.085765 159.735001,26.463682 C159.735001,25.8761592 159.634202,25.317445 159.432601,24.7875224 C159.231,24.2575999 158.954523,23.7968046 158.603162,23.4051228 C158.2518,23.0134409 157.822684,22.7024041 157.315802,22.472003 C156.80892,22.2416019 156.244445,22.1264031 155.622362,22.1264031 C155.011799,22.1264031 154.458845,22.2416019 153.963483,22.472003 C153.46812,22.7024041 153.044765,23.0134409 152.693403,23.4051228 C152.342041,23.7968046 152.071324,24.2575999 151.881243,24.7875224 C151.691162,25.317445 151.596123,25.8761592 151.596123,26.463682 Z"}))))))}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(95),a=[];t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1],n=e,r=0;switch(t.type){case o.ADD_MESSAGE:return[].concat(i(e),[t.message]);case o.ADD_MESSAGES_CHUNK:return[].concat(i(t.messages));case o.ADD_OLD_MESSAGES_CHUNK:return[].concat(i(t.messages),i(e));case o.EDIT_MESSAGE:return r=n.findIndex(function(e){return e.key===t.key}),n[r]=t.message,n;case o.DELETE_MESSAGE:return r=n.findIndex(function(e){return e.key===t.key}),n.slice(0,r).concat(n.slice(r+1));case o.RESET_CHAT:return a;default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.input=void 0;var r,i=n(324),o=(r=i)&&r.__esModule?r:{default:r};t.input=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(36),o=n(11),a={hasOldMessages:!1,input_motion:!0,input_type:null,field:null,field_type:null,buttons:null,payloads:null,urls:null,extra:null,backButton:((r=o)&&r.__esModule?r:{default:r}).default.showBackButton(),fixed:!1,autocompleteValues:[],autocompleteActive:!1,calendarActive:!1,calendarOptions:{}};t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.SET_INPUT:return Object.assign({},e,t.inputData);default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.agents=void 0;var r,i=n(326),o=(r=i)&&r.__esModule?r:{default:r};t.agents=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(96),o=n(24),a=((r=o)&&r.__esModule?r:{default:r}).default.agentsInfo;t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.ADD_AGENT:return Object.assign({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t.agent.samurai,t.agent));default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chat=void 0;var r,i=n(328),o=(r=i)&&r.__esModule?r:{default:r};t.chat=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55),i={engage:!0,lastAvatar:null,fixed_avatar:window.UmiCoreConfig.fixed_avatar,assignedAgent:null};t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case r.ENABLE_ENGAGE:return Object.assign({},e,{engage:!0});case r.DISABLE_ENGAGE:return Object.assign({},e,{engage:!1});case r.SET_LAST_AVATAR:return Object.assign({},e,{lastAvatar:t.avatar});case r.SET_FIXED_AVATAR:return Object.assign({},e,{fixed_avatar:t.value});case r.SET_ASSIGNED_AGENT:return Object.assign({},e,{assignedAgent:t.id});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n(0),a=(0,n(2).connect)(function(e){return{isLoading:e.loader}})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(e){return e.isLoading&&(0,o.h)("div",{className:"hu-loader hu-zindex-3 hu-position-absolute hu-width-full hu-height-full hu-position-top-left"},(0,o.h)("div",{className:"sk-folding-cube"},(0,o.h)("div",{className:"sk-cube1 sk-cube"}),(0,o.h)("div",{className:"sk-cube2 sk-cube"}),(0,o.h)("div",{className:"sk-cube4 sk-cube"}),(0,o.h)("div",{className:"sk-cube3 sk-cube"})),e.branding&&(0,o.h)("div",{className:"hu-loader-referral hu-position-absolute hu-a-center hu-width-full hu-display-inline-block hu-pointer-none"},(0,o.h)("p",{className:"hu-loader-referral_text hu-color_contrast hu-s-12"},"POWERED BY",(0,o.h)("br",null),(0,o.h)("b",{className:"hu-s-16"},"LANDBOT"),".io ")))}}]),t}())||r;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(121);t.default=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case r.SET_LOADER:return t.isLoading;default:return e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=n(2),u=r(n(24)),l=r(n(3)),c=n(123),h=(0,s.connect)(function(e){return{config:e.config,gdpr:e.config.gdpr,gdprState:e.gdpr.active,input:e.input}},function(e){return{showGdpr:function(){return e({type:c.SHOW_GDPR})},hideGdpr:function(){return e({type:c.HIDE_GDPR})}}})(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;this.props.gdpr&&"1"!==u.default.umiStorage.getItem("cookies-consent-"+this.props.config.channelToken)&&setTimeout(function(){e.props.showGdpr(),l.default.on("hu-query-send-message",e.hide.bind(e))},1500)}},{key:"hide",value:function(){this.props.gdprState&&(this.props.hideGdpr(),u.default.umiStorage.setItem("cookies-consent-"+this.props.config.channelToken,"1"))}},{key:"render",value:function(e){return e.gdpr&&(0,a.h)("div",{className:"GDPR hu-s-14 hu-display-flex hu-align-center hu-overflow-hidden hu-position-absolute hu-position-bottom-left"+(e.gdprState?" active":"")},(0,a.h)("div",{className:"hu-display-none hu-m-display-block"},"We use ",(0,a.h)("b",null,"third-party cookies")," to improve your experience. ",(0,a.h)("a",{className:"hu-d-none",href:"https://landbot.io/terms-conditions/index.html",target:"_blank"},"Learn more"),(0,a.h)("br",null),"If you continue interacting with this website, ",(0,a.h)("b",null,"you are accepting their use.")),(0,a.h)("div",{className:"hu-display-block hu-m-display-none"},"We use ",(0,a.h)("b",null,"third-party cookies")," to improve your experience. If you keep browsing, ",(0,a.h)("b",null,"you are accepting their use.")," ",(0,a.h)("a",{className:"hu-d-none",href:"https://landbot.io/terms-conditions/index.html",target:"_blank"},"More info"),(0,a.h)("button",{className:"GDPR_close border-radius-3",tabindex:"1",onClick:this.hide.bind(this)},"  GOT IT!")))}}]),t}())||i;t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(123),i={active:!1};t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i;switch(arguments[1].type){case r.SHOW_GDPR:return Object.assign({},e,{active:!0});case r.HIDE_GDPR:return Object.assign({},e,{active:!1});default:return e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=n(2),u=n(93),l=n(121);n(334),n(335);var c=r(n(24)),h=r(n(3)),f=r(n(336)),p=r(n(17)),d=r((r(n(337)),n(338))),m=r(n(342)),v=r(n(349)),y=r(n(354)),g=p.default.appReady$,b=p.default.hideLoader$,_=(0,s.connect)(null,function(t){return{setLoader:function(e){return t({type:l.SET_LOADER,isLoading:e})},setConfig:function(e){return t({type:u.SET_CONFIG,config:e})}}})(i=function(e){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={rendered:!1},e.setupListeners(),window.setGlobalState=e.setGlobalConfig.bind(e),f.default.set=function(e){t.setConfig(e)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),o(n,[{key:"setGlobalConfig",value:function(e){this.props.setConfig(e)}},{key:"setupListeners",value:function(){var t=this;g.subscribe({next:function(){c.default.startConnection()}}),b.subscribe({next:function(e){return t.props.setLoader(!1)}}),window.setLoader=function(e){return t.props.setLoader(e)},h.default.on("hu-lb-rendered",function(){t.setState({rendered:!0})}),h.default.on("hu-load-config",function(e){t.setGlobalConfig(e)}),h.default.on("hu-error-wrong-customer",function(){}),h.default.on("hu-error-wrong-channel",function(){}),h.default.on("hu-error-auth-connection",function(){}),h.default.on("hu-error-server-connection",function(){})}},{key:"render",value:function(e,t){return(0,a.h)("div",{id:"app-modules",className:t.rendered?"rendered":""},(0,a.h)(d.default,null),(0,a.h)(m.default,null),(0,a.h)(y.default,null),(0,a.h)(v.default,null))}}]),n}())||i;t.default=_},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};window.LandbotGUI=r,t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(n(3)),a=r(n(11)),s=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setupListener()}return i(e,[{key:"setupListener",value:function(){window.addEventListener("message",function(e){var t=e.data.landbotState;t&&o.default.emit("hu-load-config",t);var n=e.data.userMessage;n&&a.default.sendMessage(n,n,[],[],!1)})}}]),e}());t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(339),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=n(0),a=n(2),u=r(n(3)),l=r(n(340)),c=(r(n(124)),{accent:["user_message_background","button_background","textarea_border"],light:["bot_message_background","user_message_text","button_text"],dark:["bot_message_text"],contrast:["header_text"]}),h={user_message_background:"accent",button_background:"accent",textarea_border:"accent",bot_message_background:"light",user_message_text:"light",button_text:"light",bot_message_text:"dark",header_text:"contrast"},f={textarea_background:"#FFFFFF",textarea_text:"#000000"},p=(0,a.connect)(function(e){return{colors:e.config.colors,accent:e.config.accent,dark:e.config.dark,light:e.config.light,contrast:e.config.contrast,header_background:e.config.header_background,avatar_scale:e.config.avatar_scale,font:e.config.font,font_size:e.config.font_size,background_image_url:e.config.background_image_url,background_color:e.config.background_color,gradient_from:e.config.gradient_from,gradient_to:e.config.gradient_to,filter_color:e.config.filter_color,filter_gradient_from:e.config.filter_gradient_from,filter_gradient_to:e.config.filter_gradient_to,filter_image_url:e.config.filter_image_url,stylesheets:e.config.stylesheets,style:e.config.style}})(i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.dynStyles=new l.default("custom-styles"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.Component),o(n,[{key:"componentDidMount",value:function(){this.stablishRules(),u.default.emit("hu-lb-rendered")}},{key:"stablishRules",value:function(){this.dynStyles.setupStylesheet()}},{key:"componentWillReceiveProps",value:function(t){var n=this,e=Object.assign(this.props.colors,t.colors);if(this.props.colors,t.colors)for(var r in t.colors)void 0===t.colors[r]||null===t.colors[r]?h[r]?this.dynStyles.setVariable(r,this.props[h[r]]):this.dynStyles.setVariable(r,f[r]):this.dynStyles.setVariable(r,t.colors[r]);for(var i=Object.keys(this.props).filter(function(e){return n.props[e]!==t[e]}),o=0;o<i.length;o++)switch(i[o]){case"accent":case"light":case"dark":case"contrast":this.dynStyles.setVariable(i[o],t[i[o]]),this.setSpecificColors(i[o],t[i[o]],e);break;case"avatar_scale":this.dynStyles.setVariable("avatar_scale","scale("+t.avatar_scale+")");break;case"font":this.dynStyles.setVariable("font",t.font+",sans-serif");break;case"font_size":this.dynStyles.setVariable("font_size",t.font_size+"px");break;case"gradient_to":case"gradient_from":this.dynStyles.setVariable("background_gradient","linear-gradient(to bottom, "+t.gradient_from+" 0%, "+t.gradient_to+" 100%)");break;case"filter_gradient_to":case"filter_gradient_from":this.dynStyles.setVariable("background_gradient","linear-gradient(to bottom, "+t.gradient_from+" 0%, "+t.gradient_to+" 100%)");break;case"background_image_url":this.dynStyles.setVariable("background_image_url",'url("'+t.background_image_url+'")');break;case"filter_image_url":this.dynStyles.setVariable("filter_image_url",'url("'+t.filter_image_url+'")');break;case"videoname":break;case"colors":case"stylesheets":case"style":break;default:this.dynStyles.setVariable(i[o],t[i[o]])}}},{key:"setSpecificColors",value:function(e,t,n){for(var r=0;r<c[e].length;r++)n[c[e][r]]||this.dynStyles.setVariable(c[e][r],t)}},{key:"render",value:function(e,t){var n=e.font,r=(e.font_size,e.stylesheets),i=e.style,o="https://fonts.googleapis.com/css?family="+n+":400,400i,700,700i",a="\n    .hu-textarea-input-container.focus { box-shadow: 0px 0px 14px 1px "+(e.colors.textarea_border||e.accent||"#F11952")+"; }\n    ";return(0,s.h)("div",{id:"styles"},(0,s.h)("link",{href:o,rel:"stylesheet"}),(0,s.h)("style",{id:this.dynStyles.getID()}),r.map(function(e){return(0,s.h)("link",{href:e,rel:"stylesheet"})}),(0,s.h)("style",null,a),(0,s.h)("style",null,i))}}]),n}())||i;t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),k=r(n(124)),m=r(n(341)),o=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.sheetID=e,this.sheetNode=null,this.stylesheet=null,this.rulesMap={}}return i(t,[{key:"connectStylesheet",value:function(){this.sheetNode=document.getElementById(this.sheetID),this.stylesheet=this.sheetNode.sheet}},{key:"setupStylesheet",value:function(){var e=this;setTimeout(function(){e.sheetNode=document.getElementById(e.sheetID),e.stylesheet=e.sheetNode.sheet,e.addRules()},0)}},{key:"addRules",value:function(e,t){if(this.stylesheet)if(void 0!==e){if(k.default.hasOwnProperty(e)){for(var n=k.default[e],r=n.rules,i=n.relatives,o=0;o<r.length;o++){var a=r[o],s=a.index,u=a.type,l=a.selectors;0<l.length&&this.addRule(l.join(", "),u+": "+t,s)}if(i)for(var c=0;c<i.length;c++)this.addRelativesRules(i[c],t)}}else for(var h in k.default)if(k.default.hasOwnProperty(h)){var f=k.default[h],p=f.value,d=f.rules,m=f.relatives;if(void 0===f.tasks)for(var v=0;v<d.length;v++){var y=d[v],g=y.index,b=y.type,_=y.selectors;0<_.length&&this.addRule(_.join(", "),b+": "+p,g)}if(m)for(var w=0;w<m.length;w++)this.addRelativesRules(m[w],p)}return this.stylesheet}},{key:"addRelativesRules",value:function(e,t){if(k.default.hasOwnProperty(e)){for(var n=k.default[e],r=n.rules,i=n.tasks,o=t,a=0;a<i.length;a++){var s=i[a],u=s.filter,l=s.factor;o=m.default[u](t,l)}for(var c=0;c<r.length;c++){var h=r[c],f=h.index,p=h.type,d=h.selectors;0<d.length&&this.addRule(d.join(", "),p+": "+o,f)}}}},{key:"addRule",value:function(e,t,n){try{"insertRule"in this.stylesheet?this.stylesheet.insertRule(e+" { "+t+" } ",0):"addRule"in this.stylesheet&&this.stylesheet.addRule(e,t,0),this.rulesMap[n]=this.getCssRule(0)}catch(e){}return this}},{key:"getCssRule",value:function(e){return this.stylesheet.cssRules?this.stylesheet.cssRules[e]:this.stylesheet.rules?this.stylesheet.rules[e]:null}},{key:"getCssRuleIndex",value:function(e){var t=[];for(var n in this.stylesheet.cssRules?t=this.stylesheet.cssRules:this.stylesheet.rules&&(t=this.stylesheet.rules),t)if(t.hasOwnProperty(n)&&t[n]===e)return n;return-1}},{key:"setVariable",value:function(e,t){var n=this.getRulesGroup(e);if(0===n.length)return this;for(var r=0;r<n.length;r++)this.deleteRule(n[r]);for(var i=this.getRelativesRulesGroup(e),o=0;o<i.length;o++)this.deleteRule(i[o]);return this.addRules(e,t),this}},{key:"getRule",value:function(e){return this.rulesMap[e]||{}}},{key:"getRulesGroup",value:function(e){return k.default[e]?k.default[e].rules.map(function(e){return e.index}):[]}},{key:"getRelativesRulesGroup",value:function(e){if(!k.default[e])return[];var t=[],n=k.default[e].relatives;if(n)for(var r=0;r<n.length;r++)t=t.concat(this.getRulesGroup(n[r]));return t}},{key:"deleteRule",value:function(e){var t=this.rulesMap[e];if(!t)return this;var n=this.getCssRuleIndex(t);return this.stylesheet.deleteRule?this.stylesheet.deleteRule(n):this.stylesheet.removeRule&&this.stylesheet.removeRule(n),this.rulesMap[e]=null,this}},{key:"deleteAllRules",value:function(){for(var e=Object.keys(this.rulesMap),t=0;t<e.length;t++)this.deleteRule(e[t])}},{key:"getID",value:function(){return this.sheetID}},{key:"toString",value:function(){return"Dynamic Styles Generator"}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={lightenDarkenColor:function(e,t){var n=e,r=100*t,i=!1;"#"==n[0]&&(n=n.slice(1),i=!0);var o=parseInt(n,16),a=(o>>16)+r;255<a?a=255:a<0&&(a=0);var s=(o>>8&255)+r;255<s?s=255:s<0&&(s=0);var u=(255&o)+r;return 255<u?u=255:u<0&&(u=0),(i?"#":"")+String("000000"+(u|s<<8|a<<16).toString(16)).slice(-6)},fadeColor:function(e,t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(n=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:"255",g:"255",b:"255"}).r+", "+n.g+", "+n.b+", "+t+")"}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=n(2),u=r(n(3)),l=r(n(120)),c=r(n(343)),h=r(n(345)),f=r(n(347)),p=r(n(122));n(69);var d=(r(n(348)),function(e){return{isLoading:e.config.isLoading,avatar_shape:e.config.avatar_shape,logo:e.config.logo,brand_name:e.config.brand_name,tagline:e.config.tagline,keywords:e.config.keywords,persistent_menu:e.config.persistent_menu,branding:e.config.branding,widget_hide_header:e.config.widget_hide_header,gdprState:e.gdpr.active,assignedAgent:e.agents[e.chat.assignedAgent],inputFixed:e.input.fixed,human_takeover_design_0:e.config.human_takeover_design_0}}),m=(0,s.connect)(d)(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(e){return(0,a.h)("div",{id:"gui",className:"hu-zindex-2 hu-position-fixed hu-width-full hu-height-full hu-position-top-left hu-display-flex hu-flex-dir-column hu-overflow-hidden","data-human-takeover":e.assignedAgent?"true":null},(0,a.h)(l.default,{isLoading:e.isLoading,branding:e.branding}),(0,a.h)(c.default,{logo:e.logo,brand_name:e.brand_name,tagline:e.tagline,keywords:e.keywords,persistent_menu:e.persistent_menu,branding:e.branding,widget_hide_header:e.widget_hide_header,inputFixed:e.inputFixed,assignedAgent:e.assignedAgent,human_takeover_design_0:e.human_takeover_design_0,ee:u.default}),(0,a.h)(h.default,{gdprState:e.gdprState}),(0,a.h)(f.default,{brand_name:e.brand_name,keywords:e.keywords,branding:e.branding}),(0,a.h)(p.default,null))}}]),t}())||i;t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),p=r((n(23),n(344))),d=r(n(4)),m=n(8);t.default=function(e){var t=e.logo,n=e.brand_name,r=e.tagline,i=e.keywords,o=e.persistent_menu,a=(e.branding,e.widget_hide_header),s=(e.inputFixed,e.assignedAgent),u=e.human_takeover_design_0,l=m(s,"name",""),c=m(s,"avatar",null),h=(0,f.h)("span",null,"A human at ",(0,f.h)("b",null,n));return!a&&(0,f.h)("header",{id:"hu-header",className:"hu-border-color_contrast-fade hu-background-color_header-background hu-zindex-2 hu-position-relative","data-menu":0<m(o,"__index.words",[]).length+Object.keys(i).filter(function(e){return-1===["#init","#back"].indexOf(e)&&void 0===o[e]}).length?"1":"0"},(0,f.h)("div",{className:"hu-header-content hu-display-flex hu-align-center hu-justify-center hu-height-full"},u&&s&&[(0,f.h)("img",{className:"hu-header-logo hu-width-auto hu-display-none hu-m-display-block hu-border-circle",src:c,alt:""}),(0,f.h)("div",{className:"hu-header-agent-info hu-display-flex hu-flex hu-flex-1 hu-flex-dir-column"},(0,f.h)("h1",{className:"hu-header-agent_name hu-w-bold hu-s-16 hu-color_header-text hu-display-block"},l),(0,f.h)("p",{className:"hu-header-tagline hu-s-12 hu-color_header-text hu-display-none hu-flex-1 hu-l-display-inline",title:h},h))],!(u&&s)&&[t&&(0,f.h)("img",{className:"hu-header-logo hu-width-auto hu-display-none hu-m-display-block",src:t,alt:""}),(0,f.h)("div",{className:"hu-header-description hu-display-none hu-m-display-block hu-flex-1"},(0,f.h)("h1",{className:"hu-header-brand_name hu-w-bold hu-s-20 hu-color_header-text hu-display-none hu-m-display-inline"},n),(0,f.h)("p",{className:"hu-header-tagline hu-s-14 hu-x-ellipsis hu-color_header-text hu-display-none hu-flex-1 hu-l-display-inline",title:r},r&&d.default.getVirtualDOM(r)))],(0,f.h)(p.default,{persistent_menu:o,keywords:i,ee:ee})))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),c=n(0),h=r(n(4)),f=r(n(11)),p=r(n(9)),d=n(8),o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={enabled:!0},t.onInputDisable=t.onInputDisable.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,c.Component),i(n,[{key:"componentDidMount",value:function(){this.props.ee.on("hu-lb-disable-input",this.onInputDisable)}},{key:"componentWillUnmount",value:function(){this.props.ee.removeListener("hu-lb-disable-input",this.onInputDisable)}},{key:"onInputEnable",value:function(){this.setState({enabled:!0})}},{key:"onInputDisable",value:function(){var e=this;this.setState({enabled:!1},function(){return setTimeout(e.onInputEnable.bind(e),1e3)})}},{key:"render",value:function(e,t){var n=e.persistent_menu,r=void 0===n?{}:n,i=e.keywords,o=void 0===i?{}:i,a=t.enabled,s=[];if(Array.isArray(r))s=r.map(function(e){return{text:e.text,payload:e.payload,action:e.action||"keyword",style:e.style||"text",href:e.href||"",isKeyword:"link"!==e.action}});else{var u=d(r,"__index.words",[]).map(function(e){return Object.assign({text:e,payload:e,action:"keyword",style:"text",href:"",isKeyword:!!o[e]},r[e]||{})}),l=Object.keys(o).filter(function(e){return-1===["#init","#back"].indexOf(e)&&void 0===r[e]}).map(function(e){return{text:e,payload:e,action:"keyword",style:"text",href:"",isKeyword:!0}});s=u.concat(l)}return(0,c.h)("div",{className:"hu-persistent-menu hu-overflow-x-auto hu-touch-scroll"},(0,c.h)("div",{className:"p-menu-items-container hu-display-flex hu-align-center hu-flex-nowrap"},s.map(function(e){return(0,c.h)("a",{href:e.isKeyword?null:p.default.getHref(e.href),target:"_blank",className:"persistent-menu-item hu-display-inline-block hu-text-nowrap hu-c-pointer hu-border-radius-3 hu-d-none"+("button"===e.style?" p-menu-button hu-color_button-text hu-background-color_button-background hu-shadow-hover":" hu-color_header-text hu-background-color_header-text-fade-01_hover"),onClick:e.isKeyword?function(){return function(e,t){f.default.sendMessage({type:"button",message:e,payload:t})}(e.text,e.payload)}:null,style:{opacity:e.isKeyword?a?1:.5:null,pointerEvents:e.isKeyword?a?"initial":"none":null}},(0,c.h)("span",{className:"p-menu-text hu-s-13"},h.default.getVirtualDOM(e.text)))})))}}]),n}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=r(n(94)),a=r(n(346));t.default=function(e){var t=e.gdprState;return(0,i.h)("section",{id:"hu-body",className:"hu-zindex-0 hu-display-flex hu-flex-1 hu-flex-dir-column hu-overflow-hidden"+(t?" gdpr-active":"")},(0,i.h)(a.default,null),(0,i.h)(o.default,null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=n(0),o=(0,n(2).connect)(function(e){return{progress:e.config.progress}})(r=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={progress:e.progress,step:0},window.setProgress=t.setProgress.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.Component),i(n,[{key:"setProgress",value:function(e,t){this.props.progress,this.setState(Object.assign({step:e},void 0!==t?{progress:t}:{}))}},{key:"render",value:function(e,t){var n=t.progress,r=t.step;if(function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),"number"!=typeof n)return(0,l.h)("div",null);var i,o=document.documentElement.clientWidth,a=parseInt(100*r/n),s=6e3/o,u=100*(o-60)/o;return i=a<s?"calc("+s+"% - 60px)":a<u?"calc("+a+"% - 60px)":"calc("+u+"% - 60px)","number"==typeof n&&(0,l.h)("div",{id:"hu-bot-progress-bar","data-step":""+(n===r?"last":r)},(0,l.h)("style",null,"#hu-bot-progress-bar::after { width: "+a+"%; }\n.progress-bar-label { left: "+i+"; }"),(0,l.h)("div",{className:"progress-bar-label hu-color_dark"},(0,l.h)("svg",{width:"10px",height:"3px",viewBox:"0 0 10 3",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},(0,l.h)("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,l.h)("g",{id:"Group-Copy",transform:"translate(-71.000000, -89.000000)",fill:"#0A4359"},(0,l.h)("path",{d:"M68,91.6612983 L71.0318827,91.6612983 C72.3951688,91.6612983 73.6919908,91.0723536 74.5890805,90.0458162 L74.6525451,89.9731938 C75.2675982,89.2693902 76.3367428,89.1974437 77.0405464,89.8124967 C77.1213362,89.8830988 77.195229,89.9612236 77.2612271,90.0458162 L77.2612271,90.0458162 C78.0566243,91.0653113 79.2775215,91.6612983 80.5705904,91.6612983 Z",id:"Rectangle-4"})))),n===r?(0,l.h)("span",null,"Done! "):(0,l.h)("span",null,(0,l.h)("b",{className:"hu-color_accent"},n-r," "),n-r==1?"step":"steps"," to finish")))}}]),n}())||r;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=n(119),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.branding;return(0,i.h)("footer",{id:"hu-footer",className:"hu-display-none hu-m-display-flex hu-align-center hu-justify-center"},t&&(0,i.h)(a.default,null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(3),a=(r=i)&&r.__esModule?r:{default:r},s=new(function(){function i(e){var t=e.container,n=void 0===t?document:t,r=e.shortcuts;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.container=n,this.shortcuts=r,this.setupListeners()}return o(i,[{key:"setupListeners",value:function(){this.container.addEventListener("keydown",function(e){40===(e.keyCode||e.which)&&a.default.emit("hu-lb-key-arrowdown")}),this.container.addEventListener("keypress",function(e){var t=String.fromCharCode(e.keyCode||e.which||null);/[a-zA-Z0-9]/.test(t)&&!e.target.isContentEditable&&"INPUT"!==e.target.nodeName&&a.default.emit("hu-lb-text-focus",t)})}}]),i}())({});t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=n(2),u=r(n(350)),l=r(n(351)),c=r(n(352)),h=r(n(353)),f=(0,s.connect)(function(e){return{staticUrl:e.config.staticUrl,background_type:e.config.background_type,background_image_url:e.config.background_image_url,background_color:e.config.background_color,gradient_from:e.config.gradient_from,gradient_to:e.config.gradient_to,video_texture:e.config.video_texture,videoname:e.config.videoname,video_url:e.config.video_url,widget_hide_background:e.config.widget_hide_background}})(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(e){return!e.widget_hide_background&&(0,a.h)("div",{id:"hu-background",className:"hu-zindex-0 hu-position-fixed hu-position-top-left hu-width-full hu-height-full"},(0,a.h)(u.default,{className:"hu-background-video hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-3",staticUrl:e.staticUrl,background_type:e.background_type,videoname:e.videoname,video_url:e.video_url}),(0,a.h)(l.default,{className:"hu-background-image hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-2 hu-background-cover",staticUrl:e.staticUrl,background_type:e.background_type,background_image_url:e.background_image_url}),(0,a.h)(c.default,{className:"hu-background-gradient hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-1",background_type:e.background_type,gradient_from:e.gradient_from,gradient_to:e.gradient_to}),(0,a.h)(h.default,{className:"hu-background-color hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-0",background_type:e.background_type,background_color:e.background_color}))}}]),t}())||i;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0);t.default=function(e){var t=e.className,n=e.staticUrl,r=e.background_type,i=e.videoname,o=e.video_url,a="video"===r,s=(0,l.h)("div",{className:"background-video-filter hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0"+(a?" selected":"")}),u=null===o?n+"landbot/video/"+i:o;return(0,l.h)("div",{className:t+(a?" selected":"")},a&&(0,l.h)("video",{key:"video-"+u,id:"bgvid",playsInline:!0,autoPlay:!0,muted:!0,loop:!0},null===o?[(0,l.h)("source",{src:u+".webm",type:"video/webm"}),(0,l.h)("source",{src:u+".mp4",type:"video/mp4"})]:(0,l.h)("source",{src:u,type:"video/mp4"})),s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.className,n=e.background_type;return e.background_image_url,(0,r.h)("div",{className:t+("image"===n?" selected":"")},(0,r.h)("div",{className:"background-image-filter selected"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.className,n=e.background_type;return e.gradient_from,e.gradient_to,(0,r.h)("div",{className:t+("gradient"===n?" selected":"")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.className,n=e.background_type;return e.background_color,(0,r.h)("div",{className:t+("color"===n?" selected":"")})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=n(0),s=n(2),u=r(n(355)),l=r(n(356)),c=r(n(357)),h=(0,s.connect)(function(e){return{staticUrl:e.config.staticUrl,filter_type:e.config.filter_type,filter_color:e.config.filter_color,filter_gradient_from:e.config.filter_gradient_from,filter_gradient_to:e.config.filter_gradient_to,filter_image_url:e.config.filter_image_url,widget_hide_background:e.config.widget_hide_background}})(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(e){return!e.widget_hide_background&&(0,a.h)("div",{id:"hu-filter",className:"hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-1"+("none"!==e.filter_type?" active":"")},(0,a.h)(u.default,{className:"hu-filter-image hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-2 hu-background-cover",filter_type:e.filter_type,filter_image_url:e.filter_image_url}),(0,a.h)(l.default,{className:"hu-filter-gradient hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-1",filter_type:e.filter_type,filter_gradient_from:e.filter_gradient_from,filter_gradient_to:e.filter_gradient_to}),(0,a.h)(c.default,{className:"hu-filter-color hu-position-fixed hu-position-top-left hu-width-full hu-height-full hu-opacity-0 hu-zindex-0",filter_type:e.filter_type,filter_color:e.filter_color}))}}]),t}())||i;t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.className,n=e.filter_type;return(0,r.h)("div",{className:t+("image"===n?" selected":"")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.className,n=e.filter_type;return(0,r.h)("div",{className:t+("gradient"===n?" selected":"")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.className,n=e.filter_type;return(0,r.h)("div",{className:t+("color"===n?" selected":"")})}}]);